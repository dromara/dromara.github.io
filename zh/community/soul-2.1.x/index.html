<!doctype html><html><head><title>Soul网关发布的2.1.X版本，到底有多方便？ · dromara(Open source organization)</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="The girl on the prairie"><meta name=generator content="Hugo 0.55.5"><link rel="shortcut icon" href=/img/favicon.png type=image/png><link href=https://unpkg.com/purecss@1.0.0/build/base-min.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/zoom-image.css rel=stylesheet><script src=/js/iconfont.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>window.SITE_LANGUAGE="zh"</script><script src=/js/app.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-187960192-2','auto');ga('send','pageview');}</script></head><body><header class=ss-header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=logo-link href=/zh/><img class=logo src=/img/logo/dromara.jpg></a><div class=-show-mobile><a id=mobile-menu-icon><svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"/></svg></a><nav id=mobile-menu><div id=js-menu-search-mobile class=navbar-search-mobile><input class=input placeholder=请输入要搜索的关键词><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div><a href=/zh/projects/><span>项目</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/guides/><span>指南</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/blog/><span>博客</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/activities/><span>活动</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/community/><span>社区</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/awesome/><span>Awesome Dromara</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/community/soul-2.1.x/><span>English</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-transfer"/></svg></a></nav></div></div><div class="navbar-menu -hidden-mobile"><div class=navbar-start><a class=navbar-item href=/zh/projects/>项目</a>
<a class=navbar-item href=/zh/guides/>指南</a>
<a class=navbar-item href=/zh/blog/>博客</a>
<a class=navbar-item href=/zh/activities/>活动</a>
<a class=navbar-item href=/zh/community/>社区</a>
<a class=navbar-item href=/zh/awesome/>Awesome Dromara</a></div><div class=navbar-end><div class=navbar-item><div id=js-menu-search class=navbar-search><input class=input placeholder=请输入要搜索的关键词><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div></div><div class=navbar-item><a class=translation href=/community/soul-2.1.x/>En</a></div></div></div></nav></header><div class=ss-layout-container><main class="ss-layout-main -card"><div class=ss-meta><h1 class=title>Soul网关发布的2.1.X版本，到底有多方便？</h1><div class=meta>2019-12-12 ·
xiaoyu ·
<span class=tags><a class=tag href=/zh/tags/soul/ rel=tag>#Soul</a></span></div></div><article class=typo><p><strong>Soul</strong> 网关自从去年10月我开源以来，经历了一年的事情，接受到了来自社区很多朋友的建议，并进行持续不断的优化，已经提供了非常丰富的功能，很多功能都是高度自定义，可视化，高度可扩展的，现在做一个归纳总结。</p><p><strong>插件</strong><br>- 提供了系统自带的各种插件，比如签名，监控，限流，熔断，http代理，dubbo代理，websocket等等。</p><ul><li><p>支持用户快速的进行插件的自定义开发。</p></li><li><p>插件的所有数据，开关状态支持动态变更。</p></li></ul><p><strong>数据同步</strong>
- 提供了 <code>http长轮询</code>，<code>zookeeper</code>，<code>websocket</code> 三种不同的数据同步策略，让用户自由选择。
- 推荐用户使用websocket方式，最轻量，在集群环境下，效率更高。</p><p><strong>对于用户</strong>
- 首先我们提供了便于用户接入的 client包，用户可以把快速的把自己的项目接入到soul 网关。
- 默认情况下，用户完全不用关心 soul网关的选择器，规则等配置。
- 用户之前的接口完全是零侵入，不需要任何更改，只是需要把访问域名改成网关的域名即可。
- 比如 dubbo用户，几乎就是http的方式完成了 http协议到 dubbo协议的互相转换。
- <code>soul</code> 使用的是http协议，那么注定它就是跨语言的，net程序员，php程序员等等，要和java进行数据交互，那么就大大的可行了。</p><p>举个列子 ，比如你有一个 dubbo接口 参数定义是一个java bean,</p><pre><code>public void insert(final DubboTest dubboTest) {
}
public class DubboTest implements Serializable {
   private String id;
   private String name;
}
</code></pre><p>如果你使用 soul网关要发起对它的调用，你的http传参数 就是在 body 里面 传一个json字符串 ，和普通的http调用无差别。</p><pre><code>{&quot;id&quot;:&quot;123&quot;,&quot;name&quot;:&quot;xiaoyu&quot;}
</code></pre><p><strong>对于开发者(程序员)</strong></p><ul><li>随着使用者越来越多，每个公司使用情况又不一样,soul 网关在2.1.X版本，处处留出来更多的高度自定义扩展性，让开发者，更加方便或者有信心融入进来。</li><li><p>比如，自定义插件，过滤器，dubbo参数解析器，iphost解析器，返回结果等等。。这里我着重说一下自定义返回结果。
我们知道，soul 网关默认的返回结果是：</p><pre><code>{&quot;code&quot;:200, &quot;message &quot;: &quot;成功!&quot;,&quot;data&quot; :&quot;helloWorld!&quot;}
</code></pre></li></ul><p>但是，在运用 soul 网关对你的业务系统进行调用的时候，你的业务系统可能定义的结果并不是上述结构，可能你的 字段叫 msg,这样就会造成结构不一样，给前端处理带来了困扰。我们注意到了这个事情 ：<a href=https://github.com/Dromara/soul/issues/109>https://github.com/Dromara/soul/issues/109</a> , 现在已经优化，用户可以定制化的来定义返回结果,具体的要看 soul 文档。</p><p><strong>说了这么多，吹了这么多牛逼，那么我们来看看 soul网关到底可以在什么场景下能发挥大作用。</strong></p><p><strong>后台管理web</strong></p><ul><li>首先随便微服务的流行，我们的后台都划分成很多的微服务，我相信你们每个公司都有一个后台管理系统吧，如果我没猜错的话，他们大体上是如下架构。</li></ul><p><img src=soul-rpc.png alt=soul-rpc></p><ul><li>很简单对吧，就是有个运营管理平台的web项目，去调用每个微服务，来进行后台的查看等等。随着你们业务需要的加大，可能这里需要调用的微服务越来越多，你的 <code>controller</code>越来越多，现在比如你修改了 商品模块的 接口，你要发版会造成所有其他的模块也操作不了（就是你发版影响了其他模块的使用，别杠这里只是比方，不要整蓝绿发版啥的，明白意思吧）。
如果有运营人员在操作其他模块，会不会吐槽你？</li></ul><p>假如你是公司架构师，我说的是假如，那么你要怎么解决这个问题呢？当然，我们把这样一个大的web系统，拆分成很多小web系统，单独的进行发布，但是这样会引入一个问题，怎么统一登陆，鉴权？（很多后台管理系统还有权限的划分） ，这个时候，<code>soul</code> 网关 就能发挥重要的作用了，下面我只是列举了一下简单的调用图。</p><p><img src=soul-admin.png alt=soul-admin></p><p>这样多方便，集成了网关，每个微服务注册到网关，网关根据路由规则来进行调用。自动发现服务，连运维配置 nginx的工作都省了，把运维的工资给你，美滋滋。</p><h3 id=公司入口网关-开放平台>公司入口网关（开放平台）</h3><ul><li><p>如果一个公司要做开放平台或者入口网关，鉴权，限流，监控，熔断肯定少不了。</p></li><li><p>如果贵公司是dubbo体系，开发人员写了dubbo服务后，还要傻乎乎的新增一个web项目，来提供接口给别人调用吗？</p></li><li><p>如果一个接口被攻击，你怎么处理呢？如果被大流量攻击，你怎么处理呢？</p></li><li><p>不巧，soul 在设计之初就是来干这种事情的，我们来看一下整体的架构图。</p></li></ul><p><img src=soul-framework.png alt=soul-framework></p><h2 id=零零总总还有很多其他功能>零零总总还有很多其他功能</h2><ul><li>比如支持 websocket 代理。</li><li><p>比如支持文件上传下载。</p></li><li><p>比如你可以自定义的开发你的插件啊。</p></li></ul><h2 id=最后最后>最后最后</h2><ul><li><p>github地址 ：<a href=https://github.com/Dromara/soul>https://github.com/Dromara/soul</a></p></li><li><p>gitee地址 ：<a href=https://gitee.com/shuaiqiyu/soul>https://gitee.com/shuaiqiyu/soul</a></p></li><li><p>文档：<a href=https://dromara.org/zh-cn/docs/soul/soul.html>https://dromara.org/zh-cn/docs/soul/soul.html</a></p></li><li><p>欢迎大家关注，如果贵公司有使用到，或者需要学习交流，或者提供代码参与开发的朋友也可以加群来进行讨论 ，qq群（429951241）</p></li><li><p>最后 3.0 已经在进行开源了，3.0是经历过2年双11大并发场景验证过的，现在一步一步将它开源出来，希望给大家带来帮助.</p></li></ul></article><div class=-show-mobile><nav class=ss-pagination-next><a class=link-prev href=/zh/community/soul-1.0.4/><span class=text>上一篇:</span>
<span class=text>Soul网关发布1.0.4-RELEASE版本</span></a>
<a class=link-next href=/zh/community/soul-2.2.0/><span class=text>下一篇:</span>
<span class=text>【Soul网关发布2.2.0】让高性能网关变得如此简单！</span></a></nav></div></main><aside class=ss-layout-aside><div class=ss-card><h2 class=card-title>相关推荐</h2><ul class=ss-aside-related><li><a href=/zh/community/soul-1.0.4/>Soul网关发布1.0.4-RELEASE版本</a></li></ul></div><div class="ss-aside-tags ss-card"><h2 class=card-title>标签
<span class=card-extra></span></h2><ul class=tag-list><li class=tag><a href=/zh/tags/dreamcode/>DreamCode</a></li><li class=tag><a href=/zh/tags/dromara/>Dromara</a></li><li class=tag><a href=/zh/tags/gateway/>GateWay</a></li><li class=tag><a href=/zh/tags/hmily/>hmily</a></li><li class=tag><a href=/zh/tags/reactor/>Reactor</a></li><li class=tag><a href=/zh/tags/soul/>Soul</a></li><li class=tag><a href=/zh/tags/tcc/>TCC</a></li></ul></div></aside></div><footer class=ss-footer><div class=container><div class=links><div class=cate><h2 class=cate-title>资源</h2><a class=link href=https://github.com/dromara>Github</a>
<a class=link href=https://gitee.com/shuaiqiyu>Gitee</a></div><div class=cate><h2 class=cate-title>参与进来</h2><a class=link href=https://github.com/dromara/soul/issues/new>反馈</a>
<a class=link href=/zh/community>社区</a>
<a class=link href=/zh/blog>博客</a></div><div class=cate><h2 class=cate-title>文档</h2><a class=link href=/zh/projects/soul/overview/>Soul</a>
<a class=link href=/zh/projects/hmily/overview/>Hmily</a>
<a class=link href=/zh/projects/raincat/overview/>Raincat</a>
<a class=link href=/zh/projects/myth/overview/>Myth</a></div></div><div class=qrcode><div><img class=qrcode-img src=/img/qrcode/qrcode_1.png><p class=qrcode-desc>微信公众号</p></div><div><img class=qrcode-img src=/img/qrcode/qrcode_2.png><p class=qrcode-desc>QQ群</p></div></div></div><div class=copyright><p>Copyright ©2021
<a href=/>xiaoyu@apache.org by xiaoyu</a></p></div></footer></body></html>