<!doctype html><html><head><title>SOFADashboard 启动开源共建 | SOFAStack 一站式管控平台 · dromara(Open source organization)</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="The girl on the prairie"><meta name=generator content="Hugo 0.55.5"><link rel="shortcut icon" href=/img/favicon.png type=image/png><link href=https://unpkg.com/purecss@1.0.0/build/base-min.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/zoom-image.css rel=stylesheet><script src=/js/iconfont.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>window.SITE_LANGUAGE="zh"</script><script src=/js/app.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-142131411-1','auto');ga('send','pageview');}</script></head><body><header class=ss-header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=logo-link href=/><img class=logo src=/img/logo.png></a><div class=-show-mobile><a id=mobile-menu-icon><svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"/></svg></a><nav id=mobile-menu><div id=js-menu-search-mobile class=navbar-search-mobile><input class=input placeholder=请输入要搜索的关键词><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div><a href=/projects/><span>项目</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/guides/><span>指南</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/blog/><span>博客</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/activities/><span>活动</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/community/><span>社区</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/awesome/><span>Awesome Dromara</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a></nav></div></div><div class="navbar-menu -hidden-mobile"><div class=navbar-start><a class=navbar-item href=/projects/>项目</a>
<a class=navbar-item href=/guides/>指南</a>
<a class=navbar-item href=/blog/>博客</a>
<a class=navbar-item href=/activities/>活动</a>
<a class=navbar-item href=/community/>社区</a>
<a class=navbar-item href=/awesome/>Awesome Dromara</a></div><div class=navbar-end><div class=navbar-item><div id=js-menu-search class=navbar-search><input class=input placeholder=请输入要搜索的关键词><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div></div><div class=navbar-item></div></div></div></nav></header><div class=ss-layout-container><main class="ss-layout-main -card"><div class=ss-meta><h1 class=title>SOFADashboard 启动开源共建 | SOFAStack 一站式管控平台</h1><div class=meta>2019-05-05 ·
<a href=http://www.glmapper.com/>卫恒</a> ·
<span class=tags><a class=tag href=/tags/sofadashboard/ rel=tag>#SOFADashboard</a></span></div></div><article class=typo><blockquote><p><strong>SOFA</strong>Stack
<strong>S</strong>calable <strong>O</strong>pen <strong>F</strong>inancial <strong>A</strong>rchitecture Stack 是蚂蚁金服自主研发的金融级分布式架构，包含了构建金融级云原生架构所需的各个组件，是在金融场景里锤炼出来的最佳实践。
为了建设更完整的 SOFAStack 微服务体系，我们计划发起 SOFADashboard 项目，计划通过社区的方式共建，将其打造为一站式的 SOFAStack 管控平台。欢迎共建~
SOFADashboard：<a href=https://github.com/sofastack/sofa-dashboard>https://github.com/sofastack/sofa-dashboard</a> </p></blockquote><h2 id=背景>背景</h2><p>从 2018 年 4 月 19 日宣布开源至今，SOFAStack 目前已经开源了包括 SOFABoot、 SOFARPC、SOFALookout、SOFATracer、SOFARegistry 等在内的一系列微服务相关的项目，并投入分布式事务 Seata 进行重要贡献。随着 SOFAStack 架构体系的不断丰富和完善，外部对于 SOFAStack 的管控平台的需求也愈加强烈。</p><p>由于 SOFAStack 内部的管控平台依赖众多的内部基础设施，为了建设更完整的 SOFAStack 微服务体系，我们计划发起全新的 SOFADashboard 项目，计划通过社区的方式共建，将其打造为一站式的 SOFAStack 管控平台。</p><h2 id=能力大图>能力大图</h2><p>SOFADashboard 作为一站式 SOFAStack 管控台，希望对 SOFAStack 各个组件的使用等进行统一管理。为此我们为 SOFADashboard 规划一版能力图，包含了微服务里的一些能力点，例如应用信息管理、服务治理、配置管控、动态模块等等。见下图所示：</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/230565/1557039574234-9a4e6e5f-647e-4ce6-af0f-17f62185260f.png alt="SOFADashboard 能力大图"></p><p>每个能力点对应的实现我们都做了一层抽象。例如服务查看需要从注册中心获取数据，我们封装了一层服务列表获取接口，底层可以是从 Zookeeper 或者 SOFARegistry 等不同的注册中心实现读取服务列表。</p><h2 id=技术栈选择>技术栈选择</h2><p>为了最大限度的降低开发成本、部署成本及运维成本，SOFADashboard 会基于开源社区优秀的产品来进行开发构建。经过讨论，最终选择社区主流的前后端分离思路，具体的组件包括：</p><ul><li>Ant Design：基于 <a href=http://facebook.github.io/react/>React</a>封装的一套 Ant Design 的组件库，主要用于研发企业级中后台产品。从产品成熟度、社区活跃度、框架上手难易程度等各个方面均有很好的表现。</li><li>SOFABoot：蚂蚁金服开源的基于 Spring Boot 的研发框架，它在 Spring Boot 的基础上，提供了诸如 Readiness Check，类隔离，日志空间隔离等能力。在增强了 Spring Boot 的同时，SOFABoot 提供了让用户可以在 Spring Boot 中非常方便地使用 SOFA 中间件的能力。</li><li>MyBatis：Mybatis 相对于 JPA 来说，上手难度略低，JPA 更加倾向于结合 DDD 使用(业务越复杂，对于DDD 的需求越高)；对于简单的增删改查业务操作，Mybatis  相对来说更灵活和可控。</li></ul><h2 id=v1-0-发布>v1.0 发布</h2><p>4 月 30 日，我们上传了第一个 SOFADashboard 版本，主要能力包括：应用信息、服务查看、动态模块管控等。</p><p>目前演示地址：<a href=http://dashboard.dev.sofastack.tech:8000/>http://dashboard.dev.sofastack.tech:8000/</a> </p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347731-24fa1d1e-555f-44f0-a275-f188e35cbba8.png alt=SOFADashboard></p><h3 id=详细设计图>详细设计图</h3><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347699-53469a8f-341e-448d-ad75-c4be1a7111ba.png alt="SOFADashboard 详细设计图"></p><h3 id=基础依赖>基础依赖</h3><p>从架构图中可以看到，目前 SOFADashboard 中的服务治理、SOFAArk 管控等需要依赖于 Zookeeper 和 MySQL；它们承担的解决如下：</p><table><thead><tr><th>外部依赖</th><th>作用</th><th>备注</th></tr></thead><tbody><tr><td>Zookeeper</td><td>注册中心</td><td>SOFARPC 服务治理</td></tr><tr><td></td><td>配置推送</td><td>SOFAArk 管控</td></tr><tr><td>MySql</td><td>资源存储</td><td>注册的 ark-biz 信息，插件与应用的关联信息，插件版本信息等</td></tr></tbody></table><h3 id=应用面板>应用面板</h3><p>SOFADashboard 支持查看应用的 IP、端口、健康检查状态等基本信息，此功能依赖 <a href=https://github.com/alipay/sofa-dashboard-client>SOFADashboard client</a>。SOFADashboard client 用于向 SOFADashboard 服务端注册 IP、端口、健康检查状态等应用基本信息；SOFADashboard client 并非是直接通过 API 调用的方式将自身应用信息直接注册到 SOFADashboard 服务端 ，而是借助于 Zookeeper 来完成。</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347697-9e4e4952-2e38-4a10-9aeb-c7b49aa01608.png alt="SOFADashboard 写入节点"></p><p>客户端向 Zookeeper 中如上图所示的节点中写入数据，每一个 ip:port 节点代表一个应用实例，应用本身信息将写入当前节点的 data 中。</p><p>如果一个应用需要将应用信息展示到 SOFADashboard 管控端，可以通过引入客户端依赖即可，具体使用参考 <a href=https://github.com/alipay/sofa-dashboard-client>SOFADashboard client 快速开始</a> 。</p><h3 id=服务治理>服务治理</h3><p>SOFADashboard 服务治理是对 SOFARPC 的服务进行管理，服务治理管控台部分，主要包括基于服务名查询和服务信息列表展示两个基础能力。在服务治理管控台界面，可以直观的看到当前服务的一些基本元数据信息：</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347748-3315818c-f358-42a8-a9df-3ff823827035.png alt="SOFADashboard 操作界面"></p><p>当点击 服务 ID 对应的超链接时，会进入到当前服务的详情页；服务提供者详情页中，可以看到当前服务所有的提供方信息列表，每个 item 行对应一个服务提供方实例，通过此界面可以快速查看服务的 providers 信息。</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347758-27776727-a1af-441f-856c-1dacec04c381.png alt=服务信息界面></p><p>服务消费者详情页中，可以看到当前服务所有的消费方信息列表。</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347702-b296ec6f-0404-4fa5-afc7-bdaee0961bfb.png alt=消费信息界面></p><h3 id=sofaark-管控>SOFAArk 管控</h3><p><a href=https://www.sofastack.tech/sofa-boot/docs/sofa-ark-readme>SOFAArk</a> 本身提供了多种方式来支持多应用(模块)合并部署 ，包括基于命令行的管控，基于 API 的管控等；SOFAArk 管控是 SOFADashboard 针对 API 管控的一种实现。通过面向 Zookeeper 进行命令的推送和命令的解析执行。SOFAArk 管控主要包括以下功能：</p><ul><li>插件注册</li></ul><p>将 ark-biz 插件注册到 SOFADashboard，作为基础数据，统一管控。</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347756-7fa6dd2d-a5c4-421f-a409-ee0c4af7baf9.png alt=插件注册></p><p>插件基本信息录入：</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347730-23f852c2-dd92-424e-8605-38812193745b.png alt=插件基本信息录入></p><p>插件列表：</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347721-407c33d4-a60f-45f4-8fb9-228f76e2198b.png alt=插件列表></p><ul><li>关联应用</li></ul><p>将 ark-biz 插件与宿主应用进行绑定，此关联信息在 SOFAArk 多应用（模块）合并部署中作为重要的基础信息存在。在后续的操作中，可以通过此关联关系查看到某个插件下挂载的应用信息。</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347759-c6eea941-123e-4e2d-99c5-7d32a9077a33.png alt=关联应用></p><ul><li>插件详情</li></ul><p>通过插件详情页，可以看下当前 ark-biz 插件下所有关联的宿主应用信息，以及宿主应用中的 ark-biz 状态信息，插件详情页中，可以查看所有关联此插件的应用中，插件的状态信息。</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347778-0ec57420-fc4b-4e3d-b59b-2dd2e78327b5.png alt=插件详情></p><ul><li>命令推送</li></ul><p>命令推送是 SOFADashboard 中提供 SOFAArk 管控的核心能力，通过面向 Zookeeper 编程的方式，将指令信息传递给各个宿主应用中的 ark-biz 模块，ark-biz 在接收到相关指令之后再进行相应的行为，如安装、切换、卸载等。</p><p>可以针对应用维度、IP 维度推送一些指令，比如 install、uninstall 等等，当这些命令被写入到 Zookeeper 的某个节点上时，所有监听此节点的宿主应用均会解析此指令，并进行相关的操作。</p><p>基于 IP 维度推送如图例所示，每个应用实例表单默认会有对应的操作，可以通过展示的命令按钮操作当前实例行为：</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347732-89d690e5-7c5d-4778-bfce-eca7f83f71ad.png alt=命令推送></p><p>点击 安装按钮，延迟 1~1.5s 之后 界面将会刷新新的状态：</p><p><img src=https://cdn.nlark.com/yuque/0/2019/png/226702/1556525347770-02b79189-2f80-4c58-a261-9416216e0952.png alt=命令推送></p><blockquote><p>基于应用维度此处不再赘述。</p></blockquote><h2 id=社区共建>社区共建</h2><p>SOFADashboard 作为整个 SOFA 体系的“管家”，目前在能力上还比较薄弱；与其他 SOFAStack 产品不同的是，SOFADashboard 是一款从一开始就希望社区共建的，天然定位开放到社区的产品。随着 SOFAStack 体系内产品的不断丰富，SOFADashboard 希望通过社区共建的方式来锤炼和完善功能，大家可以提出不同的需求，建设更多的能力，从而更好的服务整个 SOFAStack 技术体系。</p><p>待建设列表如下，欢迎大家参与贡献：</p><table><thead><tr><th>任务列表</th><th>进度</th><th>计划版本</th><th>说明</th></tr></thead><tbody><tr><td>集成 SOFARegistry</td><td>开发中</td><td>1.1.0</td><td></td></tr><tr><td>完善应用面板功能，支持多维度的应用信息展示</td><td>&ndash;</td><td>1.1.0</td><td></td></tr><tr><td>完善服务治理能力，包括权重设置，服务降级等</td><td>&ndash;</td><td>1.1.0</td><td></td></tr><tr><td>增加链路分析展示功能</td><td>&ndash;</td><td>1.2.0</td><td></td></tr><tr><td>集成 Apollo </td><td>&ndash;</td><td>1.3.0</td><td></td></tr><tr><td>支持 Docker </td><td>&ndash;</td><td>&ndash;</td><td></td></tr><tr><td>支持 Kubernetes</td><td>&ndash;</td><td>&ndash;</td><td></td></tr><tr><td>前端优化</td><td>持续进行中</td><td>&ndash;</td><td></td></tr></tbody></table><h2 id=小结>小结</h2><p>本文介绍了 SOFADashboard 产生的背景，并对 SOFADashboard 提供的功能进行了介绍。随着 SOFAStack 架构体系的不断完善，SOFADashboard 也将会承担更多的管控能力。在功能丰富和前端优化上，希望可以有更多的同学能够参与，一起打造一个功能完备、简单易用的 SOFADashboard。</p></article><div class=-show-mobile><nav class=ss-pagination-next><a class=link-prev href=/blog/antfin-middleware-open-source-key-figure-luzhi/><span class=text>上一篇:</span>
<span class=text>对话鲁直：蚂蚁金服中间件的开源头羊 | 穿山甲专访</span></a>
<a class=link-next href=/blog/sofa-jraft-algorithm-storage-module-deep-dive/><span class=text>下一篇:</span>
<span class=text>SOFAJRaft 实现原理 - 生产级 Raft 算法库存储模块剖析</span></a></nav></div></main><aside class=ss-layout-aside><div class="ss-aside-tags ss-card"><h2 class=card-title>标签
<span class=card-extra></span></h2><ul class=tag-list><li class=tag><a href=/tags/1024/>1024</a></li><li class=tag><a href=/tags/api-gateway/>API Gateway</a></li><li class=tag><a href=/tags/cafedeployment/>CafeDeployment</a></li><li class=tag><a href=/tags/cloud-native/>Cloud Native</a></li><li class=tag><a href=/tags/cncf/>CNCF</a></li><li class=tag><a href=/tags/db-mesh/>DB Mesh</a></li><li class=tag><a href=/tags/elasticdl/>ElasticDL</a></li><li class=tag><a href=/tags/kata-container/>Kata Container</a></li><li class=tag><a href=/tags/kata-containers/>Kata Containers</a></li><li class=tag><a href=/tags/knative/>Knative</a></li><li class=tag><a href=/tags/kubecon/>KubeCon</a></li><li class=tag><a href=/tags/kubernetes/>Kubernetes</a></li><li class=tag><a href=/tags/meetup/>Meetup</a></li><li class=tag><a href=/tags/mosn/>MOSN</a></li><li class=tag><a href=/tags/occlum/>Occlum</a></li><li class=tag><a href=/tags/seata/>Seata</a></li><li class=tag><a href=/tags/serverless/>Serverless</a></li><li class=tag><a href=/tags/service-mesh/>Service Mesh</a></li><li class=tag><a href=/tags/service-mesh-meetup/>Service Mesh Meetup</a></li><li class=tag><a href=/tags/service-mesh-virtual-meetup/>Service Mesh Virtual Meetup</a></li><li class=tag><a href=/tags/service-mesh-webinar/>Service Mesh Webinar</a></li><li class=tag><a href=/tags/service-mesh-%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/>Service Mesh 落地实践</a></li><li class=tag><a href=/tags/sidecar-%E5%AE%B9%E5%99%A8/>Sidecar 容器</a></li><li class=tag><a href=/tags/sofa-weekly/>SOFA Weekly</a></li><li class=tag><a href=/tags/sofaacts/>SOFAActs</a></li><li class=tag><a href=/tags/sofaark/>SOFAArk</a></li><li class=tag><a href=/tags/sofaarklab/>SOFAArkLab</a></li><li class=tag><a href=/tags/sofabolt/>SOFABolt</a></li><li class=tag><a href=/tags/sofaboot/>SOFABoot</a></li><li class=tag><a href=/tags/sofachannel/>SOFAChannel</a></li><li class=tag><a href=/tags/sofadashboard/>SOFADashboard</a></li><li class=tag><a href=/tags/sofaenclave/>SOFAEnclave</a></li><li class=tag><a href=/tags/sofajraft/>SOFAJRaft</a></li><li class=tag><a href=/tags/sofajraft-%E7%89%B9%E6%80%A7%E8%A7%A3%E6%9E%90/>SOFAJRaft 特性解析</a></li><li class=tag><a href=/tags/sofalab/>SOFALab</a></li><li class=tag><a href=/tags/sofalookout/>SOFALookout</a></li><li class=tag><a href=/tags/sofameetup/>SOFAMeetup</a></li><li class=tag><a href=/tags/sofamesh/>SOFAMesh</a></li><li class=tag><a href=/tags/sofaregistry/>SOFARegistry</a></li><li class=tag><a href=/tags/sofarpc/>SOFARPC</a></li><li class=tag><a href=/tags/sofastack/>SOFAStack</a></li><li class=tag><a href=/tags/sofatracer/>SOFATracer</a></li><li class=tag><a href=/tags/springboot/>SpringBoot</a></li><li class=tag><a href=/tags/sqlflow/>SQLFlow</a></li><li class=tag><a href=/tags/workshop/>Workshop</a></li><li class=tag><a href=/tags/zsearch/>ZSearch</a></li><li class=tag><a href=/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/>云原生</a></li><li class=tag><a href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F/>分布式</a></li><li class=tag><a href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/>分布式事务</a></li><li class=tag><a href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/>分布式架构</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofaark-%E6%BA%90%E7%A0%81/>剖析 | SOFAArk 源码</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofabolt-%E6%A1%86%E6%9E%B6/>剖析 | SOFABolt 框架</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofaboot-%E6%A1%86%E6%9E%B6/>剖析 | SOFABoot 框架</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofajraft-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/>剖析 | SOFAJRaft 实现原理</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofaregistry-%E6%A1%86%E6%9E%B6/>剖析 | SOFARegistry 框架</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofarpc-%E6%A1%86%E6%9E%B6/>剖析 | SOFARPC 框架</a></li><li class=tag><a href=/tags/%E5%89%96%E6%9E%90-sofatracer-%E6%A1%86%E6%9E%B6/>剖析 | SOFATracer 框架</a></li><li class=tag><a href=/tags/%E5%AE%9E%E8%B7%B5/>实践</a></li><li class=tag><a href=/tags/%E5%BC%80%E6%BA%90/>开源</a></li><li class=tag><a href=/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/>微服务</a></li><li class=tag><a href=/tags/%E6%99%BA%E8%83%BD%E7%9B%91%E6%8E%A7/>智能监控</a></li><li class=tag><a href=/tags/%E6%99%BA%E8%83%BD%E8%BF%90%E7%BB%B4/>智能运维</a></li><li class=tag><a href=/tags/%E6%BA%90%E5%88%9B%E4%BC%9A/>源创会</a></li><li class=tag><a href=/tags/%E9%95%9C%E5%83%8F/>镜像</a></li></ul></div></aside></div><footer class=ss-footer><div class=container><div class=links><div class=cate><h2 class=cate-title>资源</h2><a class=link href=https://github.com/dromara>Github</a>
<a class=link href=https://gitee.com/shuaiqiyu>Gitee</a></div><div class=cate><h2 class=cate-title>参与进来</h2><a class=link href=https://github.com/dromara/soul/issues/new>反馈</a>
<a class=link href=/community>社区</a>
<a class=link href=/blog>博客</a></div><div class=cate><h2 class=cate-title>文档</h2><a class=link href=/projects/soul/overview/>Soul</a>
<a class=link href=/projects/hmily/overview/>Hmily</a>
<a class=link href=/projects/raincat/overview/>Raincat</a>
<a class=link href=/projects/myth/overview/>Myth</a></div></div><div class=qrcode><div><img class=qrcode-img src=/img/qrcode/qrcode_1.png><p class=qrcode-desc>微信公众号</p></div><div><img class=qrcode-img src=/img/qrcode/qrcode_2.png><p class=qrcode-desc>QQ群</p></div></div></div><div class=copyright><p>Copyright ©2021
<a href=/>xiaoyu@apache.org by xiaoyu</a></p></div></footer></body></html>