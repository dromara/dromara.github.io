[{"author":"hutool","categories":"hutool","content":"  Hutoolæ˜¯ä¸€ä¸ªå°è€Œå…¨çš„Javaå·¥å…·ç±»åº“ï¼Œæä¾›ä¼˜é›…ã€é«˜æ•ˆå’Œä¾¿æ·çš„å·¥å…·æ–¹æ³•ã€‚\n Hutoolæ˜¯ä»€ä¹ˆ æœ¬æ¥è¿™ä¸ªç‰ˆæœ¬åº”è¯¥æ˜¯5.7.23çš„ï¼Œå¯æƒœç”¨æˆ·æäº†ä¸€äº›issueï¼Œè¿™äº›é—®é¢˜çš„è§£å†³å¿…é¡»ä¿®æ”¹åŸæœ‰ä»£ç ç»“æ„ï¼š\n å¦‚MongoDBå®¢æˆ·ç«¯å°è£…ï¼Œç”±äºå…¶é©±åŠ¨æœ¬èº«åšäº†ä¸å…¼å®¹ä¿®æ”¹ï¼ŒåŒ…è£…çš„å·¥å…·ç±»ä¸å¾—ä¸è¿›è¡Œä¿®æ”¹ã€‚ æ¶‰åŠåˆ°Beanæ‹·è´çš„ä»£ç éƒ¨åˆ†ï¼ˆBeanCopierï¼‰ï¼Œç”±äºä¸€ä¸ªå‚æ•°å¤±æ•ˆï¼Œä»¥ä¸ºåªæ˜¯ç®€å•çš„ä¸€ä¸ªbugï¼Œåæ¥å‘ç°æ˜¯æ•´ä¸ªè®¾è®¡æœ‰é—®é¢˜â€¦â€¦å´©æºƒç¨‹åº¦å¯æƒ³è€ŒçŸ¥ï¼Œè‚äº†ä¸¤ä¸ªæ™šä¸Šé‡æ„äº†è¿™éƒ¨åˆ†ä»£ç ã€‚ ä¿®æ”¹ä»£ç çš„åŒæ—¶æ‰å‘ç°è¿˜æœ‰å¾ˆå¤šéƒ¨åˆ†çš„è®¾è®¡æœ‰é—®é¢˜ï¼Œé¡ºä¾¿åšäº†å°é‡æ„ã€‚ ä¸ºäº†è§£å†³æ¯æ¬¡å¤§ç‰ˆæœ¬å‡çº§çš„å¯èƒ½å¸¦æ¥çš„å¯¹è€ç”¨æˆ·çš„å½±å“ï¼Œæ­¤æ¬¡ç‰ˆæœ¬é‡‡ç”¨é‡Œç¨‹ç¢‘æ–¹å¼å‘å¸ƒï¼Œç‰ˆæœ¬ä¸ºM1ï¼ˆæ„Ÿè§‰ç»™ç”¨æˆ·é€äº†é¢—CPUï¼‰ï¼Œä¹Ÿæ˜¯è§£å†³Hutoolæ¯æ¬¡â€œæ¿€è¿›â€å‡çº§çš„é—®é¢˜ï¼ˆæ¯•ç«Ÿå¹´é¾„å¤§äº†ï¼Œè¦ç¨³é‡ï¼‰ å¸Œæœ›è´­ä¹°ä»£æ›¿æèµ ï¼Œå¦‚æœä½ å¸Œæœ›æ”¯æŒä¸‹Hutoolï¼Œå¯ä»¥å»Hutoolä¸»é¡µç‚¹-\u0026amp;gt;å‡»è¿›å…¥å‘¨è¾¹å•†åº—è´­ä¹°Hutoolå‘¨è¾¹æ¥æ”¯æŒHutoolå“¦ï¼Œè¿™æ¯”æèµ å®æƒ çš„å¤šï¼ˆæ¯•ç«Ÿæèµ è€…æˆ‘ä¸çŸ¥é“å¦‚ä½•é“è°¢ï¼Œå¾ˆæœ‰é“å¾·è´Ÿæ‹…â€¦â€¦ï¼‰  é¸£è°¢ä¸€ä¸‹æ­¤æ¬¡ç‰ˆæœ¬ä¸€èµ·è®¨è®ºå’Œä¸€èµ·è§£å†³å¤§é‡issueçš„Hutoolå‡ ä½æˆå‘˜ï¼š\n@é˜¿è¶… @Cherryrum @Husky 5.8.0.M1 âŒä¸å…¼å®¹ç‰¹æ€§ â€¢ ã€db ã€‘ ã€ä¸å‘ä¸‹å…¼å®¹ ã€‘å¢åŠ MongoDB4.xæ”¯æŒè¿”å›MongoClientå˜æ›´ï¼ˆpr#568@Giteeï¼‰\nâ€¢ ã€json ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘ä¿®æ”¹JSONObjectç»“æ„ï¼Œç»§æ‰¿è‡ªMapWrapper\nâ€¢ ã€core ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘BeanCopieré‡æ„ï¼Œæ–°å»ºXXXCopierï¼Œåˆ é™¤XXXValueProvider\nâ€¢ ã€core ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘URLEncoderåºŸå¼ƒï¼ŒURLEncoderUtilä½¿ç”¨RFC3986\nâ€¢ ã€core ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘Base32åˆ†ç¦»ç¼–ç å’Œè§£ç ï¼Œä»¥ä¾¿å‡å°‘æ•°æ®åŠ è½½ï¼Œæ”¯æŒHexæ¨¡å¼\nâ€¢ ã€core ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘Base58åˆ†ç¦»ç¼–ç å’Œè§£ç \nâ€¢ ã€core ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘Base62åˆ†ç¦»ç¼–ç å’Œè§£ç ï¼Œå¢åŠ invertedæ¨¡å¼æ”¯æŒ\nâ€¢ ã€core ã€‘ ã€å…¼å®¹é—®é¢˜ ã€‘PunyCodeå‚æ•°ç”±Stringæ”¹ä¸ºCharsequence\nâ€¢ ã€cron ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘SimpleValueParseræ”¹åä¸ºAbsValueParserï¼Œæ”¹ä¸ºabstract\nâ€¢ ã€poi ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘ExcelUtil.getBigWriterè¿”å›å€¼æ”¹ä¸ºBigExcelWriter\nâ€¢ ã€core ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘Opt.ofEmptyAbleå‚æ•°ç”±Listæ”¹ä¸ºCollectionå­ç±»ï¼ˆpr#580@Giteeï¼‰\nâ€¢ ã€json ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘JSONè½¬Beanæ—¶ï¼Œä½¿ç”¨JSONæœ¬èº«çš„ç›¸å…³è®¾ç½®ï¼Œè€Œéé»˜è®¤ï¼ˆissue#2212@Githubï¼‰\nâ€¢ ã€json ã€‘ ã€å¯èƒ½å…¼å®¹é—®é¢˜ã€‘JSONConfigä¸­isOrderåºŸå¼ƒï¼Œé»˜è®¤å…¨éƒ¨æœ‰åº\nğŸ£æ–°ç‰¹æ€§ â€¢ ã€http ã€‘ HttpRequest.formé‡‡ç”¨TableMapæ–¹å¼ï¼ˆissue#I4W427@Giteeï¼‰\nâ€¢ ã€core ã€‘ AnnotationUtilå¢åŠ getAnnotationAliasæ–¹æ³•ï¼ˆpr#554@Giteeï¼‰\nâ€¢ ã€core ã€‘ FileUtil.extNameå¢åŠ å¯¹tar.gzç‰¹æ®Šå¤„ç†ï¼ˆissue#I4W5FS@Giteeï¼‰\nâ€¢ ã€crypto ã€‘ å¢åŠ XXTEAå®ç°ï¼ˆissue#I4WH2X@Giteeï¼‰\nâ€¢ ã€core ã€‘ å¢åŠ Tableå®ç°ï¼ˆissue#2179@Githubï¼‰\nâ€¢ ã€core ã€‘ å¢åŠ UniqueKeySetï¼ˆissue#I4WUWR@Giteeï¼‰\nâ€¢ ã€core ã€‘ é˜¿æ‹‰ä¼¯æ•°å­—è½¬æ¢æˆä¸­æ–‡å¯¹å‘ç¥¨ç¥¨é¢é‡‘é¢è½¬æ¢çš„æ‰©å±•ï¼ˆpr#570@Giteeï¼‰\nâ€¢ ã€core ã€‘ ArrayUtilå¢åŠ replaceæ–¹æ³•ï¼ˆpr#570@Giteeï¼‰\nâ€¢ ã€core ã€‘ CsvReadConfigå¢åŠ è‡ªå®šä¹‰æ ‡é¢˜è¡Œè¡Œå·ï¼ˆissue#2180@Githubï¼‰\nâ€¢ ã€core ã€‘ FileAppenderä¼˜åŒ–åˆå§‹Listå¤§å°ï¼ˆpr#2197@Githubï¼‰\nâ€¢ ã€core ã€‘ Base32å¢åŠ padæ”¯æŒï¼ˆpr#2195@Githubï¼‰\nâ€¢ ã€core ã€‘ Dictå¢åŠ setFieldsæ–¹æ³•ï¼ˆpr#578@Giteeï¼‰\nâ€¢ ã€db ã€‘ æ–°åŠ db.metaçš„ç´¢å¼•ç›¸å…³æ¥å£ï¼ˆpr#563@Giteeï¼‰\nâ€¢ ã€db ã€‘ Oracleä¸­Column#typeNameåçš„é•¿åº¦å»æ‰ï¼ˆpr#563@Giteeï¼‰\nâ€¢ ã€poi ã€‘ ä¼˜åŒ–ExcelReaderï¼Œé‡‡ç”¨åªè¯»æ¨¡å¼ï¼ˆpr#2204@Giteeï¼‰\nâ€¢ ã€poi ã€‘ ä¼˜åŒ–ExcelBaseï¼Œå°†aliasæ”¾å…¥\nâ€¢ ã€poi ã€‘ ä¼˜åŒ–ExcelBaseï¼Œå°†aliasæ”¾å…¥\nâ€¢ ã€core ã€‘ æ”¹è¿›StrUtil#startWithã€endWithæ€§èƒ½\nâ€¢ ã€cron ã€‘ å¢åŠ CronPatternParserã€MatcherTable\nâ€¢ ã€http ã€‘ GlobalHeaderså¢åŠ ç³»ç»Ÿå±æ€§allowUnsafeServerCertChangeã€allowUnsafeRenegotiation\nâ€¢ ã€http ã€‘ UserAgentUtil è§£æï¼Œå¢åŠ MiUI/XiaoMiæµè§ˆå™¨åˆ¤æ–­é€»è¾‘ï¼ˆpr#581@Giteeï¼‰\nâ€¢ ã€core ã€‘ FileAppenderæ·»åŠ é”æ„é€ ï¼ˆpr#2211@Githubï¼‰\nâ€¢ ã€poi ã€‘ ExcelReaderå¢åŠ æ„é€ ï¼ˆpr#2213@Githubï¼‰\nâ€¢ ã€core ã€‘ MapUtilæä¾›changeå‡½æ•°ï¼ŒEnumUtilæä¾›getByå‡½æ•°ï¼Œé€šè¿‡lambdaè¿›è¡Œæšä¸¾å­—æ®µæ˜ å°„ï¼ˆpr#583@Giteeï¼‰\nâ€¢ ã€core ã€‘ CompareUtilå¢åŠ comparingIndexedï¼ˆpr#585@Giteeï¼‰\nâ€¢ ã€db ã€‘ DruidDataSourceæ„å»ºæ—¶æ”¯æŒè‡ªå®šä¹‰å‚æ•°ï¼ˆissue#I4ZKCW@Giteeï¼‰\nâ€¢ ã€poi ã€‘ ExcelWriterå¢åŠ addImgé‡è½½ï¼ˆissue#2218@Githubï¼‰\nâ€¢ ã€bloomFilterã€‘ å¢åŠ FuncFilter\nâ€¢ ã€http ã€‘ å¢åŠ GlobalInterceptorï¼ˆissue#2217ï¼‰\nğŸBugä¿®å¤ â€¢ ã€core ã€‘ ä¿®å¤ObjectUtil.hasNullä¼ å…¥nullè¿”å›trueçš„é—®é¢˜ï¼ˆpr#555@Giteeï¼‰\nâ€¢ ã€core ã€‘ ä¿®å¤NumberConverterå¯¹æ•°å­—è½¬æ¢çš„é—®é¢˜ï¼ˆissue#I4WPF4@Giteeï¼‰\nâ€¢ ã€core ã€‘ ä¿®å¤ReflectUtil.getMethodsè·å–æ¥å£æ–¹æ³•é—®é¢˜ï¼ˆissue#I4WUWR@Giteeï¼‰\nâ€¢ ã€core ã€‘ ä¿®å¤NamingCaseä¸­å¤§å†™è½¬æ¢é—®é¢˜ï¼ˆpr#572@Giteeï¼‰\nâ€¢ ã€http ã€‘ ä¿®å¤GETé‡å®šå‘æ—¶ï¼Œæºå¸¦å‚æ•°é—®é¢˜ï¼ˆissue#2189@Githubï¼‰\nâ€¢ ã€core ã€‘ ä¿®å¤FileUtilã€FileCopierç›¸å¯¹è·¯å¾„è·å–çˆ¶è·¯å¾„é”™è¯¯é—®é¢˜ï¼ˆpr#2188@Githubï¼‰\nâ€¢ ã€core ã€‘ ä¿® â€¦","date":1648598400,"description":"Hutoolæ˜¯ä¸€ä¸ªå°è€Œå…¨çš„Javaå·¥å…·ç±»åº“ï¼Œæä¾›ä¼˜é›…ã€é«˜æ•ˆå’Œä¾¿æ·çš„å·¥å…·æ–¹æ³•","dir":"community/hutool-5.8.0/","fuzzywordcount":3400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"16cea8007f3fd3bc10cf8cc4a5ecc6e07c398d42","permalink":"/zh/community/hutool-5.8.0/","publishdate":"2022-03-30T00:00:00Z","readingtime":7,"relpermalink":"/zh/community/hutool-5.8.0/","summary":"Hutoolæ˜¯ä¸€ä¸ªå°è€Œå…¨çš„Javaå·¥å…·ç±»åº“ï¼Œæä¾›ä¼˜é›…ã€é«˜æ•ˆå’Œä¾¿æ·çš„å·¥å…·æ–¹æ³•ã€‚ Hutoolæ˜¯ä»€ä¹ˆ æœ¬æ¥è¿™ä¸ªç‰ˆæœ¬åº”è¯¥æ˜¯5.7.23çš„ï¼Œå¯æƒœç”¨æˆ·æäº†","tags":["hutool"],"title":"Hutool-5.8.0.M1 å‘å¸ƒï¼Œå°è¯•é‡Œç¨‹ç¢‘å‘å¸ƒ","type":"community","url":"/zh/community/hutool-5.8.0/","wordcount":3325},{"author":"nuo-promise","categories":"Soul","content":" ç›®æ ‡  Apache Dubbo æ’ä»¶ä»‹ç»  å…ƒæ•°æ®ä»‹ç»  Apache Dubbo æ’ä»¶é…ç½®  Bootstrap pom é…ç½® soul-admin é…ç½® dubboæœåŠ¡pomé…ç½®  Apache Dubbo æ³›åŒ–è°ƒç”¨ä»‹ç»  é€šè¿‡APIæ–¹å¼ä½¿ç”¨æ³›åŒ–è°ƒç”¨ é€šè¿‡springä½¿ç”¨æ³›åŒ–è°ƒç”¨ æ³›åŒ–è°ƒç”¨å®ç°æµç¨‹  Soul Dubbo æ’ä»¶è°ƒç”¨è§£æ  ApachDubboPluginæ³›åŒ–è°ƒç”¨å‡†å¤‡ ApacheDubboProxySerivce DubboResponsePlugin WebFluxResultUtilsè¿”å›ç»“æœ  Dubboæ³›åŒ–è°ƒç”¨ä»‹ç» æ€»ç»“ å‚è€ƒ\nApache Dubbo æ’ä»¶ä»‹ç» Apache Dubbo æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJavaæœåŠ¡æ¡†æ¶,ä¸»è¦æä¾›äº†å…­å¤§æ ¸å¿ƒèƒ½åŠ›,é¢å‘æ¥å£ä»£ç†çš„é«˜æ€§èƒ½RPCè°ƒç”¨,æ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡,æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°,é«˜åº¦å¯æ‰©å±•èƒ½åŠ›,è¿è¡ŒæœŸæµé‡è°ƒåº¦,å¯è§†åŒ–çš„æœåŠ¡æ²»ç†ä¸è¿ç»´ã€‚ ç½‘å…³ä¸­Dubboæ’ä»¶ä¸»è¦æ˜¯å°† Httpåè®®Â è½¬æ¢æˆ Dubboåè®®Â ,ä¹Ÿæ˜¯ç½‘å…³å®ç°Dubboæ³›åŒ–è°ƒç”¨çš„å…³é”®ã€‚è€ŒDubboæ’ä»¶éœ€è¦é…åˆ å…ƒæ•°æ®Â æ‰èƒ½å®ç°Dubboè°ƒç”¨ã€‚\nå…ƒæ•°æ®ä»‹ç» å…ƒæ•°æ®ä½œç”¨å°±æ˜¯åœ¨è¿›è¡Œåè®®è½¬æ¢æ—¶å€™è¦è·å–çœŸå®çš„è¯·æ±‚ pathÂ ã€methodNameÂ ã€ parameterTypesÂ ä¸ºæ³›åŒ–è°ƒç”¨åšå¥½å‡†å¤‡\n   åœ¨æ•°æ®åº“ä¸­,æˆ‘ä»¬æœ‰ä¸€å¼ è¡¨å•ç‹¬å­˜å‚¨Dubboå…ƒä¿¡æ¯ï¼Œé€šè¿‡æ•°æ®åŒæ­¥æ–¹æ¡ˆ,ä¼šæŠŠè¿™å¼ è¡¨çš„æ•°æ®åŒæ­¥åˆ°ç½‘å…³çš„JVMå†…å­˜ä¸­ è¡¨ç»“æ„å¦‚ä¸‹\nCREATE TABLE IF NOT EXISTS `meta_data` ( `id` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;id\u0026#39;, `app_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;åº”ç”¨åç§°\u0026#39;, `path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;è·¯å¾„,ä¸èƒ½é‡å¤\u0026#39;, `path_desc` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;è·¯å¾„æè¿°\u0026#39;, `rpc_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;rpcç±»å‹\u0026#39;, `service_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;æœåŠ¡åç§°\u0026#39;, `method_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;æ–¹æ³•åç§°\u0026#39;, `parameter_types` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;å‚æ•°ç±»å‹ å¤šä¸ªå‚æ•°ç±»å‹ é€—å·éš”å¼€\u0026#39;, `rpc_ext` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;rpcçš„æ‰©å±•ä¿¡æ¯ï¼Œjsonæ ¼å¼\u0026#39;, `date_created` datetime(0) NOT NULL COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `date_updated` datetime(0) NOT NULL ON UPDATE CURRENT_TIMESTAMP(0) COMMENT \u0026#39;æ›´æ–°æ—¶é—´\u0026#39;, `enabled` tinyint(4) NOT NULL DEFAULT 0 COMMENT \u0026#39;å¯ç”¨çŠ¶æ€\u0026#39;, PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;   pathÂ å­—æ®µä¸»è¦æ˜¯åœ¨è¯·æ±‚ç½‘å…³çš„æ—¶å€™,ä¼šæ ¹æ®ä½ çš„ pathÂ å­—æ®µæ¥åŒ¹é…åˆ°ä¸€æ¡æ•°æ®,ç„¶åè¿›è¡Œåç»­çš„å¤„ç†æµç¨‹ rpc_extÂ å­—æ®µå¦‚æœä»£ç†çš„æ¥å£æ˜¯ Dubbo ç±»å‹çš„æœåŠ¡æ¥å£,åŒæ—¶è®¾ç½®äº† groupÂ versionÂ å­—æ®µæ—¶å€™,é‚£ä¹ˆä¿¡æ¯å°±ä¼šå­˜å‚¨åˆ° rpc_extÂ ä¸­Â  æ¯ä¸€ä¸ª DubboÂ æ¥å£æ–¹æ³•ä¼šåº”å¯¹ä¸€æ¡å…ƒæ•°æ®,å¯¹æ¯”SpringCloudã€httpåˆ†åˆ«æ˜¯åªå­˜å‚¨ä¸€æ¡/contextPath/** å’Œä¸å­˜å‚¨  Apache Dubbo æ’ä»¶é…ç½® soul-bootstrap pom é…ç½® \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-apache-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.apache.dubbo\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.7.5\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.apache.curator\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;curator-client\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${curator.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.apache.curator\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;curator-framework\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${curator.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; â€¦","date":1616457600,"description":"Soul Gateway Learning Apache Dubbo Plugin","dir":"blog/soul_source_learning_22_apache_dubbo/","fuzzywordcount":3800,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"32e8ad6a16f6faa8b54ff8dfbcbc7932c7361d1f","permalink":"/blog/soul_source_learning_22_apache_dubbo/","publishdate":"2021-03-23T00:00:00Z","readingtime":8,"relpermalink":"/blog/soul_source_learning_22_apache_dubbo/","summary":"ç›®æ ‡ Apache Dubbo æ’ä»¶ä»‹ç» å…ƒæ•°æ®ä»‹ç» Apache Dubbo æ’ä»¶é…ç½® Bootstrap pom é…ç½® soul-admin é…ç½® dubboæœåŠ¡pomé…ç½® Apache Dubbo æ³›åŒ–è°ƒç”¨ä»‹ç» é€šè¿‡APIæ–¹å¼ä½¿ç”¨æ³›åŒ–è°ƒç”¨ é€šè¿‡springä½¿ç”¨æ³›","tags":["Soul"],"title":"Soul Gateway Learning Apache Dubbo Plugin","type":"blog","url":"/blog/soul_source_learning_22_apache_dubbo/","wordcount":3745},{"author":"nuo-promise","categories":"Soul","content":" ç›®æ ‡  Apache Dubbo æ’ä»¶ä»‹ç»  å…ƒæ•°æ®ä»‹ç»  Apache Dubbo æ’ä»¶é…ç½®  Bootstrap pom é…ç½® soul-admin é…ç½® dubboæœåŠ¡pomé…ç½®  Apache Dubbo æ³›åŒ–è°ƒç”¨ä»‹ç»  é€šè¿‡APIæ–¹å¼ä½¿ç”¨æ³›åŒ–è°ƒç”¨ é€šè¿‡springä½¿ç”¨æ³›åŒ–è°ƒç”¨ æ³›åŒ–è°ƒç”¨å®ç°æµç¨‹  Soul Dubbo æ’ä»¶è°ƒç”¨è§£æ  ApachDubboPluginæ³›åŒ–è°ƒç”¨å‡†å¤‡ ApacheDubboProxySerivce DubboResponsePlugin WebFluxResultUtilsè¿”å›ç»“æœ  Dubboæ³›åŒ–è°ƒç”¨ä»‹ç» æ€»ç»“ å‚è€ƒ\nApache Dubbo æ’ä»¶ä»‹ç» Apache Dubbo æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJavaæœåŠ¡æ¡†æ¶,ä¸»è¦æä¾›äº†å…­å¤§æ ¸å¿ƒèƒ½åŠ›,é¢å‘æ¥å£ä»£ç†çš„é«˜æ€§èƒ½RPCè°ƒç”¨,æ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡,æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°,é«˜åº¦å¯æ‰©å±•èƒ½åŠ›,è¿è¡ŒæœŸæµé‡è°ƒåº¦,å¯è§†åŒ–çš„æœåŠ¡æ²»ç†ä¸è¿ç»´ã€‚ ç½‘å…³ä¸­Dubboæ’ä»¶ä¸»è¦æ˜¯å°† Httpåè®®Â è½¬æ¢æˆ Dubboåè®®Â ,ä¹Ÿæ˜¯ç½‘å…³å®ç°Dubboæ³›åŒ–è°ƒç”¨çš„å…³é”®ã€‚è€ŒDubboæ’ä»¶éœ€è¦é…åˆ å…ƒæ•°æ®Â æ‰èƒ½å®ç°Dubboè°ƒç”¨ã€‚\nå…ƒæ•°æ®ä»‹ç» å…ƒæ•°æ®ä½œç”¨å°±æ˜¯åœ¨è¿›è¡Œåè®®è½¬æ¢æ—¶å€™è¦è·å–çœŸå®çš„è¯·æ±‚ pathÂ ã€methodNameÂ ã€ parameterTypesÂ ä¸ºæ³›åŒ–è°ƒç”¨åšå¥½å‡†å¤‡\n   åœ¨æ•°æ®åº“ä¸­,æˆ‘ä»¬æœ‰ä¸€å¼ è¡¨å•ç‹¬å­˜å‚¨Dubboå…ƒä¿¡æ¯ï¼Œé€šè¿‡æ•°æ®åŒæ­¥æ–¹æ¡ˆ,ä¼šæŠŠè¿™å¼ è¡¨çš„æ•°æ®åŒæ­¥åˆ°ç½‘å…³çš„JVMå†…å­˜ä¸­ è¡¨ç»“æ„å¦‚ä¸‹\nCREATE TABLE IF NOT EXISTS `meta_data` ( `id` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;id\u0026#39;, `app_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;åº”ç”¨åç§°\u0026#39;, `path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;è·¯å¾„,ä¸èƒ½é‡å¤\u0026#39;, `path_desc` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;è·¯å¾„æè¿°\u0026#39;, `rpc_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT \u0026#39;rpcç±»å‹\u0026#39;, `service_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;æœåŠ¡åç§°\u0026#39;, `method_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;æ–¹æ³•åç§°\u0026#39;, `parameter_types` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;å‚æ•°ç±»å‹ å¤šä¸ªå‚æ•°ç±»å‹ é€—å·éš”å¼€\u0026#39;, `rpc_ext` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT \u0026#39;rpcçš„æ‰©å±•ä¿¡æ¯ï¼Œjsonæ ¼å¼\u0026#39;, `date_created` datetime(0) NOT NULL COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `date_updated` datetime(0) NOT NULL ON UPDATE CURRENT_TIMESTAMP(0) COMMENT \u0026#39;æ›´æ–°æ—¶é—´\u0026#39;, `enabled` tinyint(4) NOT NULL DEFAULT 0 COMMENT \u0026#39;å¯ç”¨çŠ¶æ€\u0026#39;, PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;   pathÂ å­—æ®µä¸»è¦æ˜¯åœ¨è¯·æ±‚ç½‘å…³çš„æ—¶å€™,ä¼šæ ¹æ®ä½ çš„ pathÂ å­—æ®µæ¥åŒ¹é…åˆ°ä¸€æ¡æ•°æ®,ç„¶åè¿›è¡Œåç»­çš„å¤„ç†æµç¨‹ rpc_extÂ å­—æ®µå¦‚æœä»£ç†çš„æ¥å£æ˜¯ Dubbo ç±»å‹çš„æœåŠ¡æ¥å£,åŒæ—¶è®¾ç½®äº† groupÂ versionÂ å­—æ®µæ—¶å€™,é‚£ä¹ˆä¿¡æ¯å°±ä¼šå­˜å‚¨åˆ° rpc_extÂ ä¸­Â  æ¯ä¸€ä¸ª DubboÂ æ¥å£æ–¹æ³•ä¼šåº”å¯¹ä¸€æ¡å…ƒæ•°æ®,å¯¹æ¯”SpringCloudã€httpåˆ†åˆ«æ˜¯åªå­˜å‚¨ä¸€æ¡/contextPath/** å’Œä¸å­˜å‚¨  Apache Dubbo æ’ä»¶é…ç½® soul-bootstrap pom é…ç½® \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-apache-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.apache.dubbo\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.7.5\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.apache.curator\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;curator-client\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${curator.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.apache.curator\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;curator-framework\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${curator.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; â€¦","date":1616457600,"description":"Soulç½‘å…³å­¦ä¹ Apache Dubboæ’ä»¶åŸç†è§£æ","dir":"blog/soul_source_learning_22_apache_dubbo/","fuzzywordcount":3800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"e2589bf0b4b6a8a4a17086247c1cd15db70e800d","permalink":"/zh/blog/soul_source_learning_22_apache_dubbo/","publishdate":"2021-03-23T00:00:00Z","readingtime":8,"relpermalink":"/zh/blog/soul_source_learning_22_apache_dubbo/","summary":"ç›®æ ‡ Apache Dubbo æ’ä»¶ä»‹ç» å…ƒæ•°æ®ä»‹ç» Apache Dubbo æ’ä»¶é…ç½® Bootstrap pom é…ç½® soul-admin é…ç½® dubboæœåŠ¡pomé…ç½® Apache Dubbo æ³›åŒ–è°ƒç”¨ä»‹ç» é€šè¿‡APIæ–¹å¼ä½¿ç”¨æ³›åŒ–è°ƒç”¨ é€šè¿‡springä½¿ç”¨æ³›","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Apache Dubboæ’ä»¶åŸç†è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_22_apache_dubbo/","wordcount":3745},{"author":"yanbing","categories":"Soul","content":" ç›®æ ‡  ä»€ä¹ˆæ˜¯Resilience4J soulçš„Resilience4jä½“éªŒ  é™æµ ç†”æ–­  Resilience4Jæ’ä»¶æºç è§£è¯»  ä»€ä¹ˆæ˜¯Resilience4j  Resilience4Jæ˜¯Spring Cloud Gatewayæ¨èçš„å®¹é”™æ–¹æ¡ˆï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®¹é”™åº“ å€Ÿé‰´äº†Hystrixè€Œè®¾è®¡ï¼Œå¹¶ä¸”é‡‡ç”¨JDK8 è¿™ä¸ªå‡½æ•°å¼ç¼–ç¨‹ï¼Œå³lambdaè¡¨è¾¾å¼ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ Netflix Hystrix å¯¹Archaius å…·æœ‰ç¼–è¯‘ä¾èµ–æ€§ï¼ŒResilience4jä½ æ— éœ€å¼•ç”¨å…¨éƒ¨ä¾èµ–ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦çš„åŠŸèƒ½å¼•ç”¨ç›¸å…³çš„æ¨¡å—å³å¯ Hystrixä¸æ›´æ–°äº†ï¼ŒSpringæä¾›Netflix Hystrixçš„æ›¿æ¢æ–¹æ¡ˆï¼Œå³Resilence4J Resilience4J æä¾›äº†ä¸€ç³»åˆ—å¢å¼ºå¾®æœåŠ¡çš„å¯ç”¨æ€§åŠŸèƒ½ï¼š\n æ–­è·¯å™¨ CircuitBreaker é™æµ RateLimiter åŸºäºä¿¡å·é‡çš„éš”ç¦» ç¼“å­˜ é™æ—¶ Timelimiter è¯·æ±‚é‡å¯ Retry  å®˜æ–¹æä¾›çš„ä¾èµ–åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;io.github.resilience4j\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;resilience4j-circuitbreaker\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${resilience.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  soulçš„Resilience4jä½“éªŒ  é¦–å…ˆåœ¨soul-adminæ§åˆ¶å°æ’ä»¶ç®¡ç†å¼€å¯Resilience4j  åœ¨soulç½‘å…³æ·»åŠ ä¾èµ–\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-ratelimiter\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   å¯åŠ¨ä¸‰ä¸ªæœåŠ¡,åˆ†åˆ«æ˜¯ä¸€ä¸ªsoul-adminï¼Œä¸€ä¸ªsoul-bootstrapï¼Œä¸€ä¸ªsoul-examples-http\n åœ¨soul-adminæ§åˆ¶å°æ‰¾åˆ°æ’ä»¶åˆ—è¡¨çš„Resilience4jï¼Œè‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼Œ  soulå®˜ç½‘çš„é…ç½®ä»‹ç»\n* Resilience4jå¤„ç†è¯¦è§£ï¼š * timeoutDurationRateï¼šç­‰å¾…è·å–ä»¤ç‰Œçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š5000ã€‚ * limitRefreshPeriodï¼šåˆ·æ–°ä»¤ç‰Œçš„æ—¶é—´é—´éš”ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š500ã€‚ * limitForPeriodï¼šæ¯æ¬¡åˆ·æ–°ä»¤ç‰Œçš„æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š50ã€‚ * circuitEnableï¼šæ˜¯å¦å¼€å¯ç†”æ–­ï¼Œ0ï¼šå…³é—­ï¼Œ1ï¼šå¼€å¯ï¼Œé»˜è®¤å€¼ï¼š0ã€‚ * timeoutDurationï¼šç†”æ–­è¶…æ—¶æ—¶é—´ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š30000ã€‚ * fallbackUriï¼šé™çº§å¤„ç†çš„uriã€‚ * slidingWindowSizeï¼šæ»‘åŠ¨çª—å£å¤§å°ï¼Œé»˜è®¤å€¼ï¼š100ã€‚ * slidingWindowTypeï¼šæ»‘åŠ¨çª—å£ç±»å‹ï¼Œ0ï¼šåŸºäºè®¡æ•°ï¼Œ1ï¼šåŸºäºæ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š0ã€‚ * minimumNumberOfCallsï¼šå¼€å¯ç†”æ–­çš„æœ€å°è¯·æ±‚æ•°ï¼Œè¶…è¿‡è¿™ä¸ªè¯·æ±‚æ•°æ‰å¼€å¯ç†”æ–­ç»Ÿè®¡ï¼Œé»˜è®¤å€¼ï¼š100ã€‚ * waitIntervalFunctionInOpenStateï¼šç†”æ–­å™¨å¼€å¯æŒç»­æ—¶é—´ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š10ã€‚ * permittedNumberOfCallsInHalfOpenStateï¼šåŠå¼€çŠ¶æ€ä¸‹çš„ç¯å½¢ç¼“å†²åŒºå¤§å°ï¼Œå¿…é¡»è¾¾åˆ°æ­¤æ•°é‡æ‰ä¼šè®¡ç®—å¤±è´¥ç‡ï¼Œé»˜è®¤å€¼ï¼š10ã€‚ * failureRateThresholdï¼šé”™è¯¯ç‡ç™¾åˆ†æ¯”ï¼Œè¾¾åˆ°è¿™ä¸ªé˜ˆå€¼ï¼Œç†”æ–­å™¨æ‰ä¼šå¼€å¯ï¼Œé»˜è®¤å€¼50ã€‚ * automaticTransitionFromOpenToHalfOpenEnabledï¼šæ˜¯å¦è‡ªåŠ¨ä»opençŠ¶æ€è½¬æ¢ä¸ºhalf-opençŠ¶æ€ï¼Œ,trueï¼šæ˜¯ï¼Œfalseï¼šå¦ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚   é™æµ  å‚æ•°é…ç½® å¦‚ä¸‹æ˜¯å‚æ•°é…ç½®æ ¡éªŒï¼Œå‚æ•°å€¼å°äºé»˜è®¤å€¼ï¼Œä¼šç›´æ¥èµ‹å€¼é»˜è®¤å€¼ï¼Œå› æ­¤æ–¹ä¾¿æµ‹è¯•æ•ˆæœç›´æ¥ä¿®æ”¹æºç çš„é…ç½® ï¼š æ¯æ¬¡åˆ·æ–°ä»¤ç‰Œçš„æ•°é‡ä¸º2 ï¼Œåˆ·æ–°ä»¤ç‰Œçš„æ—¶é—´é—´éš”ä¸º1sï¼Œè¶…æ—¶æ—¶é—´ä¸º1s  /** * check filed default value. * * @param resilience4JHandle {@linkplain Resilience4JHandle} * @return {@linkplain Resilience4JHandle} */ public Resilience4JHandle checkData(final Resilience4JHandle resilience4JHandle) { resilience4JHandle.setTimeoutDurationRate(Math.max(resilience4JHandle.getTimeoutDurationRate(), Constants.TIMEOUT_DURATION_RATE)); //resilience4JHandle.setLimitRefreshPeriod(Math.max(resilience4JHandle.getLimitRefreshPeriod(), Constants.LIMIT_REFRESH_PERIOD)); //resilience4JHandle.setLimitForPeriod(Math.max(resilience4JHandle.getLimitForPeriod(), Constants.LIMIT_FOR_PERIOD)); //æ¯æ¬¡åˆ·æ–°ä»¤ç‰Œçš„æ•°é‡ä¸º2 ï¼Œåˆ·æ–°ä»¤ç‰Œçš„æ—¶é—´é—´éš”ä¸º1s resilience4JHandle.setLimitRefreshPeriod(1000); resilience4JHandle.setLimitForPeriod(2); resilience4JHandle.setTimeoutDuration(1000); resilience4JHandle.setCircuitEnable(Math.max(resilience4JHandle.getCircuitEnable(), Constants.CIRCUIT_ENABLE)); //resilience4JHandle.setTimeoutDuration(Math.max(resilience4JHandle.getTimeoutDuration(), Constants.TIMEOUT_DURATION)); resilience4JHandle.setFallbackUri(!\u0026amp;quot;0\u0026amp;quot;.equals(resilience4JHandle.getFallbackUri()) ? resilience4JHandle.getFallbackUri() : \u0026amp;quot;\u0026amp;quot;); â€¦","date":1616371200,"description":"Soul Gateway Learning Resilience4j Plugin","dir":"blog/soul_source_learning_21_resilience4j/","fuzzywordcount":2600,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"e0a8ab49fa2593188f17d2b3fced004722d2ed14","permalink":"/blog/soul_source_learning_21_resilience4j/","publishdate":"2021-03-22T00:00:00Z","readingtime":6,"relpermalink":"/blog/soul_source_learning_21_resilience4j/","summary":"ç›®æ ‡ ä»€ä¹ˆæ˜¯Resilience4J soulçš„Resilience4jä½“éªŒ é™æµ ç†”æ–­ Resilience4Jæ’ä»¶æºç è§£è¯» ä»€ä¹ˆæ˜¯Resilienc","tags":["Soul"],"title":"Soul Gateway Learning Resilience4j Plugin","type":"blog","url":"/blog/soul_source_learning_21_resilience4j/","wordcount":2581},{"author":"é—«å…µ","categories":"Soul","content":" ç›®æ ‡  ä»€ä¹ˆæ˜¯Resilience4J soulçš„Resilience4jä½“éªŒ  é™æµ ç†”æ–­  Resilience4Jæ’ä»¶æºç è§£è¯»  ä»€ä¹ˆæ˜¯Resilience4j  Resilience4Jæ˜¯Spring Cloud Gatewayæ¨èçš„å®¹é”™æ–¹æ¡ˆï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®¹é”™åº“ å€Ÿé‰´äº†Hystrixè€Œè®¾è®¡ï¼Œå¹¶ä¸”é‡‡ç”¨JDK8 è¿™ä¸ªå‡½æ•°å¼ç¼–ç¨‹ï¼Œå³lambdaè¡¨è¾¾å¼ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ Netflix Hystrix å¯¹Archaius å…·æœ‰ç¼–è¯‘ä¾èµ–æ€§ï¼ŒResilience4jä½ æ— éœ€å¼•ç”¨å…¨éƒ¨ä¾èµ–ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦çš„åŠŸèƒ½å¼•ç”¨ç›¸å…³çš„æ¨¡å—å³å¯ Hystrixä¸æ›´æ–°äº†ï¼ŒSpringæä¾›Netflix Hystrixçš„æ›¿æ¢æ–¹æ¡ˆï¼Œå³Resilence4J Resilience4J æä¾›äº†ä¸€ç³»åˆ—å¢å¼ºå¾®æœåŠ¡çš„å¯ç”¨æ€§åŠŸèƒ½ï¼š\n æ–­è·¯å™¨ CircuitBreaker é™æµ RateLimiter åŸºäºä¿¡å·é‡çš„éš”ç¦» ç¼“å­˜ é™æ—¶ Timelimiter è¯·æ±‚é‡å¯ Retry  å®˜æ–¹æä¾›çš„ä¾èµ–åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;io.github.resilience4j\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;resilience4j-circuitbreaker\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${resilience.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  soulçš„Resilience4jä½“éªŒ  é¦–å…ˆåœ¨soul-adminæ§åˆ¶å°æ’ä»¶ç®¡ç†å¼€å¯Resilience4j  åœ¨soulç½‘å…³æ·»åŠ ä¾èµ–\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-ratelimiter\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   å¯åŠ¨ä¸‰ä¸ªæœåŠ¡,åˆ†åˆ«æ˜¯ä¸€ä¸ªsoul-adminï¼Œä¸€ä¸ªsoul-bootstrapï¼Œä¸€ä¸ªsoul-examples-http\n åœ¨soul-adminæ§åˆ¶å°æ‰¾åˆ°æ’ä»¶åˆ—è¡¨çš„Resilience4jï¼Œè‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼Œ  soulå®˜ç½‘çš„é…ç½®ä»‹ç»\n* Resilience4jå¤„ç†è¯¦è§£ï¼š * timeoutDurationRateï¼šç­‰å¾…è·å–ä»¤ç‰Œçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š5000ã€‚ * limitRefreshPeriodï¼šåˆ·æ–°ä»¤ç‰Œçš„æ—¶é—´é—´éš”ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š500ã€‚ * limitForPeriodï¼šæ¯æ¬¡åˆ·æ–°ä»¤ç‰Œçš„æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š50ã€‚ * circuitEnableï¼šæ˜¯å¦å¼€å¯ç†”æ–­ï¼Œ0ï¼šå…³é—­ï¼Œ1ï¼šå¼€å¯ï¼Œé»˜è®¤å€¼ï¼š0ã€‚ * timeoutDurationï¼šç†”æ–­è¶…æ—¶æ—¶é—´ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š30000ã€‚ * fallbackUriï¼šé™çº§å¤„ç†çš„uriã€‚ * slidingWindowSizeï¼šæ»‘åŠ¨çª—å£å¤§å°ï¼Œé»˜è®¤å€¼ï¼š100ã€‚ * slidingWindowTypeï¼šæ»‘åŠ¨çª—å£ç±»å‹ï¼Œ0ï¼šåŸºäºè®¡æ•°ï¼Œ1ï¼šåŸºäºæ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š0ã€‚ * minimumNumberOfCallsï¼šå¼€å¯ç†”æ–­çš„æœ€å°è¯·æ±‚æ•°ï¼Œè¶…è¿‡è¿™ä¸ªè¯·æ±‚æ•°æ‰å¼€å¯ç†”æ–­ç»Ÿè®¡ï¼Œé»˜è®¤å€¼ï¼š100ã€‚ * waitIntervalFunctionInOpenStateï¼šç†”æ–­å™¨å¼€å¯æŒç»­æ—¶é—´ï¼Œå•ä½msï¼Œé»˜è®¤å€¼ï¼š10ã€‚ * permittedNumberOfCallsInHalfOpenStateï¼šåŠå¼€çŠ¶æ€ä¸‹çš„ç¯å½¢ç¼“å†²åŒºå¤§å°ï¼Œå¿…é¡»è¾¾åˆ°æ­¤æ•°é‡æ‰ä¼šè®¡ç®—å¤±è´¥ç‡ï¼Œé»˜è®¤å€¼ï¼š10ã€‚ * failureRateThresholdï¼šé”™è¯¯ç‡ç™¾åˆ†æ¯”ï¼Œè¾¾åˆ°è¿™ä¸ªé˜ˆå€¼ï¼Œç†”æ–­å™¨æ‰ä¼šå¼€å¯ï¼Œé»˜è®¤å€¼50ã€‚ * automaticTransitionFromOpenToHalfOpenEnabledï¼šæ˜¯å¦è‡ªåŠ¨ä»opençŠ¶æ€è½¬æ¢ä¸ºhalf-opençŠ¶æ€ï¼Œ,trueï¼šæ˜¯ï¼Œfalseï¼šå¦ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚   é™æµ  å‚æ•°é…ç½® å¦‚ä¸‹æ˜¯å‚æ•°é…ç½®æ ¡éªŒï¼Œå‚æ•°å€¼å°äºé»˜è®¤å€¼ï¼Œä¼šç›´æ¥èµ‹å€¼é»˜è®¤å€¼ï¼Œå› æ­¤æ–¹ä¾¿æµ‹è¯•æ•ˆæœç›´æ¥ä¿®æ”¹æºç çš„é…ç½® ï¼š æ¯æ¬¡åˆ·æ–°ä»¤ç‰Œçš„æ•°é‡ä¸º2 ï¼Œåˆ·æ–°ä»¤ç‰Œçš„æ—¶é—´é—´éš”ä¸º1sï¼Œè¶…æ—¶æ—¶é—´ä¸º1s  /** * check filed default value. * * @param resilience4JHandle {@linkplain Resilience4JHandle} * @return {@linkplain Resilience4JHandle} */ public Resilience4JHandle checkData(final Resilience4JHandle resilience4JHandle) { resilience4JHandle.setTimeoutDurationRate(Math.max(resilience4JHandle.getTimeoutDurationRate(), Constants.TIMEOUT_DURATION_RATE)); //resilience4JHandle.setLimitRefreshPeriod(Math.max(resilience4JHandle.getLimitRefreshPeriod(), Constants.LIMIT_REFRESH_PERIOD)); //resilience4JHandle.setLimitForPeriod(Math.max(resilience4JHandle.getLimitForPeriod(), Constants.LIMIT_FOR_PERIOD)); //æ¯æ¬¡åˆ·æ–°ä»¤ç‰Œçš„æ•°é‡ä¸º2 ï¼Œåˆ·æ–°ä»¤ç‰Œçš„æ—¶é—´é—´éš”ä¸º1s resilience4JHandle.setLimitRefreshPeriod(1000); resilience4JHandle.setLimitForPeriod(2); resilience4JHandle.setTimeoutDuration(1000); resilience4JHandle.setCircuitEnable(Math.max(resilience4JHandle.getCircuitEnable(), Constants.CIRCUIT_ENABLE)); //resilience4JHandle.setTimeoutDuration(Math.max(resilience4JHandle.getTimeoutDuration(), Constants.TIMEOUT_DURATION)); resilience4JHandle.setFallbackUri(!\u0026amp;quot;0\u0026amp;quot;.equals(resilience4JHandle.getFallbackUri()) ? resilience4JHandle.getFallbackUri() : \u0026amp;quot;\u0026amp;quot;); â€¦","date":1616371200,"description":"Soulç½‘å…³å­¦ä¹ Resilience4jæ’ä»¶åŸç†è§£æ","dir":"blog/soul_source_learning_21_resilience4j/","fuzzywordcount":2600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"48aec55a741081b39b052ecd0ff8f33d942b3703","permalink":"/zh/blog/soul_source_learning_21_resilience4j/","publishdate":"2021-03-22T00:00:00Z","readingtime":6,"relpermalink":"/zh/blog/soul_source_learning_21_resilience4j/","summary":"ç›®æ ‡ ä»€ä¹ˆæ˜¯Resilience4J soulçš„Resilience4jä½“éªŒ é™æµ ç†”æ–­ Resilience4Jæ’ä»¶æºç è§£è¯» ä»€ä¹ˆæ˜¯Resilienc","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Resilience4jæ’ä»¶åŸç†è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_21_resilience4j/","wordcount":2581},{"author":"luoxiaolong","categories":"Soul","content":" æ¦‚è¿° åœ¨ä¸šåŠ¡ç½‘å…³ä¸­ç†”æ–­å’Œæµé‡æ§åˆ¶éƒ½æ˜¯éå¸¸å¿…è¦çš„åŠŸèƒ½ã€‚soulåœ¨å®ç°è¿™éƒ¨åˆ†åŠŸèƒ½æ—¶ä½¿ç”¨äº†ä¸åŒçš„æˆç†Ÿç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨soulä¸­ä½¿ç”¨é˜¿é‡Œçš„Sentinelç»„ä»¶å®ç°ç†”æ–­åŠæµæ§åŠŸèƒ½ã€‚æœ¬æ–‡é¦–å…ˆä¼šä»‹ç»ç†”æ–­å’Œæµæ§çš„åœºæ™¯åŠæ„ä¹‰ã€‚ç„¶åä»‹ç»å¦‚ä½•åœ¨soulä¸Šé…ç½®ä½¿ç”¨sentinelæ’ä»¶åšæµæ§å’Œç†”æ–­ã€‚æœ€åä»æºç çš„å±‚é¢ç®€ç•¥åˆ†æsoulæ˜¯å¦‚ä½•ä½¿ç”¨Sentinelç»„ä»¶çš„ã€‚\nç†”æ–­å’Œæµé‡æ§åˆ¶ åœºæ™¯æè¿° ä¸šåŠ¡ç½‘å…³ä½œä¸ºæµé‡çš„å…¥å£ï¼Œæœ‰ä¿æŠ¤åç»§æœåŠ¡çš„èŒè´£ã€‚ä»¥ä¸‹ä¸¤ä¸ªå¯¹æœåŠ¡æœ‰ä¸¥é‡å±å®³çš„åœºæ™¯åœ¨ç”Ÿäº§ä¸­ç»å¸¸ä¼šé‡åˆ°ï¼Œä¹Ÿæ˜¯ä¸šåŠ¡ç½‘å…³å¿…é¡»è¦å…³æ³¨å¤„ç†çš„é—®é¢˜ã€‚ä¸€ç§æƒ…å†µæ˜¯åœ¨æ¯”å¦‚åŒ11æˆ–åŒ12è¿™äº›å¤§å‹ä¿ƒé”€æ—¶ï¼Œæ¥å£çš„è¯·æ±‚é‡æ˜¯å¹³æ—¶æ˜¯æ•°å€ï¼Œå¦‚æœæ²¡æœ‰è¯„ä¼°å¥½å®¹é‡ï¼Œè¿™ç§æ¿€å¢çš„è¯·æ±‚å¾ˆå®¹æ˜“å¯¼è‡´æ•´ä¸ªæœåŠ¡å®Œå…¨ä¸å¯ç”¨ã€‚è¿™ç§å®•æœºå¾€å¾€ä¸æ˜¯å› ä¸ºä¸šåŠ¡é€»è¾‘çš„æ¼æ´è€Œæ˜¯å› ä¸ºè¯·æ±‚è¿‡å¤šèµ„æºä¸å¤Ÿå¯¼è‡´çš„ã€‚å¦ä¸€ç§æƒ…å†µæ˜¯åœ¨æ•´ä¸ªæœåŠ¡ä½“ç³»ä¸­æœ‰ä¸€äº›æ ¸å¿ƒæœåŠ¡ï¼Œå¤šä¸ªä¸šåŠ¡æµç¨‹éƒ½ä¾èµ–è¯¥æœåŠ¡ã€‚ç„¶è€Œæ˜¯æœåŠ¡éƒ½æœ‰å‡ºç°å¤„ç†ä¸ç¨³å®šæˆ–è€…æœåŠ¡æŸåçš„æƒ…å†µï¼Œå¯¼è‡´è¯·æ±‚å¤„ç†æ—¶é—´é•¿æˆ–è€…è€æ˜¯é¢‘ç¹æŠ›å‡ºå¼‚å¸¸ã€‚æ’é™¤ä¸šåŠ¡BUGçš„æƒ…å†µï¼Œå¯èƒ½å°±æ˜¯çªå‘çš„éå¸¸éšæœºçš„é˜»å¡ï¼Œä¸€èˆ¬å‡ç¼“è¯·æ±‚é‡å°±ä¼šè‡ªåŠ¨ä¿®å¤ï¼Œä½†æ˜¯å¦‚æœä¸åŠ ä¿æŠ¤å°±æœ‰å‡ºç°å¤šç±³è¯ºæ•ˆåº”å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ã€‚æ­¤åœºæ™¯å’Œç¬¬ä¸€ç§åœºæ™¯æœ‰ç•¥å¾®ä¸åŒï¼Œç¬¬ä¸€ç§åœºæ™¯æ˜¯å®é™…æµé‡ç¡®å®å‡ºç°äº†ä¸å¯å¤„ç†çš„å³°å€¼ï¼Œè€Œç¬¬äºŒç§åœºæ™¯ä¸»è¦è€ƒè™‘çš„æ˜¯æœåŠ¡æœ¬èº«å‡ºç°äº†ä¸å¯é¿å…ã€ä¸å¯é¢„æµ‹çš„æŠ–åŠ¨è€Œå¼•å‘çš„è¿é”ååº”ã€‚\næµé‡æ§åˆ¶ é’ˆå¯¹ç¬¬ä¸€ç§åœºæ™¯æˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯è¿›è¡Œæµé‡æ§åˆ¶ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯ä¸šåŠ¡ç½‘å…³ä¿è¯æ‰“åˆ°åé¢çš„è¯·æ±‚æ˜¯ä¸šåŠ¡å¯ä»¥æ‰¿å—çš„é‡ï¼Œå¤šä½™çš„è¯·æ±‚ç›´æ¥æ‹’ç»æˆ–è€…åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œä¿è¯æœåŠ¡ä¸ä¼šå®•æ‰ï¼Œå¤§éƒ¨åˆ†è¯·æ±‚è¿˜æ˜¯å¯ä»¥æ­£å¸¸å¤„ç†ã€‚åœ¨è€ƒè™‘æµé‡æ§åˆ¶çš„ç­–ç•¥æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä¸»è¦æ€è€ƒä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n é€šè¿‡ä»€ä¹ˆè§’åº¦æ§åˆ¶æµé‡ï¼Ÿ é˜ˆå€¼æ˜¯å¤šå°‘ï¼Ÿ æµé‡æ§åˆ¶çš„ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ  å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ­£å¸¸æ€è·¯æ˜¯é€šè¿‡QPSæ¥ç›‘æ§æµé‡ï¼Œå³æ¯ç§’é’Ÿè¯·æ±‚çš„æ•°é‡è¶…è¿‡æŸé™é¢æ—¶è¿›è¡Œæµæ§ã€‚ä½†å…¶å®è¿˜æœ‰ä¸€ç§æ€è·¯æ˜¯ä»å¹¶å‘æ•°æ¥ç›‘æ§æµé‡ã€‚è¿™ç§æ§åˆ¶åœºæ™¯ä¹Ÿæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œä¾‹å¦‚å½“ä¸‹æ¸¸åº”ç”¨ç”±äºæŸç§åŸå› å¯¼è‡´æœåŠ¡ä¸ç¨³å®šã€å“åº”å»¶è¿Ÿå¢åŠ ï¼Œå¯¹äºç½‘å…³æ¥è¯´ï¼Œæ„å‘³ç€ååé‡ä¸‹é™å’Œæ›´å¤šçš„çº¿ç¨‹æ•°å ç”¨ï¼Œæç«¯æƒ…å†µä¸‹ç”šè‡³å¯¼è‡´çº¿ç¨‹æ± è€—å°½ã€‚ä»æŸç§æ„ä¹‰ä¸Šè®²é€šè¿‡å¹¶å‘è¿›è¡Œæµæ§å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šä¿æŠ¤ç½‘å…³æœåŠ¡æœ¬èº«ã€‚å¯¹äºç¬¬äºŒä¸ªé—®é¢˜é˜ˆå€¼æ¥è¯´æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯è§¦å‘æµæ§çš„è¾¹ç•Œï¼Œå¦‚æœä»QPSæ¥è€ƒè™‘å°±æ˜¯æ¯ç§’è¾¾åˆ°å¤šå°‘æ—¶å¼€å§‹æµæ§ï¼Œä»å¹¶å‘æ•°æ¥è€ƒé‡çš„è¯å°±æ˜¯è¯·æ±‚ä¸Šä¸‹æ–‡çš„çº¿ç¨‹æ•°ç›®è¶…è¿‡å¤šå°‘è¿›è¡Œæµæ§ã€‚å¯¹äºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬æœ‰ä»¥ä¸‹3ä¸­å¤„ç†æ–¹æ¡ˆï¼š\n ç›´æ¥æ‹’ç»ï¼Œè¿™ç§ç­–ç•¥éå¸¸å¥½ç†è§£å°±æ˜¯å½“QPSé«˜äºé˜ˆå€¼æ—¶ç›´æ¥æ‹’æ¥æœåŠ¡ï¼Œä¸æŠŠè¯·æ±‚ä¼ è¾“åˆ°åé¢çš„æœåŠ¡ä¸­ã€‚ é¢„çƒ­å¯åŠ¨ï¼Œè¿™ä¸ªç­–ç•¥æ‰€é’ˆå¯¹çš„åœºæ™¯æ˜¯ç³»ç»Ÿé•¿æœŸå¤„äºä½æ°´ä½çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å‡ºç°æµé‡çªç„¶å¢åŠ æ—¶ï¼Œè€Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ã€‚é¢„çƒ­å¯åŠ¨çš„æ–¹å¼æ˜¯è®©é˜ˆå€¼ç¼“æ…¢å¢åŠ ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…é€æ¸å¢åŠ é˜ˆå€¼ç›´è‡³è¾¾åˆ°è®¾ç½®ï¼Œç»™å†·ç³»ç»Ÿä¸€ä¸ªé¢„çƒ­çš„æ—¶é—´ï¼Œé¿å…å†·ç³»ç»Ÿè¢«å‹å®ã€‚å¯¹äºè¶…å‡ºé˜ˆå€¼çš„è¯·æ±‚ä¹Ÿæ˜¯è§¦å‘æ‹’ç»ã€‚ åŒ€é€Ÿæ’é˜Ÿï¼Œæ­¤ç­–ç•¥æ ¸å¿ƒæ€è·¯æ˜¯ä»¥å›ºå®šé—´éš”æ—¶é—´è®©è¯·æ±‚é€šè¿‡ã€‚å½“è¯·æ±‚åˆ°æ¥çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰è¯·æ±‚è·ç¦»ä¸Šä¸ªé€šè¿‡çš„è¯·æ±‚é€šè¿‡çš„æ—¶é—´é—´éš”ä¸å°äºé¢„è®¾å€¼ï¼Œåˆ™è®©å½“å‰è¯·æ±‚é€šè¿‡ï¼›å¦åˆ™ï¼Œè®¡ç®—å½“å‰è¯·æ±‚çš„é¢„æœŸé€šè¿‡æ—¶é—´ï¼Œå¦‚æœè¯¥è¯·æ±‚çš„é¢„æœŸé€šè¿‡æ—¶é—´å°äºè§„åˆ™é¢„è®¾çš„ timeout æ—¶é—´ï¼Œåˆ™è¯¥è¯·æ±‚ä¼šç­‰å¾…ç›´åˆ°é¢„è®¾æ—¶é—´åˆ°æ¥é€šè¿‡ï¼ˆæ’é˜Ÿç­‰å¾…å¤„ç†ï¼‰ï¼›è‹¥é¢„æœŸçš„é€šè¿‡æ—¶é—´è¶…å‡ºæœ€å¤§æ’é˜Ÿæ—¶é•¿ï¼Œåˆ™ç›´æ¥æ‹’æ¥è¿™ä¸ªè¯·æ±‚ã€‚  ç†”æ–­ é’ˆå¯¹ç¬¬äºŒç§åœºæ™¯é€šå¸¸çš„å¤„ç†æ–¹å¼æ˜¯è®¾ç½®æœåŠ¡ç†”æ–­ã€‚ç®€å•çš„è¯´å°±æ˜¯å½“æˆ‘ä»¬æ¢æµ‹çš„ä¸€ä¸ªæœåŠ¡å‡ºç°äº†å¼‚å¸¸ï¼Œåˆ™ä¸å†è®¿é—®å®ƒä»¥å…æ›´å¤šçš„è¯·æ±‚å¯¹å®ƒé€ æˆæ›´å¤§çš„å‹åŠ›ã€‚ä¸€æ®µæ—¶é—´åå¦‚æœæ¢æµ‹åˆ°æœåŠ¡æ¢å¤äº†å†å°†æµé‡å‘é€è¿‡å»ã€‚æˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ¤æ–­å‡ºè¿™ä¸ªæœåŠ¡æ˜¯å¦å‡ºç°äº†ä¸ç¨³å®š\\æŠ–åŠ¨çš„æƒ…å†µã€‚ç„¶åæ€è€ƒå¦‚æœå‘ç°äº†æŠ–åŠ¨çš„æœåŠ¡æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠã€‚å¦‚ä½•åˆ¤æ–­æœåŠ¡æ˜¯å¦æ¢å¤æ­£å¸¸äº†ã€‚å¯¹äºæœåŠ¡æ˜¯å¦ä¸ç¨³å®šè¿™ä¸€ç‚¹æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸€ä¸‹3ä¸ªæ–¹å¼è¿›è¡Œåˆ¤æ–­ã€‚\n æ…¢è°ƒç”¨æ¯”ä¾‹ï¼šå½“å•ä½ç»Ÿè®¡æ—¶é•¿å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ï¼Œå¹¶ä¸”è¶…è¿‡æœ€å¤§å¿å—æ—¶é—´çš„è¯·æ±‚å¤§äºé˜ˆå€¼ï¼Œåˆ™åˆ¤æ–­æœåŠ¡å¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­ï¼› å¼‚å¸¸æ¯”ä¾‹ï¼šå½“å•ä½ç»Ÿè®¡æ—¶é•¿å†…å¼‚å¸¸è¯·æ±‚çš„æ¯”ä¾‹å¤§äºé˜ˆå€¼åˆ™æˆ‘ä»¬åˆ¤å®šæœåŠ¡å¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­ï¼› å¼‚å¸¸æ•°ï¼šå½“å•ä½æ—¶é•¿å†…å‡ºç°å¼‚å¸¸çš„è¯·æ±‚çš„æ•°é‡çš„è¾¾åˆ°é˜ˆå€¼åˆ™åˆ¤å®šæœåŠ¡å¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­ï¼›  å½“æˆ‘ä»¬é€šè¿‡ä»¥ä¸Š3ä¸ªæŒ‡æ ‡åˆ¤æ–­æœåŠ¡ä¸ºå¼‚å¸¸å¹¶ç†”æ–­æœåŠ¡åï¼Œå¯¹äºä¸€å®šæ—¶é—´å†…ï¼ˆç†”æ–­æ—¶é•¿å†…ï¼‰çš„è¯·æ±‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥æŠ¥é”™ï¼Œä¸é˜»å¡ä¸Šæ¸¸æœåŠ¡ï¼Œè®©è¯·æ±‚æ–¹æ¥è‡ªè¡Œå†³å®šå¦‚ä½•å¤„ç†ã€‚æˆ–è€…ç›´æ¥è§¦å‘æœåŠ¡é™çº§ã€‚æœåŠ¡é™çº§ç²—ç•¥çš„å¯ä»¥ç†è§£ä¸ºè¯·æ±‚æ­¤ä¸šåŠ¡çš„ç®€ç‰ˆï¼Œè¯¥ç®€ç‰ˆçœæ‰äº†å¾ˆå¤šéæ ¸å¿ƒæµç¨‹ï¼Œå¹¶ä¸”åªæ˜¯æœ€ç»ˆä¿è¯æµç¨‹å¤„ç†å®Œï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ã€‚å’Œç°å®ä¸­çš„ç†”æ–­ä¸€æ ·æœåŠ¡ç†”æ–­æ˜¯ä¼šè‡ªåŠ¨æ¢å¤çš„ã€‚ä¸€èˆ¬æ˜¯è§¦å‘ç†”æ–­åçš„ä¸€æ®µæ—¶é—´å†…æœåŠ¡å¤„äºç†”æ–­çŠ¶æ€ä¸æä¾›æœåŠ¡ï¼Œç„¶åè¿›å…¥åŠå¼€çŠ¶æ€ï¼Œè‹¥æ¥ä¸‹æ¥çš„å°‘é‡è¯·æ±‚æ²¡æœ‰æŠ¥é”™ä¸”å“åº”æ—¶é—´åˆç†åˆ™æœåŠ¡æ¢å¤ï¼Œå¦‚æœè¿˜æ˜¯å¼‚å¸¸åˆ™ç»§ç»­ç†”æ–­ã€‚\nsoulä¸­çš„Sentinelæ’ä»¶ Sentinelæ˜¯é˜¿é‡Œå¼€æºçš„é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„æµé‡æ§åˆ¶ç»„ä»¶ï¼Œä¸»è¦ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦æ¥å¸®åŠ©æ‚¨ä¿éšœå¾®æœåŠ¡çš„ç¨³å®šæ€§ã€‚Soulä½œä¸ºå›½å†…ä¼˜ç§€çš„å¼€æºç½‘å…³ï¼Œå°†Sentinelæ•´åˆä¸ºæ’ä»¶èå…¥äº†è‡ªå·±çš„ä½“ç³»ä¸­ï¼Œä½¿ç”¨æˆ·é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥ä½¿ç”¨Sentinelæä¾›çš„æµé‡æ§åˆ¶å’ŒæœåŠ¡ç†”æ–­åŠŸèƒ½ã€‚ä¸‹é¢å°†ç®€è¦ä»‹ç»åœ¨soulä¸­å¦‚ä½•é…ç½®ä½¿ç”¨sentinelæ’ä»¶ã€‚\né¦–å…ˆç™»é™†soulç®¡ç†å¹³å°åœ¨\u0026amp;rdquo;æ’ä»¶åˆ—è¡¨\u0026amp;rdquo; \u0026amp;ndash;\u0026amp;gt; \u0026amp;ldquo;sentinel\u0026amp;rdquo;ä¸­é…ç½®æ’ä»¶ã€‚å…¶ä¸­\u0026amp;rdquo;é€‰æ‹©å™¨\u0026amp;rdquo;çš„é…ç½®ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ä¸å†ä»‹ç»ï¼Œç‚¹å‡»\u0026amp;rdquo;å¢åŠ è§„åˆ™\u0026amp;rdquo;æ¥è¿›è¡Œå…·ä½“è®¾ç½®å¦‚ä¸‹å›¾ã€‚\nåœ¨è¿™ä¸ªé…ç½®é¡µé¢ä¸­\u0026amp;rdquo;åç§°\u0026amp;rdquo;ã€\u0026amp;rdquo;åŒ¹é…æ–¹å¼\u0026amp;rdquo;ã€\u0026amp;rdquo;æ¡ä»¶\u0026amp;rdquo;ã€\u0026amp;rdquo;æ—¥å¿—æ‰“å°\u0026amp;rdquo;ã€\u0026amp;rdquo;æ˜¯å¦å¼€å¯\u0026amp;rdquo;ã€\u0026amp;rdquo;æ‰§è¡Œé¡ºåº\u0026amp;rdquo;å±äºsoulæ’ä»¶çš„å¸¸è§„é…ç½®è¿™é‡Œä¹Ÿä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬é‡ç‚¹éœ€è¦å…³æ³¨çš„æ˜¯\u0026amp;rdquo;å¤„ç†\u0026amp;rdquo;ä¸­çš„é…ç½®é¡¹ã€‚è¿™äº›é…ç½®é¡¹ä¸»è¦å¯ä»¥åˆ†ä¸º2ç»„ï¼Œå‰4ä¸ªé€‰é¡¹æ˜¯å…³äºç†”æ–­çš„é…ç½®ï¼Œå4ä¸ªé€‰é¡¹æ˜¯å…³äºæµé‡æ§åˆ¶çš„é…ç½®ã€‚åœ¨soulä¸­æˆ‘ä»¬å¯ä»¥é’ˆå¯¹æŸä¸€ç»„è¯·æ±‚åŒæ—¶è®¾ç½®å®ƒçš„æµé‡æ§åˆ¶å’Œç†”æ–­ç­–ç•¥ã€‚ä¸‹é¢æ¥é‡ç‚¹åˆ†æä¸‹å„ä¸ªé…ç½®é¡¹å¦‚ä½•ä½¿ç”¨ã€‚\nç†”æ–­ é¦–å…ˆæ¥çœ‹ç†”æ–­ç›¸å…³çš„é…ç½®ï¼Œå®ƒæœ‰å››ä¸ªé…ç½®é¡¹\u0026amp;rdquo;ç†”æ–­é˜ˆå€¼\u0026amp;rdquo;ã€\u0026amp;rdquo;æ˜¯å¦å¼€å¯ç†”æ–­\u0026amp;rdquo;ã€\u0026amp;rdquo;ç†”æ–­çª—å£å¤§å°\u0026amp;rdquo;ä»¥åŠæ²¡æœ‰æ³¨åå­—çš„æ˜¯æœåŠ¡å¼‚å¸¸åˆ¤æ–­æ–¹å¼ã€‚ç†”æ–­å¼€å…³è¡¨ç¤ºæ˜¯å¦å¼€å¯ç†”æ–­ï¼ˆ1å¼€\\0ä¸å¼€ï¼‰ã€‚ç†”æ–­çª—å£å¤§å°æŒ‡çš„æ˜¯è§¦å‘ç†”æ–­åç»è¿‡å¤šå°‘ç§’åè¿›å…¥åŠå¼€çŠ¶æ€ï¼Œåœ¨åŠå¼€çŠ¶æ€å¦‚æœè¯·æ±‚æ­£å¸¸åˆ™ä¼šè¿›å…¥æ­£å¸¸çŠ¶æ€å¦‚æœè¯·æ±‚ä¾ç„¶ä¸æ­£å¸¸åˆ™ç»§ç»­ç†”æ–­ã€‚ç†”æ–­åˆ¤å®šæ–¹å¼å’Œç†”æ–­é˜ˆå€¼éœ€è¦ç»“åˆæ¥çœ‹ã€‚soulä¸­ä½¿ç”¨äº†sentinelçš„3ç§æœåŠ¡å¼‚å¸¸åˆ¤å®šæ–¹å¼ã€‚åˆ†åˆ«æ˜¯ï¼š\n æ…¢è°ƒç”¨æ¯”ä¾‹ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹é˜ˆå€¼æŒ‡çš„æ˜¯åˆ¤å®šä¸ºæ…¢è°ƒç”¨çš„æ¯«ç§’æ•°ã€‚æ…¢è°ƒç”¨çš„æ¯”ä¾‹é»˜è®¤æ˜¯1ä¸èƒ½æ›´æ”¹å³å•ä½ç»Ÿè®¡æ—¶é•¿å†…å…¨éƒ¨è¶…è¿‡é˜ˆå€¼åˆ™è§¦å‘ç†”æ–­ã€‚è¯¥æ¨¡å¼æ˜¯sentinelçš„é»˜è®¤æ¨¡å¼ã€‚ å¼‚å¸¸æ¯”ä¾‹ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹é˜ˆå€¼æŒ‡çš„æ˜¯å•ä½ç»Ÿè®¡æ—¶é•¿å†…å¼‚å¸¸è¯·æ±‚çš„æ¯”ä¾‹ä¸Šé™ï¼Œéœ€è¦å¡«å†™1ä¸ª[0.0, 1.0]çš„æ•°ï¼Œè¡¨ç¤º0%-100% å¼‚å¸¸æ•°ç­–ç•¥ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹é˜ˆå€¼æŒ‡çš„æ˜¯å•ä½ç»Ÿè®¡æ—¶é—´å†…å¼‚å¸¸è¯·æ±‚ä¸ªæ•°çš„ä¸Šé™ã€‚  éœ€è¦æ³¨æ„çš„æ˜¯soulå¯¹äºå•ä½ç»Ÿè®¡æ—¶ â€¦","date":1616112000,"description":"Soul Gateway Learning Sentinel Plugin","dir":"blog/soul_source_learning_20_sentinel/","fuzzywordcount":5500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"9d29b4ca51ed84f71e7e6e810e8a0126fef76476","permalink":"/blog/soul_source_learning_20_sentinel/","publishdate":"2021-03-19T00:00:00Z","readingtime":11,"relpermalink":"/blog/soul_source_learning_20_sentinel/","summary":"æ¦‚è¿° åœ¨ä¸šåŠ¡ç½‘å…³ä¸­ç†”æ–­å’Œæµé‡æ§åˆ¶éƒ½æ˜¯éå¸¸å¿…è¦çš„åŠŸèƒ½ã€‚soulåœ¨å®ç°è¿™éƒ¨åˆ†åŠŸèƒ½æ—¶ä½¿ç”¨äº†ä¸åŒçš„æˆç†Ÿç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•","tags":["Soul"],"title":"Soul Gateway Learning Sentinel Plugin","type":"blog","url":"/blog/soul_source_learning_20_sentinel/","wordcount":5435},{"author":"éª†æ½‡é¾™","categories":"Soul","content":" æ¦‚è¿° åœ¨ä¸šåŠ¡ç½‘å…³ä¸­ç†”æ–­å’Œæµé‡æ§åˆ¶éƒ½æ˜¯éå¸¸å¿…è¦çš„åŠŸèƒ½ã€‚soulåœ¨å®ç°è¿™éƒ¨åˆ†åŠŸèƒ½æ—¶ä½¿ç”¨äº†ä¸åŒçš„æˆç†Ÿç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨soulä¸­ä½¿ç”¨é˜¿é‡Œçš„Sentinelç»„ä»¶å®ç°ç†”æ–­åŠæµæ§åŠŸèƒ½ã€‚æœ¬æ–‡é¦–å…ˆä¼šä»‹ç»ç†”æ–­å’Œæµæ§çš„åœºæ™¯åŠæ„ä¹‰ã€‚ç„¶åä»‹ç»å¦‚ä½•åœ¨soulä¸Šé…ç½®ä½¿ç”¨sentinelæ’ä»¶åšæµæ§å’Œç†”æ–­ã€‚æœ€åä»æºç çš„å±‚é¢ç®€ç•¥åˆ†æsoulæ˜¯å¦‚ä½•ä½¿ç”¨Sentinelç»„ä»¶çš„ã€‚\nç†”æ–­å’Œæµé‡æ§åˆ¶ åœºæ™¯æè¿° ä¸šåŠ¡ç½‘å…³ä½œä¸ºæµé‡çš„å…¥å£ï¼Œæœ‰ä¿æŠ¤åç»§æœåŠ¡çš„èŒè´£ã€‚ä»¥ä¸‹ä¸¤ä¸ªå¯¹æœåŠ¡æœ‰ä¸¥é‡å±å®³çš„åœºæ™¯åœ¨ç”Ÿäº§ä¸­ç»å¸¸ä¼šé‡åˆ°ï¼Œä¹Ÿæ˜¯ä¸šåŠ¡ç½‘å…³å¿…é¡»è¦å…³æ³¨å¤„ç†çš„é—®é¢˜ã€‚ä¸€ç§æƒ…å†µæ˜¯åœ¨æ¯”å¦‚åŒ11æˆ–åŒ12è¿™äº›å¤§å‹ä¿ƒé”€æ—¶ï¼Œæ¥å£çš„è¯·æ±‚é‡æ˜¯å¹³æ—¶æ˜¯æ•°å€ï¼Œå¦‚æœæ²¡æœ‰è¯„ä¼°å¥½å®¹é‡ï¼Œè¿™ç§æ¿€å¢çš„è¯·æ±‚å¾ˆå®¹æ˜“å¯¼è‡´æ•´ä¸ªæœåŠ¡å®Œå…¨ä¸å¯ç”¨ã€‚è¿™ç§å®•æœºå¾€å¾€ä¸æ˜¯å› ä¸ºä¸šåŠ¡é€»è¾‘çš„æ¼æ´è€Œæ˜¯å› ä¸ºè¯·æ±‚è¿‡å¤šèµ„æºä¸å¤Ÿå¯¼è‡´çš„ã€‚å¦ä¸€ç§æƒ…å†µæ˜¯åœ¨æ•´ä¸ªæœåŠ¡ä½“ç³»ä¸­æœ‰ä¸€äº›æ ¸å¿ƒæœåŠ¡ï¼Œå¤šä¸ªä¸šåŠ¡æµç¨‹éƒ½ä¾èµ–è¯¥æœåŠ¡ã€‚ç„¶è€Œæ˜¯æœåŠ¡éƒ½æœ‰å‡ºç°å¤„ç†ä¸ç¨³å®šæˆ–è€…æœåŠ¡æŸåçš„æƒ…å†µï¼Œå¯¼è‡´è¯·æ±‚å¤„ç†æ—¶é—´é•¿æˆ–è€…è€æ˜¯é¢‘ç¹æŠ›å‡ºå¼‚å¸¸ã€‚æ’é™¤ä¸šåŠ¡BUGçš„æƒ…å†µï¼Œå¯èƒ½å°±æ˜¯çªå‘çš„éå¸¸éšæœºçš„é˜»å¡ï¼Œä¸€èˆ¬å‡ç¼“è¯·æ±‚é‡å°±ä¼šè‡ªåŠ¨ä¿®å¤ï¼Œä½†æ˜¯å¦‚æœä¸åŠ ä¿æŠ¤å°±æœ‰å‡ºç°å¤šç±³è¯ºæ•ˆåº”å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ã€‚æ­¤åœºæ™¯å’Œç¬¬ä¸€ç§åœºæ™¯æœ‰ç•¥å¾®ä¸åŒï¼Œç¬¬ä¸€ç§åœºæ™¯æ˜¯å®é™…æµé‡ç¡®å®å‡ºç°äº†ä¸å¯å¤„ç†çš„å³°å€¼ï¼Œè€Œç¬¬äºŒç§åœºæ™¯ä¸»è¦è€ƒè™‘çš„æ˜¯æœåŠ¡æœ¬èº«å‡ºç°äº†ä¸å¯é¿å…ã€ä¸å¯é¢„æµ‹çš„æŠ–åŠ¨è€Œå¼•å‘çš„è¿é”ååº”ã€‚\næµé‡æ§åˆ¶ é’ˆå¯¹ç¬¬ä¸€ç§åœºæ™¯æˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯è¿›è¡Œæµé‡æ§åˆ¶ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯ä¸šåŠ¡ç½‘å…³ä¿è¯æ‰“åˆ°åé¢çš„è¯·æ±‚æ˜¯ä¸šåŠ¡å¯ä»¥æ‰¿å—çš„é‡ï¼Œå¤šä½™çš„è¯·æ±‚ç›´æ¥æ‹’ç»æˆ–è€…åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œä¿è¯æœåŠ¡ä¸ä¼šå®•æ‰ï¼Œå¤§éƒ¨åˆ†è¯·æ±‚è¿˜æ˜¯å¯ä»¥æ­£å¸¸å¤„ç†ã€‚åœ¨è€ƒè™‘æµé‡æ§åˆ¶çš„ç­–ç•¥æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä¸»è¦æ€è€ƒä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n é€šè¿‡ä»€ä¹ˆè§’åº¦æ§åˆ¶æµé‡ï¼Ÿ é˜ˆå€¼æ˜¯å¤šå°‘ï¼Ÿ æµé‡æ§åˆ¶çš„ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ  å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ­£å¸¸æ€è·¯æ˜¯é€šè¿‡QPSæ¥ç›‘æ§æµé‡ï¼Œå³æ¯ç§’é’Ÿè¯·æ±‚çš„æ•°é‡è¶…è¿‡æŸé™é¢æ—¶è¿›è¡Œæµæ§ã€‚ä½†å…¶å®è¿˜æœ‰ä¸€ç§æ€è·¯æ˜¯ä»å¹¶å‘æ•°æ¥ç›‘æ§æµé‡ã€‚è¿™ç§æ§åˆ¶åœºæ™¯ä¹Ÿæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œä¾‹å¦‚å½“ä¸‹æ¸¸åº”ç”¨ç”±äºæŸç§åŸå› å¯¼è‡´æœåŠ¡ä¸ç¨³å®šã€å“åº”å»¶è¿Ÿå¢åŠ ï¼Œå¯¹äºç½‘å…³æ¥è¯´ï¼Œæ„å‘³ç€ååé‡ä¸‹é™å’Œæ›´å¤šçš„çº¿ç¨‹æ•°å ç”¨ï¼Œæç«¯æƒ…å†µä¸‹ç”šè‡³å¯¼è‡´çº¿ç¨‹æ± è€—å°½ã€‚ä»æŸç§æ„ä¹‰ä¸Šè®²é€šè¿‡å¹¶å‘è¿›è¡Œæµæ§å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šä¿æŠ¤ç½‘å…³æœåŠ¡æœ¬èº«ã€‚å¯¹äºç¬¬äºŒä¸ªé—®é¢˜é˜ˆå€¼æ¥è¯´æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯è§¦å‘æµæ§çš„è¾¹ç•Œï¼Œå¦‚æœä»QPSæ¥è€ƒè™‘å°±æ˜¯æ¯ç§’è¾¾åˆ°å¤šå°‘æ—¶å¼€å§‹æµæ§ï¼Œä»å¹¶å‘æ•°æ¥è€ƒé‡çš„è¯å°±æ˜¯è¯·æ±‚ä¸Šä¸‹æ–‡çš„çº¿ç¨‹æ•°ç›®è¶…è¿‡å¤šå°‘è¿›è¡Œæµæ§ã€‚å¯¹äºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬æœ‰ä»¥ä¸‹3ä¸­å¤„ç†æ–¹æ¡ˆï¼š\n ç›´æ¥æ‹’ç»ï¼Œè¿™ç§ç­–ç•¥éå¸¸å¥½ç†è§£å°±æ˜¯å½“QPSé«˜äºé˜ˆå€¼æ—¶ç›´æ¥æ‹’æ¥æœåŠ¡ï¼Œä¸æŠŠè¯·æ±‚ä¼ è¾“åˆ°åé¢çš„æœåŠ¡ä¸­ã€‚ é¢„çƒ­å¯åŠ¨ï¼Œè¿™ä¸ªç­–ç•¥æ‰€é’ˆå¯¹çš„åœºæ™¯æ˜¯ç³»ç»Ÿé•¿æœŸå¤„äºä½æ°´ä½çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å‡ºç°æµé‡çªç„¶å¢åŠ æ—¶ï¼Œè€Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ã€‚é¢„çƒ­å¯åŠ¨çš„æ–¹å¼æ˜¯è®©é˜ˆå€¼ç¼“æ…¢å¢åŠ ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…é€æ¸å¢åŠ é˜ˆå€¼ç›´è‡³è¾¾åˆ°è®¾ç½®ï¼Œç»™å†·ç³»ç»Ÿä¸€ä¸ªé¢„çƒ­çš„æ—¶é—´ï¼Œé¿å…å†·ç³»ç»Ÿè¢«å‹å®ã€‚å¯¹äºè¶…å‡ºé˜ˆå€¼çš„è¯·æ±‚ä¹Ÿæ˜¯è§¦å‘æ‹’ç»ã€‚ åŒ€é€Ÿæ’é˜Ÿï¼Œæ­¤ç­–ç•¥æ ¸å¿ƒæ€è·¯æ˜¯ä»¥å›ºå®šé—´éš”æ—¶é—´è®©è¯·æ±‚é€šè¿‡ã€‚å½“è¯·æ±‚åˆ°æ¥çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰è¯·æ±‚è·ç¦»ä¸Šä¸ªé€šè¿‡çš„è¯·æ±‚é€šè¿‡çš„æ—¶é—´é—´éš”ä¸å°äºé¢„è®¾å€¼ï¼Œåˆ™è®©å½“å‰è¯·æ±‚é€šè¿‡ï¼›å¦åˆ™ï¼Œè®¡ç®—å½“å‰è¯·æ±‚çš„é¢„æœŸé€šè¿‡æ—¶é—´ï¼Œå¦‚æœè¯¥è¯·æ±‚çš„é¢„æœŸé€šè¿‡æ—¶é—´å°äºè§„åˆ™é¢„è®¾çš„ timeout æ—¶é—´ï¼Œåˆ™è¯¥è¯·æ±‚ä¼šç­‰å¾…ç›´åˆ°é¢„è®¾æ—¶é—´åˆ°æ¥é€šè¿‡ï¼ˆæ’é˜Ÿç­‰å¾…å¤„ç†ï¼‰ï¼›è‹¥é¢„æœŸçš„é€šè¿‡æ—¶é—´è¶…å‡ºæœ€å¤§æ’é˜Ÿæ—¶é•¿ï¼Œåˆ™ç›´æ¥æ‹’æ¥è¿™ä¸ªè¯·æ±‚ã€‚  ç†”æ–­ é’ˆå¯¹ç¬¬äºŒç§åœºæ™¯é€šå¸¸çš„å¤„ç†æ–¹å¼æ˜¯è®¾ç½®æœåŠ¡ç†”æ–­ã€‚ç®€å•çš„è¯´å°±æ˜¯å½“æˆ‘ä»¬æ¢æµ‹çš„ä¸€ä¸ªæœåŠ¡å‡ºç°äº†å¼‚å¸¸ï¼Œåˆ™ä¸å†è®¿é—®å®ƒä»¥å…æ›´å¤šçš„è¯·æ±‚å¯¹å®ƒé€ æˆæ›´å¤§çš„å‹åŠ›ã€‚ä¸€æ®µæ—¶é—´åå¦‚æœæ¢æµ‹åˆ°æœåŠ¡æ¢å¤äº†å†å°†æµé‡å‘é€è¿‡å»ã€‚æˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ¤æ–­å‡ºè¿™ä¸ªæœåŠ¡æ˜¯å¦å‡ºç°äº†ä¸ç¨³å®š\\æŠ–åŠ¨çš„æƒ…å†µã€‚ç„¶åæ€è€ƒå¦‚æœå‘ç°äº†æŠ–åŠ¨çš„æœåŠ¡æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠã€‚å¦‚ä½•åˆ¤æ–­æœåŠ¡æ˜¯å¦æ¢å¤æ­£å¸¸äº†ã€‚å¯¹äºæœåŠ¡æ˜¯å¦ä¸ç¨³å®šè¿™ä¸€ç‚¹æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸€ä¸‹3ä¸ªæ–¹å¼è¿›è¡Œåˆ¤æ–­ã€‚\n æ…¢è°ƒç”¨æ¯”ä¾‹ï¼šå½“å•ä½ç»Ÿè®¡æ—¶é•¿å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ï¼Œå¹¶ä¸”è¶…è¿‡æœ€å¤§å¿å—æ—¶é—´çš„è¯·æ±‚å¤§äºé˜ˆå€¼ï¼Œåˆ™åˆ¤æ–­æœåŠ¡å¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­ï¼› å¼‚å¸¸æ¯”ä¾‹ï¼šå½“å•ä½ç»Ÿè®¡æ—¶é•¿å†…å¼‚å¸¸è¯·æ±‚çš„æ¯”ä¾‹å¤§äºé˜ˆå€¼åˆ™æˆ‘ä»¬åˆ¤å®šæœåŠ¡å¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­ï¼› å¼‚å¸¸æ•°ï¼šå½“å•ä½æ—¶é•¿å†…å‡ºç°å¼‚å¸¸çš„è¯·æ±‚çš„æ•°é‡çš„è¾¾åˆ°é˜ˆå€¼åˆ™åˆ¤å®šæœåŠ¡å¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­ï¼›  å½“æˆ‘ä»¬é€šè¿‡ä»¥ä¸Š3ä¸ªæŒ‡æ ‡åˆ¤æ–­æœåŠ¡ä¸ºå¼‚å¸¸å¹¶ç†”æ–­æœåŠ¡åï¼Œå¯¹äºä¸€å®šæ—¶é—´å†…ï¼ˆç†”æ–­æ—¶é•¿å†…ï¼‰çš„è¯·æ±‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥æŠ¥é”™ï¼Œä¸é˜»å¡ä¸Šæ¸¸æœåŠ¡ï¼Œè®©è¯·æ±‚æ–¹æ¥è‡ªè¡Œå†³å®šå¦‚ä½•å¤„ç†ã€‚æˆ–è€…ç›´æ¥è§¦å‘æœåŠ¡é™çº§ã€‚æœåŠ¡é™çº§ç²—ç•¥çš„å¯ä»¥ç†è§£ä¸ºè¯·æ±‚æ­¤ä¸šåŠ¡çš„ç®€ç‰ˆï¼Œè¯¥ç®€ç‰ˆçœæ‰äº†å¾ˆå¤šéæ ¸å¿ƒæµç¨‹ï¼Œå¹¶ä¸”åªæ˜¯æœ€ç»ˆä¿è¯æµç¨‹å¤„ç†å®Œï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ã€‚å’Œç°å®ä¸­çš„ç†”æ–­ä¸€æ ·æœåŠ¡ç†”æ–­æ˜¯ä¼šè‡ªåŠ¨æ¢å¤çš„ã€‚ä¸€èˆ¬æ˜¯è§¦å‘ç†”æ–­åçš„ä¸€æ®µæ—¶é—´å†…æœåŠ¡å¤„äºç†”æ–­çŠ¶æ€ä¸æä¾›æœåŠ¡ï¼Œç„¶åè¿›å…¥åŠå¼€çŠ¶æ€ï¼Œè‹¥æ¥ä¸‹æ¥çš„å°‘é‡è¯·æ±‚æ²¡æœ‰æŠ¥é”™ä¸”å“åº”æ—¶é—´åˆç†åˆ™æœåŠ¡æ¢å¤ï¼Œå¦‚æœè¿˜æ˜¯å¼‚å¸¸åˆ™ç»§ç»­ç†”æ–­ã€‚\nsoulä¸­çš„Sentinelæ’ä»¶ Sentinelæ˜¯é˜¿é‡Œå¼€æºçš„é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„æµé‡æ§åˆ¶ç»„ä»¶ï¼Œä¸»è¦ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦æ¥å¸®åŠ©æ‚¨ä¿éšœå¾®æœåŠ¡çš„ç¨³å®šæ€§ã€‚Soulä½œä¸ºå›½å†…ä¼˜ç§€çš„å¼€æºç½‘å…³ï¼Œå°†Sentinelæ•´åˆä¸ºæ’ä»¶èå…¥äº†è‡ªå·±çš„ä½“ç³»ä¸­ï¼Œä½¿ç”¨æˆ·é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥ä½¿ç”¨Sentinelæä¾›çš„æµé‡æ§åˆ¶å’ŒæœåŠ¡ç†”æ–­åŠŸèƒ½ã€‚ä¸‹é¢å°†ç®€è¦ä»‹ç»åœ¨soulä¸­å¦‚ä½•é…ç½®ä½¿ç”¨sentinelæ’ä»¶ã€‚\né¦–å…ˆç™»é™†soulç®¡ç†å¹³å°åœ¨\u0026amp;rdquo;æ’ä»¶åˆ—è¡¨\u0026amp;rdquo; \u0026amp;ndash;\u0026amp;gt; \u0026amp;ldquo;sentinel\u0026amp;rdquo;ä¸­é…ç½®æ’ä»¶ã€‚å…¶ä¸­\u0026amp;rdquo;é€‰æ‹©å™¨\u0026amp;rdquo;çš„é…ç½®ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ä¸å†ä»‹ç»ï¼Œç‚¹å‡»\u0026amp;rdquo;å¢åŠ è§„åˆ™\u0026amp;rdquo;æ¥è¿›è¡Œå…·ä½“è®¾ç½®å¦‚ä¸‹å›¾ã€‚\nåœ¨è¿™ä¸ªé…ç½®é¡µé¢ä¸­\u0026amp;rdquo;åç§°\u0026amp;rdquo;ã€\u0026amp;rdquo;åŒ¹é…æ–¹å¼\u0026amp;rdquo;ã€\u0026amp;rdquo;æ¡ä»¶\u0026amp;rdquo;ã€\u0026amp;rdquo;æ—¥å¿—æ‰“å°\u0026amp;rdquo;ã€\u0026amp;rdquo;æ˜¯å¦å¼€å¯\u0026amp;rdquo;ã€\u0026amp;rdquo;æ‰§è¡Œé¡ºåº\u0026amp;rdquo;å±äºsoulæ’ä»¶çš„å¸¸è§„é…ç½®è¿™é‡Œä¹Ÿä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬é‡ç‚¹éœ€è¦å…³æ³¨çš„æ˜¯\u0026amp;rdquo;å¤„ç†\u0026amp;rdquo;ä¸­çš„é…ç½®é¡¹ã€‚è¿™äº›é…ç½®é¡¹ä¸»è¦å¯ä»¥åˆ†ä¸º2ç»„ï¼Œå‰4ä¸ªé€‰é¡¹æ˜¯å…³äºç†”æ–­çš„é…ç½®ï¼Œå4ä¸ªé€‰é¡¹æ˜¯å…³äºæµé‡æ§åˆ¶çš„é…ç½®ã€‚åœ¨soulä¸­æˆ‘ä»¬å¯ä»¥é’ˆå¯¹æŸä¸€ç»„è¯·æ±‚åŒæ—¶è®¾ç½®å®ƒçš„æµé‡æ§åˆ¶å’Œç†”æ–­ç­–ç•¥ã€‚ä¸‹é¢æ¥é‡ç‚¹åˆ†æä¸‹å„ä¸ªé…ç½®é¡¹å¦‚ä½•ä½¿ç”¨ã€‚\nç†”æ–­ é¦–å…ˆæ¥çœ‹ç†”æ–­ç›¸å…³çš„é…ç½®ï¼Œå®ƒæœ‰å››ä¸ªé…ç½®é¡¹\u0026amp;rdquo;ç†”æ–­é˜ˆå€¼\u0026amp;rdquo;ã€\u0026amp;rdquo;æ˜¯å¦å¼€å¯ç†”æ–­\u0026amp;rdquo;ã€\u0026amp;rdquo;ç†”æ–­çª—å£å¤§å°\u0026amp;rdquo;ä»¥åŠæ²¡æœ‰æ³¨åå­—çš„æ˜¯æœåŠ¡å¼‚å¸¸åˆ¤æ–­æ–¹å¼ã€‚ç†”æ–­å¼€å…³è¡¨ç¤ºæ˜¯å¦å¼€å¯ç†”æ–­ï¼ˆ1å¼€\\0ä¸å¼€ï¼‰ã€‚ç†”æ–­çª—å£å¤§å°æŒ‡çš„æ˜¯è§¦å‘ç†”æ–­åç»è¿‡å¤šå°‘ç§’åè¿›å…¥åŠå¼€çŠ¶æ€ï¼Œåœ¨åŠå¼€çŠ¶æ€å¦‚æœè¯·æ±‚æ­£å¸¸åˆ™ä¼šè¿›å…¥æ­£å¸¸çŠ¶æ€å¦‚æœè¯·æ±‚ä¾ç„¶ä¸æ­£å¸¸åˆ™ç»§ç»­ç†”æ–­ã€‚ç†”æ–­åˆ¤å®šæ–¹å¼å’Œç†”æ–­é˜ˆå€¼éœ€è¦ç»“åˆæ¥çœ‹ã€‚soulä¸­ä½¿ç”¨äº†sentinelçš„3ç§æœåŠ¡å¼‚å¸¸åˆ¤å®šæ–¹å¼ã€‚åˆ†åˆ«æ˜¯ï¼š\n æ…¢è°ƒç”¨æ¯”ä¾‹ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹é˜ˆå€¼æŒ‡çš„æ˜¯åˆ¤å®šä¸ºæ…¢è°ƒç”¨çš„æ¯«ç§’æ•°ã€‚æ…¢è°ƒç”¨çš„æ¯”ä¾‹é»˜è®¤æ˜¯1ä¸èƒ½æ›´æ”¹å³å•ä½ç»Ÿè®¡æ—¶é•¿å†…å…¨éƒ¨è¶…è¿‡é˜ˆå€¼åˆ™è§¦å‘ç†”æ–­ã€‚è¯¥æ¨¡å¼æ˜¯sentinelçš„é»˜è®¤æ¨¡å¼ã€‚ å¼‚å¸¸æ¯”ä¾‹ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹é˜ˆå€¼æŒ‡çš„æ˜¯å•ä½ç»Ÿè®¡æ—¶é•¿å†…å¼‚å¸¸è¯·æ±‚çš„æ¯”ä¾‹ä¸Šé™ï¼Œéœ€è¦å¡«å†™1ä¸ª[0.0, 1.0]çš„æ•°ï¼Œè¡¨ç¤º0%-100% å¼‚å¸¸æ•°ç­–ç•¥ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹é˜ˆå€¼æŒ‡çš„æ˜¯å•ä½ç»Ÿè®¡æ—¶é—´å†…å¼‚å¸¸è¯·æ±‚ä¸ªæ•°çš„ä¸Šé™ã€‚  éœ€è¦æ³¨æ„çš„æ˜¯soulå¯¹äºå•ä½ç»Ÿè®¡æ—¶ â€¦","date":1616112000,"description":"Soulç½‘å…³å­¦ä¹ Sentinelæ’ä»¶åŸç†è§£æ","dir":"blog/soul_source_learning_20_sentinel/","fuzzywordcount":5500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"1c40490975310b56e4a167899f109da010538b6f","permalink":"/zh/blog/soul_source_learning_20_sentinel/","publishdate":"2021-03-19T00:00:00Z","readingtime":11,"relpermalink":"/zh/blog/soul_source_learning_20_sentinel/","summary":"æ¦‚è¿° åœ¨ä¸šåŠ¡ç½‘å…³ä¸­ç†”æ–­å’Œæµé‡æ§åˆ¶éƒ½æ˜¯éå¸¸å¿…è¦çš„åŠŸèƒ½ã€‚soulåœ¨å®ç°è¿™éƒ¨åˆ†åŠŸèƒ½æ—¶ä½¿ç”¨äº†ä¸åŒçš„æˆç†Ÿç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Sentinelæ’ä»¶åŸç†è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_20_sentinel/","wordcount":5435},{"author":"axing","categories":"Soul","content":" ä»‹ç» Soul ç½‘å…³åœ¨å¯¹ç›®æ ‡æœåŠ¡è¿›è¡Œä»£ç†è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ redirect æ’ä»¶æ¥é‡å®šå‘è¯·æ±‚ã€‚å…¶ä¸­åŒ…å«ä¸¤ç§åœºæ™¯ï¼šä¸€ç§æŠŠ redirectUrl é…ç½®ä¸ºç¬¬ä¸‰æ–¹URL åœ°å€ï¼Œç›´æ¥ä½¿ç”¨ 308 è¿›è¡Œè½¬å‘è·³è½¬ï¼Œå¦ä¸€ç§æ˜¯æŠŠ redirectUrl é…ç½®ä»¥ / å¼€å¤´çš„è½¬å‘åˆ°ç½‘å…³è‡ªèº«ã€‚\næ’ä»¶é…ç½®  åœ¨ soul-admin â€“\u0026amp;gt; æ’ä»¶ç®¡ç† â€“\u0026amp;gt; redirectï¼Œè®¾ç½®ä¸ºå¼€å¯ã€‚ åœ¨ soul-bootstrap é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  redirect çš„ maven ä¾èµ–ã€‚ åœ¨ soul- admin åå°è®¾ç½®é€‰æ‹©å™¨è§„åˆ™ï¼Œåªæœ‰åŒ¹é…çš„è¯·æ±‚ï¼Œæ‰ä¼šè¿›è¡Œè½¬å‘å’Œé‡å®šå‘ï¼Œè¯·è¯¦ç»†çœ‹ï¼šé€‰æ‹©å™¨è§„åˆ™ã€‚  Maven ä¾èµ– åœ¨ soul-bootstrap å·¥ç¨‹çš„ pom.xml æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶ä¾èµ–ã€‚\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-redirect\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  åœºæ™¯  é¡¾åæ€ä¹‰ï¼Œredirect æ’ä»¶å°±æ˜¯å¯¹ uri çš„é‡æ–°è½¬å‘å’Œé‡å®šå‘ã€‚\n é‡å®šå‘  æˆ‘ä»¬åœ¨ Rule é…ç½®è‡ªå®šä¹‰è·¯å¾„æ—¶ï¼Œåº”è¯¥ä¸ºä¸€ä¸ªå¯è¾¾çš„æœåŠ¡è·¯å¾„ã€‚ å½“åŒ¹é…åˆ°è¯·æ±‚åï¼Œæ ¹æ®è‡ªå®šä¹‰çš„è·¯å¾„ï¼ŒSoul ç½‘å…³ä¼šè¿›è¡Œ 308 æœåŠ¡è·³è½¬ã€‚  ç½‘å…³è‡ªèº«æ¥å£è½¬å‘  å½“æ»¡è¶³åŒ¹é…è§„åˆ™æ—¶ï¼ŒæœåŠ¡å†…éƒ¨ä¼šä½¿ç”¨ DispatcherHandler å†…éƒ¨æ¥å£è½¬å‘ã€‚ è¦å®ç°ç½‘å…³è‡ªèº«æ¥å£è½¬å‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é…ç½®è·¯å¾„ä½¿ç”¨ / ä½œä¸ºå‰ç¼€å¼€å§‹ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹å›¾ã€‚  æºç è§£æ åœ¨è§£æ redirect é‡å®šå‘æºç ä¹‹å‰ï¼Œæœ‰å¿…è¦è¯´ä¸€äº›å¤§å‰æï¼Œæˆ‘ä»¬æ˜ç™½ Soul ç½‘å…³åŸºäº SpringBoot WebFlux å®ç°ï¼Œå…¶ä¸­å¯¹äº WebFlux å¦‚æœé»˜è®¤ä»€ä¹ˆéƒ½ä¸é…ç½®ï¼Œè¯·æ±‚ä¼šé»˜è®¤æ‰§è¡Œ DispatcherHandler å¤„ç†ï¼Œè¿™ä¸ªæ˜¯å“åº”å¼ MVC çš„å¤„ç†æ ¸å¿ƒï¼Œå¯ä»¥çœ‹ä¸€ä¸‹åˆå§‹åŒ–ï¼š\nprotected void initStrategies(ApplicationContext context) { Map\u0026amp;lt;String, HandlerMapping\u0026amp;gt; mappingBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerMapping.class, true, false); ArrayList\u0026amp;lt;HandlerMapping\u0026amp;gt; mappings = new ArrayList(mappingBeans.values()); AnnotationAwareOrderComparator.sort(mappings); // handlerMapping ç›¸å…³ this.handlerMappings = Collections.unmodifiableList(mappings); Map\u0026amp;lt;String, HandlerAdapter\u0026amp;gt; adapterBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerAdapter.class, true, false); // handlerAdapter ç›¸å…³ this.handlerAdapters = new ArrayList(adapterBeans.values()); AnnotationAwareOrderComparator.sort(this.handlerAdapters); Map\u0026amp;lt;String, HandlerResultHandler\u0026amp;gt; beans = BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerResultHandler.class, true, false); // resultHandler ç›¸å…³ this.resultHandlers = new ArrayList(beans.values()); AnnotationAwareOrderComparator.sort(this.resultHandlers); }  å†ä¹‹åå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ MVC æ ¸å¿ƒå¤„ç† DispatcherHandler#handle æ–¹æ³•\npublic Mono\u0026amp;lt;Void\u0026amp;gt; handle(ServerWebExchange exchange) { return this.handlerMappings == null ? this.createNotFoundError() : Flux.fromIterable(this.handlerMappings).concatMap((mapping) -\u0026amp;gt; { return mapping.getHandler(exchange); }).next().switchIfEmpty(this.createNotFoundError()).flatMap((handler) -\u0026amp;gt; { return this.invokeHandler(exchange, handler); }).flatMap((result) -\u0026amp;gt; { return this.handleResult(exchange, result); }); }  ææ¸…æ¥šé»˜è®¤ DispatcherHandler å¦‚ä½•å¤„ç†ï¼Œæˆ‘ä»¬å†æ¥è¯´ä¸€ä¸‹ Soul ç½‘å…³ï¼ŒSoulWebHandler å®ç°äº† WebHandler æ¥å£ï¼Œå†æŠŠ BeanName å£°æ˜ä¸º webHandler æ›¿ä»£äº†ä¹‹å‰ DispatcherHandler æ³¨å†Œæˆé»˜è®¤å¤„ç† handlerã€‚\n@Bean(\u0026amp;quot;webHandler\u0026amp;quot;) public SoulWebHandler soulWebHandler(final ObjectProvider\u0026amp;lt;List\u0026amp;lt;SoulPlugin\u0026amp;gt;\u0026amp;gt; plugins) { List\u0026amp;lt;SoulPlugin\u0026amp;gt; pluginList = plugins.getIfAvailable(Collections::emptyList); List\u0026amp;lt;SoulPlugin\u0026amp;gt; soulPlugins = pluginList.stream() .sorted(Comparator.comparingInt(SoulPlugin::getOrder)).collect(Collectors.toList()); soulPlugins.forEach(soulPlugin -\u0026amp;gt; log.info(\u0026amp;quot;load plugin:[{}] [{}]\u0026amp;quot;, soulPlugin.named(), â€¦","date":1615852800,"description":"Soul Gateway Learning Redirect Plugin","dir":"blog/soul_source_learning_19_redirect/","fuzzywordcount":900,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"d97dadaae76c59dac2fdf3f2964e32fd5da61ab6","permalink":"/blog/soul_source_learning_19_redirect/","publishdate":"2021-03-16T00:00:00Z","readingtime":2,"relpermalink":"/blog/soul_source_learning_19_redirect/","summary":"ä»‹ç» Soul ç½‘å…³åœ¨å¯¹ç›®æ ‡æœåŠ¡è¿›è¡Œä»£ç†è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ redirect æ’ä»¶æ¥é‡å®šå‘è¯·æ±‚ã€‚å…¶ä¸­åŒ…å«ä¸¤ç§åœºæ™¯ï¼šä¸€ç§æŠŠ redirectUrl é…ç½®ä¸ºç¬¬ä¸‰æ–¹URL åœ°å€ï¼Œç›´æ¥ä½¿ç”¨ 308 è¿›è¡Œè½¬å‘è·³","tags":["Soul"],"title":"Soul Gateway Learning Redirect Plugin","type":"blog","url":"/blog/soul_source_learning_19_redirect/","wordcount":876},{"author":"é˜¿è¡Œ","categories":"Soul","content":" ä»‹ç» Soul ç½‘å…³åœ¨å¯¹ç›®æ ‡æœåŠ¡è¿›è¡Œä»£ç†è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ redirect æ’ä»¶æ¥é‡å®šå‘è¯·æ±‚ã€‚å…¶ä¸­åŒ…å«ä¸¤ç§åœºæ™¯ï¼šä¸€ç§æŠŠ redirectUrl é…ç½®ä¸ºç¬¬ä¸‰æ–¹URL åœ°å€ï¼Œç›´æ¥ä½¿ç”¨ 308 è¿›è¡Œè½¬å‘è·³è½¬ï¼Œå¦ä¸€ç§æ˜¯æŠŠ redirectUrl é…ç½®ä»¥ / å¼€å¤´çš„è½¬å‘åˆ°ç½‘å…³è‡ªèº«ã€‚\næ’ä»¶é…ç½®  åœ¨ soul-admin â€“\u0026amp;gt; æ’ä»¶ç®¡ç† â€“\u0026amp;gt; redirectï¼Œè®¾ç½®ä¸ºå¼€å¯ã€‚ åœ¨ soul-bootstrap é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  redirect çš„ maven ä¾èµ–ã€‚ åœ¨ soul- admin åå°è®¾ç½®é€‰æ‹©å™¨è§„åˆ™ï¼Œåªæœ‰åŒ¹é…çš„è¯·æ±‚ï¼Œæ‰ä¼šè¿›è¡Œè½¬å‘å’Œé‡å®šå‘ï¼Œè¯·è¯¦ç»†çœ‹ï¼šé€‰æ‹©å™¨è§„åˆ™ã€‚  Maven ä¾èµ– åœ¨ soul-bootstrap å·¥ç¨‹çš„ pom.xml æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶ä¾èµ–ã€‚\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-redirect\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  åœºæ™¯  é¡¾åæ€ä¹‰ï¼Œredirect æ’ä»¶å°±æ˜¯å¯¹ uri çš„é‡æ–°è½¬å‘å’Œé‡å®šå‘ã€‚\n é‡å®šå‘  æˆ‘ä»¬åœ¨ Rule é…ç½®è‡ªå®šä¹‰è·¯å¾„æ—¶ï¼Œåº”è¯¥ä¸ºä¸€ä¸ªå¯è¾¾çš„æœåŠ¡è·¯å¾„ã€‚ å½“åŒ¹é…åˆ°è¯·æ±‚åï¼Œæ ¹æ®è‡ªå®šä¹‰çš„è·¯å¾„ï¼ŒSoul ç½‘å…³ä¼šè¿›è¡Œ 308 æœåŠ¡è·³è½¬ã€‚  ç½‘å…³è‡ªèº«æ¥å£è½¬å‘  å½“æ»¡è¶³åŒ¹é…è§„åˆ™æ—¶ï¼ŒæœåŠ¡å†…éƒ¨ä¼šä½¿ç”¨ DispatcherHandler å†…éƒ¨æ¥å£è½¬å‘ã€‚ è¦å®ç°ç½‘å…³è‡ªèº«æ¥å£è½¬å‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é…ç½®è·¯å¾„ä½¿ç”¨ / ä½œä¸ºå‰ç¼€å¼€å§‹ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹å›¾ã€‚  æºç è§£æ åœ¨è§£æ redirect é‡å®šå‘æºç ä¹‹å‰ï¼Œæœ‰å¿…è¦è¯´ä¸€äº›å¤§å‰æï¼Œæˆ‘ä»¬æ˜ç™½ Soul ç½‘å…³åŸºäº SpringBoot WebFlux å®ç°ï¼Œå…¶ä¸­å¯¹äº WebFlux å¦‚æœé»˜è®¤ä»€ä¹ˆéƒ½ä¸é…ç½®ï¼Œè¯·æ±‚ä¼šé»˜è®¤æ‰§è¡Œ DispatcherHandler å¤„ç†ï¼Œè¿™ä¸ªæ˜¯å“åº”å¼ MVC çš„å¤„ç†æ ¸å¿ƒï¼Œå¯ä»¥çœ‹ä¸€ä¸‹åˆå§‹åŒ–ï¼š\nprotected void initStrategies(ApplicationContext context) { Map\u0026amp;lt;String, HandlerMapping\u0026amp;gt; mappingBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerMapping.class, true, false); ArrayList\u0026amp;lt;HandlerMapping\u0026amp;gt; mappings = new ArrayList(mappingBeans.values()); AnnotationAwareOrderComparator.sort(mappings); // handlerMapping ç›¸å…³ this.handlerMappings = Collections.unmodifiableList(mappings); Map\u0026amp;lt;String, HandlerAdapter\u0026amp;gt; adapterBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerAdapter.class, true, false); // handlerAdapter ç›¸å…³ this.handlerAdapters = new ArrayList(adapterBeans.values()); AnnotationAwareOrderComparator.sort(this.handlerAdapters); Map\u0026amp;lt;String, HandlerResultHandler\u0026amp;gt; beans = BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerResultHandler.class, true, false); // resultHandler ç›¸å…³ this.resultHandlers = new ArrayList(beans.values()); AnnotationAwareOrderComparator.sort(this.resultHandlers); }  å†ä¹‹åå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ MVC æ ¸å¿ƒå¤„ç† DispatcherHandler#handle æ–¹æ³•\npublic Mono\u0026amp;lt;Void\u0026amp;gt; handle(ServerWebExchange exchange) { return this.handlerMappings == null ? this.createNotFoundError() : Flux.fromIterable(this.handlerMappings).concatMap((mapping) -\u0026amp;gt; { return mapping.getHandler(exchange); }).next().switchIfEmpty(this.createNotFoundError()).flatMap((handler) -\u0026amp;gt; { return this.invokeHandler(exchange, handler); }).flatMap((result) -\u0026amp;gt; { return this.handleResult(exchange, result); }); }  ææ¸…æ¥šé»˜è®¤ DispatcherHandler å¦‚ä½•å¤„ç†ï¼Œæˆ‘ä»¬å†æ¥è¯´ä¸€ä¸‹ Soul ç½‘å…³ï¼ŒSoulWebHandler å®ç°äº† WebHandler æ¥å£ï¼Œå†æŠŠ BeanName å£°æ˜ä¸º webHandler æ›¿ä»£äº†ä¹‹å‰ DispatcherHandler æ³¨å†Œæˆé»˜è®¤å¤„ç† handlerã€‚\n@Bean(\u0026amp;quot;webHandler\u0026amp;quot;) public SoulWebHandler soulWebHandler(final ObjectProvider\u0026amp;lt;List\u0026amp;lt;SoulPlugin\u0026amp;gt;\u0026amp;gt; plugins) { List\u0026amp;lt;SoulPlugin\u0026amp;gt; pluginList = plugins.getIfAvailable(Collections::emptyList); List\u0026amp;lt;SoulPlugin\u0026amp;gt; soulPlugins = pluginList.stream() .sorted(Comparator.comparingInt(SoulPlugin::getOrder)).collect(Collectors.toList()); soulPlugins.forEach(soulPlugin -\u0026amp;gt; log.info(\u0026amp;quot;load plugin:[{}] [{}]\u0026amp;quot;, soulPlugin.named(), â€¦","date":1615852800,"description":"Soulç½‘å…³å­¦ä¹ Redirectæ’ä»¶åŸç†è§£æ","dir":"blog/soul_source_learning_19_redirect/","fuzzywordcount":900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"95ec347c061082c903d0c509f993e4cfe530c54a","permalink":"/zh/blog/soul_source_learning_19_redirect/","publishdate":"2021-03-16T00:00:00Z","readingtime":2,"relpermalink":"/zh/blog/soul_source_learning_19_redirect/","summary":"ä»‹ç» Soul ç½‘å…³åœ¨å¯¹ç›®æ ‡æœåŠ¡è¿›è¡Œä»£ç†è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ redirect æ’ä»¶æ¥é‡å®šå‘è¯·æ±‚ã€‚å…¶ä¸­åŒ…å«ä¸¤ç§åœºæ™¯ï¼šä¸€ç§æŠŠ redirectUrl é…ç½®ä¸ºç¬¬ä¸‰æ–¹URL åœ°å€ï¼Œç›´æ¥ä½¿ç”¨ 308 è¿›è¡Œè½¬å‘è·³","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Redirectæ’ä»¶åŸç†è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_19_redirect/","wordcount":876},{"author":"xiaoyu","categories":null,"content":" Dromara source code reading (Soul 2021 first activity)  Date: Sunday, February 6, 2021 Timeï¼š20:00 â€“ 23:00 Location: Tencent Meeting  Activity Details 20:00 - 20:10 The opening introduces the recent dream code sharing situation by kimming \u0026amp;amp; å´”\n20:10 - 20:25 Introduction to SPI and how Soul SPI is enhanced by zhuming\n20:25 - 20:50 Introduction to Reactive Programming by Ztzzz\n20:50 - 21:10 Soul Unit Test by yangze\n21:10 - 21:25 Fault-tolerant design by jiangwenbo\n21:25 - 21:40 Soul Web Flux loading process and processing request analysis by rwby\n21:40 - 21:55 Soul current limiting and fusing analysis by liupenghui\n21:55 - 22:05 Summary of common Java problems by muou\n22:05 - 22:20 How to open a social interface by weikai\n22:20 - 22:30 Summary and Community Development Prospects by Xiaoyu\n","date":1612623600,"description":"","dir":"activities/dromara-cloud-native-meet-02/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"faab4b595dfdc1ef36894292b9b6e3f94fe7dd93","permalink":"/activities/dromara-cloud-native-meet-02/","publishdate":"2021-02-06T15:00:00Z","readingtime":1,"relpermalink":"/activities/dromara-cloud-native-meet-02/","summary":"Dromara source code reading (Soul 2021 first activity) Date: Sunday, February 6, 2021 Timeï¼š20:00 â€“ 23:00 Location: Tencent Meeting Activity Details 20:00 - 20:10 The opening introduces the recent dream code sharing situation by kimming \u0026amp; å´” 20:10 - 20:25 Introduction to SPI and how Soul SPI is enhanced by zhuming 20:25 - 20:50 Introduction to Reactive Programming by Ztzzz 20:50","tags":["Soul","Dromara","Reactor"],"title":"Dromara Soul Source Code 01 Reading Sharing Session 02","type":"activities","url":"/activities/dromara-cloud-native-meet-02/","wordcount":140},{"author":"xiaoyu","categories":null,"content":" Dromara æºç é˜…è¯»ï¼ˆSoul 2021 é¦–æ¬¡æ´»åŠ¨ï¼‰  æ—¥æœŸï¼š2021å¹´2æœˆ6æ—¥ï¼Œæ˜ŸæœŸæ—¥ æ—¶é—´ï¼š20:00 â€“ 23:00 åœ°ç‚¹ï¼šçº¿ä¸Šè…¾è®¯ä¼šè®®å®¤  æ´»åŠ¨è¯¦æƒ… 20:00 - 20:10 å¼€åœºä»‹ç»è¿‘æœŸæ¢¦ç åˆ†äº«æƒ…å†µ by kimming \u0026amp;amp; å´”\n20:10 - 20:25 SPI ä»‹ç»ä»¥åŠSoul SPI å¦‚ä½•å¢å¼ºå®ç° by æœ±æ˜\n20:25 - 20:50 å“åº”å¼ç¼–ç¨‹ä»‹ç» by Ztzzz\n20:50 - 21:10 Soulå•æµ‹å°ç»“ by é˜¿è¡Œ\n21:10 - 21:25 å®¹é”™è®¾è®¡ by è’‹æ–‡åš\n21:25 - 21:40 Soul WebFluxåŠ è½½æµç¨‹ä»¥åŠå¤„ç†è¯·æ±‚åˆ†æ by rwby\n21:40 - 21:55 Soulé™æµå’Œç†”æ–­åˆ†æ by åˆ˜é¹è¾‰\n21:55 - 22:05 Javaå¸¸è§é—®é¢˜æ€»ç»“ by æœ¨å¶\n22:05 - 22:20 å¦‚ä½•æ‰“å¼€ç¤¾äº¤é¢ by ä¼Ÿæ¥·\n22:20 - 22:30 Soul ä½œè€… çŒ«å¤§äºº æ€»ç»“ä¸ å±•æœ› by çŒ«å¤§äºº\n","date":1612623600,"description":"","dir":"activities/dromara-cloud-native-meet-02/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"d826e2bfc7d2e798952b6db25fd4b739d2c6ef30","permalink":"/zh/activities/dromara-cloud-native-meet-02/","publishdate":"2021-02-06T15:00:00Z","readingtime":1,"relpermalink":"/zh/activities/dromara-cloud-native-meet-02/","summary":"Dromara æºç é˜…è¯»ï¼ˆSoul 2021 é¦–æ¬¡æ´»åŠ¨ï¼‰ æ—¥æœŸï¼š2021å¹´2æœˆ6æ—¥ï¼Œæ˜ŸæœŸæ—¥ æ—¶é—´ï¼š20:00 â€“ 23:00 åœ°ç‚¹ï¼šçº¿ä¸Šè…¾è®¯ä¼šè®®å®¤ æ´»åŠ¨è¯¦æƒ… 20:00 - 20:10 å¼€åœºä»‹ç»è¿‘æœŸæ¢¦ç åˆ†äº«æƒ…","tags":["Soul","Dromara","Reactor"],"title":"Dromara Soul æºç 01æœŸé˜…è¯»åˆ†äº«ä¼š02","type":"activities","url":"/zh/activities/dromara-cloud-native-meet-02/","wordcount":224},{"author":"shenxiangjun","categories":"Soul","content":" æ’ä»¶æ¦‚è¿° æ’ä»¶å®šä½\ndivide æ’ä»¶æ˜¯ä¸€ä¸ª http æ­£å‘ä»£ç†æ’ä»¶ï¼Œæ‰€æœ‰çš„ http è¯·æ±‚éƒ½ç”±è¯¥æ’ä»¶è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ï¼ˆå…·ä½“çš„è´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨è§„åˆ™ä¸­æŒ‡å®šï¼‰ã€‚\nç”Ÿæ•ˆæ—¶æœº\nå½“è¯·æ±‚å¤´çš„ rpcType = http ä¸”æ’ä»¶å¼€å¯æ—¶ï¼Œå®ƒå°†æ ¹æ®è¯·æ±‚å‚æ•°åŒ¹é…è§„åˆ™ï¼Œæœ€ç»ˆäº¤ç”±ä¸‹æ¸¸æ’ä»¶è¿›è¡Œå“åº”å¼ä»£ç†è°ƒç”¨ã€‚\næ’ä»¶å¤„ç†æµç¨‹ 1ï¼‰å…ˆå›é¡¾ä¸‹è¯·æ±‚å¤„ç†ç±»æ’ä»¶çš„é€šç”¨æµç¨‹ï¼ˆAbstractSoulPlugin # executeï¼‰ï¼š\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange, final SoulPluginChain chain) { // è·å–æ’ä»¶æ•°æ® String pluginName = named(); final PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName); if (pluginData != null \u0026amp;amp;\u0026amp;amp; pluginData.getEnabled()) { // è·å–é€‰æ‹©å™¨æ•°æ® final Collection\u0026amp;lt;SelectorData\u0026amp;gt; selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName); ... // åŒ¹é…é€‰æ‹©å™¨ final SelectorData selectorData = matchSelector(exchange, selectors); ... // è·å–è§„åˆ™æ•°æ® final List\u0026amp;lt;RuleData\u0026amp;gt; rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId()); ... // åŒ¹é…è§„åˆ™ RuleData rule; if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) { //get last rule = rules.get(rules.size() - 1); } else { rule = matchRule(exchange, rules); } ... // æ‰§è¡Œè‡ªå®šä¹‰å¤„ç† return doExecute(exchange, chain, selectorData, rule); } // ç»§ç»­æ‰§è¡Œæ’ä»¶é“¾å¤„ç† return chain.execute(exchange); }  AbstractSoulPlugin å…ˆåŒ¹é…åˆ°å¯¹åº”çš„é€‰æ‹©å™¨å’Œè§„åˆ™ï¼ŒåŒ¹é…é€šè¿‡åˆ™æ‰§è¡Œæ’ä»¶çš„è‡ªå®šä¹‰å¤„ç†ã€‚\n2ï¼‰å†æ¥çœ‹çœ‹ divide æ’ä»¶çš„è‡ªå®šä¹‰å¤„ç†æµç¨‹ï¼ˆDividePlugin # doExecuteï¼‰ï¼š\nprotected Mono\u0026amp;lt;Void\u0026amp;gt; doExecute(final ServerWebExchange exchange, final SoulPluginChain chain, final SelectorData selector, final RuleData rule) { ... // å‡†å¤‡è§„åˆ™å¤„ç†å¯¹è±¡ï¼ˆå†…éƒ¨æŒæœ‰ï¼šè´Ÿè½½å‡è¡¡ç®—æ³•åã€é‡è¯•æ¬¡æ•°ä»¥åŠè¶…æ—¶æ—¶é—´ï¼‰ final DivideRuleHandle ruleHandle = GsonUtils.getInstance().fromJson(rule.getHandle(), DivideRuleHandle.class); // è·å–é€‰æ‹©å™¨å¯¹åº”çš„å¯ç”¨æœåŠ¡åˆ—è¡¨ final List\u0026amp;lt;DivideUpstream\u0026amp;gt; upstreamList = UpstreamCacheManager.getInstance().findUpstreamListBySelectorId(selector.getId()); ... // é€‰æ‹©å…·ä½“åˆ†å‘çš„æœåŠ¡å®ä¾‹ipï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ final String ip = Objects.requireNonNull(exchange.getRequest().getRemoteAddress()).getAddress().getHostAddress(); DivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip); ... //è®¾ç½® http urlã€è¶…æ—¶æ—¶é—´ä»¥åŠé‡è¯•æ¬¡æ•° String domain = buildDomain(divideUpstream); String realURL = buildRealURL(domain, soulContext, exchange); exchange.getAttributes().put(Constants.HTTP_URL, realURL); exchange.getAttributes().put(Constants.HTTP_TIME_OUT, ruleHandle.getTimeout()); exchange.getAttributes().put(Constants.HTTP_RETRY, ruleHandle.getRetry()); // ç»§ç»­æ‰§è¡Œæ’ä»¶é“¾å¤„ç† return chain.execute(exchange); }  DividePlugin å…ˆè·å–åˆ°é€‰æ‹©å™¨å¯¹åº”çš„å¯ç”¨æœåŠ¡åˆ—è¡¨ï¼Œç„¶åè¿›è¡Œè´Ÿè½½å‡è¡¡é€‰æ‹©å³å°†åˆ†å‘çš„ç›®æ ‡æœåŠ¡å™¨å®ä¾‹ipï¼Œæœ€åè®¾ç½®æœ€ç»ˆçš„ urlã€è¶…æ—¶æ—¶é—´ä»¥åŠé‡è¯•æ¬¡æ•°å¹¶äº¤ç”±æ’ä»¶é“¾ä¸‹æ¸¸è¿›è¡Œå¤„ç†ã€‚\næ³¨æ„ï¼š\ndivide æ’ä»¶è‡ªèº«åªæ˜¯è´Ÿè´£æ ¹æ®é€‰æ‹©å™¨ã€è§„åˆ™å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥é€‰å‡ºå¾…åˆ†å‘çš„æœåŠ¡å™¨å®ä¾‹ï¼Œå¹¶ä¸ç›´æ¥å‘åç«¯æœåŠ¡å‘èµ· http è¯·æ±‚ã€‚\nä¸»æœºæ¢æ´» ä¸Šé¢æåˆ°ï¼Œdivide éœ€è¦è·å–æœåŠ¡åˆ—è¡¨ï¼Œçœ‹ä¸‹è·å–çš„å®ç°ï¼ˆUpstreamCacheManager # findUpstreamListBySelectorIdï¼‰ï¼š\npublic List\u0026amp;lt;DivideUpstream\u0026amp;gt; findUpstreamListBySelectorId(final String selectorId) { return UPSTREAM_MAP_TEMP.get(selectorId); }  å†…éƒ¨é€šè¿‡ UPSTREAM_MAP_TEMP è·å–å­˜æ´»æœåŠ¡åˆ—è¡¨ã€‚\nUpstreamCacheManager å†…éƒ¨ç»´æŠ¤äº†ä¸¤ä»½æ•£åˆ—è¡¨ï¼š\n UPSTREAM_MAPï¼š  å…¨é‡æœåŠ¡æ•£åˆ—è¡¨ï¼Œè´Ÿè´£å­˜æ”¾å…¨é‡çš„ä¸Šæ¸¸æœåŠ¡ä¿¡æ¯ï¼Œkey ä¸º é€‰æ‹©å™¨ idï¼Œvalue ä¸ºä½¿ç”¨ç›¸åŒé€‰æ‹©å™¨çš„æœåŠ¡åˆ—è¡¨ã€‚\n UPSTREAM_MAP_TEMPï¼š  ä¸´æ—¶æœåŠ¡æ•£åˆ—è¡¨ï¼Œè´Ÿè´£å­˜æ”¾æ´»åŠ¨çš„ä¸Šæ¸¸æœåŠ¡ä¿¡æ¯ï¼Œkey ä¸º é€‰æ‹©å™¨ idï¼Œvalue ä¸ºä½¿ç”¨ç›¸åŒé€‰æ‹©å™¨çš„æœåŠ¡åˆ—è¡¨ã€‚\nå‰é¢ç« èŠ‚æˆ‘ä»¬æåˆ°ï¼Œæ•°æ®åŒæ­¥æ—¶ï¼Œsubmit æ–¹æ³•åŒæ—¶æ›´æ–°äº† UPSTREAM_MAP å’Œ UPSTREAM_MAP_TEMPï¼Œ â€¦","date":1612137600,"description":"Soul Gateway Learning Divide Plugin Source Code Interpretation","dir":"blog/soul_source_learning_16_divide_sxj/","fuzzywordcount":2500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"b3d4d8488eec7a36af4a06ef0bf4a4c3bba065b9","permalink":"/blog/soul_source_learning_16_divide_sxj/","publishdate":"2021-02-01T00:00:00Z","readingtime":5,"relpermalink":"/blog/soul_source_learning_16_divide_sxj/","summary":"æ’ä»¶æ¦‚è¿° æ’ä»¶å®šä½ divide æ’ä»¶æ˜¯ä¸€ä¸ª http æ­£å‘ä»£ç†æ’ä»¶ï¼Œæ‰€æœ‰çš„ http è¯·æ±‚éƒ½ç”±è¯¥æ’ä»¶è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ï¼ˆå…·ä½“çš„è´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨è§„åˆ™ä¸­æŒ‡å®šï¼‰ã€‚ ç”Ÿæ•ˆæ—¶æœº å½“è¯·æ±‚å¤´çš„ rpcType =","tags":["Soul"],"title":"Soul Gateway Learning Divide Plugin Source Code Interpretation","type":"blog","url":"/blog/soul_source_learning_16_divide_sxj/","wordcount":2408},{"author":"æ²ˆç¥¥ä¿Š","categories":"Soul","content":" æ’ä»¶æ¦‚è¿° æ’ä»¶å®šä½\ndivide æ’ä»¶æ˜¯ä¸€ä¸ª http æ­£å‘ä»£ç†æ’ä»¶ï¼Œæ‰€æœ‰çš„ http è¯·æ±‚éƒ½ç”±è¯¥æ’ä»¶è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ï¼ˆå…·ä½“çš„è´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨è§„åˆ™ä¸­æŒ‡å®šï¼‰ã€‚\nç”Ÿæ•ˆæ—¶æœº\nå½“è¯·æ±‚å¤´çš„ rpcType = http ä¸”æ’ä»¶å¼€å¯æ—¶ï¼Œå®ƒå°†æ ¹æ®è¯·æ±‚å‚æ•°åŒ¹é…è§„åˆ™ï¼Œæœ€ç»ˆäº¤ç”±ä¸‹æ¸¸æ’ä»¶è¿›è¡Œå“åº”å¼ä»£ç†è°ƒç”¨ã€‚\næ’ä»¶å¤„ç†æµç¨‹ 1ï¼‰å…ˆå›é¡¾ä¸‹è¯·æ±‚å¤„ç†ç±»æ’ä»¶çš„é€šç”¨æµç¨‹ï¼ˆAbstractSoulPlugin # executeï¼‰ï¼š\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange, final SoulPluginChain chain) { // è·å–æ’ä»¶æ•°æ® String pluginName = named(); final PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName); if (pluginData != null \u0026amp;amp;\u0026amp;amp; pluginData.getEnabled()) { // è·å–é€‰æ‹©å™¨æ•°æ® final Collection\u0026amp;lt;SelectorData\u0026amp;gt; selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName); ... // åŒ¹é…é€‰æ‹©å™¨ final SelectorData selectorData = matchSelector(exchange, selectors); ... // è·å–è§„åˆ™æ•°æ® final List\u0026amp;lt;RuleData\u0026amp;gt; rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId()); ... // åŒ¹é…è§„åˆ™ RuleData rule; if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) { //get last rule = rules.get(rules.size() - 1); } else { rule = matchRule(exchange, rules); } ... // æ‰§è¡Œè‡ªå®šä¹‰å¤„ç† return doExecute(exchange, chain, selectorData, rule); } // ç»§ç»­æ‰§è¡Œæ’ä»¶é“¾å¤„ç† return chain.execute(exchange); }  AbstractSoulPlugin å…ˆåŒ¹é…åˆ°å¯¹åº”çš„é€‰æ‹©å™¨å’Œè§„åˆ™ï¼ŒåŒ¹é…é€šè¿‡åˆ™æ‰§è¡Œæ’ä»¶çš„è‡ªå®šä¹‰å¤„ç†ã€‚\n2ï¼‰å†æ¥çœ‹çœ‹ divide æ’ä»¶çš„è‡ªå®šä¹‰å¤„ç†æµç¨‹ï¼ˆDividePlugin # doExecuteï¼‰ï¼š\nprotected Mono\u0026amp;lt;Void\u0026amp;gt; doExecute(final ServerWebExchange exchange, final SoulPluginChain chain, final SelectorData selector, final RuleData rule) { ... // å‡†å¤‡è§„åˆ™å¤„ç†å¯¹è±¡ï¼ˆå†…éƒ¨æŒæœ‰ï¼šè´Ÿè½½å‡è¡¡ç®—æ³•åã€é‡è¯•æ¬¡æ•°ä»¥åŠè¶…æ—¶æ—¶é—´ï¼‰ final DivideRuleHandle ruleHandle = GsonUtils.getInstance().fromJson(rule.getHandle(), DivideRuleHandle.class); // è·å–é€‰æ‹©å™¨å¯¹åº”çš„å¯ç”¨æœåŠ¡åˆ—è¡¨ final List\u0026amp;lt;DivideUpstream\u0026amp;gt; upstreamList = UpstreamCacheManager.getInstance().findUpstreamListBySelectorId(selector.getId()); ... // é€‰æ‹©å…·ä½“åˆ†å‘çš„æœåŠ¡å®ä¾‹ipï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ final String ip = Objects.requireNonNull(exchange.getRequest().getRemoteAddress()).getAddress().getHostAddress(); DivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip); ... //è®¾ç½® http urlã€è¶…æ—¶æ—¶é—´ä»¥åŠé‡è¯•æ¬¡æ•° String domain = buildDomain(divideUpstream); String realURL = buildRealURL(domain, soulContext, exchange); exchange.getAttributes().put(Constants.HTTP_URL, realURL); exchange.getAttributes().put(Constants.HTTP_TIME_OUT, ruleHandle.getTimeout()); exchange.getAttributes().put(Constants.HTTP_RETRY, ruleHandle.getRetry()); // ç»§ç»­æ‰§è¡Œæ’ä»¶é“¾å¤„ç† return chain.execute(exchange); }  DividePlugin å…ˆè·å–åˆ°é€‰æ‹©å™¨å¯¹åº”çš„å¯ç”¨æœåŠ¡åˆ—è¡¨ï¼Œç„¶åè¿›è¡Œè´Ÿè½½å‡è¡¡é€‰æ‹©å³å°†åˆ†å‘çš„ç›®æ ‡æœåŠ¡å™¨å®ä¾‹ipï¼Œæœ€åè®¾ç½®æœ€ç»ˆçš„ urlã€è¶…æ—¶æ—¶é—´ä»¥åŠé‡è¯•æ¬¡æ•°å¹¶äº¤ç”±æ’ä»¶é“¾ä¸‹æ¸¸è¿›è¡Œå¤„ç†ã€‚\næ³¨æ„ï¼š\ndivide æ’ä»¶è‡ªèº«åªæ˜¯è´Ÿè´£æ ¹æ®é€‰æ‹©å™¨ã€è§„åˆ™å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥é€‰å‡ºå¾…åˆ†å‘çš„æœåŠ¡å™¨å®ä¾‹ï¼Œå¹¶ä¸ç›´æ¥å‘åç«¯æœåŠ¡å‘èµ· http è¯·æ±‚ã€‚\nä¸»æœºæ¢æ´» ä¸Šé¢æåˆ°ï¼Œdivide éœ€è¦è·å–æœåŠ¡åˆ—è¡¨ï¼Œçœ‹ä¸‹è·å–çš„å®ç°ï¼ˆUpstreamCacheManager # findUpstreamListBySelectorIdï¼‰ï¼š\npublic List\u0026amp;lt;DivideUpstream\u0026amp;gt; findUpstreamListBySelectorId(final String selectorId) { return UPSTREAM_MAP_TEMP.get(selectorId); }  å†…éƒ¨é€šè¿‡ UPSTREAM_MAP_TEMP è·å–å­˜æ´»æœåŠ¡åˆ—è¡¨ã€‚\nUpstreamCacheManager å†…éƒ¨ç»´æŠ¤äº†ä¸¤ä»½æ•£åˆ—è¡¨ï¼š\n UPSTREAM_MAPï¼š  å…¨é‡æœåŠ¡æ•£åˆ—è¡¨ï¼Œè´Ÿè´£å­˜æ”¾å…¨é‡çš„ä¸Šæ¸¸æœåŠ¡ä¿¡æ¯ï¼Œkey ä¸º é€‰æ‹©å™¨ idï¼Œvalue ä¸ºä½¿ç”¨ç›¸åŒé€‰æ‹©å™¨çš„æœåŠ¡åˆ—è¡¨ã€‚\n UPSTREAM_MAP_TEMPï¼š  ä¸´æ—¶æœåŠ¡æ•£åˆ—è¡¨ï¼Œè´Ÿè´£å­˜æ”¾æ´»åŠ¨çš„ä¸Šæ¸¸æœåŠ¡ä¿¡æ¯ï¼Œkey ä¸º é€‰æ‹©å™¨ idï¼Œvalue ä¸ºä½¿ç”¨ç›¸åŒé€‰æ‹©å™¨çš„æœåŠ¡åˆ—è¡¨ã€‚\nå‰é¢ç« èŠ‚æˆ‘ä»¬æåˆ°ï¼Œæ•°æ®åŒæ­¥æ—¶ï¼Œsubmit æ–¹æ³•åŒæ—¶æ›´æ–°äº† UPSTREAM_MAP å’Œ UPSTREAM_MAP_TEMPï¼Œ â€¦","date":1612137600,"description":"Soulç½‘å…³å­¦ä¹ divideæ’ä»¶æºç è§£è¯»","dir":"blog/soul_source_learning_16_divide_sxj/","fuzzywordcount":2500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"701ca7bf27aab96487e8d559a3b555cfa3b49182","permalink":"/zh/blog/soul_source_learning_16_divide_sxj/","publishdate":"2021-02-01T00:00:00Z","readingtime":5,"relpermalink":"/zh/blog/soul_source_learning_16_divide_sxj/","summary":"æ’ä»¶æ¦‚è¿° æ’ä»¶å®šä½ divide æ’ä»¶æ˜¯ä¸€ä¸ª http æ­£å‘ä»£ç†æ’ä»¶ï¼Œæ‰€æœ‰çš„ http è¯·æ±‚éƒ½ç”±è¯¥æ’ä»¶è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ï¼ˆå…·ä½“çš„è´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨è§„åˆ™ä¸­æŒ‡å®šï¼‰ã€‚ ç”Ÿæ•ˆæ—¶æœº å½“è¯·æ±‚å¤´çš„ rpcType =","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ divideæ’ä»¶æºç è§£è¯»","type":"blog","url":"/zh/blog/soul_source_learning_16_divide_sxj/","wordcount":2408},{"author":"baiyu","categories":"Soul","content":" å›é¡¾ åœ¨ä¹‹å‰çš„HTTPè¯·æ±‚åˆæ¢çš„æ–‡ç« ä¸­ï¼Œå¤§ä½“æ¢³ç†äº†Soulæ’ä»¶çš„å¤„ç†æµç¨‹ï¼Œä¹Ÿå¾—çŸ¥äº†DividePluginã€GlobalPluginï¼ŒWebClientPluginï¼ŒWebCilentResponsePluginæ’ä»¶çš„å…·ä½“ä½œç”¨ï¼Œåœ¨æ¢³ç†æµç¨‹ä¸­ï¼Œå‘ç°Soulçš„æ’ä»¶æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œåœ¨DividePluginæ’ä»¶ä¹‹å‰åšäº†å¾ˆå¤šå‰ç½®æ’ä»¶çš„æ“ä½œï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬æœ¬ç« åˆ†æçš„ä¸»é¢˜RateLimiterPlugin é™æµæ’ä»¶ï¼ˆå…¶ä¸­ä¸€ç§ï¼‰ã€‚\nå­¦ä¹ ä½¿ç”¨ é˜…è¯»å®˜æ–¹æ–‡æ¡£ å¯¹å…¶æœ‰å¤§æ¦‚è®¤çŸ¥ rateLimiteræ’ä»¶\né€šè¿‡å®˜æ–¹æ–‡æ¡£çš„é˜…è¯»æˆ‘ä»¬å¾—çŸ¥äº†RateLimiterPluginçš„ä¸¤ä¸ªæ ¸å¿ƒç‚¹é€Ÿç‡ã€å®¹é‡\nä»¥ä¸‹è®²è§£æ¥æºäºå®˜æ–¹æ–‡æ¡£\n å®¹é‡ï¼šæ˜¯å…è®¸ç”¨æˆ·åœ¨ä¸€ç§’é’Ÿå†…æ‰§è¡Œçš„æœ€å¤§è¯·æ±‚æ•°ã€‚è¿™æ˜¯ä»¤ç‰Œæ¡¶å¯ä»¥ä¿å­˜çš„ä»¤ç‰Œæ•°ã€‚ é€Ÿç‡ï¼šæ˜¯ä½ å…è®¸ç”¨æˆ·æ¯ç§’æ‰§è¡Œå¤šå°‘è¯·æ±‚ï¼Œè€Œä¸¢å¼ƒä»»ä½•è¯·æ±‚ã€‚è¿™æ˜¯ä»¤ç‰Œæ¡¶çš„å¡«å……é€Ÿç‡ã€‚  å¯ä»¥çœ‹å‡ºRateLimiterPluginé™æµæ ¸å¿ƒåœ¨äºä»¤ç‰Œæ¡¶ç®—æ³•çš„å®ç°ã€‚\npsï¼šå…³äºé™æµç®—æ³•å¸¸è§çš„æœ‰å››ç§å®ç°ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ¼æ–—ç®—æ³•ï¼Œè®¡æ•°å™¨ï¼ˆå›ºå®šçª—å£ï¼‰ç®—æ³•ï¼Œæ»‘åŠ¨çª—å£ç®—æ³•ï¼Œè¯¦æƒ…çœ‹å¯¹åº”åšå®¢ä»‹ç»\nåˆæ­¥ä½¿ç”¨ å¯ç”¨å¯¹åº”æ’ä»¶ åœ¨Soulç½‘å…³ç³»ç»Ÿç®¡ç†-æ’ä»¶ç®¡ç†å¤„ï¼Œå°†çŠ¶æ€æ›´æ”¹ä¸ºå¯ç”¨çŠ¶æ€ï¼Œæ³¨æ„æ­¤å¤„éœ€è¦å¡«å†™redisç›¸å…³é…ç½®ï¼ŒSoulä»¤ç‰Œæ¡¶åŸºäºRedisã€‚\nä¸ºä»€ä¹ˆSoulçš„ä»¤ç‰Œæ¡¶ç®—æ³•è¦åŸºäºredisï¼Ÿ\nåœ¨é›†ç¾¤éƒ¨ç½²æƒ…å†µä¸‹å•æœºçš„ä»¤ç‰Œæ¡¶ç®—æ³•æ— æ³•æ»¡è¶³é›†ç¾¤çŠ¶æ€ä¸‹çš„é™æµåŠŸèƒ½ã€‚\næ·»åŠ é™æµé€‰æ‹©å™¨ã€è§„åˆ™ åœ¨Soulç½‘å…³æ’ä»¶åˆ—è¡¨å¤„ï¼Œé€‰æ‹©rate_limiterå¤„æ·»åŠ è§„åˆ™åŠé€‰æ‹©å™¨é…ç½®ï¼Œä¸æ‡‚å¦‚ä½•æ·»åŠ çš„å¯ä»¥å…ˆé˜…è¯»é€‰æ‹©å™¨\\è§„åˆ™çš„åŒ¹é…é€»è¾‘. åœ¨æ­¤å¤„æ·»åŠ çš„å®¹é‡åŠé€Ÿç‡éƒ½ä¸º1 ä¸»è¦ä¸ºäº†éªŒè¯æ’ä»¶æ˜¯å¦å¯ç”¨ã€‚\næ¥å£å¯¹åº”è®¿é—® è°ƒç”¨http://127.0.0.1:9195/http/test/findByUserId?userId=10 è¿›è¡Œè®¿é—®ï¼Œé€Ÿç‡é«˜äº1çš„æƒ…å†µä¸‹å‡ºç°å¦‚ä¸‹æ¥å£è¿”å›ç»“æœï¼Œä»£è¡¨æ’ä»¶æˆåŠŸä½¿ç”¨ã€‚\n{ \u0026amp;quot;code\u0026amp;quot;: 429, \u0026amp;quot;message\u0026amp;quot;: \u0026amp;quot;You have been restricted, please try again later!\u0026amp;quot;, \u0026amp;quot;data\u0026amp;quot;: null }  æºç é˜…è¯» å¸¦ç€é—®é¢˜è¯»æºç  å¦‚ä½•ä¿è¯åœ¨é¡µé¢ä¿®æ”¹redisé…ç½®åç«‹å³ç”Ÿæ•ˆçš„ï¼Œåå°å¯¹åº”çš„redisè¿æ¥ç«‹é©¬å˜æ›´çš„ã€‚ ç­”æ¡ˆè‡ªç„¶æ•°æ®åŒæ­¥è„±ä¸äº†å¹²ç³»ã€‚\nåœ¨ä¿®æ”¹æ’ä»¶çš„é…ç½®æ—¶ï¼Œä¹Ÿå‘å¸ƒäº†ä¸€ä¸ªæ’ä»¶æ•°æ®å˜æ›´çš„äº‹ä»¶é€šçŸ¥ï¼Œåœ¨ä¹‹å‰æ¢³ç†Soulç½‘å…³åŒæ­¥æ•°æ®æ•´ä½“æµç¨‹æ—¶,å·²ç»å¾—çŸ¥ä¿®æ”¹çš„æ’ä»¶æ•°æ®é™¤äº†æ›´æ”¹äº†JVMç¼“å­˜å†…çš„æ•°æ®å¤–ï¼Œè¿˜å¯¹å¯¹åº”çš„æ’ä»¶è¿›è¡Œä¸‹å‘æ“ä½œï¼Œå¦‚ä¸‹å›¾ è€Œé’ˆå¯¹äºRateLimiterPluginè€Œè¨€ï¼Œå…¶ä¸»è¦å®ç°äº†handlePluginçš„æ¥å£ï¼Œé‚£è¿™ä¸ªå¯¹åº”çš„å®ç°åˆ°åº•åšäº†å“ªäº›äº‹å‘¢ï¼Ÿ\nå…·ä½“çš„æ–¹æ³•ä¸ºRateLimiterPluginDataHandlerçš„handlerPluginã€‚\npublic void handlerPlugin(final PluginData pluginData) { if (Objects.nonNull(pluginData) \u0026amp;amp;\u0026amp;amp; pluginData.getEnabled()) { //åŠ è½½é™æµæ’ä»¶é…ç½® RateLimiterConfig rateLimiterConfig = GsonUtils.getInstance().fromJson(pluginData.getConfig(), RateLimiterConfig.class); //åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°åŠ è½½redisè¿æ¥å€¼ if (Objects.isNull(Singleton.INST.get(ReactiveRedisTemplate.class)) || Objects.isNull(Singleton.INST.get(RateLimiterConfig.class)) || !rateLimiterConfig.equals(Singleton.INST.get(RateLimiterConfig.class))) { LettuceConnectionFactory lettuceConnectionFactory = createLettuceConnectionFactory(rateLimiterConfig); lettuceConnectionFactory.afterPropertiesSet(); RedisSerializer\u0026amp;lt;String\u0026amp;gt; serializer = new StringRedisSerializer(); RedisSerializationContext\u0026amp;lt;String, String\u0026amp;gt; serializationContext = RedisSerializationContext.\u0026amp;lt;String, String\u0026amp;gt;newSerializationContext().key(serializer).value(serializer).hashKey(serializer).hashValue(serializer).build(); ReactiveRedisTemplate\u0026amp;lt;String, String\u0026amp;gt; reactiveRedisTemplate = new ReactiveRedisTemplate\u0026amp;lt;\u0026amp;gt;(lettuceConnectionFactory, serializationContext); Singleton.INST.single(ReactiveRedisTemplate.class, reactiveRedisTemplate); Singleton.INST.single(RateLimiterConfig.class, rateLimiterConfig); } } }  ä¸Šè¿°ä»£ç æœ‰å‡ ä¸ªè¾ƒä¸ºå…³é”®çš„ç‚¹ï¼š\nåœ¨ä¸Šè¿°ä»£ç ä¸­å°†é™æµæ’ä»¶çš„é…ç½®å’Œå¯¹åº”çš„redisTemplateå®ä¾‹æ”¾å…¥äº†Singleton.INSTå¯¹åº”mapä¸­ã€‚\nåœ¨æ’ä»¶æ•°æ®è¿‡æ¥æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨redisè¿æ¥å®ä¾‹ï¼Œæ˜¯å¦å­˜åœ¨é™æµé…ç½®å®ä¾‹ï¼Œåˆ¤æ–­å½“å‰çš„é™æµé…ç½®å®ä¾‹æ˜¯å¦å’Œä¼ é€’çš„é™æµå®ä¾‹ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±è®¤ä¸ºé…ç½®æ˜¯æœ‰æ›´æ”¹çš„ï¼Œå°±é‡æ–°åˆå§‹åŒ–é™æµå®ä¾‹å’Œè¿æ¥æ± å®ä¾‹æ”¾å…¥Singleton.INSTçš„mapä¸­ï¼Œç”±æ­¤è€Œè¨€å°±ä¿è¯äº†æ›´æ”¹redisé…ç½®çš„çƒ­éƒ¨ç½²ã€‚\nifåˆ¤æ–­ä¸­çš„ä»£ç å°±æ˜¯åŸºäºSpringDataRediså°è£…æˆä¸€ä¸ªå¯¹åº”redisè¿æ¥æ± ã€‚\npsï¼šSingleton.INSTæ˜¯æšä¸¾å®ç°çš„å•ä¾‹æ¨¡å¼ã€‚\né™æµæ’ä»¶æ˜¯åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ Debug è°ƒç”¨é“¾ RateLimiterPluginç”±äºéœ€è¦å¯¹ç‰¹å®šè§„åˆ™è¿›è¡Œé™æµï¼Œæ‰€ä»¥ä¾æ—§å®ç°äº†AbstractSoulPluginï¼Œä¹‹å‰ä¾æ—§æ¢³ç†è¿‡AbstractSoulPluginçš„excuteçš„æ–¹æ³•å’Œä½œç”¨äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¸é‡å¤è§£é‡Šï¼Œå¯è§‚çœ‹Http è°ƒç”¨æµç¨‹æ¢³ç†ï¼ŒåŠ æ·±å¯¹è¯¥ç±»çš„å°è±¡ã€‚\næœ¬èŠ‚é‡ç‚¹è¿˜æ˜¯çœ‹å…·ä½“çš„doexcuteæ–¹æ³•åšäº†å“ªäº›äº‹ã€‚\nprotected Mono\u0026amp;lt;Void\u0026amp;gt; doExecute(final ServerWebExchange exchange, final â€¦","date":1611964800,"description":"Soul Gateway Learning RateLimiter Plugin","dir":"blog/soul_source_learning_18_ratelimiter/","fuzzywordcount":2900,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"db0951d342de017007813dee74f0f9db075775b9","permalink":"/blog/soul_source_learning_18_ratelimiter/","publishdate":"2021-01-30T00:00:00Z","readingtime":6,"relpermalink":"/blog/soul_source_learning_18_ratelimiter/","summary":"å›é¡¾ åœ¨ä¹‹å‰çš„HTTPè¯·æ±‚åˆæ¢çš„æ–‡ç« ä¸­ï¼Œå¤§ä½“æ¢³ç†äº†Soulæ’ä»¶çš„å¤„ç†æµç¨‹ï¼Œä¹Ÿå¾—çŸ¥äº†DividePluginã€GlobalPluginï¼ŒWebC","tags":["Soul"],"title":"Soul Gateway Learning RateLimiter Plugin","type":"blog","url":"/blog/soul_source_learning_18_ratelimiter/","wordcount":2829},{"author":"zhuming","categories":"Soul","content":" SOUL ä¸­ SPI çš„ä½¿ç”¨ åœ¨ä¹‹å‰åˆ†æ divide æ’ä»¶çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ—¶, æœ‰çœ‹åˆ°è¿‡ä¸€è¡Œä»£ç :\nDivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip);  å½“æ—¶å¾ˆç®€å•çš„ç•¥è¿‡äº†å®ƒçš„å®ç°, å®ƒçš„ä½œç”¨å¾ˆå®¹æ˜“åˆ†æ, è°ƒç”¨ä¸€ä¸ªçœ‹ä¼¼å·¥å…·ç±»çš„æ–¹æ³•, ä¼ å…¥å¤šä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤, è¿”å›ä¸€ä¸ªèŠ‚ç‚¹. è¿™æ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨.\nä½†æ˜¯ç»†èŠ‚å´éå¸¸å¤š, æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ä½¿ç”¨ SPI æ¥é€‰æ‹©å…·ä½“çš„å®ç°ç±». çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„ä»£ç :\npublic class LoadBalanceUtils { public static DivideUpstream selector(final List\u0026amp;lt;DivideUpstream\u0026amp;gt; upstreamList, final String algorithm, final String ip) { // è°ƒç”¨è‡ªå®šä¹‰çš„ SPI å¾—åˆ°ä¸€ä¸ªå­ç±» LoadBalance loadBalance = ExtensionLoader.getExtensionLoader(LoadBalance.class).getJoin(algorithm); return loadBalance.select(upstreamList, ip); } }  åé¢çš„æ˜¯è°ƒç”¨å…·ä½“å­ç±»çš„ select() æ–¹æ³•, æ ¹æ®å­ç±»çš„ä¸åŒå®ç°, æœ€ç»ˆä¼šè¡¨ç°å‡ºå„ç§å½¢å¼. ç›®å‰çš„å­ç±»å®ç°æœ‰:\n HashLoadBalance RandomLoadBalance RoundRobinLoadBalance  å…³é”®å°±åœ¨äº ExtensionLoader.getExtensionLoader(LoadBalance.class).getJoin(algorithm); è¿™è¡Œ.\nåœ¨ç ”ç©¶å®ƒä¹‹å‰, æˆ‘ä»¬å…ˆä¸å¦¨ç ”ç©¶ä¸‹ Java æä¾›çš„ SPI æœºåˆ¶.\nJava SPI \u0026amp;lt;\u0026amp;lt;é«˜å¯ç”¨å¯ä¼¸ç¼©å¾®æœåŠ¡æ¶æ„\u0026amp;gt;\u0026amp;gt; ç¬¬3ç«  Apache Dubbo æ¡†æ¶çš„åŸç†ä¸å®ç° ä¸­æœ‰è¿™æ ·çš„ä¸€å¥å®šä¹‰.\n SPI å…¨ç§°ä¸º Service Provider Interface, æ˜¯ JDK å†…ç½®çš„ä¸€ç§æœåŠ¡æä¾›å‘ç°åŠŸèƒ½, ä¸€ç§åŠ¨æ€æ›¿æ¢å‘ç°çš„æœºåˆ¶. ä¸¾ä¸ªä¾‹å­, è¦æƒ³åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç»™ä¸€ä¸ªæ¥å£æ·»åŠ å®ç°, åªéœ€è¦æ·»åŠ ä¸€ä¸ªå®ç°å³å¯.\n ä¹¦ä¸­ä¹Ÿæœ‰ä¸ªéå¸¸å½¢è±¡çš„è„‘å›¾, å±•ç¤ºäº† SPI çš„ä½¿ç”¨:\nä¹Ÿå°±æ˜¯è¯´åœ¨æˆ‘ä»¬ä»£ç ä¸­çš„å®ç°é‡Œ, æ— éœ€å»å†™å…¥ä¸€ä¸ª Factory å·¥å‚, ç”¨ MAP å»åŒ…è£…ä¸€äº›å­ç±», æœ€ç»ˆè¿”å›çš„ç±»å‹æ˜¯çˆ¶æ¥å£. åªéœ€è¦å®šä¹‰å¥½èµ„æºæ–‡ä»¶, è®©çˆ¶æ¥å£ä¸å®ƒçš„å­ç±»åœ¨æ–‡ä»¶ä¸­å†™æ˜, å³å¯é€šè¿‡è®¾ç½®å¥½çš„æ–¹å¼æ‹¿åˆ°æ‰€æœ‰å®šä¹‰çš„å­ç±»å¯¹è±¡:\nServiceLoader\u0026amp;lt;Interface\u0026amp;gt; loaders = ServiceLoader.load(Interface.class) for(Interface interface : loaders){ System.out.println(interface.toString()); }  è¿™ç§æ–¹å¼ç›¸æ¯”ä¸æ™®é€šçš„å·¥å‚æ¨¡å¼, è‚¯å®šæ˜¯æ›´ç¬¦åˆå¼€é—­åŸåˆ™, æ–°åŠ å…¥ä¸€ä¸ªå­ç±»ä¸ç”¨å»ä¿®æ”¹å·¥å‚æ–¹æ³•, è€Œæ˜¯ç¼–è¾‘èµ„æºæ–‡ä»¶.\nä»ä¸€ä¸ª Demo å¼€å§‹ æŒ‰ç…§ SPI çš„è§„èŒƒ, æˆ‘å»ºäº†ä¸€ä¸ª demo, çœ‹çœ‹å…·ä½“çš„å®ç°æ•ˆæœ\nAnimal ä¸­å®šä¹‰ä¸€ä¸ª run() æ–¹æ³•, è€Œå­ç±»å®ç°å®ƒ.\npublic interface Animal { void run(); } public class Dog implements Animal { @Override public void run() { System.out.println(\u0026amp;quot;ç‹—åœ¨è·‘\u0026amp;quot;); } } public class Horse implements Animal { @Override public void run() { System.out.println(\u0026amp;quot;é©¬åœ¨è·‘\u0026amp;quot;); } }  ä½¿ç”¨ SPI çš„åŠ è½½ç±», å¾—åˆ°å­ç±»çš„æ‰§è¡Œç»“æœ:\nprivate static void test() { final ServiceLoader\u0026amp;lt;Animal\u0026amp;gt; load = ServiceLoader.load(Animal.class); for (Animal animal : load) { System.out.println(animal); animal.run(); } }  åœ¨è°ƒç”¨åæˆ‘ä»¬å¾—åˆ°ä¹‹å‰åœ¨èµ„æºæ–‡ä»¶ä¸­å†™å…¥çš„å®ç°ç±», å¹¶æˆåŠŸè°ƒå–å®ƒä»¬å„è‡ªçš„ run() æ–¹æ³•.\nåˆ°è¿™é‡Œæˆ‘äº§ç”Ÿä¸€ä¸ªç–‘é—®, æ˜¯å¦æ¯æ¬¡è°ƒç”¨ ServiceLoader.load(Animal.class) è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡? å¦‚æœæ˜¯æˆ‘çŒœæµ‹å®ƒæ˜¯åœ¨å¯åŠ¨æ—¶åŠ è½½åˆ°ç¼“å­˜äº†, å¦‚æœä¸æ˜¯, å¯èƒ½å°±æ˜¯åœ¨åº•å±‚ç”¨äº†åå°„, æ¯æ¬¡è°ƒç”¨éƒ½æœ‰ä¸€å®šæ¶ˆè€—. æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„å®éªŒ:\npublic static void main(String[] args) { for (int i = 0; i \u0026amp;lt; 2; i++) { test(); System.out.println(\u0026amp;quot;----------\u0026amp;quot;); } } private static void test() { final ServiceLoader\u0026amp;lt;Animal\u0026amp;gt; load = ServiceLoader.load(Animal.class); for (Animal animal : load) { System.out.println(animal); animal.run(); } }  ä¸¤æ¬¡è°ƒç”¨å‡ºç°çš„å¯¹è±¡å´ä¸ä¸€æ ·, ä¸ç”±è®©æˆ‘æ›¿å…¶æ€§èƒ½æªå¿ƒä¸€ä¸‹, æ‰€ä»¥æˆ‘ä»¬å…ˆåˆ†æä¸‹å®ƒçš„ä»£ç , çœ‹çœ‹åˆ°åº•æ€ä¹ˆå®ç°.\nSPI çš„å®ç° æ‰¾åˆ° java.util,ServiceLoaders è¿™ä¸ªç±», å…¥çœ¼æœ€é†’ç›®çš„å°±æ˜¯ä¹‹å‰æˆ‘ä»¬æŒ‰ç…§è§„èŒƒæ”¾ç½®èµ„æºæ–‡ä»¶çš„ç›®å½•\npublic final class ServiceLoader\u0026amp;lt;S\u0026amp;gt; implements Iterable\u0026amp;lt;S\u0026amp;gt; { private static final String PREFIX = \u0026amp;quot;META-INF/services/\u0026amp;quot;; }  åœ¨ debug PREFIX å±æ€§çš„è¢«è°ƒç”¨å¤„æ—¶, å‘ç° ServiceLoader.load å®é™…æ˜¯ä½¿ç”¨æ‡’åŠ è½½çš„æ–¹å¼, å¹¶æ²¡æœ‰åœ¨è°ƒç”¨å®ƒçš„æ—¶å€™, æ‰¾å¯»åˆ°å®é™…è¿”å›ç±», è€Œæ˜¯åœ¨éå†æ—¶æŸ¥æ‰¾.\nå®ƒçš„æ‡’åŠ è½½å…·ä½“å®ç°åœ¨å¦‚ä¸‹ä»£ç :\npublic final class ServiceLoader\u0026amp;lt;S\u0026amp;gt; implements Iterable\u0026amp;lt;S\u0026amp;gt; { public static \u0026amp;lt;S\u0026amp;gt; ServiceLoader\u0026amp;lt;S\u0026amp;gt; load(Class\u0026amp;lt;S\u0026amp;gt; service) { // è·å–å½“å‰çš„ç±»åŠ è½½å™¨ (æˆ‘ä»¬è‡ªå·±çš„é€šå¸¸æ˜¯å¼Ÿä¸­å¼Ÿ AppClassLoader ) ClassLoader cl = â€¦","date":1611964800,"description":"Soul Gateway Learning SPI","dir":"blog/soul_source_learning_11_SPI/","fuzzywordcount":5500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"8c7be975f6b6695eae8651599bb6c5897e045ced","permalink":"/blog/soul_source_learning_11_spi/","publishdate":"2021-01-30T00:00:00Z","readingtime":11,"relpermalink":"/blog/soul_source_learning_11_spi/","summary":"SOUL ä¸­ SPI çš„ä½¿ç”¨ åœ¨ä¹‹å‰åˆ†æ divide æ’ä»¶çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ—¶, æœ‰çœ‹åˆ°è¿‡ä¸€è¡Œä»£ç : DivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip); å½“æ—¶å¾ˆç®€å•çš„ç•¥è¿‡äº†å®ƒçš„å®ç°, å®ƒçš„ä½œç”¨å¾ˆå®¹æ˜“åˆ†æ, è°ƒç”¨ä¸€ä¸ªçœ‹ä¼¼å·¥å…·","tags":["Soul"],"title":"Soul Gateway Learning SPI","type":"blog","url":"/blog/soul_source_learning_11_spi/","wordcount":5445},{"author":"ç™¾é’°","categories":"Soul","content":" å›é¡¾ åœ¨ä¹‹å‰çš„HTTPè¯·æ±‚åˆæ¢çš„æ–‡ç« ä¸­ï¼Œå¤§ä½“æ¢³ç†äº†Soulæ’ä»¶çš„å¤„ç†æµç¨‹ï¼Œä¹Ÿå¾—çŸ¥äº†DividePluginã€GlobalPluginï¼ŒWebClientPluginï¼ŒWebCilentResponsePluginæ’ä»¶çš„å…·ä½“ä½œç”¨ï¼Œåœ¨æ¢³ç†æµç¨‹ä¸­ï¼Œå‘ç°Soulçš„æ’ä»¶æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œåœ¨DividePluginæ’ä»¶ä¹‹å‰åšäº†å¾ˆå¤šå‰ç½®æ’ä»¶çš„æ“ä½œï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬æœ¬ç« åˆ†æçš„ä¸»é¢˜RateLimiterPlugin é™æµæ’ä»¶ï¼ˆå…¶ä¸­ä¸€ç§ï¼‰ã€‚\nå­¦ä¹ ä½¿ç”¨ é˜…è¯»å®˜æ–¹æ–‡æ¡£ å¯¹å…¶æœ‰å¤§æ¦‚è®¤çŸ¥ rateLimiteræ’ä»¶\né€šè¿‡å®˜æ–¹æ–‡æ¡£çš„é˜…è¯»æˆ‘ä»¬å¾—çŸ¥äº†RateLimiterPluginçš„ä¸¤ä¸ªæ ¸å¿ƒç‚¹é€Ÿç‡ã€å®¹é‡\nä»¥ä¸‹è®²è§£æ¥æºäºå®˜æ–¹æ–‡æ¡£\n å®¹é‡ï¼šæ˜¯å…è®¸ç”¨æˆ·åœ¨ä¸€ç§’é’Ÿå†…æ‰§è¡Œçš„æœ€å¤§è¯·æ±‚æ•°ã€‚è¿™æ˜¯ä»¤ç‰Œæ¡¶å¯ä»¥ä¿å­˜çš„ä»¤ç‰Œæ•°ã€‚ é€Ÿç‡ï¼šæ˜¯ä½ å…è®¸ç”¨æˆ·æ¯ç§’æ‰§è¡Œå¤šå°‘è¯·æ±‚ï¼Œè€Œä¸¢å¼ƒä»»ä½•è¯·æ±‚ã€‚è¿™æ˜¯ä»¤ç‰Œæ¡¶çš„å¡«å……é€Ÿç‡ã€‚  å¯ä»¥çœ‹å‡ºRateLimiterPluginé™æµæ ¸å¿ƒåœ¨äºä»¤ç‰Œæ¡¶ç®—æ³•çš„å®ç°ã€‚\npsï¼šå…³äºé™æµç®—æ³•å¸¸è§çš„æœ‰å››ç§å®ç°ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ¼æ–—ç®—æ³•ï¼Œè®¡æ•°å™¨ï¼ˆå›ºå®šçª—å£ï¼‰ç®—æ³•ï¼Œæ»‘åŠ¨çª—å£ç®—æ³•ï¼Œè¯¦æƒ…çœ‹å¯¹åº”åšå®¢ä»‹ç»\nåˆæ­¥ä½¿ç”¨ å¯ç”¨å¯¹åº”æ’ä»¶ åœ¨Soulç½‘å…³ç³»ç»Ÿç®¡ç†-æ’ä»¶ç®¡ç†å¤„ï¼Œå°†çŠ¶æ€æ›´æ”¹ä¸ºå¯ç”¨çŠ¶æ€ï¼Œæ³¨æ„æ­¤å¤„éœ€è¦å¡«å†™redisç›¸å…³é…ç½®ï¼ŒSoulä»¤ç‰Œæ¡¶åŸºäºRedisã€‚\nä¸ºä»€ä¹ˆSoulçš„ä»¤ç‰Œæ¡¶ç®—æ³•è¦åŸºäºredisï¼Ÿ\nåœ¨é›†ç¾¤éƒ¨ç½²æƒ…å†µä¸‹å•æœºçš„ä»¤ç‰Œæ¡¶ç®—æ³•æ— æ³•æ»¡è¶³é›†ç¾¤çŠ¶æ€ä¸‹çš„é™æµåŠŸèƒ½ã€‚\næ·»åŠ é™æµé€‰æ‹©å™¨ã€è§„åˆ™ åœ¨Soulç½‘å…³æ’ä»¶åˆ—è¡¨å¤„ï¼Œé€‰æ‹©rate_limiterå¤„æ·»åŠ è§„åˆ™åŠé€‰æ‹©å™¨é…ç½®ï¼Œä¸æ‡‚å¦‚ä½•æ·»åŠ çš„å¯ä»¥å…ˆé˜…è¯»é€‰æ‹©å™¨\\è§„åˆ™çš„åŒ¹é…é€»è¾‘. åœ¨æ­¤å¤„æ·»åŠ çš„å®¹é‡åŠé€Ÿç‡éƒ½ä¸º1 ä¸»è¦ä¸ºäº†éªŒè¯æ’ä»¶æ˜¯å¦å¯ç”¨ã€‚\næ¥å£å¯¹åº”è®¿é—® è°ƒç”¨http://127.0.0.1:9195/http/test/findByUserId?userId=10 è¿›è¡Œè®¿é—®ï¼Œé€Ÿç‡é«˜äº1çš„æƒ…å†µä¸‹å‡ºç°å¦‚ä¸‹æ¥å£è¿”å›ç»“æœï¼Œä»£è¡¨æ’ä»¶æˆåŠŸä½¿ç”¨ã€‚\n{ \u0026amp;quot;code\u0026amp;quot;: 429, \u0026amp;quot;message\u0026amp;quot;: \u0026amp;quot;You have been restricted, please try again later!\u0026amp;quot;, \u0026amp;quot;data\u0026amp;quot;: null }  æºç é˜…è¯» å¸¦ç€é—®é¢˜è¯»æºç  å¦‚ä½•ä¿è¯åœ¨é¡µé¢ä¿®æ”¹redisé…ç½®åç«‹å³ç”Ÿæ•ˆçš„ï¼Œåå°å¯¹åº”çš„redisè¿æ¥ç«‹é©¬å˜æ›´çš„ã€‚ ç­”æ¡ˆè‡ªç„¶æ•°æ®åŒæ­¥è„±ä¸äº†å¹²ç³»ã€‚\nåœ¨ä¿®æ”¹æ’ä»¶çš„é…ç½®æ—¶ï¼Œä¹Ÿå‘å¸ƒäº†ä¸€ä¸ªæ’ä»¶æ•°æ®å˜æ›´çš„äº‹ä»¶é€šçŸ¥ï¼Œåœ¨ä¹‹å‰æ¢³ç†Soulç½‘å…³åŒæ­¥æ•°æ®æ•´ä½“æµç¨‹æ—¶,å·²ç»å¾—çŸ¥ä¿®æ”¹çš„æ’ä»¶æ•°æ®é™¤äº†æ›´æ”¹äº†JVMç¼“å­˜å†…çš„æ•°æ®å¤–ï¼Œè¿˜å¯¹å¯¹åº”çš„æ’ä»¶è¿›è¡Œä¸‹å‘æ“ä½œï¼Œå¦‚ä¸‹å›¾ è€Œé’ˆå¯¹äºRateLimiterPluginè€Œè¨€ï¼Œå…¶ä¸»è¦å®ç°äº†handlePluginçš„æ¥å£ï¼Œé‚£è¿™ä¸ªå¯¹åº”çš„å®ç°åˆ°åº•åšäº†å“ªäº›äº‹å‘¢ï¼Ÿ\nå…·ä½“çš„æ–¹æ³•ä¸ºRateLimiterPluginDataHandlerçš„handlerPluginã€‚\npublic void handlerPlugin(final PluginData pluginData) { if (Objects.nonNull(pluginData) \u0026amp;amp;\u0026amp;amp; pluginData.getEnabled()) { //åŠ è½½é™æµæ’ä»¶é…ç½® RateLimiterConfig rateLimiterConfig = GsonUtils.getInstance().fromJson(pluginData.getConfig(), RateLimiterConfig.class); //åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°åŠ è½½redisè¿æ¥å€¼ if (Objects.isNull(Singleton.INST.get(ReactiveRedisTemplate.class)) || Objects.isNull(Singleton.INST.get(RateLimiterConfig.class)) || !rateLimiterConfig.equals(Singleton.INST.get(RateLimiterConfig.class))) { LettuceConnectionFactory lettuceConnectionFactory = createLettuceConnectionFactory(rateLimiterConfig); lettuceConnectionFactory.afterPropertiesSet(); RedisSerializer\u0026amp;lt;String\u0026amp;gt; serializer = new StringRedisSerializer(); RedisSerializationContext\u0026amp;lt;String, String\u0026amp;gt; serializationContext = RedisSerializationContext.\u0026amp;lt;String, String\u0026amp;gt;newSerializationContext().key(serializer).value(serializer).hashKey(serializer).hashValue(serializer).build(); ReactiveRedisTemplate\u0026amp;lt;String, String\u0026amp;gt; reactiveRedisTemplate = new ReactiveRedisTemplate\u0026amp;lt;\u0026amp;gt;(lettuceConnectionFactory, serializationContext); Singleton.INST.single(ReactiveRedisTemplate.class, reactiveRedisTemplate); Singleton.INST.single(RateLimiterConfig.class, rateLimiterConfig); } } }  ä¸Šè¿°ä»£ç æœ‰å‡ ä¸ªè¾ƒä¸ºå…³é”®çš„ç‚¹ï¼š\nåœ¨ä¸Šè¿°ä»£ç ä¸­å°†é™æµæ’ä»¶çš„é…ç½®å’Œå¯¹åº”çš„redisTemplateå®ä¾‹æ”¾å…¥äº†Singleton.INSTå¯¹åº”mapä¸­ã€‚\nåœ¨æ’ä»¶æ•°æ®è¿‡æ¥æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨redisè¿æ¥å®ä¾‹ï¼Œæ˜¯å¦å­˜åœ¨é™æµé…ç½®å®ä¾‹ï¼Œåˆ¤æ–­å½“å‰çš„é™æµé…ç½®å®ä¾‹æ˜¯å¦å’Œä¼ é€’çš„é™æµå®ä¾‹ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±è®¤ä¸ºé…ç½®æ˜¯æœ‰æ›´æ”¹çš„ï¼Œå°±é‡æ–°åˆå§‹åŒ–é™æµå®ä¾‹å’Œè¿æ¥æ± å®ä¾‹æ”¾å…¥Singleton.INSTçš„mapä¸­ï¼Œç”±æ­¤è€Œè¨€å°±ä¿è¯äº†æ›´æ”¹redisé…ç½®çš„çƒ­éƒ¨ç½²ã€‚\nifåˆ¤æ–­ä¸­çš„ä»£ç å°±æ˜¯åŸºäºSpringDataRediså°è£…æˆä¸€ä¸ªå¯¹åº”redisè¿æ¥æ± ã€‚\npsï¼šSingleton.INSTæ˜¯æšä¸¾å®ç°çš„å•ä¾‹æ¨¡å¼ã€‚\né™æµæ’ä»¶æ˜¯åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ Debug è°ƒç”¨é“¾ RateLimiterPluginç”±äºéœ€è¦å¯¹ç‰¹å®šè§„åˆ™è¿›è¡Œé™æµï¼Œæ‰€ä»¥ä¾æ—§å®ç°äº†AbstractSoulPluginï¼Œä¹‹å‰ä¾æ—§æ¢³ç†è¿‡AbstractSoulPluginçš„excuteçš„æ–¹æ³•å’Œä½œç”¨äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¸é‡å¤è§£é‡Šï¼Œå¯è§‚çœ‹Http è°ƒç”¨æµç¨‹æ¢³ç†ï¼ŒåŠ æ·±å¯¹è¯¥ç±»çš„å°è±¡ã€‚\næœ¬èŠ‚é‡ç‚¹è¿˜æ˜¯çœ‹å…·ä½“çš„doexcuteæ–¹æ³•åšäº†å“ªäº›äº‹ã€‚\nprotected Mono\u0026amp;lt;Void\u0026amp;gt; doExecute(final ServerWebExchange exchange, final â€¦","date":1611964800,"description":"Soulç½‘å…³å­¦ä¹ RateLimiteræ’ä»¶åŸç†è§£æ","dir":"blog/soul_source_learning_18_ratelimiter/","fuzzywordcount":2900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"8321e00db2250fb31e2ca9fe5378a4053db58e15","permalink":"/zh/blog/soul_source_learning_18_ratelimiter/","publishdate":"2021-01-30T00:00:00Z","readingtime":6,"relpermalink":"/zh/blog/soul_source_learning_18_ratelimiter/","summary":"å›é¡¾ åœ¨ä¹‹å‰çš„HTTPè¯·æ±‚åˆæ¢çš„æ–‡ç« ä¸­ï¼Œå¤§ä½“æ¢³ç†äº†Soulæ’ä»¶çš„å¤„ç†æµç¨‹ï¼Œä¹Ÿå¾—çŸ¥äº†DividePluginã€GlobalPluginï¼ŒWebC","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ RateLimiteræ’ä»¶åŸç†è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_18_ratelimiter/","wordcount":2829},{"author":"æœ±æ˜","categories":"Soul","content":" SOUL ä¸­ SPI çš„ä½¿ç”¨ åœ¨ä¹‹å‰åˆ†æ divide æ’ä»¶çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ—¶, æœ‰çœ‹åˆ°è¿‡ä¸€è¡Œä»£ç :\nDivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip);  å½“æ—¶å¾ˆç®€å•çš„ç•¥è¿‡äº†å®ƒçš„å®ç°, å®ƒçš„ä½œç”¨å¾ˆå®¹æ˜“åˆ†æ, è°ƒç”¨ä¸€ä¸ªçœ‹ä¼¼å·¥å…·ç±»çš„æ–¹æ³•, ä¼ å…¥å¤šä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤, è¿”å›ä¸€ä¸ªèŠ‚ç‚¹. è¿™æ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨.\nä½†æ˜¯ç»†èŠ‚å´éå¸¸å¤š, æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ä½¿ç”¨ SPI æ¥é€‰æ‹©å…·ä½“çš„å®ç°ç±». çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„ä»£ç :\npublic class LoadBalanceUtils { public static DivideUpstream selector(final List\u0026amp;lt;DivideUpstream\u0026amp;gt; upstreamList, final String algorithm, final String ip) { // è°ƒç”¨è‡ªå®šä¹‰çš„ SPI å¾—åˆ°ä¸€ä¸ªå­ç±» LoadBalance loadBalance = ExtensionLoader.getExtensionLoader(LoadBalance.class).getJoin(algorithm); return loadBalance.select(upstreamList, ip); } }  åé¢çš„æ˜¯è°ƒç”¨å…·ä½“å­ç±»çš„ select() æ–¹æ³•, æ ¹æ®å­ç±»çš„ä¸åŒå®ç°, æœ€ç»ˆä¼šè¡¨ç°å‡ºå„ç§å½¢å¼. ç›®å‰çš„å­ç±»å®ç°æœ‰:\n HashLoadBalance RandomLoadBalance RoundRobinLoadBalance  å…³é”®å°±åœ¨äº ExtensionLoader.getExtensionLoader(LoadBalance.class).getJoin(algorithm); è¿™è¡Œ.\nåœ¨ç ”ç©¶å®ƒä¹‹å‰, æˆ‘ä»¬å…ˆä¸å¦¨ç ”ç©¶ä¸‹ Java æä¾›çš„ SPI æœºåˆ¶.\nJava SPI \u0026amp;lt;\u0026amp;lt;é«˜å¯ç”¨å¯ä¼¸ç¼©å¾®æœåŠ¡æ¶æ„\u0026amp;gt;\u0026amp;gt; ç¬¬3ç«  Apache Dubbo æ¡†æ¶çš„åŸç†ä¸å®ç° ä¸­æœ‰è¿™æ ·çš„ä¸€å¥å®šä¹‰.\n SPI å…¨ç§°ä¸º Service Provider Interface, æ˜¯ JDK å†…ç½®çš„ä¸€ç§æœåŠ¡æä¾›å‘ç°åŠŸèƒ½, ä¸€ç§åŠ¨æ€æ›¿æ¢å‘ç°çš„æœºåˆ¶. ä¸¾ä¸ªä¾‹å­, è¦æƒ³åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç»™ä¸€ä¸ªæ¥å£æ·»åŠ å®ç°, åªéœ€è¦æ·»åŠ ä¸€ä¸ªå®ç°å³å¯.\n ä¹¦ä¸­ä¹Ÿæœ‰ä¸ªéå¸¸å½¢è±¡çš„è„‘å›¾, å±•ç¤ºäº† SPI çš„ä½¿ç”¨:\nä¹Ÿå°±æ˜¯è¯´åœ¨æˆ‘ä»¬ä»£ç ä¸­çš„å®ç°é‡Œ, æ— éœ€å»å†™å…¥ä¸€ä¸ª Factory å·¥å‚, ç”¨ MAP å»åŒ…è£…ä¸€äº›å­ç±», æœ€ç»ˆè¿”å›çš„ç±»å‹æ˜¯çˆ¶æ¥å£. åªéœ€è¦å®šä¹‰å¥½èµ„æºæ–‡ä»¶, è®©çˆ¶æ¥å£ä¸å®ƒçš„å­ç±»åœ¨æ–‡ä»¶ä¸­å†™æ˜, å³å¯é€šè¿‡è®¾ç½®å¥½çš„æ–¹å¼æ‹¿åˆ°æ‰€æœ‰å®šä¹‰çš„å­ç±»å¯¹è±¡:\nServiceLoader\u0026amp;lt;Interface\u0026amp;gt; loaders = ServiceLoader.load(Interface.class) for(Interface interface : loaders){ System.out.println(interface.toString()); }  è¿™ç§æ–¹å¼ç›¸æ¯”ä¸æ™®é€šçš„å·¥å‚æ¨¡å¼, è‚¯å®šæ˜¯æ›´ç¬¦åˆå¼€é—­åŸåˆ™, æ–°åŠ å…¥ä¸€ä¸ªå­ç±»ä¸ç”¨å»ä¿®æ”¹å·¥å‚æ–¹æ³•, è€Œæ˜¯ç¼–è¾‘èµ„æºæ–‡ä»¶.\nä»ä¸€ä¸ª Demo å¼€å§‹ æŒ‰ç…§ SPI çš„è§„èŒƒ, æˆ‘å»ºäº†ä¸€ä¸ª demo, çœ‹çœ‹å…·ä½“çš„å®ç°æ•ˆæœ\nAnimal ä¸­å®šä¹‰ä¸€ä¸ª run() æ–¹æ³•, è€Œå­ç±»å®ç°å®ƒ.\npublic interface Animal { void run(); } public class Dog implements Animal { @Override public void run() { System.out.println(\u0026amp;quot;ç‹—åœ¨è·‘\u0026amp;quot;); } } public class Horse implements Animal { @Override public void run() { System.out.println(\u0026amp;quot;é©¬åœ¨è·‘\u0026amp;quot;); } }  ä½¿ç”¨ SPI çš„åŠ è½½ç±», å¾—åˆ°å­ç±»çš„æ‰§è¡Œç»“æœ:\nprivate static void test() { final ServiceLoader\u0026amp;lt;Animal\u0026amp;gt; load = ServiceLoader.load(Animal.class); for (Animal animal : load) { System.out.println(animal); animal.run(); } }  åœ¨è°ƒç”¨åæˆ‘ä»¬å¾—åˆ°ä¹‹å‰åœ¨èµ„æºæ–‡ä»¶ä¸­å†™å…¥çš„å®ç°ç±», å¹¶æˆåŠŸè°ƒå–å®ƒä»¬å„è‡ªçš„ run() æ–¹æ³•.\nåˆ°è¿™é‡Œæˆ‘äº§ç”Ÿä¸€ä¸ªç–‘é—®, æ˜¯å¦æ¯æ¬¡è°ƒç”¨ ServiceLoader.load(Animal.class) è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡? å¦‚æœæ˜¯æˆ‘çŒœæµ‹å®ƒæ˜¯åœ¨å¯åŠ¨æ—¶åŠ è½½åˆ°ç¼“å­˜äº†, å¦‚æœä¸æ˜¯, å¯èƒ½å°±æ˜¯åœ¨åº•å±‚ç”¨äº†åå°„, æ¯æ¬¡è°ƒç”¨éƒ½æœ‰ä¸€å®šæ¶ˆè€—. æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„å®éªŒ:\npublic static void main(String[] args) { for (int i = 0; i \u0026amp;lt; 2; i++) { test(); System.out.println(\u0026amp;quot;----------\u0026amp;quot;); } } private static void test() { final ServiceLoader\u0026amp;lt;Animal\u0026amp;gt; load = ServiceLoader.load(Animal.class); for (Animal animal : load) { System.out.println(animal); animal.run(); } }  ä¸¤æ¬¡è°ƒç”¨å‡ºç°çš„å¯¹è±¡å´ä¸ä¸€æ ·, ä¸ç”±è®©æˆ‘æ›¿å…¶æ€§èƒ½æªå¿ƒä¸€ä¸‹, æ‰€ä»¥æˆ‘ä»¬å…ˆåˆ†æä¸‹å®ƒçš„ä»£ç , çœ‹çœ‹åˆ°åº•æ€ä¹ˆå®ç°.\nSPI çš„å®ç° æ‰¾åˆ° java.util,ServiceLoaders è¿™ä¸ªç±», å…¥çœ¼æœ€é†’ç›®çš„å°±æ˜¯ä¹‹å‰æˆ‘ä»¬æŒ‰ç…§è§„èŒƒæ”¾ç½®èµ„æºæ–‡ä»¶çš„ç›®å½•\npublic final class ServiceLoader\u0026amp;lt;S\u0026amp;gt; implements Iterable\u0026amp;lt;S\u0026amp;gt; { private static final String PREFIX = \u0026amp;quot;META-INF/services/\u0026amp;quot;; }  åœ¨ debug PREFIX å±æ€§çš„è¢«è°ƒç”¨å¤„æ—¶, å‘ç° ServiceLoader.load å®é™…æ˜¯ä½¿ç”¨æ‡’åŠ è½½çš„æ–¹å¼, å¹¶æ²¡æœ‰åœ¨è°ƒç”¨å®ƒçš„æ—¶å€™, æ‰¾å¯»åˆ°å®é™…è¿”å›ç±», è€Œæ˜¯åœ¨éå†æ—¶æŸ¥æ‰¾.\nå®ƒçš„æ‡’åŠ è½½å…·ä½“å®ç°åœ¨å¦‚ä¸‹ä»£ç :\npublic final class ServiceLoader\u0026amp;lt;S\u0026amp;gt; implements Iterable\u0026amp;lt;S\u0026amp;gt; { public static \u0026amp;lt;S\u0026amp;gt; ServiceLoader\u0026amp;lt;S\u0026amp;gt; load(Class\u0026amp;lt;S\u0026amp;gt; service) { // è·å–å½“å‰çš„ç±»åŠ è½½å™¨ (æˆ‘ä»¬è‡ªå·±çš„é€šå¸¸æ˜¯å¼Ÿä¸­å¼Ÿ AppClassLoader ) ClassLoader cl = â€¦","date":1611964800,"description":"Soulç½‘å…³å­¦ä¹ SPIå­¦ä¹ ä½¿ç”¨","dir":"blog/soul_source_learning_11_SPI/","fuzzywordcount":5500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"4abb2d54aa86524080a944e2d4b948bdaa0edd36","permalink":"/zh/blog/soul_source_learning_11_spi/","publishdate":"2021-01-30T00:00:00Z","readingtime":11,"relpermalink":"/zh/blog/soul_source_learning_11_spi/","summary":"SOUL ä¸­ SPI çš„ä½¿ç”¨ åœ¨ä¹‹å‰åˆ†æ divide æ’ä»¶çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ—¶, æœ‰çœ‹åˆ°è¿‡ä¸€è¡Œä»£ç : DivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip); å½“æ—¶å¾ˆç®€å•çš„ç•¥è¿‡äº†å®ƒçš„å®ç°, å®ƒçš„ä½œç”¨å¾ˆå®¹æ˜“åˆ†æ, è°ƒç”¨ä¸€ä¸ªçœ‹ä¼¼å·¥å…·","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ SPIå­¦ä¹ ä½¿ç”¨","type":"blog","url":"/zh/blog/soul_source_learning_11_spi/","wordcount":5445},{"author":"tangtian","categories":"Soul","content":" ä»‹ç» signæ’ä»¶ç”¨æ¥å¯¹è¯·æ±‚è¿›è¡Œç­¾åè®¤è¯çš„æ’ä»¶\nAK/SK ä»‹ç» AK/SKï¼ˆAccess Key ID/Secret Access Keyï¼‰å³è®¿é—®å¯†é’¥ï¼ŒåŒ…å«è®¿é—®å¯†é’¥IDï¼ˆAKï¼‰å’Œç§˜å¯†è®¿é—®å¯†é’¥ï¼ˆSKï¼‰ä¸¤éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºå¯¹ç”¨æˆ·çš„è°ƒç”¨è¡Œä¸ºè¿›è¡Œé‰´æƒå’Œè®¤è¯ã€‚\næ’ä»¶ä½¿ç”¨-ä»¥ï¼ˆ/dubbo/findAllï¼‰ä¸ºä¾‹ åœ¨SoulBootstrapçš„ pom.xml æ–‡ä»¶ä¸­æ·»åŠ Â signÂ çš„æ”¯æŒ \u0026amp;lt;!-- soul sign plugin start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-sign\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!-- soul sign plugin end--\u0026amp;gt;  æ–°å¢appKeyï¼ŒsecretKey é…ç½®é€‰æ‹©å™¨å’Œè§„åˆ™å™¨ æ·»åŠ é€‰æ‹©å™¨ æ·»åŠ è§„åˆ™å™¨ å¢åŠ è·å–é‰´æƒæœåŠ¡ åœ¨è‡ªå·±æœåŠ¡ä¸­å¢åŠ ä¸€ä¸ªå¯¹å¤–è®¿é—®çš„æ–¹æ³•\n@GetMapping(\u0026amp;quot;/authUrl\u0026amp;quot;) public String authUrl() { Map\u0026amp;lt;String, String\u0026amp;gt; map = Maps.newHashMapWithExpectedSize(2); //timestampä¸ºæ¯«ç§’æ•°çš„å­—ç¬¦ä¸²å½¢å¼ String.valueOf(LocalDateTime.now().toInstant(ZoneOffset.of(\u0026amp;quot;+8\u0026amp;quot;)).toEpochMilli()) String timetamp = String.valueOf(LocalDateTime.now().toInstant(ZoneOffset.of(\u0026amp;quot;+8\u0026amp;quot;)).toEpochMilli()) ; System.out.println(timetamp); map.put(\u0026amp;quot;timestamp\u0026amp;quot;,timetamp); //å€¼åº”è¯¥ä¸ºæ¯«ç§’æ•°çš„å­—ç¬¦ä¸²å½¢å¼ map.put(\u0026amp;quot;path\u0026amp;quot;, \u0026amp;quot;/dubbo/findAll\u0026amp;quot;); map.put(\u0026amp;quot;version\u0026amp;quot;, \u0026amp;quot;1.0.0\u0026amp;quot;); List\u0026amp;lt;String\u0026amp;gt; storedKeys = Arrays.stream(map.keySet() .toArray(new String[]{})) .sorted(Comparator.naturalOrder()) .collect(Collectors.toList()); final String sign = storedKeys.stream() .map(key -\u0026amp;gt; String.join(\u0026amp;quot;\u0026amp;quot;, key, map.get(key))) .collect(Collectors.joining()).trim() .concat(\u0026amp;quot;D19CF79F647A465AB9C5C66F430CAD28\u0026amp;quot;);//SECRETkey return DigestUtils.md5DigestAsHex(sign.getBytes()).toUpperCase(); }  ä¸‹é¢éœ€è¦æ³¨æ„çš„ åœ¨ç½‘å…³ä¸­å¢åŠ é‰´æƒå¤´ä¿¡æ¯ è¯·æ±‚çš„ç»“æœæ¼”ç¤º é€šè¿‡çš„è¿”å› 5minè¶…æ—¶çš„è¿”å› appKeyå¡«å†™é”™è¯¯çš„è¿”å› ç­¾åé”™è¯¯çš„è¿”å› ç¦ç”¨signæ’ä»¶çš„è¿”å› signæ’ä»¶çš„å®ç°åˆ†æ javaä¸­Pair ç®€å•çš„è¯´å°±æ˜¯pairä¿å­˜çš„æ˜¯ä¸€å¯¹key valueï¼Œè€Œmapå¯ä»¥ä¿å­˜å¤šå¯¹key valueã€‚ SignPluginæ’ä»¶è°ƒç”¨DefaultSignServiceä¸­signVerifyæ–¹æ³• åˆ¤æ–­sign æ’ä»¶æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå¯ç”¨è·å–åœ¨global æ’ä»¶å­˜å…¥çš„soulContextå¹¶è°ƒç”¨verifyæ–¹æ³•\nif (signData != null \u0026amp;amp;\u0026amp;amp; signData.getEnabled()) { final SoulContext soulContext = exchange.getAttribute(Constants.CONTEXT); assert soulContext != null; return verify(soulContext, exchange); }  verifyæ–¹æ³•ä¸­ åˆ¤æ–­è¯·æ±‚å¤´ä¿¡æ¯æ˜¯å¦æ­£ç¡® å¦‚æœä¸æ­£ç¡®å°±æŠ›å‡ºÂ log.error(\u0026amp;ldquo;sign parameters are incomplete,{}\u0026amp;rdquo;, soulContext)å¼‚å¸¸\nif (StringUtils.isBlank(soulContext.getAppKey()) || StringUtils.isBlank(soulContext.getSign()) || StringUtils.isBlank(soulContext.getTimestamp())) { log.error(\u0026amp;quot;sign parameters are incomplete,{}\u0026amp;quot;, soulContext); return Pair.of(Boolean.FALSE, Constants.SIGN_PARAMS_ERROR); }  åˆ¤æ–­è¯·æ±‚æ—¶é—´æ˜¯å¦è¶…æ—¶\nif (between \u0026amp;gt; delay) { return Pair.of(Boolean.FALSE, String.format(SoulResultEnum.SING_TIME_IS_TIMEOUT.getMsg(), delay)); }  æ²¡æœ‰è¶…æ—¶ç»§ç»­è°ƒç”¨signæ–¹æ³• è·å–è®¤è¯æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®åœ¨soulAdmin ä¸­é…ç½®\nAppAuthData appAuthData = SignAuthDataCache.getInstance().obtainAuthData(soulContext.getAppKey());  åé¢å¯¹appAuthDataæ•°æ®è¿›è¡Œåˆ¤æ–­ï¼Œæ•°æ®æœ‰é”™è¯¯å°±ä¸é€šè¿‡ å¯¹è·å–çš„å‚æ•°å†æ¬¡ç­¾åï¼Œåˆ¤æ–­ä¼ å…¥çš„å’Œå†æ¬¡ç­¾åçš„æ˜¯å¦ä¸€æ ·\nString sigKey = SignUtils.generateSign(appAuthData.getAppSecret(), buildParamsMap(soulContext));  å¦‚æœéƒ½æ ¡éªŒéƒ½é€šè¿‡å°±å®Œæˆè®¤è¯ è®¿é—®è¯·æ±‚ã€‚\n","date":1611878400,"description":"Soul Gateway Learning Sign Plugin","dir":"blog/soul_source_learning_12_sign/","fuzzywordcount":800,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"626af87e520b8608a9d11d3e8b55029bba37fd88","permalink":"/blog/soul_source_learning_12_sign/","publishdate":"2021-01-29T00:00:00Z","readingtime":2,"relpermalink":"/blog/soul_source_learning_12_sign/","summary":"ä»‹ç» signæ’ä»¶ç”¨æ¥å¯¹è¯·æ±‚è¿›è¡Œç­¾åè®¤è¯çš„æ’ä»¶ AK/SK ä»‹ç» AK/SKï¼ˆAccess Key ID/Secret Access Keyï¼‰å³è®¿é—®å¯†é’¥ï¼ŒåŒ…å«è®¿é—®å¯†é’¥IDï¼ˆAKï¼‰å’Œç§˜å¯†è®¿é—®å¯†é’¥ï¼ˆ","tags":["Soul"],"title":"Soul Gateway Learning Sign Plugin","type":"blog","url":"/blog/soul_source_learning_12_sign/","wordcount":759},{"author":"å”ç”œ","categories":"Soul","content":" ä»‹ç» signæ’ä»¶ç”¨æ¥å¯¹è¯·æ±‚è¿›è¡Œç­¾åè®¤è¯çš„æ’ä»¶\nAK/SK ä»‹ç» AK/SKï¼ˆAccess Key ID/Secret Access Keyï¼‰å³è®¿é—®å¯†é’¥ï¼ŒåŒ…å«è®¿é—®å¯†é’¥IDï¼ˆAKï¼‰å’Œç§˜å¯†è®¿é—®å¯†é’¥ï¼ˆSKï¼‰ä¸¤éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºå¯¹ç”¨æˆ·çš„è°ƒç”¨è¡Œä¸ºè¿›è¡Œé‰´æƒå’Œè®¤è¯ã€‚\næ’ä»¶ä½¿ç”¨-ä»¥ï¼ˆ/dubbo/findAllï¼‰ä¸ºä¾‹ åœ¨SoulBootstrapçš„ pom.xml æ–‡ä»¶ä¸­æ·»åŠ Â signÂ çš„æ”¯æŒ \u0026amp;lt;!-- soul sign plugin start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-sign\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!-- soul sign plugin end--\u0026amp;gt;  æ–°å¢appKeyï¼ŒsecretKey é…ç½®é€‰æ‹©å™¨å’Œè§„åˆ™å™¨ æ·»åŠ é€‰æ‹©å™¨ æ·»åŠ è§„åˆ™å™¨ å¢åŠ è·å–é‰´æƒæœåŠ¡ åœ¨è‡ªå·±æœåŠ¡ä¸­å¢åŠ ä¸€ä¸ªå¯¹å¤–è®¿é—®çš„æ–¹æ³•\n@GetMapping(\u0026amp;quot;/authUrl\u0026amp;quot;) public String authUrl() { Map\u0026amp;lt;String, String\u0026amp;gt; map = Maps.newHashMapWithExpectedSize(2); //timestampä¸ºæ¯«ç§’æ•°çš„å­—ç¬¦ä¸²å½¢å¼ String.valueOf(LocalDateTime.now().toInstant(ZoneOffset.of(\u0026amp;quot;+8\u0026amp;quot;)).toEpochMilli()) String timetamp = String.valueOf(LocalDateTime.now().toInstant(ZoneOffset.of(\u0026amp;quot;+8\u0026amp;quot;)).toEpochMilli()) ; System.out.println(timetamp); map.put(\u0026amp;quot;timestamp\u0026amp;quot;,timetamp); //å€¼åº”è¯¥ä¸ºæ¯«ç§’æ•°çš„å­—ç¬¦ä¸²å½¢å¼ map.put(\u0026amp;quot;path\u0026amp;quot;, \u0026amp;quot;/dubbo/findAll\u0026amp;quot;); map.put(\u0026amp;quot;version\u0026amp;quot;, \u0026amp;quot;1.0.0\u0026amp;quot;); List\u0026amp;lt;String\u0026amp;gt; storedKeys = Arrays.stream(map.keySet() .toArray(new String[]{})) .sorted(Comparator.naturalOrder()) .collect(Collectors.toList()); final String sign = storedKeys.stream() .map(key -\u0026amp;gt; String.join(\u0026amp;quot;\u0026amp;quot;, key, map.get(key))) .collect(Collectors.joining()).trim() .concat(\u0026amp;quot;D19CF79F647A465AB9C5C66F430CAD28\u0026amp;quot;);//SECRETkey return DigestUtils.md5DigestAsHex(sign.getBytes()).toUpperCase(); }  ä¸‹é¢éœ€è¦æ³¨æ„çš„ åœ¨ç½‘å…³ä¸­å¢åŠ é‰´æƒå¤´ä¿¡æ¯ è¯·æ±‚çš„ç»“æœæ¼”ç¤º é€šè¿‡çš„è¿”å› 5minè¶…æ—¶çš„è¿”å› appKeyå¡«å†™é”™è¯¯çš„è¿”å› ç­¾åé”™è¯¯çš„è¿”å› ç¦ç”¨signæ’ä»¶çš„è¿”å› signæ’ä»¶çš„å®ç°åˆ†æ javaä¸­Pair ç®€å•çš„è¯´å°±æ˜¯pairä¿å­˜çš„æ˜¯ä¸€å¯¹key valueï¼Œè€Œmapå¯ä»¥ä¿å­˜å¤šå¯¹key valueã€‚ SignPluginæ’ä»¶è°ƒç”¨DefaultSignServiceä¸­signVerifyæ–¹æ³• åˆ¤æ–­sign æ’ä»¶æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå¯ç”¨è·å–åœ¨global æ’ä»¶å­˜å…¥çš„soulContextå¹¶è°ƒç”¨verifyæ–¹æ³•\nif (signData != null \u0026amp;amp;\u0026amp;amp; signData.getEnabled()) { final SoulContext soulContext = exchange.getAttribute(Constants.CONTEXT); assert soulContext != null; return verify(soulContext, exchange); }  verifyæ–¹æ³•ä¸­ åˆ¤æ–­è¯·æ±‚å¤´ä¿¡æ¯æ˜¯å¦æ­£ç¡® å¦‚æœä¸æ­£ç¡®å°±æŠ›å‡ºÂ log.error(\u0026amp;ldquo;sign parameters are incomplete,{}\u0026amp;rdquo;, soulContext)å¼‚å¸¸\nif (StringUtils.isBlank(soulContext.getAppKey()) || StringUtils.isBlank(soulContext.getSign()) || StringUtils.isBlank(soulContext.getTimestamp())) { log.error(\u0026amp;quot;sign parameters are incomplete,{}\u0026amp;quot;, soulContext); return Pair.of(Boolean.FALSE, Constants.SIGN_PARAMS_ERROR); }  åˆ¤æ–­è¯·æ±‚æ—¶é—´æ˜¯å¦è¶…æ—¶\nif (between \u0026amp;gt; delay) { return Pair.of(Boolean.FALSE, String.format(SoulResultEnum.SING_TIME_IS_TIMEOUT.getMsg(), delay)); }  æ²¡æœ‰è¶…æ—¶ç»§ç»­è°ƒç”¨signæ–¹æ³• è·å–è®¤è¯æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®åœ¨soulAdmin ä¸­é…ç½®\nAppAuthData appAuthData = SignAuthDataCache.getInstance().obtainAuthData(soulContext.getAppKey());  åé¢å¯¹appAuthDataæ•°æ®è¿›è¡Œåˆ¤æ–­ï¼Œæ•°æ®æœ‰é”™è¯¯å°±ä¸é€šè¿‡ å¯¹è·å–çš„å‚æ•°å†æ¬¡ç­¾åï¼Œåˆ¤æ–­ä¼ å…¥çš„å’Œå†æ¬¡ç­¾åçš„æ˜¯å¦ä¸€æ ·\nString sigKey = SignUtils.generateSign(appAuthData.getAppSecret(), buildParamsMap(soulContext));  å¦‚æœéƒ½æ ¡éªŒéƒ½é€šè¿‡å°±å®Œæˆè®¤è¯ è®¿é—®è¯·æ±‚ã€‚\n","date":1611878400,"description":"Soulç½‘å…³å­¦ä¹ Signæ’ä»¶","dir":"blog/soul_source_learning_12_sign/","fuzzywordcount":800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"d15d11bc3b2a87978e028733b64e43d034741847","permalink":"/zh/blog/soul_source_learning_12_sign/","publishdate":"2021-01-29T00:00:00Z","readingtime":2,"relpermalink":"/zh/blog/soul_source_learning_12_sign/","summary":"ä»‹ç» signæ’ä»¶ç”¨æ¥å¯¹è¯·æ±‚è¿›è¡Œç­¾åè®¤è¯çš„æ’ä»¶ AK/SK ä»‹ç» AK/SKï¼ˆAccess Key ID/Secret Access Keyï¼‰å³è®¿é—®å¯†é’¥ï¼ŒåŒ…å«è®¿é—®å¯†é’¥IDï¼ˆAKï¼‰å’Œç§˜å¯†è®¿é—®å¯†é’¥ï¼ˆ","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Signæ’ä»¶","type":"blog","url":"/zh/blog/soul_source_learning_12_sign/","wordcount":759},{"author":"zhuming","categories":"Soul","content":" åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é•¿è½®è¯¢åˆ†æçš„æœ€åä¸€ç¯‡, æ€»ç»“ç½‘å…³ç«¯çš„é•¿è½®è¯¢çš„å®ç°, ä»¥åŠæ•°æ®æµåŠ¨æ–¹å¼.\nç½‘å…³ç«¯é•¿è½®è¯¢çš„æµç¨‹æ€»ä½“ä¹Ÿåˆ†ä¸¤ä¸ªæ¨¡å—: ä¸€æ˜¯å¯åŠ¨æ—¶æ‹‰å–, äºŒæ˜¯è½®è¯¢ç›‘å¬å˜åŒ–\nç½‘å…³å¯åŠ¨æ—¶æ‹‰å–æ•°æ® ç½‘å…³å¯åŠ¨å, ä¼šè°ƒç”¨åå°æä¾›çš„æ¥å£æ‹‰å–æ•°æ®, å¹¶å°†æ•°æ®å‘é€åˆ°å„ä¸ªæ’ä»¶çš„æ•°æ®å¤„ç†ç±»ä¸­\nä¸‹é¢å±•ç¤ºä¸‹ç½‘å…³å¯åŠ¨æ‹‰å–æ•°æ®çš„å¤„ç†æµç¨‹: è¿™å‡ ä¸ªå¤„ç†æ­¥éª¤è¢«åˆ†æ•£åˆ°ä¸‹é¢è¿™äº›ç±»çš„æ–¹æ³•åä½œä¸­:\nHttpSyncDataService#start: ç½‘å…³å¯åŠ¨æ—¶, HttpSyncDataService åˆå§‹åŒ–ä¼šè°ƒç”¨ start() æ–¹æ³•, è¯¥æ–¹æ³•ä¼šè°ƒç”¨åå°æ‹‰å–æ•°æ®, å¹¶å¼€å¯å¤šä¸ªçº¿ç¨‹è¿›è¡Œè½®è¯¢ç›‘å¬ (è¿™å—åœ¨ä¸‹ä¸ªæ¨¡å—åˆ†æ)\npublic class HttpSyncDataService implements SyncDataService, AutoCloseable { private void start() { // é˜²æ­¢äºŒæ¬¡è°ƒç”¨çš„CASæ“ä½œ if (RUNNING.compareAndSet(false, true)) { // è¿™é‡Œæ˜¯æœ¬æ¬¡æµç¨‹çš„é‡ç‚¹, è°ƒç”¨æ‹‰å–æ•°æ®çš„æ–¹æ³• this.fetchGroupConfig(ConfigGroupEnum.values()); int threadSize = serverList.size(); // è¿™é‡Œå°†åœ¨ä¸‹ä¸ªæ¨¡å—åˆ†æ, ä¼šæ ¹æ®åå°é›†ç¾¤å¼€å¯çº¿ç¨‹è½®è¯¢ç›‘å¬ this.executor = new ThreadPoolExecutor(threadSize, threadSize, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue\u0026amp;lt;\u0026amp;gt;(), SoulThreadFactory.create(\u0026amp;quot;http-long-polling\u0026amp;quot;, true)); this.serverList.forEach(server -\u0026amp;gt; this.executor.execute(new HttpLongPollingTask(server))); } else { log.info(\u0026amp;quot;soul http long polling was started, executor=[{}]\u0026amp;quot;, executor); } } }  HttpSyncDataService#fetchGroupConfig: ä½œç”¨ä»…æ˜¯æ ¹æ®æ•°æ®ç±»å‹, å¾ªç¯å¤šæ¬¡è°ƒç”¨æ‹‰å–æ•°æ®æ–¹æ³•(é’ˆå¯¹åŒä¸€ä¸ªåå°ä¼šè¯·æ±‚å¤šæ¬¡, æ¯æ¬¡æ‹‰å–æŸä¸€ç§æ•°æ®ç±»å‹çš„ä¿¡æ¯), è¿™é‡Œçš„æ•°æ®ç±»å‹æŒ‡çš„æ˜¯ pluginã€ruleã€selector ç­‰\nprivate void fetchGroupConfig(final ConfigGroupEnum... groups) throws SoulException { for (int index = 0; index \u0026amp;lt; this.serverList.size(); index++) { String server = serverList.get(index); try { // æ ¹æ®ä¼ å…¥çš„æ•°æ®ç±»å‹æšä¸¾, å¤šæ¬¡è°ƒç”¨æ‹‰å–æ•°æ®æ–¹æ³• this.doFetchGroupConfig(server, groups); break; } catch (SoulException e) { if (index \u0026amp;gt;= serverList.size() - 1) { throw e; } log.warn(\u0026amp;quot;fetch config fail, try another one: {}\u0026amp;quot;, serverList.get(index + 1)); } } }  HttpSyncDataService#doFetchGroupConfig: è¯·æ±‚åå°çš„ /configs/fetch æ¥å£, æ‹¿åˆ°æŸä¸ªç±»å‹çš„æ•°æ®, å¹¶æ›´æ–°ç¼“å­˜. æ›´æ–°ç¼“å­˜å‰ä¼šæ£€æµ‹æ˜¯å¦å˜åŠ¨, å¦‚æœå˜åŠ¨åˆ™ç»“æŸ, æ•°æ®æœªå‘ç”Ÿå˜åŠ¨åˆ™ç¡çœ 30s (ç”±äºæ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨, æ•°æ®ä¸ºç©ºçš„æƒ…å†µä¸‹è‚¯å®šä¼šæ›´æ–°ç¼“å­˜, æ‰€ä»¥ä¼šç›´æ¥ç»“æŸ)\nprivate void doFetchGroupConfig(final String server, final ConfigGroupEnum... groups) { StringBuilder params = new StringBuilder(); for (ConfigGroupEnum groupKey : groups) { params.append(\u0026amp;quot;groupKeys\u0026amp;quot;).append(\u0026amp;quot;=\u0026amp;quot;).append(groupKey.name()).append(\u0026amp;quot;\u0026amp;amp;\u0026amp;quot;); } // å…·ä½“è¯·æ±‚è·¯å¾„, æ‹‰å–åå°æ•°æ® String url = server + \u0026amp;quot;/configs/fetch?\u0026amp;quot; + StringUtils.removeEnd(params.toString(), \u0026amp;quot;\u0026amp;amp;\u0026amp;quot;); log.info(\u0026amp;quot;request configs: [{}]\u0026amp;quot;, url); String json = null; try { json = this.httpClient.getForObject(url, String.class); } catch (RestClientException e) { String message = String.format(\u0026amp;quot;fetch config fail from server[%s], %s\u0026amp;quot;, url, e.getMessage()); log.warn(message); throw new SoulException(message, e); } // ä¿®æ”¹ç¼“å­˜ä¿¡æ¯ boolean updated = this.updateCacheWithJson(json); // åˆ¤æ–­æ˜¯å¦ä¿®æ”¹, ä¿®æ”¹åˆ™ç›´æ¥ç»“æŸ if (updated) { log.info(\u0026amp;quot;get latest configs: [{}]\u0026amp;quot;, json); return; } log.info(\u0026amp;quot;The config of the server[{}] has not been updated or is out of date. Wait for 30s to listen for changes again.\u0026amp;quot;, server); ThreadUtils.sleep(TimeUnit.SECONDS, 30); }  HttpSyncDataService#updateCacheWithJson: å–å‡ºå“åº”ä¿¡æ¯ä¸­çš„ data , å³å˜åŒ–çš„æ•°æ®ä¿¡æ¯, ä¼ ç»™æ•°æ®åˆ·æ–°å·¥å‚ DataRefreshFactory\nprivate DataRefreshFactory factory; public HttpSyncDataService(...){ this.factory = new â€¦","date":1611705600,"description":"Soul Gateway Learns Http Long Polling Analysis","dir":"blog/soul_source_learning_09_httplongpolling_02/","fuzzywordcount":1800,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"1d07994f587748cdd801d4de94abcb2cf808e183","permalink":"/blog/soul_source_learning_09_httplongpolling_02/","publishdate":"2021-01-27T00:00:00Z","readingtime":4,"relpermalink":"/blog/soul_source_learning_09_httplongpolling_02/","summary":"åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é•¿è½®è¯¢åˆ†æçš„æœ€åä¸€ç¯‡, æ€»ç»“ç½‘å…³ç«¯çš„é•¿è½®è¯¢çš„å®ç°, ä»¥åŠæ•°æ®æµåŠ¨æ–¹å¼. ç½‘å…³ç«¯é•¿è½®è¯¢çš„æµç¨‹æ€»ä½“ä¹Ÿåˆ†ä¸¤ä¸ªæ¨¡å—:","tags":["Soul"],"title":"Soul Gateway Learns Http Long Polling Analysis 02","type":"blog","url":"/blog/soul_source_learning_09_httplongpolling_02/","wordcount":1750},{"author":"æœ±æ˜","categories":"Soul","content":" åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é•¿è½®è¯¢åˆ†æçš„æœ€åä¸€ç¯‡, æ€»ç»“ç½‘å…³ç«¯çš„é•¿è½®è¯¢çš„å®ç°, ä»¥åŠæ•°æ®æµåŠ¨æ–¹å¼.\nç½‘å…³ç«¯é•¿è½®è¯¢çš„æµç¨‹æ€»ä½“ä¹Ÿåˆ†ä¸¤ä¸ªæ¨¡å—: ä¸€æ˜¯å¯åŠ¨æ—¶æ‹‰å–, äºŒæ˜¯è½®è¯¢ç›‘å¬å˜åŒ–\nç½‘å…³å¯åŠ¨æ—¶æ‹‰å–æ•°æ® ç½‘å…³å¯åŠ¨å, ä¼šè°ƒç”¨åå°æä¾›çš„æ¥å£æ‹‰å–æ•°æ®, å¹¶å°†æ•°æ®å‘é€åˆ°å„ä¸ªæ’ä»¶çš„æ•°æ®å¤„ç†ç±»ä¸­\nä¸‹é¢å±•ç¤ºä¸‹ç½‘å…³å¯åŠ¨æ‹‰å–æ•°æ®çš„å¤„ç†æµç¨‹: è¿™å‡ ä¸ªå¤„ç†æ­¥éª¤è¢«åˆ†æ•£åˆ°ä¸‹é¢è¿™äº›ç±»çš„æ–¹æ³•åä½œä¸­:\nHttpSyncDataService#start: ç½‘å…³å¯åŠ¨æ—¶, HttpSyncDataService åˆå§‹åŒ–ä¼šè°ƒç”¨ start() æ–¹æ³•, è¯¥æ–¹æ³•ä¼šè°ƒç”¨åå°æ‹‰å–æ•°æ®, å¹¶å¼€å¯å¤šä¸ªçº¿ç¨‹è¿›è¡Œè½®è¯¢ç›‘å¬ (è¿™å—åœ¨ä¸‹ä¸ªæ¨¡å—åˆ†æ)\npublic class HttpSyncDataService implements SyncDataService, AutoCloseable { private void start() { // é˜²æ­¢äºŒæ¬¡è°ƒç”¨çš„CASæ“ä½œ if (RUNNING.compareAndSet(false, true)) { // è¿™é‡Œæ˜¯æœ¬æ¬¡æµç¨‹çš„é‡ç‚¹, è°ƒç”¨æ‹‰å–æ•°æ®çš„æ–¹æ³• this.fetchGroupConfig(ConfigGroupEnum.values()); int threadSize = serverList.size(); // è¿™é‡Œå°†åœ¨ä¸‹ä¸ªæ¨¡å—åˆ†æ, ä¼šæ ¹æ®åå°é›†ç¾¤å¼€å¯çº¿ç¨‹è½®è¯¢ç›‘å¬ this.executor = new ThreadPoolExecutor(threadSize, threadSize, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue\u0026amp;lt;\u0026amp;gt;(), SoulThreadFactory.create(\u0026amp;quot;http-long-polling\u0026amp;quot;, true)); this.serverList.forEach(server -\u0026amp;gt; this.executor.execute(new HttpLongPollingTask(server))); } else { log.info(\u0026amp;quot;soul http long polling was started, executor=[{}]\u0026amp;quot;, executor); } } }  HttpSyncDataService#fetchGroupConfig: ä½œç”¨ä»…æ˜¯æ ¹æ®æ•°æ®ç±»å‹, å¾ªç¯å¤šæ¬¡è°ƒç”¨æ‹‰å–æ•°æ®æ–¹æ³•(é’ˆå¯¹åŒä¸€ä¸ªåå°ä¼šè¯·æ±‚å¤šæ¬¡, æ¯æ¬¡æ‹‰å–æŸä¸€ç§æ•°æ®ç±»å‹çš„ä¿¡æ¯), è¿™é‡Œçš„æ•°æ®ç±»å‹æŒ‡çš„æ˜¯ pluginã€ruleã€selector ç­‰\nprivate void fetchGroupConfig(final ConfigGroupEnum... groups) throws SoulException { for (int index = 0; index \u0026amp;lt; this.serverList.size(); index++) { String server = serverList.get(index); try { // æ ¹æ®ä¼ å…¥çš„æ•°æ®ç±»å‹æšä¸¾, å¤šæ¬¡è°ƒç”¨æ‹‰å–æ•°æ®æ–¹æ³• this.doFetchGroupConfig(server, groups); break; } catch (SoulException e) { if (index \u0026amp;gt;= serverList.size() - 1) { throw e; } log.warn(\u0026amp;quot;fetch config fail, try another one: {}\u0026amp;quot;, serverList.get(index + 1)); } } }  HttpSyncDataService#doFetchGroupConfig: è¯·æ±‚åå°çš„ /configs/fetch æ¥å£, æ‹¿åˆ°æŸä¸ªç±»å‹çš„æ•°æ®, å¹¶æ›´æ–°ç¼“å­˜. æ›´æ–°ç¼“å­˜å‰ä¼šæ£€æµ‹æ˜¯å¦å˜åŠ¨, å¦‚æœå˜åŠ¨åˆ™ç»“æŸ, æ•°æ®æœªå‘ç”Ÿå˜åŠ¨åˆ™ç¡çœ 30s (ç”±äºæ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨, æ•°æ®ä¸ºç©ºçš„æƒ…å†µä¸‹è‚¯å®šä¼šæ›´æ–°ç¼“å­˜, æ‰€ä»¥ä¼šç›´æ¥ç»“æŸ)\nprivate void doFetchGroupConfig(final String server, final ConfigGroupEnum... groups) { StringBuilder params = new StringBuilder(); for (ConfigGroupEnum groupKey : groups) { params.append(\u0026amp;quot;groupKeys\u0026amp;quot;).append(\u0026amp;quot;=\u0026amp;quot;).append(groupKey.name()).append(\u0026amp;quot;\u0026amp;amp;\u0026amp;quot;); } // å…·ä½“è¯·æ±‚è·¯å¾„, æ‹‰å–åå°æ•°æ® String url = server + \u0026amp;quot;/configs/fetch?\u0026amp;quot; + StringUtils.removeEnd(params.toString(), \u0026amp;quot;\u0026amp;amp;\u0026amp;quot;); log.info(\u0026amp;quot;request configs: [{}]\u0026amp;quot;, url); String json = null; try { json = this.httpClient.getForObject(url, String.class); } catch (RestClientException e) { String message = String.format(\u0026amp;quot;fetch config fail from server[%s], %s\u0026amp;quot;, url, e.getMessage()); log.warn(message); throw new SoulException(message, e); } // ä¿®æ”¹ç¼“å­˜ä¿¡æ¯ boolean updated = this.updateCacheWithJson(json); // åˆ¤æ–­æ˜¯å¦ä¿®æ”¹, ä¿®æ”¹åˆ™ç›´æ¥ç»“æŸ if (updated) { log.info(\u0026amp;quot;get latest configs: [{}]\u0026amp;quot;, json); return; } log.info(\u0026amp;quot;The config of the server[{}] has not been updated or is out of date. Wait for 30s to listen for changes again.\u0026amp;quot;, server); ThreadUtils.sleep(TimeUnit.SECONDS, 30); }  HttpSyncDataService#updateCacheWithJson: å–å‡ºå“åº”ä¿¡æ¯ä¸­çš„ data , å³å˜åŒ–çš„æ•°æ®ä¿¡æ¯, ä¼ ç»™æ•°æ®åˆ·æ–°å·¥å‚ DataRefreshFactory\nprivate DataRefreshFactory factory; public HttpSyncDataService(...){ this.factory = new â€¦","date":1611705600,"description":"Soulç½‘å…³å­¦ä¹ Httpé•¿è½®è¯¢è§£æ","dir":"blog/soul_source_learning_09_httplongpolling_02/","fuzzywordcount":1800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"a5fcdafb18322dfc55162766558e42b1ac259f36","permalink":"/zh/blog/soul_source_learning_09_httplongpolling_02/","publishdate":"2021-01-27T00:00:00Z","readingtime":4,"relpermalink":"/zh/blog/soul_source_learning_09_httplongpolling_02/","summary":"åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é•¿è½®è¯¢åˆ†æçš„æœ€åä¸€ç¯‡, æ€»ç»“ç½‘å…³ç«¯çš„é•¿è½®è¯¢çš„å®ç°, ä»¥åŠæ•°æ®æµåŠ¨æ–¹å¼. ç½‘å…³ç«¯é•¿è½®è¯¢çš„æµç¨‹æ€»ä½“ä¹Ÿåˆ†ä¸¤ä¸ªæ¨¡å—:","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Httpé•¿è½®è¯¢è§£æ02","type":"blog","url":"/zh/blog/soul_source_learning_09_httplongpolling_02/","wordcount":1750},{"author":"baiyu","categories":"Soul","content":" å›é¡¾ åœ¨Soul è¯·æ±‚å¤„ç†æ¦‚è§ˆæ¦‚è§ˆè¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥æ™“äº†Soulé’ˆå¯¹äºè¯·æ±‚çš„å¤„ç†å…¥åº“åœ¨DefaultSoulPluginChainçš„excuteï¼Œå…¶ä¸­æ‰§è¡Œäº†ä¸€ä¸ªæ’ä»¶é“¾çš„æ¨¡å¼æ¥å®Œæˆäº†è¯·æ±‚çš„å¤„ç†ã€‚\næˆ‘ä»¬å¤§ä½“æ¢³ç†äº†æ³¨å…¥åˆ°pluginsçš„æ’ä»¶ï¼Œä½†æ˜¯å³ä½¿è¿™æ ·ä¾ç„¶ä¸èƒ½çºµè§‚å…¨å±€ï¼Œå¯¹æ­¤ç‰¹åœ°å¯¹soulæ’ä»¶æ‰€æ¶‰åŠçš„ç±»è¿›è¡Œäº†ç›¸å…³æ¢³ç†ï¼Œæ•´ä½“æ¢³ç†ç»“æœå¦‚ä¸‹å›¾ã€‚\nåœ¨æ¢³ç†æ–‡ç« ä¸­å¯ä»¥çœ‹åˆ°æ ¸å¿ƒç±»æ˜¯SoulPluginã€PluginEnumã€PluginDataHandlerã€MetaDataSubscriberï¼Œåœ¨æ¢³ç†è¯·æ±‚çš„ç›¸å…³æ–‡ç« ä¸­æˆ‘ä»¬ç›®å‰åªéœ€è¦é‡ç‚¹å…³æ³¨SoulPluginä¸PluginEnumç±»ã€‚\nSoulPluginç±»æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€å®šçš„ç†è§£ï¼Œé‚£PluginEnumæšä¸¾ç±»çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nPluginEnum:æ’ä»¶çš„æšä¸¾ç±»\n   å±æ€§ ä½œç”¨     code æ’ä»¶çš„æ‰§è¡Œé¡ºåº è¶Šå°è¶Šå…ˆæ‰§è¡Œ   role è§’è‰² æš‚æ—¶æœªå‘ç°å®é™…å¼•ç”¨åœ°å€   name æ’ä»¶åç§°    å…¶å®æˆ‘ä»¬ä¸éš¾å‘ç°åœ¨DefaultSoulPluginChainçš„pluginsçš„æ’ä»¶éƒ½æ˜¯æœ‰å›ºå®šçš„æ‰§è¡Œé¡ºåºçš„ï¼Œé‚£è¿™ä¸ªæ’ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯åœ¨å“ªå®šä¹‰çš„å‘¢ï¼Ÿ\næœ€ç»ˆå¯ä»¥è¿½æº¯åˆ°SoulConfigurationç±»ä¸‹\npublic SoulWebHandler soulWebHandler(final ObjectProvider\u0026amp;lt;List\u0026amp;lt;SoulPlugin\u0026amp;gt;\u0026amp;gt; plugins) { //çœç•¥ final List\u0026amp;lt;SoulPlugin\u0026amp;gt; soulPlugins = pluginList.stream() .sorted(Comparator.comparingInt(SoulPlugin::getOrder)).collect(Collectors.toList()); return new SoulWebHandler(soulPlugins); }  æ•´ç†æ•´ä¸ªPluginEnumç±»ç›¸å…³å¼•ç”¨ï¼Œæ•´ç†å‡ºå¦‚ä¸‹è¡¨æ ¼ï¼Œä¸éš¾çœ‹å‡ºæ’ä»¶ä¸æ’ä»¶ä¹‹é—´çš„é¡ºåºå…³ç³»    ç­‰çº§ ä½œç”¨     ç¬¬ä¸€ç­‰çº§ åªæœ‰GlobalPlugin å…¨å±€æ’ä»¶   ç¬¬äºŒç­‰çº§åˆ°ç¬¬å…«ç­‰çº§ å¯ä»¥ç†è§£ä¸ºåœ¨è¯·æ±‚å‘èµ·å‰çš„å‰ç½®å¤„ç†æ’ä»¶   ç¬¬ä¹ç­‰çº§åˆ°ç¬¬åä¸€ç­‰çº§ å¯ä»¥ç†è§£ä¸ºé’ˆå¯¹è°ƒç”¨æ–¹çš„æ–¹å¼æ‰€é’ˆå¯¹çš„ä¸åŒè°ƒç”¨å¤„ç†   ç¬¬åäºŒç­‰çº§ åªæœ‰MonitorPlugin ç›‘æ§æ’ä»¶   ç¬¬åä¸‰ç­‰çº§ æ˜¯é’ˆå¯¹äºå„ä¸ªè°ƒç”¨æ–¹è¿”å›ç»“æœå¤„ç†çš„Responseç›¸å…³æ’ä»¶    åœ¨åˆšæ‰çš„å›é¡¾ä¸­æˆ‘ä»¬å·²ç»æ˜ç™½soulå¤„ç†è¯·æ±‚çš„å¤§ä½“æµç¨‹ - 1.GloBalPluginæ’ä»¶ è¿›è¡Œå…¨å±€çš„åˆå§‹åŒ– - 2.éƒ¨åˆ†æ’ä»¶æ ¹æ®é‰´æƒã€é™æµã€ç†”æ–­ç­‰è§„åˆ™å¯¹è¯·æ±‚è¿›è¡Œå¤„ç† - 3.é€‰æ‹©é€‚åˆè‡ªå·±çš„è°ƒç”¨æ–¹å¼è¿›è¡Œæ‹¼è£…å‚æ•°ï¼Œå‘èµ·è°ƒç”¨ã€‚ - 4.è¿›è¡Œç›‘æ§ - 5.å¯¹è°ƒç”¨çš„ç»“æœè¿›è¡Œå¤„ç†\nè¯·æ±‚æµç¨‹æ¢³ç†  ä»¥ä¸‹æ¼”ç¤ºä»£ç æˆªå›¾æ¥è‡ªäºsoul-examplesä¸‹çš„http demoï¼Œè°ƒç”¨çš„æ¥å£åœ°å€ä¸ºhttp://127.0.0.1:9195/http/test/findByUserId?userId=10\n åœ¨DefaultSoulPluginChainçš„excuteæ–¹æ³•è¿›è¡ŒåŸ‹ç‚¹ï¼ŒæŸ¥çœ‹ä¸€æ¬¡httpè¯·æ±‚è°ƒç”¨ç»è¿‡äº†å“ªäº›ç±»ï¼Ÿ\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange) { return Mono.defer(() -\u0026amp;gt; { if (this.index \u0026amp;lt; plugins.size()) { SoulPlugin plugin = plugins.get(this.index++); Boolean skip = plugin.skip(exchange); if (skip) { System.out.println(\u0026amp;quot;è·³è¿‡çš„æ’ä»¶ä¸º\u0026amp;quot;+plugin.getClass().getName().replace(\u0026amp;quot;org.dromara.soul.plugin.\u0026amp;quot;,\u0026amp;quot;\u0026amp;quot;)); return this.execute(exchange); } System.out.println(\u0026amp;quot;æœªè·³è¿‡çš„æ’ä»¶ä¸º\u0026amp;quot;+plugin.getClass().getName().replace(\u0026amp;quot;org.dromara.soul.plugin.\u0026amp;quot;,\u0026amp;quot;\u0026amp;quot;)); return plugin.execute(exchange, this); } return Mono.empty(); }); }  æœ€ç»ˆè¾“å‡ºçš„æœªè·³è¿‡çš„æ’ä»¶å¦‚ä¸‹ï¼š\næœªè·³è¿‡çš„æ’ä»¶ä¸ºglobal.GlobalPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºsign.SignPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºwaf.WafPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºratelimiter.RateLimiterPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºhystrix.HystrixPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºresilience4j.Resilience4JPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºdivide.DividePlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºhttpclient.WebClientPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºalibaba.dubbo.param.BodyParamPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºmonitor.MonitorPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºhttpclient.response.WebClientResponsePlugin\n è¿™é‡Œæœ‰ä¸ªå°ç–‘æƒ‘ï¼Œä¸ºå•¥è¿™ä¸ªalibaba.dubbo.param.BodyParamPluginæ’ä»¶ä¼šè¢«æ‰§è¡Œï¼Œæš‚æ—¶å¿½ç•¥ï¼ŒåæœŸè·Ÿè¸ªã€‚\n æˆ‘ä»¬å‘ç°ä¸€æ¬¡é’ˆå¯¹äºhttpè¯·æ±‚çš„ç½‘å…³è°ƒç”¨ æ‰€æ‰§è¡Œçš„æ’ä»¶çš„å¤§ä½“æµç¨‹ä¸æˆ‘ä»¬çŒœæƒ³çš„å¤„ç†æµç¨‹ä¸€è‡´ã€‚\nç›®å‰æˆ‘ä»¬åªæŒ‘é‡ç‚¹æ¥è®²ï¼Œå³GlobalPluginã€DividePluginã€WebClientPluginã€WebClientResponsePluginã€‚\nå‘èµ·Debugè°ƒç”¨ä¾æ¬¡è¿½è¸ªä¸Šè¿°å››ä¸ªæ’ä»¶çš„ä½œç”¨ã€‚\nGlobalPlugin SoulContextå¯¹è±¡å°è£…æ’ä»¶ GlobalPluginçš„æ’ä»¶çš„excuteæ–¹æ³•å¦‚ä¸‹æ‰€ç¤º\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange, final SoulPluginChain chain) { final ServerHttpRequest request = exchange.getRequest(); final HttpHeaders headers = request.getHeaders(); final String upgrade = headers.getFirst(\u0026amp;quot;Upgrade\u0026amp;quot;); SoulContext soulContext; if (StringUtils.isBlank(upgrade) || !\u0026amp;quot;websocket\u0026amp;quot;.equals(upgrade)) { soulContext = builder.build(exchange); } else { â€¦","date":1611619200,"description":"Soul Gateway Learning Http Request Adventure","dir":"blog/soul_source_learning_17_http/","fuzzywordcount":5100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"afc456b32a536ba6818ee74ad25ce07f62385f53","permalink":"/blog/soul_source_learning_17_http/","publishdate":"2021-01-26T00:00:00Z","readingtime":11,"relpermalink":"/blog/soul_source_learning_17_http/","summary":"å›é¡¾ åœ¨Soul è¯·æ±‚å¤„ç†æ¦‚è§ˆæ¦‚è§ˆè¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥æ™“äº†Soulé’ˆå¯¹äºè¯·æ±‚çš„å¤„ç†å…¥åº“åœ¨DefaultSoulPluginChainçš„excu","tags":["Soul"],"title":"Soul Gateway Learning Http Request Adventure","type":"blog","url":"/blog/soul_source_learning_17_http/","wordcount":5079},{"author":"liquan","categories":"Soul","content":" æœ¬ç¯‡åˆ†æä¸€ä¸‹NacosåŒæ­¥æ•°æ®åŸç†\n1ã€å…ˆé…ç½®ä¸€ä¸‹ç¯å¢ƒ * soul-admin soul-admin/src/main/resources/application.yml\nsoul: sync: nacos: url: localhost:8848 namespace: 1c10d748-af86-43b9-8265-75f487d20c6c # acm: # enabled: false # endpoint: acm.aliyun.com # namespace: # accessKey: # secretKey:  soul-admin/pom.xmlï¼Œè¿™é‡Œé»˜è®¤é…ç½®æ˜¯æœ‰çš„\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.alibaba.nacos\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;nacos-client\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${nacos-client.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   soul-bootstrap soul-bootstrap/src/main/resources/application-local.yml\nsoul : sync: nacos: url: localhost:8848 namespace: 1c10d748-af86-43b9-8265-75f487d20c6c # acm: # enabled: false # endpoint: acm.aliyun.com # namespace: # accessKey: # secretKey:  soul-bootstrap/pom.xmlï¼Œä¸‹é¢çš„é…ç½®é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ \n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-nacos\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  å¯åŠ¨æœåŠ¡\n1ã€å¯åŠ¨ nacos 2ã€å¯åŠ¨ soul-admin 3ã€å¯åŠ¨ soul-bootstrap  2ã€ä¸Šé¢çœ‹ç€æŒºé¡ºåˆ©ï¼Œè¿™ä¸ªè¿‡ç¨‹é‡åˆ°äº†å‘ï¼Œsoul-bootstrap å¯åŠ¨ä¸èµ·æ¥æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¸‹é¢è¯¦ç»†è®°å½•ä¸€ä¸‹ã€‚ é¦–å…ˆsoul-adminå¯åŠ¨åä¸ä¼šä¸»åŠ¨å‘nacosåŒæ­¥ç½‘å…³æ•°æ®ï¼Œéœ€è¦æ‰‹åŠ¨åŒæ­¥ï¼Œå®˜ç½‘è¿™ä¸€ç‚¹æ²¡æœ‰æåˆ°ã€‚è¿™ä¸ªé—®é¢˜ç»Šäº†æˆ‘å¥½ä¹…ï¼Œæœ€åæ˜¯çœ‹åˆ°äº†ç¾¤é‡Œå…¶ä»–åŒå­¦é‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œå‚è€ƒäº†ä»–ä»¬çš„æ–‡ç« æ‰è§£å†³ï¼Œä¸‹é¢è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚\n  1ï¼‰soul-bootstrap å¯åŠ¨çš„æ—¶å€™é‡åˆ°äº†å¦‚ä¸‹çš„é”™è¯¯ï¼ŒNullPointerExceptionã€‚\nsoul-bootstrap å¯åŠ¨çš„æ—¶å€™ä¼šå»ï¼Œnacosè·å–ç½‘å…³æ•°æ®ï¼Œçœ‹åˆ°ä¸‹é¢çš„æ–­ç‚¹ï¼Œæ‹¿åˆ°çš„æ˜¯ç©ºæ•°æ®ã€‚\nError starting ApplicationContext. To display the conditions report re-run your application with \u0026#39;debug\u0026#39; enabled. 2021-01-25 16:49:06.052 ERROR 5273 --- [ main] o.s.boot.SpringApplication : Application run failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name \u0026#39;nacosSyncDataService\u0026#39; defined in class path resource [org/dromara/soul/springboot/starter/sync/data/nacos/NacosSyncDataConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.dromara.soul.sync.data.api.SyncDataService]: Factory method \u0026#39;nacosSyncDataService\u0026#39; threw exception; nested exception is java.lang.NullPointerException ...... at org.dromara.soul.bootstrap.SoulBootstrapApplication.main(SoulBootstrapApplication.java:37) [classes/:na] Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.dromara.soul.sync.data.api.SyncDataService]: Factory method \u0026#39;nacosSyncDataService\u0026#39; threw exception; nested exception is java.lang.NullPointerException at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE] at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE] ... 19 common frames omitted Caused by: java.lang.NullPointerException: null at org.dromara.soul.sync.data.nacos.handler.NacosCacheHandler.updateMetaDataMap(NacosCacheHandler.java:128) ~[classes/:na] at â€¦","date":1611619200,"description":"Soul Gateway Learns Nacos Data Synchronization","dir":"blog/soul_source_learning_14_nacos/","fuzzywordcount":2800,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"e34d995ddb946554b19fbcbf33a5846ca2cea03b","permalink":"/blog/soul_source_learning_14_nacos/","publishdate":"2021-01-26T00:00:00Z","readingtime":6,"relpermalink":"/blog/soul_source_learning_14_nacos/","summary":"æœ¬ç¯‡åˆ†æä¸€ä¸‹NacosåŒæ­¥æ•°æ®åŸç† 1ã€å…ˆé…ç½®ä¸€ä¸‹ç¯å¢ƒ * soul-admin soul-admin/src/main/resources/application.yml soul: sync: nacos: url: localhost:8848 namespace: 1c10d748-af86-43b9-8265-75f487d20c6c # acm: # enabled: false # endpoint: acm.aliyun.com # namespace: # accessKey: # secretKey: soul-admin/pom.xmlï¼Œè¿™","tags":["Soul"],"title":"Soul Gateway Learns Nacos Data Synchronization","type":"blog","url":"/blog/soul_source_learning_14_nacos/","wordcount":2768},{"author":"ç™¾é’°","categories":"Soul","content":" å›é¡¾ åœ¨Soul è¯·æ±‚å¤„ç†æ¦‚è§ˆæ¦‚è§ˆè¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥æ™“äº†Soulé’ˆå¯¹äºè¯·æ±‚çš„å¤„ç†å…¥åº“åœ¨DefaultSoulPluginChainçš„excuteï¼Œå…¶ä¸­æ‰§è¡Œäº†ä¸€ä¸ªæ’ä»¶é“¾çš„æ¨¡å¼æ¥å®Œæˆäº†è¯·æ±‚çš„å¤„ç†ã€‚\næˆ‘ä»¬å¤§ä½“æ¢³ç†äº†æ³¨å…¥åˆ°pluginsçš„æ’ä»¶ï¼Œä½†æ˜¯å³ä½¿è¿™æ ·ä¾ç„¶ä¸èƒ½çºµè§‚å…¨å±€ï¼Œå¯¹æ­¤ç‰¹åœ°å¯¹soulæ’ä»¶æ‰€æ¶‰åŠçš„ç±»è¿›è¡Œäº†ç›¸å…³æ¢³ç†ï¼Œæ•´ä½“æ¢³ç†ç»“æœå¦‚ä¸‹å›¾ã€‚\nåœ¨æ¢³ç†æ–‡ç« ä¸­å¯ä»¥çœ‹åˆ°æ ¸å¿ƒç±»æ˜¯SoulPluginã€PluginEnumã€PluginDataHandlerã€MetaDataSubscriberï¼Œåœ¨æ¢³ç†è¯·æ±‚çš„ç›¸å…³æ–‡ç« ä¸­æˆ‘ä»¬ç›®å‰åªéœ€è¦é‡ç‚¹å…³æ³¨SoulPluginä¸PluginEnumç±»ã€‚\nSoulPluginç±»æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€å®šçš„ç†è§£ï¼Œé‚£PluginEnumæšä¸¾ç±»çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nPluginEnum:æ’ä»¶çš„æšä¸¾ç±»\n   å±æ€§ ä½œç”¨     code æ’ä»¶çš„æ‰§è¡Œé¡ºåº è¶Šå°è¶Šå…ˆæ‰§è¡Œ   role è§’è‰² æš‚æ—¶æœªå‘ç°å®é™…å¼•ç”¨åœ°å€   name æ’ä»¶åç§°    å…¶å®æˆ‘ä»¬ä¸éš¾å‘ç°åœ¨DefaultSoulPluginChainçš„pluginsçš„æ’ä»¶éƒ½æ˜¯æœ‰å›ºå®šçš„æ‰§è¡Œé¡ºåºçš„ï¼Œé‚£è¿™ä¸ªæ’ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯åœ¨å“ªå®šä¹‰çš„å‘¢ï¼Ÿ\næœ€ç»ˆå¯ä»¥è¿½æº¯åˆ°SoulConfigurationç±»ä¸‹\npublic SoulWebHandler soulWebHandler(final ObjectProvider\u0026amp;lt;List\u0026amp;lt;SoulPlugin\u0026amp;gt;\u0026amp;gt; plugins) { //çœç•¥ final List\u0026amp;lt;SoulPlugin\u0026amp;gt; soulPlugins = pluginList.stream() .sorted(Comparator.comparingInt(SoulPlugin::getOrder)).collect(Collectors.toList()); return new SoulWebHandler(soulPlugins); }  æ•´ç†æ•´ä¸ªPluginEnumç±»ç›¸å…³å¼•ç”¨ï¼Œæ•´ç†å‡ºå¦‚ä¸‹è¡¨æ ¼ï¼Œä¸éš¾çœ‹å‡ºæ’ä»¶ä¸æ’ä»¶ä¹‹é—´çš„é¡ºåºå…³ç³»    ç­‰çº§ ä½œç”¨     ç¬¬ä¸€ç­‰çº§ åªæœ‰GlobalPlugin å…¨å±€æ’ä»¶   ç¬¬äºŒç­‰çº§åˆ°ç¬¬å…«ç­‰çº§ å¯ä»¥ç†è§£ä¸ºåœ¨è¯·æ±‚å‘èµ·å‰çš„å‰ç½®å¤„ç†æ’ä»¶   ç¬¬ä¹ç­‰çº§åˆ°ç¬¬åä¸€ç­‰çº§ å¯ä»¥ç†è§£ä¸ºé’ˆå¯¹è°ƒç”¨æ–¹çš„æ–¹å¼æ‰€é’ˆå¯¹çš„ä¸åŒè°ƒç”¨å¤„ç†   ç¬¬åäºŒç­‰çº§ åªæœ‰MonitorPlugin ç›‘æ§æ’ä»¶   ç¬¬åä¸‰ç­‰çº§ æ˜¯é’ˆå¯¹äºå„ä¸ªè°ƒç”¨æ–¹è¿”å›ç»“æœå¤„ç†çš„Responseç›¸å…³æ’ä»¶    åœ¨åˆšæ‰çš„å›é¡¾ä¸­æˆ‘ä»¬å·²ç»æ˜ç™½soulå¤„ç†è¯·æ±‚çš„å¤§ä½“æµç¨‹ - 1.GloBalPluginæ’ä»¶ è¿›è¡Œå…¨å±€çš„åˆå§‹åŒ– - 2.éƒ¨åˆ†æ’ä»¶æ ¹æ®é‰´æƒã€é™æµã€ç†”æ–­ç­‰è§„åˆ™å¯¹è¯·æ±‚è¿›è¡Œå¤„ç† - 3.é€‰æ‹©é€‚åˆè‡ªå·±çš„è°ƒç”¨æ–¹å¼è¿›è¡Œæ‹¼è£…å‚æ•°ï¼Œå‘èµ·è°ƒç”¨ã€‚ - 4.è¿›è¡Œç›‘æ§ - 5.å¯¹è°ƒç”¨çš„ç»“æœè¿›è¡Œå¤„ç†\nè¯·æ±‚æµç¨‹æ¢³ç†  ä»¥ä¸‹æ¼”ç¤ºä»£ç æˆªå›¾æ¥è‡ªäºsoul-examplesä¸‹çš„http demoï¼Œè°ƒç”¨çš„æ¥å£åœ°å€ä¸ºhttp://127.0.0.1:9195/http/test/findByUserId?userId=10\n åœ¨DefaultSoulPluginChainçš„excuteæ–¹æ³•è¿›è¡ŒåŸ‹ç‚¹ï¼ŒæŸ¥çœ‹ä¸€æ¬¡httpè¯·æ±‚è°ƒç”¨ç»è¿‡äº†å“ªäº›ç±»ï¼Ÿ\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange) { return Mono.defer(() -\u0026amp;gt; { if (this.index \u0026amp;lt; plugins.size()) { SoulPlugin plugin = plugins.get(this.index++); Boolean skip = plugin.skip(exchange); if (skip) { System.out.println(\u0026amp;quot;è·³è¿‡çš„æ’ä»¶ä¸º\u0026amp;quot;+plugin.getClass().getName().replace(\u0026amp;quot;org.dromara.soul.plugin.\u0026amp;quot;,\u0026amp;quot;\u0026amp;quot;)); return this.execute(exchange); } System.out.println(\u0026amp;quot;æœªè·³è¿‡çš„æ’ä»¶ä¸º\u0026amp;quot;+plugin.getClass().getName().replace(\u0026amp;quot;org.dromara.soul.plugin.\u0026amp;quot;,\u0026amp;quot;\u0026amp;quot;)); return plugin.execute(exchange, this); } return Mono.empty(); }); }  æœ€ç»ˆè¾“å‡ºçš„æœªè·³è¿‡çš„æ’ä»¶å¦‚ä¸‹ï¼š\næœªè·³è¿‡çš„æ’ä»¶ä¸ºglobal.GlobalPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºsign.SignPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºwaf.WafPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºratelimiter.RateLimiterPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºhystrix.HystrixPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºresilience4j.Resilience4JPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºdivide.DividePlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºhttpclient.WebClientPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºalibaba.dubbo.param.BodyParamPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºmonitor.MonitorPlugin\næœªè·³è¿‡çš„æ’ä»¶ä¸ºhttpclient.response.WebClientResponsePlugin\n è¿™é‡Œæœ‰ä¸ªå°ç–‘æƒ‘ï¼Œä¸ºå•¥è¿™ä¸ªalibaba.dubbo.param.BodyParamPluginæ’ä»¶ä¼šè¢«æ‰§è¡Œï¼Œæš‚æ—¶å¿½ç•¥ï¼ŒåæœŸè·Ÿè¸ªã€‚\n æˆ‘ä»¬å‘ç°ä¸€æ¬¡é’ˆå¯¹äºhttpè¯·æ±‚çš„ç½‘å…³è°ƒç”¨ æ‰€æ‰§è¡Œçš„æ’ä»¶çš„å¤§ä½“æµç¨‹ä¸æˆ‘ä»¬çŒœæƒ³çš„å¤„ç†æµç¨‹ä¸€è‡´ã€‚\nç›®å‰æˆ‘ä»¬åªæŒ‘é‡ç‚¹æ¥è®²ï¼Œå³GlobalPluginã€DividePluginã€WebClientPluginã€WebClientResponsePluginã€‚\nå‘èµ·Debugè°ƒç”¨ä¾æ¬¡è¿½è¸ªä¸Šè¿°å››ä¸ªæ’ä»¶çš„ä½œç”¨ã€‚\nGlobalPlugin SoulContextå¯¹è±¡å°è£…æ’ä»¶ GlobalPluginçš„æ’ä»¶çš„excuteæ–¹æ³•å¦‚ä¸‹æ‰€ç¤º\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange, final SoulPluginChain chain) { final ServerHttpRequest request = exchange.getRequest(); final HttpHeaders headers = request.getHeaders(); final String upgrade = headers.getFirst(\u0026amp;quot;Upgrade\u0026amp;quot;); SoulContext soulContext; if (StringUtils.isBlank(upgrade) || !\u0026amp;quot;websocket\u0026amp;quot;.equals(upgrade)) { soulContext = builder.build(exchange); } else { â€¦","date":1611619200,"description":"Soulç½‘å…³å­¦ä¹ Httpè¯·æ±‚æ¢é™©","dir":"blog/soul_source_learning_17_http/","fuzzywordcount":5100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"78916eebf4d043e978af9c39f43c6265aad84155","permalink":"/zh/blog/soul_source_learning_17_http/","publishdate":"2021-01-26T00:00:00Z","readingtime":11,"relpermalink":"/zh/blog/soul_source_learning_17_http/","summary":"å›é¡¾ åœ¨Soul è¯·æ±‚å¤„ç†æ¦‚è§ˆæ¦‚è§ˆè¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥æ™“äº†Soulé’ˆå¯¹äºè¯·æ±‚çš„å¤„ç†å…¥åº“åœ¨DefaultSoulPluginChainçš„excu","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Httpè¯·æ±‚æ¢é™©","type":"blog","url":"/zh/blog/soul_source_learning_17_http/","wordcount":5079},{"author":"ææƒ","categories":"Soul","content":" æœ¬ç¯‡åˆ†æä¸€ä¸‹NacosåŒæ­¥æ•°æ®åŸç†\n1ã€å…ˆé…ç½®ä¸€ä¸‹ç¯å¢ƒ * soul-admin soul-admin/src/main/resources/application.yml\nsoul: sync: nacos: url: localhost:8848 namespace: 1c10d748-af86-43b9-8265-75f487d20c6c # acm: # enabled: false # endpoint: acm.aliyun.com # namespace: # accessKey: # secretKey:  soul-admin/pom.xmlï¼Œè¿™é‡Œé»˜è®¤é…ç½®æ˜¯æœ‰çš„\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.alibaba.nacos\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;nacos-client\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${nacos-client.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   soul-bootstrap soul-bootstrap/src/main/resources/application-local.yml\nsoul : sync: nacos: url: localhost:8848 namespace: 1c10d748-af86-43b9-8265-75f487d20c6c # acm: # enabled: false # endpoint: acm.aliyun.com # namespace: # accessKey: # secretKey:  soul-bootstrap/pom.xmlï¼Œä¸‹é¢çš„é…ç½®é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ \n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-nacos\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  å¯åŠ¨æœåŠ¡\n1ã€å¯åŠ¨ nacos 2ã€å¯åŠ¨ soul-admin 3ã€å¯åŠ¨ soul-bootstrap  2ã€ä¸Šé¢çœ‹ç€æŒºé¡ºåˆ©ï¼Œè¿™ä¸ªè¿‡ç¨‹é‡åˆ°äº†å‘ï¼Œsoul-bootstrap å¯åŠ¨ä¸èµ·æ¥æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¸‹é¢è¯¦ç»†è®°å½•ä¸€ä¸‹ã€‚ é¦–å…ˆsoul-adminå¯åŠ¨åä¸ä¼šä¸»åŠ¨å‘nacosåŒæ­¥ç½‘å…³æ•°æ®ï¼Œéœ€è¦æ‰‹åŠ¨åŒæ­¥ï¼Œå®˜ç½‘è¿™ä¸€ç‚¹æ²¡æœ‰æåˆ°ã€‚è¿™ä¸ªé—®é¢˜ç»Šäº†æˆ‘å¥½ä¹…ï¼Œæœ€åæ˜¯çœ‹åˆ°äº†ç¾¤é‡Œå…¶ä»–åŒå­¦é‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œå‚è€ƒäº†ä»–ä»¬çš„æ–‡ç« æ‰è§£å†³ï¼Œä¸‹é¢è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚\n  1ï¼‰soul-bootstrap å¯åŠ¨çš„æ—¶å€™é‡åˆ°äº†å¦‚ä¸‹çš„é”™è¯¯ï¼ŒNullPointerExceptionã€‚\nsoul-bootstrap å¯åŠ¨çš„æ—¶å€™ä¼šå»ï¼Œnacosè·å–ç½‘å…³æ•°æ®ï¼Œçœ‹åˆ°ä¸‹é¢çš„æ–­ç‚¹ï¼Œæ‹¿åˆ°çš„æ˜¯ç©ºæ•°æ®ã€‚\nError starting ApplicationContext. To display the conditions report re-run your application with \u0026#39;debug\u0026#39; enabled. 2021-01-25 16:49:06.052 ERROR 5273 --- [ main] o.s.boot.SpringApplication : Application run failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name \u0026#39;nacosSyncDataService\u0026#39; defined in class path resource [org/dromara/soul/springboot/starter/sync/data/nacos/NacosSyncDataConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.dromara.soul.sync.data.api.SyncDataService]: Factory method \u0026#39;nacosSyncDataService\u0026#39; threw exception; nested exception is java.lang.NullPointerException ...... at org.dromara.soul.bootstrap.SoulBootstrapApplication.main(SoulBootstrapApplication.java:37) [classes/:na] Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.dromara.soul.sync.data.api.SyncDataService]: Factory method \u0026#39;nacosSyncDataService\u0026#39; threw exception; nested exception is java.lang.NullPointerException at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE] at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE] ... 19 common frames omitted Caused by: java.lang.NullPointerException: null at org.dromara.soul.sync.data.nacos.handler.NacosCacheHandler.updateMetaDataMap(NacosCacheHandler.java:128) ~[classes/:na] at â€¦","date":1611619200,"description":"Soulç½‘å…³å­¦ä¹ Nacosæ•°æ®åŒæ­¥","dir":"blog/soul_source_learning_14_nacos/","fuzzywordcount":2800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"aa3ccbe40bb0ac41704dfadf42e095c55d8303c8","permalink":"/zh/blog/soul_source_learning_14_nacos/","publishdate":"2021-01-26T00:00:00Z","readingtime":6,"relpermalink":"/zh/blog/soul_source_learning_14_nacos/","summary":"æœ¬ç¯‡åˆ†æä¸€ä¸‹NacosåŒæ­¥æ•°æ®åŸç† 1ã€å…ˆé…ç½®ä¸€ä¸‹ç¯å¢ƒ * soul-admin soul-admin/src/main/resources/application.yml soul: sync: nacos: url: localhost:8848 namespace: 1c10d748-af86-43b9-8265-75f487d20c6c # acm: # enabled: false # endpoint: acm.aliyun.com # namespace: # accessKey: # secretKey: soul-admin/pom.xmlï¼Œè¿™","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Nacosæ•°æ®åŒæ­¥","type":"blog","url":"/zh/blog/soul_source_learning_14_nacos/","wordcount":2768},{"author":"zhuming","categories":"Soul","content":" åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é…ç½® åå°ä¿¡æ¯æ¨¡å¼åˆ‡æ¢\nåœ¨ä¸Šç¯‡åˆ†æ Zookeeper åŒæ­¥çš„æ–‡ç«  (Soulç½‘å…³æºç åˆ†æ-11æœŸ) ä¸­, æˆ‘ä»¬é€šè¿‡ DataSyncConfiguration è¿™ä¸ªé…ç½®ç±»åšçš„åˆ‡æ¢, è¿™æ¬¡æœ‰äº†ç»éªŒ, ç›´æ¥è´´é…ç½®\nsoul: sync: websocket: enabled: false http: enabled: true  ç½‘å…³ä¿¡æ¯æ¨¡å¼åˆ‡æ¢\nåå°æ¨¡å¼åˆ‡æ¢å®Œæˆ, æ¥ä¸‹æ¥å°±æ˜¯ç½‘å…³, ç»§ç»­ç…§è‘«èŠ¦ç”»ç“¢æ‰¾åˆ°å…³é”®é…ç½®ç±»ä¸Šçš„å‚æ•°è®¾ç½®. è¿™é‡Œä¹Ÿç›´æ¥è´´ç½‘å…³é…ç½®\nsoul: sync: #\twebsocket: #\turls: ws://localhost:9095/websocket http: url: http://localhost:9095  DataChangedListener ä½“ç³» åå°æ•°æ®åˆå§‹åŒ– DataSyncConfiguration é…ç½®å…³é”® Bean , çœ‹çœ‹è¿™é‡Œå…³äº Http é•¿è½®è¯¢çš„ Bean\n@Configuration public class DataSyncConfiguration { @Configuration @ConditionalOnProperty(name = \u0026amp;quot;soul.sync.http.enabled\u0026amp;quot;, havingValue = \u0026amp;quot;true\u0026amp;quot;) @EnableConfigurationProperties(HttpSyncProperties.class) static class HttpLongPollingListener { @Bean @ConditionalOnMissingBean(HttpLongPollingDataChangedListener.class) public HttpLongPollingDataChangedListener httpLongPollingDataChangedListener(final HttpSyncProperties httpSyncProperties) { return new HttpLongPollingDataChangedListener(httpSyncProperties); } } }  HttpLongPollingDataChangedListener ç»§æ‰¿è‡ª AbstractDataChangedListener, ä»–ä»¬éƒ½å®ç°è‡ªæ¥å£ DataChangedListener.\nDataChangedListener è¿™ä¸ªæ¥å£æˆ‘ä»¬åº”è¯¥éå¸¸ç†Ÿæ‚‰äº†, å®ƒæä¾›äº†ä¼—å¤šä¸åŒæ•°æ®ç±»å‹å˜åŠ¨çš„æ–¹æ³•, ä¾› DataChangedEventDispatcher è°ƒç”¨, è¿™ä¸ªç±»æ›´æ˜¯ä¸€ä¸ª \u0026amp;ldquo;è€æœ‹å‹\u0026amp;rdquo; äº†, ä½œä¸ºä¸€ä¸ªä¸­è½¬ç«™, è¾›å‹¤çš„å¤„ç†æ•°æ®åŒæ­¥çš„äº‹ä»¶åˆ†ç±»åŠåˆ†å‘\npublic class DataChangedEventDispatcher implements ApplicationListener\u0026amp;lt;DataChangedEvent\u0026amp;gt;, InitializingBean { // æŒæœ‰ DataChangedListener é›†åˆ private List\u0026amp;lt;DataChangedListener\u0026amp;gt; listeners; // äº‹ä»¶å˜åŠ¨æ—¶, é€šçŸ¥ DataChangedListener çš„ä¸åŒäº‹ä»¶ç±»å‹çš„æ–¹æ³• public void onApplicationEvent(final DataChangedEvent event) { for (DataChangedListener listener : listeners) { switch (event.getGroupKey()) { case APP_AUTH: listener.onAppAuthChanged((List\u0026amp;lt;AppAuthData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case PLUGIN: listener.onPluginChanged((List\u0026amp;lt;PluginData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case RULE: listener.onRuleChanged((List\u0026amp;lt;RuleData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case SELECTOR: listener.onSelectorChanged((List\u0026amp;lt;SelectorData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case META_DATA: listener.onMetaDataChanged((List\u0026amp;lt;MetaData\u0026amp;gt;) event.getSource(), event.getEventType()); break; default: throw new IllegalStateException(\u0026amp;quot;Unexpected value: \u0026amp;quot; + event.getGroupKey()); } } } }  public interface DataChangedListener { default void onAppAuthChanged(List\u0026amp;lt;AppAuthData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onPluginChanged(List\u0026amp;lt;PluginData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onSelectorChanged(List\u0026amp;lt;SelectorData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onMetaDataChanged(List\u0026amp;lt;MetaData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onRuleChanged(List\u0026amp;lt;RuleData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} }  è¿™ä¸¤ä¸ªçš„ä½œç”¨äº†è§£äº†, é‚£ AbstractDataChangedListener åˆåšäº†ä»€ä¹ˆäº‹æƒ…? ä¸¾ä¸ª onPluginChanged() çš„ä¾‹å­:\npublic abstract class AbstractDataChangedListener implements DataChangedListener, InitializingBean { protected static final ConcurrentMap\u0026amp;lt;String, â€¦","date":1611532800,"description":"Soul Gateway Learns Http Long Polling Analysis","dir":"blog/soul_source_learning_08_httplongpolling_01/","fuzzywordcount":2800,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"f85e7838d0c019ab0972e3005d3d4f37fb544e7e","permalink":"/blog/soul_source_learning_08_httplongpolling_01/","publishdate":"2021-01-25T00:00:00Z","readingtime":6,"relpermalink":"/blog/soul_source_learning_08_httplongpolling_01/","summary":"åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é…ç½® åå°ä¿¡æ¯æ¨¡å¼åˆ‡æ¢ åœ¨ä¸Šç¯‡åˆ†æ Zookeeper åŒæ­¥çš„æ–‡ç«  (Soulç½‘å…³æºç åˆ†æ-11æœŸ) ä¸­, æˆ‘ä»¬é€šè¿‡ DataSyncConfiguration è¿™ä¸ªé…ç½®ç±»åšçš„","tags":["Soul"],"title":"Soul Gateway Learns Http Long Polling Analysis 01","type":"blog","url":"/blog/soul_source_learning_08_httplongpolling_01/","wordcount":2736},{"author":"æœ±æ˜","categories":"Soul","content":" åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é…ç½® åå°ä¿¡æ¯æ¨¡å¼åˆ‡æ¢\nåœ¨ä¸Šç¯‡åˆ†æ Zookeeper åŒæ­¥çš„æ–‡ç«  (Soulç½‘å…³æºç åˆ†æ-11æœŸ) ä¸­, æˆ‘ä»¬é€šè¿‡ DataSyncConfiguration è¿™ä¸ªé…ç½®ç±»åšçš„åˆ‡æ¢, è¿™æ¬¡æœ‰äº†ç»éªŒ, ç›´æ¥è´´é…ç½®\nsoul: sync: websocket: enabled: false http: enabled: true  ç½‘å…³ä¿¡æ¯æ¨¡å¼åˆ‡æ¢\nåå°æ¨¡å¼åˆ‡æ¢å®Œæˆ, æ¥ä¸‹æ¥å°±æ˜¯ç½‘å…³, ç»§ç»­ç…§è‘«èŠ¦ç”»ç“¢æ‰¾åˆ°å…³é”®é…ç½®ç±»ä¸Šçš„å‚æ•°è®¾ç½®. è¿™é‡Œä¹Ÿç›´æ¥è´´ç½‘å…³é…ç½®\nsoul: sync: #\twebsocket: #\turls: ws://localhost:9095/websocket http: url: http://localhost:9095  DataChangedListener ä½“ç³» åå°æ•°æ®åˆå§‹åŒ– DataSyncConfiguration é…ç½®å…³é”® Bean , çœ‹çœ‹è¿™é‡Œå…³äº Http é•¿è½®è¯¢çš„ Bean\n@Configuration public class DataSyncConfiguration { @Configuration @ConditionalOnProperty(name = \u0026amp;quot;soul.sync.http.enabled\u0026amp;quot;, havingValue = \u0026amp;quot;true\u0026amp;quot;) @EnableConfigurationProperties(HttpSyncProperties.class) static class HttpLongPollingListener { @Bean @ConditionalOnMissingBean(HttpLongPollingDataChangedListener.class) public HttpLongPollingDataChangedListener httpLongPollingDataChangedListener(final HttpSyncProperties httpSyncProperties) { return new HttpLongPollingDataChangedListener(httpSyncProperties); } } }  HttpLongPollingDataChangedListener ç»§æ‰¿è‡ª AbstractDataChangedListener, ä»–ä»¬éƒ½å®ç°è‡ªæ¥å£ DataChangedListener.\nDataChangedListener è¿™ä¸ªæ¥å£æˆ‘ä»¬åº”è¯¥éå¸¸ç†Ÿæ‚‰äº†, å®ƒæä¾›äº†ä¼—å¤šä¸åŒæ•°æ®ç±»å‹å˜åŠ¨çš„æ–¹æ³•, ä¾› DataChangedEventDispatcher è°ƒç”¨, è¿™ä¸ªç±»æ›´æ˜¯ä¸€ä¸ª \u0026amp;ldquo;è€æœ‹å‹\u0026amp;rdquo; äº†, ä½œä¸ºä¸€ä¸ªä¸­è½¬ç«™, è¾›å‹¤çš„å¤„ç†æ•°æ®åŒæ­¥çš„äº‹ä»¶åˆ†ç±»åŠåˆ†å‘\npublic class DataChangedEventDispatcher implements ApplicationListener\u0026amp;lt;DataChangedEvent\u0026amp;gt;, InitializingBean { // æŒæœ‰ DataChangedListener é›†åˆ private List\u0026amp;lt;DataChangedListener\u0026amp;gt; listeners; // äº‹ä»¶å˜åŠ¨æ—¶, é€šçŸ¥ DataChangedListener çš„ä¸åŒäº‹ä»¶ç±»å‹çš„æ–¹æ³• public void onApplicationEvent(final DataChangedEvent event) { for (DataChangedListener listener : listeners) { switch (event.getGroupKey()) { case APP_AUTH: listener.onAppAuthChanged((List\u0026amp;lt;AppAuthData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case PLUGIN: listener.onPluginChanged((List\u0026amp;lt;PluginData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case RULE: listener.onRuleChanged((List\u0026amp;lt;RuleData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case SELECTOR: listener.onSelectorChanged((List\u0026amp;lt;SelectorData\u0026amp;gt;) event.getSource(), event.getEventType()); break; case META_DATA: listener.onMetaDataChanged((List\u0026amp;lt;MetaData\u0026amp;gt;) event.getSource(), event.getEventType()); break; default: throw new IllegalStateException(\u0026amp;quot;Unexpected value: \u0026amp;quot; + event.getGroupKey()); } } } }  public interface DataChangedListener { default void onAppAuthChanged(List\u0026amp;lt;AppAuthData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onPluginChanged(List\u0026amp;lt;PluginData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onSelectorChanged(List\u0026amp;lt;SelectorData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onMetaDataChanged(List\u0026amp;lt;MetaData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} default void onRuleChanged(List\u0026amp;lt;RuleData\u0026amp;gt; changed, DataEventTypeEnum eventType) {} }  è¿™ä¸¤ä¸ªçš„ä½œç”¨äº†è§£äº†, é‚£ AbstractDataChangedListener åˆåšäº†ä»€ä¹ˆäº‹æƒ…? ä¸¾ä¸ª onPluginChanged() çš„ä¾‹å­:\npublic abstract class AbstractDataChangedListener implements DataChangedListener, InitializingBean { protected static final ConcurrentMap\u0026amp;lt;String, â€¦","date":1611532800,"description":"Soulç½‘å…³å­¦ä¹ Httpé•¿è½®è¯¢è§£æ","dir":"blog/soul_source_learning_08_httplongpolling_01/","fuzzywordcount":2800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"7cba2fe17b603e2305687a5d274fcbacd850b1b4","permalink":"/zh/blog/soul_source_learning_08_httplongpolling_01/","publishdate":"2021-01-25T00:00:00Z","readingtime":6,"relpermalink":"/zh/blog/soul_source_learning_08_httplongpolling_01/","summary":"åå°ä¸ç½‘å…³æ•°æ®åŒæ­¥ (Httpé•¿è½®è¯¢ç¯‡) é…ç½® åå°ä¿¡æ¯æ¨¡å¼åˆ‡æ¢ åœ¨ä¸Šç¯‡åˆ†æ Zookeeper åŒæ­¥çš„æ–‡ç«  (Soulç½‘å…³æºç åˆ†æ-11æœŸ) ä¸­, æˆ‘ä»¬é€šè¿‡ DataSyncConfiguration è¿™ä¸ªé…ç½®ç±»åšçš„","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Httpé•¿è½®è¯¢è§£æ01","type":"blog","url":"/zh/blog/soul_source_learning_08_httplongpolling_01/","wordcount":2736},{"author":"fanjinpeng,zhuming","categories":"Soul","content":"  Fanjinpeng\n 1.å‰æƒ…å›é¡¾ åœ¨ç¬¬4ç¯‡ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº† HTTP ç”¨æˆ·ä¸šåŠ¡ç³»ç»Ÿæ¥å…¥ Soul ç½‘å…³åï¼Œä¼šè°ƒç”¨ soul-admin çš„æ³¨å†Œæ¥å£ï¼ŒæŠŠéœ€è¦ç½‘å…³ä»£ç†çš„æ¥å£ä¿¡æ¯å…¨éƒ¨æ³¨å†Œåˆ° soul-admin ä¸Šï¼Œåœ¨æœ€åï¼Œä¼šé€šè¿‡ websocket é•¿è¿æ¥ï¼Œå°†soul-admin æ¥æ”¶åˆ°çš„æ¥å£ä¿¡æ¯åŒæ­¥ç»™ Soul ç½‘å…³ï¼ˆå³ soul-bootstrapï¼‰ï¼Œä»Šå¤©å°±æ¥æ¥ç€ç»§ç»­åˆ†æï¼Œæ•°æ®æ˜¯æ€ä¹ˆåŒæ­¥åˆ° soul-bootstrap çš„ã€‚\nä¸æ¸…æ¥šæµç¨‹çš„å¯ä»¥å‡ºé—¨å·¦è½¬çœ‹ä¸‹ç¬¬4ç¯‡æ–‡ç«  ã€Soulæºç é˜…è¯»ã€‘4.HTTP ç”¨æˆ·æ¥å…¥ Soul è°ƒç”¨ /soul-client/springmvc-register æ¥å£é€»è¾‘åˆ†æ\n2.soul-admin ä¸ soul-bootstrap æ•°æ®åŒæ­¥ è¿™é‡Œä¸ºäº†éªŒè¯æ•°æ®åŒæ­¥æµç¨‹ï¼Œå…¶å®ä¹Ÿæ²¡å¿…è¦éå¾—å¯åŠ¨ä¸šåŠ¡ç³»ç»Ÿï¼Œå®Œå…¨å¯ä»¥åªå¯åŠ¨ soul-admin å’Œ soul-bootstrap ä¸¤ä¸ªç³»ç»Ÿå³å¯ï¼Œå¯ä»¥åœ¨é¡µé¢æ‰“å¼€æˆ–å…³é—­æ’ä»¶ï¼Œçœ‹çœ‹è¿™ä¸ªæµç¨‹æ˜¯æ€ä¹ˆå®ç°çš„ã€‚\næ•°æ®åŒæ­¥ç­–ç•¥å®˜ç½‘é“¾æ¥ https://dromara.org/zh-cn/docs/soul/user-dataSync.html\n2.1 å¯åŠ¨2ä¸ªç³»ç»Ÿ éƒ½æ˜¯æŒ‰ç…§é¡¹ç›®é»˜è®¤å¯åŠ¨çš„ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•é…ç½®æ–‡ä»¶ã€‚\n2.2 é¡µé¢æ“ä½œæŸ¥æ‰¾æ¥å£ è¿™é‡ŒæŠŠ divide æ’ä»¶å¯åŠ¨ï¼ŒF12ï¼Œçœ‹ä¸‹å‰å°ä¼šè°ƒç”¨ soul-admin å“ªä¸ªæ¥å£ã€‚\nå¯ä»¥çœ‹åˆ°å‰å°å‘åå°å‘é€äº†ä¸€ä¸ª PUT è¯·æ±‚ï¼šhttp://localhost:9095/plugin/5\n2.3 åå°æ¥å£ åœ¨é¡¹ç›®ä¸­æœç´¢è¿™ä¸ªæ¥å£\n// PluginController.java @RestController @RequestMapping(\u0026amp;quot;/plugin\u0026amp;quot;) public class PluginController { ... /** * update plugin. * * @param id primary key. * @param pluginDTO plugin. * @return {@linkplain SoulAdminResult} */ @PutMapping(\u0026amp;quot;/{id}\u0026amp;quot;) public SoulAdminResult updatePlugin(@PathVariable(\u0026amp;quot;id\u0026amp;quot;) final String id, @RequestBody final PluginDTO pluginDTO) { Objects.requireNonNull(pluginDTO); pluginDTO.setId(id); final String result = pluginService.createOrUpdate(pluginDTO); if (StringUtils.isNoneBlank(result)) { return SoulAdminResult.error(result); } return SoulAdminResult.success(SoulResultMessage.UPDATE_SUCCESS); } ... }  è¿›åˆ°å®ç°ç±»é‡Œ\n// PluginServiceImpl.java /** * create or update plugin. * * @param pluginDTO {@linkplain PluginDTO} * @return rows */ @Override @Transactional(rollbackFor = Exception.class) public String createOrUpdate(final PluginDTO pluginDTO) { final String msg = checkData(pluginDTO); if (StringUtils.isNoneBlank(msg)) { return msg; } PluginDO pluginDO = PluginDO.buildPluginDO(pluginDTO); DataEventTypeEnum eventType = DataEventTypeEnum.CREATE; if (StringUtils.isBlank(pluginDTO.getId())) { pluginMapper.insertSelective(pluginDO); } else { eventType = DataEventTypeEnum.UPDATE; pluginMapper.updateSelective(pluginDO); } // publish change event. eventPublisher.publishEvent(new DataChangedEvent(ConfigGroupEnum.PLUGIN, eventType, Collections.singletonList(PluginTransfer.INSTANCE.mapToData(pluginDO)))); return StringUtils.EMPTY; }  è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œå‰åŠéƒ¨åˆ†éƒ½æ˜¯åœ¨æ“ä½œæ•°æ®åº“ï¼ŒæŠŠç›¸å…³ä¿¡æ¯æŒä¹…åŒ–ï¼›ååŠéƒ¨åˆ†æ˜¯å‘å¸ƒäº†ä¸€ä¸ªäº‹ä»¶ã€‚\n2.4 å‘å¸ƒäº‹ä»¶ è¿™é‡Œå‘å¸ƒçš„äº‹ä»¶ç”¨ DataChangedEvent å°è£…äº†ä¸€å±‚ï¼Œå†çœ‹é‡Œé¢æœ‰1ä¸ªæšä¸¾ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šç§ç±»å‹ï¼š\n/** * configuration group. * * @author huangxiaofeng */ public enum ConfigGroupEnum { APP_AUTH, PLUGIN, RULE, SELECTOR, META_DATA; ... }  çœ‹åˆ°è¿™å‡ ç§ç±»å‹ï¼Œå¦‚æœå¯¹ç¬¬4ç¯‡è¿˜æœ‰å°è±¡çš„è¯ï¼Œå¯ä»¥çœ‹å‡ºå½“æ—¶å‘é€äº‹ä»¶çš„ç±»å‹å°±æ˜¯ SELECTOR å’Œ RULEï¼Œç°åœ¨æ˜¯ PLUGINï¼Œè™½ç„¶ç±»å‹ä¸åŒï¼Œä½†ä¸å½±å“æˆ‘ä»¬ç»§ç»­åˆ†æåé¢çš„é€»è¾‘ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚\nå¦å¤–ä¸€ä¸ª eventType ä¹Ÿæ˜¯æšä¸¾ï¼Œè¿™é‡Œæœ‰ DELETEã€CREATEã€UPDATEã€REFRESHã€MYSELF 5ç§ç±»å‹ï¼Œæ­¤æ—¶æ˜¯ UPDATEã€‚\n/** * The enum Data event type. * * @author xiaoyu */ public enum DataEventTypeEnum { /** * delete event. */ DELETE, /** * insert event. */ CREATE, /** * update event. */ UPDATE, /** * REFRESH data event type enum. */ REFRESH, /** * Myself data event type enum. */ MYSELF; ... }  2.5 ç›‘å¬äº‹ä»¶ æ‰¾åˆ°ç›‘å¬äº‹ä»¶çš„ä»£ç ï¼š\n// DataChangedEventDispatcher.java @Component public class DataChangedEventDispatcher implements â€¦","date":1611273600,"description":"Soul Gateway Learns WebSocket Data Synchronization Analysis","dir":"blog/soul_source_learning_10_websocket/","fuzzywordcount":3900,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"e31b1cdbf9ba2ec728420037cb89c0c8115357b6","permalink":"/blog/soul_source_learning_10_websocket/","publishdate":"2021-01-22T00:00:00Z","readingtime":8,"relpermalink":"/blog/soul_source_learning_10_websocket/","summary":"Fanjinpeng 1.å‰æƒ…å›é¡¾ åœ¨ç¬¬4ç¯‡ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº† HTTP ç”¨æˆ·ä¸šåŠ¡ç³»ç»Ÿæ¥å…¥ Soul ç½‘å…³åï¼Œä¼šè°ƒç”¨ soul-admin çš„æ³¨å†Œæ¥å£ï¼ŒæŠŠéœ€è¦ç½‘å…³ä»£ç†çš„æ¥å£ä¿¡æ¯å…¨éƒ¨æ³¨å†Œåˆ° soul-admin ä¸Šï¼Œåœ¨æœ€åï¼Œä¼šé€šè¿‡ websocket","tags":["Soul"],"title":"Soul Gateway Learns WebSocket Data Synchronization Analysis","type":"blog","url":"/blog/soul_source_learning_10_websocket/","wordcount":3859},{"author":"èŒƒé‡‘é¹,æœ±æ˜","categories":"Soul","content":"  èŒƒé‡‘é¹\n 1.å‰æƒ…å›é¡¾ åœ¨ç¬¬4ç¯‡ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº† HTTP ç”¨æˆ·ä¸šåŠ¡ç³»ç»Ÿæ¥å…¥ Soul ç½‘å…³åï¼Œä¼šè°ƒç”¨ soul-admin çš„æ³¨å†Œæ¥å£ï¼ŒæŠŠéœ€è¦ç½‘å…³ä»£ç†çš„æ¥å£ä¿¡æ¯å…¨éƒ¨æ³¨å†Œåˆ° soul-admin ä¸Šï¼Œåœ¨æœ€åï¼Œä¼šé€šè¿‡ websocket é•¿è¿æ¥ï¼Œå°†soul-admin æ¥æ”¶åˆ°çš„æ¥å£ä¿¡æ¯åŒæ­¥ç»™ Soul ç½‘å…³ï¼ˆå³ soul-bootstrapï¼‰ï¼Œä»Šå¤©å°±æ¥æ¥ç€ç»§ç»­åˆ†æï¼Œæ•°æ®æ˜¯æ€ä¹ˆåŒæ­¥åˆ° soul-bootstrap çš„ã€‚\nä¸æ¸…æ¥šæµç¨‹çš„å¯ä»¥å‡ºé—¨å·¦è½¬çœ‹ä¸‹ç¬¬4ç¯‡æ–‡ç«  ã€Soulæºç é˜…è¯»ã€‘4.HTTP ç”¨æˆ·æ¥å…¥ Soul è°ƒç”¨ /soul-client/springmvc-register æ¥å£é€»è¾‘åˆ†æ\n2.soul-admin ä¸ soul-bootstrap æ•°æ®åŒæ­¥ è¿™é‡Œä¸ºäº†éªŒè¯æ•°æ®åŒæ­¥æµç¨‹ï¼Œå…¶å®ä¹Ÿæ²¡å¿…è¦éå¾—å¯åŠ¨ä¸šåŠ¡ç³»ç»Ÿï¼Œå®Œå…¨å¯ä»¥åªå¯åŠ¨ soul-admin å’Œ soul-bootstrap ä¸¤ä¸ªç³»ç»Ÿå³å¯ï¼Œå¯ä»¥åœ¨é¡µé¢æ‰“å¼€æˆ–å…³é—­æ’ä»¶ï¼Œçœ‹çœ‹è¿™ä¸ªæµç¨‹æ˜¯æ€ä¹ˆå®ç°çš„ã€‚\næ•°æ®åŒæ­¥ç­–ç•¥å®˜ç½‘é“¾æ¥ https://dromara.org/zh-cn/docs/soul/user-dataSync.html\n2.1 å¯åŠ¨2ä¸ªç³»ç»Ÿ éƒ½æ˜¯æŒ‰ç…§é¡¹ç›®é»˜è®¤å¯åŠ¨çš„ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•é…ç½®æ–‡ä»¶ã€‚\n2.2 é¡µé¢æ“ä½œæŸ¥æ‰¾æ¥å£ è¿™é‡ŒæŠŠ divide æ’ä»¶å¯åŠ¨ï¼ŒF12ï¼Œçœ‹ä¸‹å‰å°ä¼šè°ƒç”¨ soul-admin å“ªä¸ªæ¥å£ã€‚\nå¯ä»¥çœ‹åˆ°å‰å°å‘åå°å‘é€äº†ä¸€ä¸ª PUT è¯·æ±‚ï¼šhttp://localhost:9095/plugin/5\n2.3 åå°æ¥å£ åœ¨é¡¹ç›®ä¸­æœç´¢è¿™ä¸ªæ¥å£\n// PluginController.java @RestController @RequestMapping(\u0026amp;quot;/plugin\u0026amp;quot;) public class PluginController { ... /** * update plugin. * * @param id primary key. * @param pluginDTO plugin. * @return {@linkplain SoulAdminResult} */ @PutMapping(\u0026amp;quot;/{id}\u0026amp;quot;) public SoulAdminResult updatePlugin(@PathVariable(\u0026amp;quot;id\u0026amp;quot;) final String id, @RequestBody final PluginDTO pluginDTO) { Objects.requireNonNull(pluginDTO); pluginDTO.setId(id); final String result = pluginService.createOrUpdate(pluginDTO); if (StringUtils.isNoneBlank(result)) { return SoulAdminResult.error(result); } return SoulAdminResult.success(SoulResultMessage.UPDATE_SUCCESS); } ... }  è¿›åˆ°å®ç°ç±»é‡Œ\n// PluginServiceImpl.java /** * create or update plugin. * * @param pluginDTO {@linkplain PluginDTO} * @return rows */ @Override @Transactional(rollbackFor = Exception.class) public String createOrUpdate(final PluginDTO pluginDTO) { final String msg = checkData(pluginDTO); if (StringUtils.isNoneBlank(msg)) { return msg; } PluginDO pluginDO = PluginDO.buildPluginDO(pluginDTO); DataEventTypeEnum eventType = DataEventTypeEnum.CREATE; if (StringUtils.isBlank(pluginDTO.getId())) { pluginMapper.insertSelective(pluginDO); } else { eventType = DataEventTypeEnum.UPDATE; pluginMapper.updateSelective(pluginDO); } // publish change event. eventPublisher.publishEvent(new DataChangedEvent(ConfigGroupEnum.PLUGIN, eventType, Collections.singletonList(PluginTransfer.INSTANCE.mapToData(pluginDO)))); return StringUtils.EMPTY; }  è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œå‰åŠéƒ¨åˆ†éƒ½æ˜¯åœ¨æ“ä½œæ•°æ®åº“ï¼ŒæŠŠç›¸å…³ä¿¡æ¯æŒä¹…åŒ–ï¼›ååŠéƒ¨åˆ†æ˜¯å‘å¸ƒäº†ä¸€ä¸ªäº‹ä»¶ã€‚\n2.4 å‘å¸ƒäº‹ä»¶ è¿™é‡Œå‘å¸ƒçš„äº‹ä»¶ç”¨ DataChangedEvent å°è£…äº†ä¸€å±‚ï¼Œå†çœ‹é‡Œé¢æœ‰1ä¸ªæšä¸¾ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šç§ç±»å‹ï¼š\n/** * configuration group. * * @author huangxiaofeng */ public enum ConfigGroupEnum { APP_AUTH, PLUGIN, RULE, SELECTOR, META_DATA; ... }  çœ‹åˆ°è¿™å‡ ç§ç±»å‹ï¼Œå¦‚æœå¯¹ç¬¬4ç¯‡è¿˜æœ‰å°è±¡çš„è¯ï¼Œå¯ä»¥çœ‹å‡ºå½“æ—¶å‘é€äº‹ä»¶çš„ç±»å‹å°±æ˜¯ SELECTOR å’Œ RULEï¼Œç°åœ¨æ˜¯ PLUGINï¼Œè™½ç„¶ç±»å‹ä¸åŒï¼Œä½†ä¸å½±å“æˆ‘ä»¬ç»§ç»­åˆ†æåé¢çš„é€»è¾‘ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚\nå¦å¤–ä¸€ä¸ª eventType ä¹Ÿæ˜¯æšä¸¾ï¼Œè¿™é‡Œæœ‰ DELETEã€CREATEã€UPDATEã€REFRESHã€MYSELF 5ç§ç±»å‹ï¼Œæ­¤æ—¶æ˜¯ UPDATEã€‚\n/** * The enum Data event type. * * @author xiaoyu */ public enum DataEventTypeEnum { /** * delete event. */ DELETE, /** * insert event. */ CREATE, /** * update event. */ UPDATE, /** * REFRESH data event type enum. */ REFRESH, /** * Myself data event type enum. */ MYSELF; ... }  2.5 ç›‘å¬äº‹ä»¶ æ‰¾åˆ°ç›‘å¬äº‹ä»¶çš„ä»£ç ï¼š\n// DataChangedEventDispatcher.java @Component public class DataChangedEventDispatcher implements â€¦","date":1611273600,"description":"Soulç½‘å…³å­¦ä¹ WebSocketæ•°æ®åŒæ­¥è§£æ","dir":"blog/soul_source_learning_10_websocket/","fuzzywordcount":3900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"3e5ede2711e7ce17eb0a4eb355f7b0bfcb01bcc1","permalink":"/zh/blog/soul_source_learning_10_websocket/","publishdate":"2021-01-22T00:00:00Z","readingtime":8,"relpermalink":"/zh/blog/soul_source_learning_10_websocket/","summary":"èŒƒé‡‘é¹ 1.å‰æƒ…å›é¡¾ åœ¨ç¬¬4ç¯‡ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº† HTTP ç”¨æˆ·ä¸šåŠ¡ç³»ç»Ÿæ¥å…¥ Soul ç½‘å…³åï¼Œä¼šè°ƒç”¨ soul-admin çš„æ³¨å†Œæ¥å£ï¼ŒæŠŠéœ€è¦ç½‘å…³ä»£ç†çš„æ¥å£ä¿¡æ¯å…¨éƒ¨æ³¨å†Œåˆ° soul-admin ä¸Šï¼Œåœ¨æœ€åï¼Œä¼šé€š","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ WebSocketæ•°æ®åŒæ­¥è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_10_websocket/","wordcount":3862},{"author":"xiaoyu","categories":null,"content":" Dromara source code reading (Soul 2021 first activity)  Date: Sunday, January 24, 2021 Time: 15:00 â€“ 17:00 Location: Tencent Meeting  Activity Details 15:00-15:10 Opening introduction of dream code sharing process by kimming \u0026amp;amp; Cui\n15:10-15:25 Soul data synchronization websocket by Ting\n15:25-15:50 Http Discovery Sharing by Zhu Ming\n15:50-16:10 Analysis based on the Sofa-Rpc protocol by Dongdong\n16:10-16:25 Metrics Monitoring by Ge Tianye\n16:25-16:40 Http Long Polling Sharing by Du Yuhang\n16:40-16:55 Sharing and introducing the overall architecture of data synchronization by Wentao Xia\n16:55-17:05 Microkernel Architecture Sharing by Shen Xiangjun\n17:05-17:20 Sharing the experience and insights of reading source code by JinZe\n17:20-17:30 Summary and Community Development Prospects by Xiaoyu\n","date":1611241200,"description":"","dir":"activities/dromara-cloud-native-meet/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"6621205eab5fe3cdb55359700b30ee0b52cc0aec","permalink":"/activities/dromara-cloud-native-meet/","publishdate":"2021-01-21T15:00:00Z","readingtime":1,"relpermalink":"/activities/dromara-cloud-native-meet/","summary":"Dromara source code reading (Soul 2021 first activity)  Date: Sunday, January 24, 2021 Time: 15:00 â€“ 17:00 Location: Tencent Meeting  Activity Details 15:00-15:10 Opening introduction of dream code sharing process by kimming \u0026amp; Cui\n15:10-15:25 Soul data synchronization websocket by Ting\n15:25-15:50 Http Discovery Sharing by Zhu Ming\n15:50-16:10 Analysis based on the Sofa-Rpc protocol by Dongdong\n16:10-16:25 Metrics Monitoring by Ge Tianye\n16:25-16:40 Http Long Polling Sharing by Du Yuhang","tags":["Soul","Dromara","Reactor"],"title":"Dromara Soul source code 01 reading sharing session 01","type":"activities","url":"/activities/dromara-cloud-native-meet/","wordcount":111},{"author":"xiaoyu","categories":null,"content":" Dromara æºç é˜…è¯»ï¼ˆSoul 2021 é¦–æ¬¡æ´»åŠ¨ï¼‰  æ—¥æœŸï¼š2021å¹´1æœˆ24æ—¥ï¼Œæ˜ŸæœŸæ—¥ æ—¶é—´ï¼š15:00 â€“ 17:00 åœ°ç‚¹ï¼šçº¿ä¸Šè…¾è®¯ä¼šè®®å®¤  æ´»åŠ¨è¯¦æƒ… 15:00 - 15:10 å¼€åœºä»‹ç»æ¢¦ç åˆ†äº«æµç¨‹ by kimming \u0026amp;amp; å´”\n15:10 - 15:25 Soul æ•°æ®åŒæ­¥ä¹‹websocket by å©·\n15:25 - 15:50 Http æ¢æ´»åˆ†äº« by æœ±æ˜\n15:50 - 16:10 åŸºäºSofa-Rpcåè®®çš„åˆ†æ by ä¸œä¸œ\n16:10 - 16:25 Metrics ç›‘æ§ by è‘›å¤©é‡\n16:25 - 16:40 Http é•¿è½®è¯¢åˆ†äº« by æœå®‡èˆª\n16:40 - 16:55 æ•°æ®åŒæ­¥æ•´ä½“æ¶æ„åˆ†äº«ä¸ä»‹ç» by å¤æ–‡æ¶›\n16:55 - 17:05 å¾®å†…æ ¸æ¶æ„åˆ†äº« by æ²ˆç¥¥ä¿Š\n17:05 - 17:20 åˆ†äº«è¯»æºç çš„å¿ƒå¾—ä¸æ„Ÿæ‚Ÿ by é‡‘æ³½\n17:20 - 17:30 Soul ä½œè€… çŒ«å¤§äºº æ€»ç»“ä¸ ç¤¾åŒºå‘å±• å±•æœ› by çŒ«å¤§äºº\n","date":1611241200,"description":"","dir":"activities/dromara-cloud-native-meet/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"1abf0fe2c1c6bfcfcaa12cfd2186b38c4d33d790","permalink":"/zh/activities/dromara-cloud-native-meet/","publishdate":"2021-01-21T15:00:00Z","readingtime":1,"relpermalink":"/zh/activities/dromara-cloud-native-meet/","summary":"Dromara æºç é˜…è¯»ï¼ˆSoul 2021 é¦–æ¬¡æ´»åŠ¨ï¼‰ æ—¥æœŸï¼š2021å¹´1æœˆ24æ—¥ï¼Œæ˜ŸæœŸæ—¥ æ—¶é—´ï¼š15:00 â€“ 17:00 åœ°ç‚¹ï¼šçº¿ä¸Šè…¾è®¯ä¼šè®®å®¤ æ´»åŠ¨è¯¦æƒ… 15:00 - 15:10 å¼€åœºä»‹ç»æ¢¦ç åˆ†äº«æµç¨‹","tags":["Soul","Dromara","Reactor"],"title":"Dromara Soul æºç 01æœŸé˜…è¯»åˆ†äº«ä¼š01","type":"activities","url":"/zh/activities/dromara-cloud-native-meet/","wordcount":222},{"author":"shenxiangjun","categories":"Soul","content":" ä¸€ã€å¼•è¨€ æ’ä»¶æ˜¯ Soul çš„çµé­‚ã€‚\nSoul ä½¿ç”¨äº†æ’ä»¶åŒ–è®¾è®¡æ€æƒ³ï¼Œå®ç°äº†æ’ä»¶çš„çƒ­æ’æ‹”ï¼Œä¸”ææ˜“æ‰©å±•ã€‚å†…ç½®ä¸°å¯Œçš„æ’ä»¶æ”¯æŒï¼Œé‰´æƒï¼Œé™æµï¼Œç†”æ–­ï¼Œé˜²ç«å¢™ç­‰ç­‰ã€‚\nSoul æ˜¯å¦‚ä½•å®ç°æ’ä»¶åŒ–è®¾è®¡çš„å‘¢ï¼Ÿ\nåœ¨æ¢ç©¶æ’ä»¶åŒ–è®¾è®¡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸‹å¾®å†…æ ¸æ¶æ„ï¼ˆåˆç§°æ’ä»¶åŒ–æ¶æ„ï¼‰ã€‚\näºŒã€å¾®å†…æ ¸æ¶æ„ 1ã€æ¶æ„é‡Šä¹‰ å¾®å†…æ ¸æ¶æ„ä¹Ÿè¢«ç§°ä¸ºæ’ä»¶åŒ–æ¶æ„ï¼Œæ˜¯ä¸€ç§é¢å‘åŠŸèƒ½è¿›è¡Œæ‹†åˆ†çš„å¯æ‰©å±•æ€§æ¶æ„ï¼Œé€šå¸¸ç”¨äºå®ç°åŸºäºäº§å“çš„åº”ç”¨ã€‚\nåº”ç”¨é€»è¾‘è¢«åˆ†å‰²ä¸ºç‹¬ç«‹çš„æ’ä»¶æ¨¡å—å’Œæ ¸å¿ƒç³»ç»Ÿï¼Œæä¾›äº†å¯æ‰©å±•æ€§ã€çµæ´»æ€§ã€åŠŸèƒ½éš”ç¦»å’Œè‡ªå®šä¹‰å¤„ç†é€»è¾‘çš„ç‰¹æ€§ã€‚\nå¾®å†…æ ¸æ¶æ„çš„æœ¬è´¨ï¼Œæ˜¯å°†å˜åŒ–å°è£…åœ¨æ’ä»¶é‡Œé¢ï¼Œä»è€Œè¾¾åˆ°å¿«é€Ÿçµæ´»æ‰©å±•çš„ç›®çš„ï¼Œè€Œåˆä¸å½±å“æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šã€‚\n2ã€è®¾è®¡å…³é”®ç‚¹ æ ¸å¿ƒç³»ç»Ÿè®¾è®¡çš„å…³é”®æŠ€æœ¯ï¼š\n æ’ä»¶ç®¡ç†ï¼šå½“å‰æœ‰å“ªäº›æ’ä»¶å¯ç”¨ï¼Ÿå¦‚ä½•åŠ è½½è¿™äº›æ’ä»¶ï¼Ÿä»€ä¹ˆæ—¶å€™åŠ è½½æ’ä»¶ï¼Ÿ  å¸¸è§çš„å®ç°æ–¹æ³•æ˜¯æ’ä»¶æ³¨å†Œè¡¨æœºåˆ¶ã€‚\n æ’ä»¶è¿æ¥ï¼šæ’ä»¶å¦‚ä½•è¿æ¥åˆ°æ ¸å¿ƒç³»ç»Ÿï¼Ÿ  é€šå¸¸ç”±æ ¸å¿ƒç³»ç»Ÿåˆ¶å®šè¿æ¥è§„èŒƒï¼Œç„¶åæ’ä»¶æŒ‰ç…§è§„èŒƒå®ç°ï¼Œæ ¸å¿ƒç³»ç»ŸæŒ‰ç…§è§„èŒƒåŠ è½½å³å¯ã€‚\nå¸¸è§è¿æ¥æœºåˆ¶ä¸»è¦æœ‰ï¼šOSGiï¼ˆEclipseä½¿ç”¨ï¼‰ã€æ¶ˆæ¯æ¨¡å¼ã€ä¾èµ–æ³¨å…¥ï¼ˆSpringä½¿ç”¨ï¼‰ã€‚\n æ’ä»¶é€šä¿¡ï¼šæ’ä»¶ä¸æ’ä»¶ã€æ’ä»¶ä¸æ ¸å¿ƒç³»ç»Ÿå¦‚ä½•é€šä¿¡ï¼Ÿ  é€šä¿¡å¿…é¡»ç»è¿‡æ ¸å¿ƒç³»ç»Ÿï¼Œå› æ­¤é€šå¸¸ç”±æ ¸å¿ƒç³»ç»Ÿæä¾›æ’ä»¶é€šä¿¡æœºåˆ¶ã€‚\nä¸‰ã€Soul çš„æ’ä»¶åŒ–è®¾è®¡ å‚ç…§å¾®å†…æ ¸æ¶æ„æ¥çœ‹ï¼ŒSoul çš„ soul-web æ¨¡å—ç›¸å½“äºæ ¸å¿ƒç³»ç»Ÿï¼Œsoul-plugin ä¸‹çš„å­æ¨¡å—ç›¸å½“äºæ’ä»¶æ¨¡å—ã€‚\næ’ä»¶ç®¡ç†æ–¹é¢ï¼š\nsoul-bootstrap æ¨¡å—çš„ pom æ–‡ä»¶å……å½“æ’ä»¶åˆ—è¡¨ï¼Œ ä»¥ç¡¬ç¼–ç çš„æ–¹å¼å¼•å…¥å„æ’ä»¶ã€‚\nåœ¨å®¹å™¨å¯åŠ¨é˜¶æ®µï¼Œå€ŸåŠ© springboot çš„ starter æœºåˆ¶è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œæ’ä»¶ bean åˆ° Spring å®¹å™¨ã€‚\næ’ä»¶è¿æ¥æ–¹é¢ï¼š\nå€ŸåŠ© springboot æ”¯æŒçš„å¤šå®ä¾‹è‡ªåŠ¨æ³¨å…¥èƒ½åŠ›ï¼ˆObjectProvider pluginsï¼‰ï¼Œå°†æ’ä»¶ Bean åˆ—è¡¨æ³¨å…¥åˆ°ç½‘å…³çš„æ’ä»¶é“¾ï¼Œå®ç°æ’ä»¶ä¸ç½‘å…³çš„è¿æ¥ã€‚\næ’ä»¶é€šä¿¡æ–¹é¢ï¼š\nå…ˆåœ¨æ’ä»¶é“¾åˆå§‹åŒ–é˜¶æ®µå®Œæˆæ’ä»¶æ’åºï¼Œç„¶ååœ¨æ’ä»¶å¤„ç†æ—¶ï¼Œå€ŸåŠ©è´¯ç©¿æ•´ä¸ªæ’ä»¶é“¾çš„ ServerWebExchange å®Œæˆå‘ä¸‹æ¸¸æ’ä»¶çš„å®šå‘ä¼ å‚ï¼Œå³æŸç§æ„ä¹‰ä¸Šçš„æ’ä»¶é€šä¿¡æœºåˆ¶ã€‚\nå››ã€Soul çš„æ’ä»¶åŒ–å®ç° Soul ç½‘å…³ä¸­å®šä¹‰äº†ä¸€æ¡æ’ä»¶é“¾ï¼Œæ‰€æœ‰çš„æ’ä»¶éƒ½åœ¨è¿™æ¡é“¾ä¸Šä¾æ¬¡å¤„ç†ã€‚\nåœ¨æ¢ç©¶æ’ä»¶é“¾ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ’ä»¶å®ç°ã€‚\n1ã€æ’ä»¶å®ç° Soul ä¸­æ‰€æœ‰æ’ä»¶æœ€ç»ˆå‡ç»§æ‰¿è‡ª SoulPluginï¼Œå…¶å®Œæ•´ç»§æ‰¿å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š\nå¯ä»¥çœ‹åˆ°ï¼ŒSoul çš„æ’ä»¶ç”Ÿæ€æå…¶ä¸°å¯Œï¼Œæ­£æ˜¯å¦‚æ­¤ä¸°å¯Œçš„æ’ä»¶æ”¯æ’‘èµ·äº† Soul ç½‘å…³å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ã€‚\næˆ‘ä»¬ä»¥å¸¸ç”¨çš„ DividePlugin ä¸ºä¾‹ï¼Œåˆ†ææ’ä»¶å†…éƒ¨æ‰€åšå·¥ä½œã€‚\nDividePlugin ç»§æ‰¿ç»“æ„ï¼š\nDividePlugin ç»§æ‰¿è‡ª AbstractSoulPluginï¼Œæœ€ç»ˆå®ç°äº† SoulPlugin æ¥å£ã€‚\n1ï¼‰å…ˆå…³æ³¨ SoulPluginï¼Œè¯¥æ’ä»¶æ¥å£ç»“æ„å¦‚ä¸‹ï¼š\n execute æ–¹æ³•ï¼šå¤„ç†æ–¹æ³•ï¼Œéœ€è¦ä¼ å…¥ exchangeäº¤æ¢åŒº å’Œ SoulPluginChainæ’ä»¶é“¾ getOrder æ–¹æ³•ï¼šå–å¾—åºå·ï¼Œç”¨ä½œæ’ä»¶æ’åº named æ–¹æ³•ï¼šè·å¾—æ’ä»¶å skip æ–¹æ³•ï¼šåˆ¤æ–­æ˜¯å¦è·³è¿‡æœ¬æ¬¡å¤„ç†  æ¯æ¬¡å¤„ç†æ—¶ï¼Œå°†å…ˆè¿›è¡Œ skip åˆ¤æ–­ï¼Œä¸è·³è¿‡åˆ™æ‰§è¡Œ excute å¤„ç†æ–¹æ³•ã€‚\n2ï¼‰å†æ¥çœ‹ä¸‹ AbstractSoulPluginï¼Œè¯¥æŠ½è±¡ç±»ç»“æ„å¦‚ä¸‹ï¼š\né‡ç‚¹å…³æ³¨ execute æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\nif (pluginData.getEnable()){ // è·å–æ’ä»¶æ•°æ® final PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName); // è·å–é€‰æ‹©å™¨æ•°æ® final Collection\u0026amp;lt;SelectorData\u0026amp;gt; selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName); final SelectorData selectorData = matchSelector(exchange, selectors); // è·å–è§„åˆ™ final List\u0026amp;lt;RuleData\u0026amp;gt; rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId()); RuleData rule; if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) { //get last rule = rules.get(rules.size() - 1); } else { rule = matchRule(exchange, rules); } // æ‰§è¡Œå…·ä½“å¤„ç† return doExecute(exchange, chain, selectorData, rule); } // ç»§ç»­æ‰§è¡Œåç»­æ’ä»¶å¤„ç† return chain.execute(exchange);  è·å–é€‰æ‹©å™¨æ•°æ®å’Œè§„åˆ™ï¼Œç„¶åä¼ å…¥ doExecute æ–¹æ³•è¿›è¡Œå…·ä½“å¤„ç†ï¼ŒdoExecute æ–¹æ³•ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œäº¤ç”±å­ç±»å…·ä½“å®ç°ã€‚\n3ï¼‰æŸ¥çœ‹æ’ä»¶å­ç±» DividePluginï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š\né‡ç‚¹å…³æ³¨ doExecute æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯æ ¸å¿ƒä»£ç ï¼š\n// è·å–ç½‘å…³ä¸Šä¸‹æ–‡å’Œè§„åˆ™å¤„ç†å™¨ final SoulContext soulContext = exchange.getAttribute(Constants.CONTEXT); final DivideRuleHandle ruleHandle = GsonUtils.getInstance().fromJson(rule.getHandle(), DivideRuleHandle.class); // è·å–ä¸Šæ¸¸åˆ—è¡¨ final List\u0026amp;lt;DivideUpstream\u0026amp;gt; upstreamList = UpstreamCacheManager.getInstance().findUpstreamListBySelectorId(selector.getId()); // é€‰æ‹©å¾…åˆ†å‘çš„ç›®æ ‡ä¸Šæ¸¸ final String ip = Objects.requireNonNull(exchange.getRequest().getRemoteAddress()).getAddress().getHostAddress(); DivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip); // è®¾ç½® http url String domain = buildDomain(divideUpstream); String realURL = buildRealURL(domain, soulContext, exchange); â€¦","date":1611187200,"description":"Soul Gateway Learning Plugin Chain Implementation","dir":"blog/soul_source_learning_15_plugin_chain/","fuzzywordcount":2500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"2ff88d047ecdebcbf4d44344a9b0fc763341410c","permalink":"/blog/soul_source_learning_15_plugin_chain/","publishdate":"2021-01-21T00:00:00Z","readingtime":5,"relpermalink":"/blog/soul_source_learning_15_plugin_chain/","summary":"ä¸€ã€å¼•è¨€ æ’ä»¶æ˜¯ Soul çš„çµé­‚ã€‚ Soul ä½¿ç”¨äº†æ’ä»¶åŒ–è®¾è®¡æ€æƒ³ï¼Œå®ç°äº†æ’ä»¶çš„çƒ­æ’æ‹”ï¼Œä¸”ææ˜“æ‰©å±•ã€‚å†…ç½®ä¸°å¯Œçš„æ’ä»¶æ”¯æŒï¼Œé‰´æƒï¼Œé™æµï¼Œç†”æ–­ï¼Œé˜²ç«å¢™ç­‰ç­‰ã€‚ Soul æ˜¯å¦‚ä½•å®","tags":["Soul"],"title":"Soul Gateway Learning Plugin Chain Implementation","type":"blog","url":"/blog/soul_source_learning_15_plugin_chain/","wordcount":2408},{"author":"liquan","categories":"Soul","content":" å¯åŠ¨adminï¼Œä¸ç½‘å…³ã€‚ adminæ“ä½œï¼Œä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸Šä¸€ç¯‡ï¼Œé€šè¿‡soul-adminå¯åŠ¨è¿‡ç¨‹ä¸ºå…¥å£ï¼Œåˆ†æäº†soul-admin å¯åŠ¨å°±ä¼šåŒæ­¥ç½‘å…³æ•°æ® ruleã€metaDataã€selectorã€plugin ç­‰åˆ° zookeeperã€‚\næ•°æ®å˜åŒ–ä¼šå‘å¸ƒ DataChangedEventäº‹ä»¶ï¼Œç›‘å¬äº‹ä»¶å°†æ•°æ®åŒæ­¥è‡³zookeeperã€‚ æœ¬ç¯‡æ¥ç€ä¸Šä¸€ç¯‡ç»§ç»­è·Ÿè¸ªæºç åˆ†æzookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³åŸç†ï¼š\n soul-admin å˜æ›´ç½‘å…³æ•°æ®ï¼Œè·Ÿè¸ªæ•°æ®åŒæ­¥è¿‡ç¨‹ã€‚ soul-bootstrap å¦‚ä½•è·å–zookeeperæ•°æ®çš„ï¼Œå¦‚ä½•æ„ŸçŸ¥ç½‘å…³æ•°æ®å˜åŒ–çš„ã€‚  ä¸€ã€soul-admin å˜æ›´ç½‘å…³æ•°æ®ï¼Œè·Ÿè¸ªæ•°æ®åŒæ­¥è¿‡ç¨‹ 1ã€åœ¨ç½‘å…³åå°å°è¯•æ›´æ”¹divideæ’ä»¶çŠ¶æ€ï¼Œdebugè·Ÿè¸ªã€‚\n2ã€æ’ä»¶æ›´æ–°åä¼šå‘å¸ƒä¸€ä¸ªDataChangedEventäº‹ä»¶\n3ã€org.dromara.soul.admin.listener.DataChangedEventDispatcher \u0026amp;ndash;\u0026amp;gt; onApplicationEvent() è´Ÿè´£ç›‘å¬äº‹ä»¶\n4ã€org.dromara.soul.admin.listener.zookeeper.ZookeeperDataChangedListener è´Ÿè´£åŒæ­¥æ•°æ®è‡³zookeeper\näºŒã€soul-bootstrap å¦‚ä½•è·å–zookeeperæ•°æ®çš„ï¼Œå¦‚ä½•æ„ŸçŸ¥ç½‘å…³æ•°æ®å˜åŒ–çš„ã€‚ 1ã€soul-bootstrap ä¾èµ–\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-zookeeper\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  2ã€soul-bootstrap å¯åŠ¨åä¼šè‡ªåŠ¨æ³¨å…¥org.dromara.soul.spring.boot.sync.data.zookeeper.ZookeeperSyncDataConfiguration\nè¯»å–Zookeeperé…ç½®å‘å®¹å™¨ä¸­æ³¨å…¥ZkClientã€‚\nSyncDataService å‘å®¹å™¨æ³¨å…¥æ•°æ®åŒæ­¥æœåŠ¡beanï¼Œä»Springå®¹å™¨ä¸­è·å–ï¼ŒZkClientï¼ˆzookeeperå®¢æˆ·ç«¯ï¼‰ï¼Œ pluginSubscriberï¼ˆæ’ä»¶æ•°æ®è®¢é˜…ï¼‰ã€metaSubscribers ï¼ˆå…ƒæ•°æ®è®¢é˜…ï¼‰ã€authSubscribersï¼ˆæƒé™è®¢é˜…ï¼‰ã€‚\npublic class ZookeeperSyncDataConfiguration { /** * Sync data service sync data service. * @param zkClient the zk client * @param pluginSubscriber the plugin subscriber * @param metaSubscribers the meta subscribers * @param authSubscribers the auth subscribers * @return the sync data service */ @Bean public SyncDataService syncDataService(final ObjectProvider\u0026amp;lt;ZkClient\u0026amp;gt; zkClient, final ObjectProvider\u0026amp;lt;PluginDataSubscriber\u0026amp;gt; pluginSubscriber, final ObjectProvider\u0026amp;lt;List\u0026amp;lt;MetaDataSubscriber\u0026amp;gt;\u0026amp;gt; metaSubscribers, final ObjectProvider\u0026amp;lt;List\u0026amp;lt;AuthDataSubscriber\u0026amp;gt;\u0026amp;gt; authSubscribers) { log.info(\u0026amp;quot;you use zookeeper sync soul data.......\u0026amp;quot;); return new ZookeeperSyncDataService(zkClient.getIfAvailable(), pluginSubscriber.getIfAvailable(), metaSubscribers.getIfAvailable(Collections::emptyList), authSubscribers.getIfAvailable(Collections::emptyList)); } /** * register zkClient in spring ioc. * @param zookeeperConfig the zookeeper configuration * @return ZkClient {@linkplain ZkClient} */ @Bean public ZkClient zkClient(final ZookeeperConfig zookeeperConfig) { return new ZkClient(zookeeperConfig.getUrl(), zookeeperConfig.getSessionTimeout(), zookeeperConfig.getConnectionTimeout()); } }  3ã€org.dromara.soul.sync.data.zookeeper.ZookeeperSyncDataService åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯soul-bootstrapå¯åŠ¨åå°±ä¼šä»zookeeperè·å–æ•°æ®ï¼ŒåŒæ­¥è‡³å†…å­˜ã€‚ * watcherData()\u0026amp;ndash;\u0026amp;gt; watcherAll() \u0026amp;ndash;\u0026amp;gt; watcherPlugin() \u0026amp;ndash;\u0026amp;gt; cachePluginData()ã€‚ * zkClient.subscribeDataChanges() ç›‘å¬ å½“å‰èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„å†…å®¹ä¿®æ”¹ã€åˆ é™¤ã€‚\npublic class ZookeeperSyncDataService implements SyncDataService, AutoCloseable { private final ZkClient zkClient; private final PluginDataSubscriber pluginDataSubscriber; private final List\u0026amp;lt;MetaDataSubscriber\u0026amp;gt; metaDataSubscribers; private final List\u0026amp;lt;AuthDataSubscriber\u0026amp;gt; authDataSubscribers; /** * Instantiates a new Zookeeper cache manager. * @param zkClient the zk â€¦","date":1611187200,"description":"Soul Gateway Learns Zookeeper Data Synchronization","dir":"blog/soul_source_learning_13_zookeeper_02/","fuzzywordcount":1700,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"874b3f2bba51baf972b4ded6859998dc1f52848c","permalink":"/blog/soul_source_learning_13_zookeeper_02/","publishdate":"2021-01-21T00:00:00Z","readingtime":4,"relpermalink":"/blog/soul_source_learning_13_zookeeper_02/","summary":"å¯åŠ¨adminï¼Œä¸ç½‘å…³ã€‚ adminæ“ä½œï¼Œä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸Šä¸€ç¯‡ï¼Œé€šè¿‡soul-adminå¯åŠ¨è¿‡ç¨‹ä¸ºå…¥å£ï¼Œåˆ†æäº†soul-","tags":["Soul"],"title":"Soul Gateway Learns Zookeeper Data Synchronization 02","type":"blog","url":"/blog/soul_source_learning_13_zookeeper_02/","wordcount":1620},{"author":"ææƒ","categories":"Soul","content":" å¯åŠ¨adminï¼Œä¸ç½‘å…³ã€‚ adminæ“ä½œï¼Œä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸Šä¸€ç¯‡ï¼Œé€šè¿‡soul-adminå¯åŠ¨è¿‡ç¨‹ä¸ºå…¥å£ï¼Œåˆ†æäº†soul-admin å¯åŠ¨å°±ä¼šåŒæ­¥ç½‘å…³æ•°æ® ruleã€metaDataã€selectorã€plugin ç­‰åˆ° zookeeperã€‚\næ•°æ®å˜åŒ–ä¼šå‘å¸ƒ DataChangedEventäº‹ä»¶ï¼Œç›‘å¬äº‹ä»¶å°†æ•°æ®åŒæ­¥è‡³zookeeperã€‚ æœ¬ç¯‡æ¥ç€ä¸Šä¸€ç¯‡ç»§ç»­è·Ÿè¸ªæºç åˆ†æzookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³åŸç†ï¼š\n soul-admin å˜æ›´ç½‘å…³æ•°æ®ï¼Œè·Ÿè¸ªæ•°æ®åŒæ­¥è¿‡ç¨‹ã€‚ soul-bootstrap å¦‚ä½•è·å–zookeeperæ•°æ®çš„ï¼Œå¦‚ä½•æ„ŸçŸ¥ç½‘å…³æ•°æ®å˜åŒ–çš„ã€‚  ä¸€ã€soul-admin å˜æ›´ç½‘å…³æ•°æ®ï¼Œè·Ÿè¸ªæ•°æ®åŒæ­¥è¿‡ç¨‹ 1ã€åœ¨ç½‘å…³åå°å°è¯•æ›´æ”¹divideæ’ä»¶çŠ¶æ€ï¼Œdebugè·Ÿè¸ªã€‚\n2ã€æ’ä»¶æ›´æ–°åä¼šå‘å¸ƒä¸€ä¸ªDataChangedEventäº‹ä»¶\n3ã€org.dromara.soul.admin.listener.DataChangedEventDispatcher \u0026amp;ndash;\u0026amp;gt; onApplicationEvent() è´Ÿè´£ç›‘å¬äº‹ä»¶\n4ã€org.dromara.soul.admin.listener.zookeeper.ZookeeperDataChangedListener è´Ÿè´£åŒæ­¥æ•°æ®è‡³zookeeper\näºŒã€soul-bootstrap å¦‚ä½•è·å–zookeeperæ•°æ®çš„ï¼Œå¦‚ä½•æ„ŸçŸ¥ç½‘å…³æ•°æ®å˜åŒ–çš„ã€‚ 1ã€soul-bootstrap ä¾èµ–\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-zookeeper\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  2ã€soul-bootstrap å¯åŠ¨åä¼šè‡ªåŠ¨æ³¨å…¥org.dromara.soul.spring.boot.sync.data.zookeeper.ZookeeperSyncDataConfiguration\nè¯»å–Zookeeperé…ç½®å‘å®¹å™¨ä¸­æ³¨å…¥ZkClientã€‚\nSyncDataService å‘å®¹å™¨æ³¨å…¥æ•°æ®åŒæ­¥æœåŠ¡beanï¼Œä»Springå®¹å™¨ä¸­è·å–ï¼ŒZkClientï¼ˆzookeeperå®¢æˆ·ç«¯ï¼‰ï¼Œ pluginSubscriberï¼ˆæ’ä»¶æ•°æ®è®¢é˜…ï¼‰ã€metaSubscribers ï¼ˆå…ƒæ•°æ®è®¢é˜…ï¼‰ã€authSubscribersï¼ˆæƒé™è®¢é˜…ï¼‰ã€‚\npublic class ZookeeperSyncDataConfiguration { /** * Sync data service sync data service. * @param zkClient the zk client * @param pluginSubscriber the plugin subscriber * @param metaSubscribers the meta subscribers * @param authSubscribers the auth subscribers * @return the sync data service */ @Bean public SyncDataService syncDataService(final ObjectProvider\u0026amp;lt;ZkClient\u0026amp;gt; zkClient, final ObjectProvider\u0026amp;lt;PluginDataSubscriber\u0026amp;gt; pluginSubscriber, final ObjectProvider\u0026amp;lt;List\u0026amp;lt;MetaDataSubscriber\u0026amp;gt;\u0026amp;gt; metaSubscribers, final ObjectProvider\u0026amp;lt;List\u0026amp;lt;AuthDataSubscriber\u0026amp;gt;\u0026amp;gt; authSubscribers) { log.info(\u0026amp;quot;you use zookeeper sync soul data.......\u0026amp;quot;); return new ZookeeperSyncDataService(zkClient.getIfAvailable(), pluginSubscriber.getIfAvailable(), metaSubscribers.getIfAvailable(Collections::emptyList), authSubscribers.getIfAvailable(Collections::emptyList)); } /** * register zkClient in spring ioc. * @param zookeeperConfig the zookeeper configuration * @return ZkClient {@linkplain ZkClient} */ @Bean public ZkClient zkClient(final ZookeeperConfig zookeeperConfig) { return new ZkClient(zookeeperConfig.getUrl(), zookeeperConfig.getSessionTimeout(), zookeeperConfig.getConnectionTimeout()); } }  3ã€org.dromara.soul.sync.data.zookeeper.ZookeeperSyncDataService åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯soul-bootstrapå¯åŠ¨åå°±ä¼šä»zookeeperè·å–æ•°æ®ï¼ŒåŒæ­¥è‡³å†…å­˜ã€‚ * watcherData()\u0026amp;ndash;\u0026amp;gt; watcherAll() \u0026amp;ndash;\u0026amp;gt; watcherPlugin() \u0026amp;ndash;\u0026amp;gt; cachePluginData()ã€‚ * zkClient.subscribeDataChanges() ç›‘å¬ å½“å‰èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„å†…å®¹ä¿®æ”¹ã€åˆ é™¤ã€‚\npublic class ZookeeperSyncDataService implements SyncDataService, AutoCloseable { private final ZkClient zkClient; private final PluginDataSubscriber pluginDataSubscriber; private final List\u0026amp;lt;MetaDataSubscriber\u0026amp;gt; metaDataSubscribers; private final List\u0026amp;lt;AuthDataSubscriber\u0026amp;gt; authDataSubscribers; /** * Instantiates a new Zookeeper cache manager. * @param zkClient the zk â€¦","date":1611187200,"description":"Soulç½‘å…³å­¦ä¹ Zookeeperæ•°æ®åŒæ­¥","dir":"blog/soul_source_learning_13_zookeeper_02/","fuzzywordcount":1700,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"af25cd6245d77500860b0eeb83d13c329839ecca","permalink":"/zh/blog/soul_source_learning_13_zookeeper_02/","publishdate":"2021-01-21T00:00:00Z","readingtime":4,"relpermalink":"/zh/blog/soul_source_learning_13_zookeeper_02/","summary":"å¯åŠ¨adminï¼Œä¸ç½‘å…³ã€‚ adminæ“ä½œï¼Œä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸Šä¸€ç¯‡ï¼Œé€šè¿‡soul-adminå¯åŠ¨è¿‡ç¨‹ä¸ºå…¥å£ï¼Œåˆ†æäº†soul-","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Zookeeperæ•°æ®åŒæ­¥02","type":"blog","url":"/zh/blog/soul_source_learning_13_zookeeper_02/","wordcount":1620},{"author":"æ²ˆç¥¥ä¿Š","categories":"Soul","content":" ä¸€ã€å¼•è¨€ æ’ä»¶æ˜¯ Soul çš„çµé­‚ã€‚\nSoul ä½¿ç”¨äº†æ’ä»¶åŒ–è®¾è®¡æ€æƒ³ï¼Œå®ç°äº†æ’ä»¶çš„çƒ­æ’æ‹”ï¼Œä¸”ææ˜“æ‰©å±•ã€‚å†…ç½®ä¸°å¯Œçš„æ’ä»¶æ”¯æŒï¼Œé‰´æƒï¼Œé™æµï¼Œç†”æ–­ï¼Œé˜²ç«å¢™ç­‰ç­‰ã€‚\nSoul æ˜¯å¦‚ä½•å®ç°æ’ä»¶åŒ–è®¾è®¡çš„å‘¢ï¼Ÿ\nåœ¨æ¢ç©¶æ’ä»¶åŒ–è®¾è®¡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸‹å¾®å†…æ ¸æ¶æ„ï¼ˆåˆç§°æ’ä»¶åŒ–æ¶æ„ï¼‰ã€‚\näºŒã€å¾®å†…æ ¸æ¶æ„ 1ã€æ¶æ„é‡Šä¹‰ å¾®å†…æ ¸æ¶æ„ä¹Ÿè¢«ç§°ä¸ºæ’ä»¶åŒ–æ¶æ„ï¼Œæ˜¯ä¸€ç§é¢å‘åŠŸèƒ½è¿›è¡Œæ‹†åˆ†çš„å¯æ‰©å±•æ€§æ¶æ„ï¼Œé€šå¸¸ç”¨äºå®ç°åŸºäºäº§å“çš„åº”ç”¨ã€‚\nåº”ç”¨é€»è¾‘è¢«åˆ†å‰²ä¸ºç‹¬ç«‹çš„æ’ä»¶æ¨¡å—å’Œæ ¸å¿ƒç³»ç»Ÿï¼Œæä¾›äº†å¯æ‰©å±•æ€§ã€çµæ´»æ€§ã€åŠŸèƒ½éš”ç¦»å’Œè‡ªå®šä¹‰å¤„ç†é€»è¾‘çš„ç‰¹æ€§ã€‚\nå¾®å†…æ ¸æ¶æ„çš„æœ¬è´¨ï¼Œæ˜¯å°†å˜åŒ–å°è£…åœ¨æ’ä»¶é‡Œé¢ï¼Œä»è€Œè¾¾åˆ°å¿«é€Ÿçµæ´»æ‰©å±•çš„ç›®çš„ï¼Œè€Œåˆä¸å½±å“æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šã€‚\n2ã€è®¾è®¡å…³é”®ç‚¹ æ ¸å¿ƒç³»ç»Ÿè®¾è®¡çš„å…³é”®æŠ€æœ¯ï¼š\n æ’ä»¶ç®¡ç†ï¼šå½“å‰æœ‰å“ªäº›æ’ä»¶å¯ç”¨ï¼Ÿå¦‚ä½•åŠ è½½è¿™äº›æ’ä»¶ï¼Ÿä»€ä¹ˆæ—¶å€™åŠ è½½æ’ä»¶ï¼Ÿ  å¸¸è§çš„å®ç°æ–¹æ³•æ˜¯æ’ä»¶æ³¨å†Œè¡¨æœºåˆ¶ã€‚\n æ’ä»¶è¿æ¥ï¼šæ’ä»¶å¦‚ä½•è¿æ¥åˆ°æ ¸å¿ƒç³»ç»Ÿï¼Ÿ  é€šå¸¸ç”±æ ¸å¿ƒç³»ç»Ÿåˆ¶å®šè¿æ¥è§„èŒƒï¼Œç„¶åæ’ä»¶æŒ‰ç…§è§„èŒƒå®ç°ï¼Œæ ¸å¿ƒç³»ç»ŸæŒ‰ç…§è§„èŒƒåŠ è½½å³å¯ã€‚\nå¸¸è§è¿æ¥æœºåˆ¶ä¸»è¦æœ‰ï¼šOSGiï¼ˆEclipseä½¿ç”¨ï¼‰ã€æ¶ˆæ¯æ¨¡å¼ã€ä¾èµ–æ³¨å…¥ï¼ˆSpringä½¿ç”¨ï¼‰ã€‚\n æ’ä»¶é€šä¿¡ï¼šæ’ä»¶ä¸æ’ä»¶ã€æ’ä»¶ä¸æ ¸å¿ƒç³»ç»Ÿå¦‚ä½•é€šä¿¡ï¼Ÿ  é€šä¿¡å¿…é¡»ç»è¿‡æ ¸å¿ƒç³»ç»Ÿï¼Œå› æ­¤é€šå¸¸ç”±æ ¸å¿ƒç³»ç»Ÿæä¾›æ’ä»¶é€šä¿¡æœºåˆ¶ã€‚\nä¸‰ã€Soul çš„æ’ä»¶åŒ–è®¾è®¡ å‚ç…§å¾®å†…æ ¸æ¶æ„æ¥çœ‹ï¼ŒSoul çš„ soul-web æ¨¡å—ç›¸å½“äºæ ¸å¿ƒç³»ç»Ÿï¼Œsoul-plugin ä¸‹çš„å­æ¨¡å—ç›¸å½“äºæ’ä»¶æ¨¡å—ã€‚\næ’ä»¶ç®¡ç†æ–¹é¢ï¼š\nsoul-bootstrap æ¨¡å—çš„ pom æ–‡ä»¶å……å½“æ’ä»¶åˆ—è¡¨ï¼Œ ä»¥ç¡¬ç¼–ç çš„æ–¹å¼å¼•å…¥å„æ’ä»¶ã€‚\nåœ¨å®¹å™¨å¯åŠ¨é˜¶æ®µï¼Œå€ŸåŠ© springboot çš„ starter æœºåˆ¶è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œæ’ä»¶ bean åˆ° Spring å®¹å™¨ã€‚\næ’ä»¶è¿æ¥æ–¹é¢ï¼š\nå€ŸåŠ© springboot æ”¯æŒçš„å¤šå®ä¾‹è‡ªåŠ¨æ³¨å…¥èƒ½åŠ›ï¼ˆObjectProvider pluginsï¼‰ï¼Œå°†æ’ä»¶ Bean åˆ—è¡¨æ³¨å…¥åˆ°ç½‘å…³çš„æ’ä»¶é“¾ï¼Œå®ç°æ’ä»¶ä¸ç½‘å…³çš„è¿æ¥ã€‚\næ’ä»¶é€šä¿¡æ–¹é¢ï¼š\nå…ˆåœ¨æ’ä»¶é“¾åˆå§‹åŒ–é˜¶æ®µå®Œæˆæ’ä»¶æ’åºï¼Œç„¶ååœ¨æ’ä»¶å¤„ç†æ—¶ï¼Œå€ŸåŠ©è´¯ç©¿æ•´ä¸ªæ’ä»¶é“¾çš„ ServerWebExchange å®Œæˆå‘ä¸‹æ¸¸æ’ä»¶çš„å®šå‘ä¼ å‚ï¼Œå³æŸç§æ„ä¹‰ä¸Šçš„æ’ä»¶é€šä¿¡æœºåˆ¶ã€‚\nå››ã€Soul çš„æ’ä»¶åŒ–å®ç° Soul ç½‘å…³ä¸­å®šä¹‰äº†ä¸€æ¡æ’ä»¶é“¾ï¼Œæ‰€æœ‰çš„æ’ä»¶éƒ½åœ¨è¿™æ¡é“¾ä¸Šä¾æ¬¡å¤„ç†ã€‚\nåœ¨æ¢ç©¶æ’ä»¶é“¾ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ’ä»¶å®ç°ã€‚\n1ã€æ’ä»¶å®ç° Soul ä¸­æ‰€æœ‰æ’ä»¶æœ€ç»ˆå‡ç»§æ‰¿è‡ª SoulPluginï¼Œå…¶å®Œæ•´ç»§æ‰¿å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š\nå¯ä»¥çœ‹åˆ°ï¼ŒSoul çš„æ’ä»¶ç”Ÿæ€æå…¶ä¸°å¯Œï¼Œæ­£æ˜¯å¦‚æ­¤ä¸°å¯Œçš„æ’ä»¶æ”¯æ’‘èµ·äº† Soul ç½‘å…³å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ã€‚\næˆ‘ä»¬ä»¥å¸¸ç”¨çš„ DividePlugin ä¸ºä¾‹ï¼Œåˆ†ææ’ä»¶å†…éƒ¨æ‰€åšå·¥ä½œã€‚\nDividePlugin ç»§æ‰¿ç»“æ„ï¼š\nDividePlugin ç»§æ‰¿è‡ª AbstractSoulPluginï¼Œæœ€ç»ˆå®ç°äº† SoulPlugin æ¥å£ã€‚\n1ï¼‰å…ˆå…³æ³¨ SoulPluginï¼Œè¯¥æ’ä»¶æ¥å£ç»“æ„å¦‚ä¸‹ï¼š\n execute æ–¹æ³•ï¼šå¤„ç†æ–¹æ³•ï¼Œéœ€è¦ä¼ å…¥ exchangeäº¤æ¢åŒº å’Œ SoulPluginChainæ’ä»¶é“¾ getOrder æ–¹æ³•ï¼šå–å¾—åºå·ï¼Œç”¨ä½œæ’ä»¶æ’åº named æ–¹æ³•ï¼šè·å¾—æ’ä»¶å skip æ–¹æ³•ï¼šåˆ¤æ–­æ˜¯å¦è·³è¿‡æœ¬æ¬¡å¤„ç†  æ¯æ¬¡å¤„ç†æ—¶ï¼Œå°†å…ˆè¿›è¡Œ skip åˆ¤æ–­ï¼Œä¸è·³è¿‡åˆ™æ‰§è¡Œ excute å¤„ç†æ–¹æ³•ã€‚\n2ï¼‰å†æ¥çœ‹ä¸‹ AbstractSoulPluginï¼Œè¯¥æŠ½è±¡ç±»ç»“æ„å¦‚ä¸‹ï¼š\né‡ç‚¹å…³æ³¨ execute æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\nif (pluginData.getEnable()){ // è·å–æ’ä»¶æ•°æ® final PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName); // è·å–é€‰æ‹©å™¨æ•°æ® final Collection\u0026amp;lt;SelectorData\u0026amp;gt; selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName); final SelectorData selectorData = matchSelector(exchange, selectors); // è·å–è§„åˆ™ final List\u0026amp;lt;RuleData\u0026amp;gt; rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId()); RuleData rule; if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) { //get last rule = rules.get(rules.size() - 1); } else { rule = matchRule(exchange, rules); } // æ‰§è¡Œå…·ä½“å¤„ç† return doExecute(exchange, chain, selectorData, rule); } // ç»§ç»­æ‰§è¡Œåç»­æ’ä»¶å¤„ç† return chain.execute(exchange);  è·å–é€‰æ‹©å™¨æ•°æ®å’Œè§„åˆ™ï¼Œç„¶åä¼ å…¥ doExecute æ–¹æ³•è¿›è¡Œå…·ä½“å¤„ç†ï¼ŒdoExecute æ–¹æ³•ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œäº¤ç”±å­ç±»å…·ä½“å®ç°ã€‚\n3ï¼‰æŸ¥çœ‹æ’ä»¶å­ç±» DividePluginï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š\né‡ç‚¹å…³æ³¨ doExecute æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯æ ¸å¿ƒä»£ç ï¼š\n// è·å–ç½‘å…³ä¸Šä¸‹æ–‡å’Œè§„åˆ™å¤„ç†å™¨ final SoulContext soulContext = exchange.getAttribute(Constants.CONTEXT); final DivideRuleHandle ruleHandle = GsonUtils.getInstance().fromJson(rule.getHandle(), DivideRuleHandle.class); // è·å–ä¸Šæ¸¸åˆ—è¡¨ final List\u0026amp;lt;DivideUpstream\u0026amp;gt; upstreamList = UpstreamCacheManager.getInstance().findUpstreamListBySelectorId(selector.getId()); // é€‰æ‹©å¾…åˆ†å‘çš„ç›®æ ‡ä¸Šæ¸¸ final String ip = Objects.requireNonNull(exchange.getRequest().getRemoteAddress()).getAddress().getHostAddress(); DivideUpstream divideUpstream = LoadBalanceUtils.selector(upstreamList, ruleHandle.getLoadBalance(), ip); // è®¾ç½® http url String domain = buildDomain(divideUpstream); String realURL = buildRealURL(domain, soulContext, exchange); â€¦","date":1611187200,"description":"Soulç½‘å…³å­¦ä¹ æ’ä»¶é“¾å®ç°","dir":"blog/soul_source_learning_15_plugin_chain/","fuzzywordcount":2500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"7bc696547a5cbee1f64d8b70668c3f9208bd3c8c","permalink":"/zh/blog/soul_source_learning_15_plugin_chain/","publishdate":"2021-01-21T00:00:00Z","readingtime":5,"relpermalink":"/zh/blog/soul_source_learning_15_plugin_chain/","summary":"ä¸€ã€å¼•è¨€ æ’ä»¶æ˜¯ Soul çš„çµé­‚ã€‚ Soul ä½¿ç”¨äº†æ’ä»¶åŒ–è®¾è®¡æ€æƒ³ï¼Œå®ç°äº†æ’ä»¶çš„çƒ­æ’æ‹”ï¼Œä¸”ææ˜“æ‰©å±•ã€‚å†…ç½®ä¸°å¯Œçš„æ’ä»¶æ”¯æŒï¼Œé‰´æƒï¼Œé™æµï¼Œç†”æ–­ï¼Œé˜²ç«å¢™ç­‰ç­‰ã€‚ Soul æ˜¯å¦‚ä½•å®","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ æ’ä»¶é“¾å®ç°","type":"blog","url":"/zh/blog/soul_source_learning_15_plugin_chain/","wordcount":2408},{"author":"zenglinhui","categories":"Soul","content":" æºç åˆ†æ  é¡µé¢æ“ä½œæºç åˆ†æ  åœ¨åˆ†ææºç ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹å›¾ï¼Œé¡µé¢æ˜¾ç¤ºåŠ è½½çš„æ’ä»¶åˆ—è¡¨ä¼šå¯¹åº”åç«¯çš„è¯·æ±‚ï¼Œæ ¹æ®åç«¯è¯·æ±‚ï¼Œæ‰¾åˆ°å¯¹åº”çš„controllerç±» ç„¶åæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ï¼Œåœ¨ä¸Šå›¾å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯è®¿é—® plugin ä¸­é»˜è®¤ä¸ºç©ºçš„ mappingï¼Œä¼ å…¥åˆ°åˆ†é¡µç›¸å…³çš„å‚æ•°ï¼Œç„¶åå»æŸ¥è¯¢æ•°æ®åº“ä¸­å¯¹åº”çš„æ’ä»¶è®°å½• æ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨ä¸ºä¸‹å›¾æ‰€ç¤ºï¼Œdivide çŠ¶æ€æ˜¯å¯ç”¨ï¼Œåœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œå°±æ˜¯ç”¨è¿™ä¸ªæ’ä»¶æ¥æµ‹è¯•ç½‘å…³ åŒæ—¶è¯·æ±‚çš„è¿˜æœ‰é€‰æ‹©å™¨ï¼Œè¯·æ±‚çš„ controller è§ä¸‹å›¾ã€‚åœ¨ä¸Šç¯‡çš„æ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨é¡µé¢æŠŠé€‰æ‹©å™¨ä¸­çš„æ¡ä»¶ CRUDï¼Œå¯ä»¥å®æ—¶ååº”åˆ°ç½‘å…³ä¸­å»ï¼Œè€Œä¸éœ€è¦é‡å¯ç½‘å…³ï¼Œæ‰€ä»¥è¿™é‡Œé™¤äº†queryæ–¹æ³•ä¸­ï¼Œå¢åŠ ã€åˆ é™¤ã€å’Œä¿®æ”¹æ–¹æ³•ä¸­,åœ¨ä¿å­˜åˆ°æ•°æ®åº“ä¹‹åéƒ½æœ‰ä¸€ä¸ª publishEvent æ–¹æ³•ã€‚å°±æ˜¯è¿™ä¸ªäº‹ä»¶æ–¹æ³•ï¼Œå¯ä»¥è®©ç”¨æˆ·ç›´æ¥åœ¨ soul åå°é…ç½®è§„åˆ™ï¼Œä»è€Œè¾¾åˆ°æ—¶æ—¶ç”Ÿæ•ˆçš„ç›®åœ° public int createOrUpdate(final SelectorDTO selectorDTO) { int selectorCount; SelectorDO selectorDO = SelectorDO.buildSelectorDO(selectorDTO); List\u0026amp;lt;SelectorConditionDTO\u0026amp;gt; selectorConditionDTOs = selectorDTO.getSelectorConditions(); if (StringUtils.isEmpty(selectorDTO.getId())) { selectorCount = selectorMapper.insertSelective(selectorDO); selectorConditionDTOs.forEach(selectorConditionDTO -\u0026amp;gt; { selectorConditionDTO.setSelectorId(selectorDO.getId()); selectorConditionMapper.insertSelective(SelectorConditionDO.buildSelectorConditionDO(selectorConditionDTO)); }); } else { selectorCount = selectorMapper.updateSelective(selectorDO); //delete rule condition then add selectorConditionMapper.deleteByQuery(new SelectorConditionQuery(selectorDO.getId())); selectorConditionDTOs.forEach(selectorConditionDTO -\u0026amp;gt; { selectorConditionDTO.setSelectorId(selectorDO.getId()); SelectorConditionDO selectorConditionDO = SelectorConditionDO.buildSelectorConditionDO(selectorConditionDTO); selectorConditionMapper.insertSelective(selectorConditionDO); }); } publishEvent(selectorDO, selectorConditionDTOs); return selectorCount; }   ä¸soul-bootstrap æ•°æ®åŒæ­¥(websocket)æºç åˆ†æ  ä¹‹å‰ä»‹ç»äº† admin é¡µé¢æ“ä½œä¹‹åæŠŠæ•°æ®ä¿å­˜æ•°æ®åº“ï¼Œç„¶åç”¨äº† spring è‡ªå¸¦çš„å“åº”å¼ç¼–ç¨‹æŠŠæ•°æ®åŒæ­¥åˆ° bootstrap é¡¹ç›®ï¼Œä»¥è¾¾åˆ°åŠ¨æ€åˆ·æ–°ç½‘å…³è§„åˆ™åŠæ’ä»¶ï¼Œè€Œä¸ç”¨æ·»åŠ é…ç½®åå»é‡å¯ç½‘å…³ã€‚ å½“ soul-bootstrap å¯åŠ¨æ—¶ï¼Œçœ‹æ—¥å¿—ä¼šæ‰“å‡ºæ¥è¿™ä¹ˆä¸€æ®µ\n2021-01-21 00:33:39.620 INFO 14276 --- [0.0-9095-exec-5] o.d.s.a.l.websocket.WebsocketCollector : websocket on open successful....  é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå®ƒç”¨ websocket å’Œè°è¿æ¥äº†ï¼Œåˆæ˜¯æ€ä¹ˆè¿æ¥çš„ï¼Ÿä¸‹é¢é€šè¿‡æ‰¾åˆ°æ‰“æ—¥å¿—çš„ä»£ç ï¼Œå†é€šè¿‡æ‰“æ–­ç‚¹çš„æ–¹å¼æ¥è°ƒè¯•ä¸€ä¸‹ï¼Œè¿™é‡Œæ˜¯æ‰“æ—¥å¿—å‡ºæ¥çš„åœ°æ–¹ å…ˆæ¥åˆ†æä¸€ä¸‹è¿™ä¸ªä»£ç ï¼š - ä» websocketConfig è¿™ä¸ªé…ç½®é‡Œé¢æ‹¿åˆ°é…çš„è¯·æ±‚åœ°å€ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å½“ç„¶æ˜¯åœ¨ä¸‹å›¾çš„è¿™ä¸ªåœ°æ–¹é…çš„ - æ‹¿åˆ°è¿™ä¸ªé…ç½®åœ°å€åï¼Œåˆ›å»ºäº†ä¸€ä¸ªå®šæ—¶çš„çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å¤§å°ä¸º urls.lengthï¼Œçº¿ç¨‹åç§°å‰ç¼€ä¸º\u0026amp;rdquo;websocket-connect\u0026amp;rdquo;çš„å®ˆæŠ¤çº¿ç¨‹ã€‚è¿™é‡Œä¸ºä»€ä¹ˆè¦åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå› ä¸ºè¿™åªæ˜¯ä¸ºäº†ä¿è¯ bootstrap å’Œ admin çš„ websocket è¿æ¥ä¸æ–­ï¼Œç±»ä¼¼äºå¿ƒè·³çš„ä½œç”¨ï¼Œæ‰€ä»¥ç”¨å®ˆæŠ¤çº¿ç¨‹æ˜¯æœ€å¥½çš„ - æ ¹æ®åˆ›å»ºçš„ client ç«¯ï¼Œä¸€ä¸ªä¸€ä¸ªçš„å»è¯·æ±‚é…ç½®æ–‡ä»¶é…çš„åœ°å€ï¼Œç„¶åæ‰“å°ä¹‹å‰æ‰€æ‰¾åˆ°çš„æ—¥å¿— - åé¢å°±å¯åŠ¨çº¿ç¨‹å»åˆ¤æ–­ client æ˜¯å¦å…³é—­ï¼Œå¦‚æœå…³é—­å°±ä¼šå»é‡æ–°è¿æ¥(åˆå§‹é—´éš”10ç§’ï¼Œç„¶åæ¯30ç§’å»æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥ï¼Œæ‰€ä»¥å¦‚æœä½ çœ‹åˆ°æ§åˆ¶å°æœ‰æ—¶ä¼šæ‰“å°å¤šä¸ªè¿æ¥æˆåŠŸçš„æ—¥å¿—ï¼Œè¯´æ˜é‡è¿äº†) - æˆ‘ä»¬å†æ¥çœ‹çœ‹åœ¨ admin åå°æ“ä½œçš„æ•°æ®æ˜¯æ€ä¹ˆåŒæ­¥åˆ° bootstrap ä¸­çš„å‘¢ï¼Œä¹‹å‰æœ‰è¯´è¿‡ï¼Œåœ¨åå°ä¿å­˜æˆ–è€…æ›´æ–°æ•°æ®ä¹‹åï¼Œä¼šè°ƒç”¨ publishEvent æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯ spring è‡ªå¸¦å“åº”å¼ç¼–ç¨‹çš„æ–¹æ³•ï¼Œæ—¢ç„¶æ˜¯å“åº”å¼ï¼Œé‚£å°±æ˜¯åŸºäºäº‹ä»¶çš„ï¼Œé‚£å°±å¾—æœ‰ listener ä¸€æ‰¾æœä¸å…¶ç„¶ï¼Œä¸Šå›¾ç”»çº¢æ¡†çš„åœ°æ–¹æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼Œæ²¡é”™ï¼Œç›‘å¬å™¨ï¼Œå’Œwebsocketç›¸å…³çš„ç›‘å¬å™¨ï¼Œå¦‚æœè¿˜æ˜¯æœ‰ç‚¹çœ‹ä¸æ˜ç™½ç›‘å¬å’Œä¹‹å‰çš„ publishEvent æœ‰ä»€ä¹ˆå…³ç³»ï¼Œé‚£å°±æŠŠç›‘å¬å™¨é‡Œçš„ä»£ç æ‰“ä¸Šæ–­ç‚¹ï¼Œè°ƒè¯•ä¸€æŠŠã€‚æˆ‘è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œå°±ç‚¹äº†è¿™ä¸ªåŒæ­¥æ‰€æœ‰æ•°æ® è¿™é‡Œè¿›çš„æ˜¯ DataChangedEventDispatcher è¿™ä¸ªç±»ï¼Œè°ƒç”¨äº†event ç›¸å…³çš„æ–¹æ³•ï¼Œåœ¨å·¦ä¸‹è§’è¿™ä¸ªåœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†ç†Ÿæ‚‰äº†æ–¹æ³•äº†ï¼Œæ²¡é”™å°±æ˜¯ä¸Šé¢è¯´çš„ publishEvent  ç„¶åä¼šè·³è½¬åˆ° WebsocketDataChangedListener è¿™ä¸ªç±»ä¸­ï¼Œè¿™é‡Œé‡ç‚¹çœ‹ä¸€ä¸‹åœ¨è°ƒè¯•æ–¹æ³•ä¸­ send æ–¹æ³•  è¿™é‡Œé€šè¿‡ send æ–¹æ³•æŠŠæ›´æ–°çš„æ•°æ®å‘åˆ° bootstrap ä¸­ï¼Œåˆ°æ­¤ admin æ€ä¹ˆåŒæ­¥æ•°æ®åˆ° bootstrap ä¸­å°±çœŸç›¸å¤§ç™½äº†  ä¸soul-bootstrap æ•°æ®åŒæ­¥(zookeeper)æºç åˆ†æ è¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾ï¼ŒæŠŠ websocket çš„é…ç½®å…ˆæ³¨é‡Šæ‰ï¼Œæ‰“å¼€ zookeeper çš„é…ç½®ï¼Œå‰ææ˜¯æŠŠæœ¬åœ°æˆ–è€…è¿œç¨‹çš„ zookeeper æœåŠ¡æ‰“å¼€ï¼Œç„¶åå¯åŠ¨ soul-admin é¦–å…ˆè¿›å…¥äº† ZookeeperDataInit ç±»çš„ run æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œä¹‹åï¼Œå¥‡æ€ªçš„ä¸€ç‚¹æ˜¯è·³åˆ°äº† WebsocketDataChangedListener ç±»ä¸­å»äº† è¿™ä¸€ç‚¹æ²¡å¼„æ˜ç™½ï¼Œç­‰è¿™ä¸ªç±»é‡Œé¢çš„ onPluginChanged æ–¹æ³•æ‰§è¡Œå®Œäº†ä¹‹åï¼Œ â€¦","date":1611100800,"description":"Soul Gateway Learning Admin Source Code Analysis","dir":"blog/soul_resource_learning_07_admin/","fuzzywordcount":2300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"87d6eb1e421e5713d332bfdff2c1e5d85bd8c2e9","permalink":"/blog/soul_resource_learning_07_admin/","publishdate":"2021-01-20T00:00:00Z","readingtime":5,"relpermalink":"/blog/soul_resource_learning_07_admin/","summary":"æºç åˆ†æ é¡µé¢æ“ä½œæºç åˆ†æ åœ¨åˆ†ææºç ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹å›¾ï¼Œé¡µé¢æ˜¾ç¤ºåŠ è½½çš„æ’ä»¶åˆ—è¡¨ä¼šå¯¹åº”åç«¯çš„è¯·æ±‚ï¼Œæ ¹æ®åç«¯è¯·æ±‚ï¼Œæ‰¾åˆ°å¯¹åº”çš„controllerç±» ç„¶å","tags":["Soul"],"title":"Soul Gateway Learning Admin Source Code Analysis","type":"blog","url":"/blog/soul_resource_learning_07_admin/","wordcount":2262},{"author":"liquan","categories":"Soul","content":" å¯åŠ¨ soul-adminã€soul-bootstrapï¼Œ ä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸€ã€é…ç½®ç¯å¢ƒ 1ã€soul-admin æœåŠ¡é…ç½®ï¼Œéœ€è¦é‡å¯æœåŠ¡\nsoul-admin/src/main/resources/application.yml\nsoul: sync: zookeeper: url: localhost:2181 sessionTimeout: 5000 connectionTimeout: 2000  2ã€soul-bootstrap ç½‘å…³æœåŠ¡é…ç½®ï¼Œéœ€è¦é‡å¯\nsoul-bootstrap/pom.xml\n\u0026amp;lt;!--soul data sync start use zookeeper--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-zookeeper\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  soul-bootstrap/src/main/resources/application-local.yml\nsoul : sync: zookeeper: url: localhost:2181 sessionTimeout: 5000 connectionTimeout: 2000  äºŒã€å¯åŠ¨æœåŠ¡ 1ã€ å¯åŠ¨ zookeeper\nzookeeper ./bin/zkServer.sh start /usr/bin/java ZooKeeper JMX enabled by default Using config: /Documents/soft/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED  2ã€soul-admin ç½‘å…³åå°æœåŠ¡å¯åŠ¨ï¼ŒæœåŠ¡å¯åŠ¨åå¯ä»¥çœ‹åˆ°å‘èµ·çš„ZooKeeperè¯·æ±‚è°ƒç”¨\n 2021-01-20 17:34:48.752 INFO 64500 --- [-localhost:2181] org.I0Itec.zkclient.ZkEventThread : Starting ZkClient event thread. 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:zookeeper.version=3.5.6-c11b7e26bc554b8523dc929761dd28808913f091, built on 10/08/2019 20:18 GMT 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:host.name=10.7.254.31 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:java.version=1.8.0_261 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:java.vendor=Oracle Corporation ...... 2021-01-20 17:34:48.806 INFO 64500 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn : Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) 2021-01-20 17:34:48.826 INFO 64500 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn : Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:58214, server: localhost/0:0:0:0:0:0:0:1:2181 2021-01-20 17:34:48.857 INFO 64500 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn : Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x1000b5e22f50001, negotiated timeout = 5000 2021-01-20 17:34:48.861 INFO 64500 --- [ain-EventThread] org.I0Itec.zkclient.ZkClient : zookeeper state changed (SyncConnected)  3ã€soul-bootstrap ç½‘å…³æœåŠ¡å¯åŠ¨ï¼ŒæœåŠ¡å¯åŠ¨åå¯ä»¥çœ‹åˆ°å‘èµ·çš„ZooKeeperè¯·æ±‚è°ƒç”¨\n2021-01-20 17:35:58.996 INFO 64583 --- [ main] s.b.s.d.z.ZookeeperSyncDataConfiguration : you use zookeeper sync soul data....... 2021-01-20 17:35:59.003 INFO 64583 --- [-localhost:2181] org.I0Itec.zkclient.ZkEventThread : Starting ZkClient event thread. ...... 2021-01-20 17:35:59.012 INFO 64583 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:user.home=/Users/liquan 2021-01-20 17:35:59.012 INFO 64583 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:os.memory.total=310MB 2021-01-20 17:35:59.018 INFO 64583 --- â€¦","date":1611100800,"description":"Soul Gateway Learns Zookeeper Data Synchronization","dir":"blog/soul_source_learning_13_zookeeper_01/","fuzzywordcount":2200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"3a690ab14c2f6bc9417522c4f69594fb7674eba4","permalink":"/blog/soul_source_learning_13_zookeeper_01/","publishdate":"2021-01-20T00:00:00Z","readingtime":5,"relpermalink":"/blog/soul_source_learning_13_zookeeper_01/","summary":"å¯åŠ¨ soul-adminã€soul-bootstrapï¼Œ ä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸€ã€é…ç½®ç¯å¢ƒ 1ã€soul-admin æœåŠ¡é…ç½®ï¼Œéœ€","tags":["Soul"],"title":"Soul Gateway Learns Zookeeper Data Synchronization 01","type":"blog","url":"/blog/soul_source_learning_13_zookeeper_01/","wordcount":2181},{"author":"æ›¾æ—è¾‰","categories":"Soul","content":" æºç åˆ†æ  é¡µé¢æ“ä½œæºç åˆ†æ  åœ¨åˆ†ææºç ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹å›¾ï¼Œé¡µé¢æ˜¾ç¤ºåŠ è½½çš„æ’ä»¶åˆ—è¡¨ä¼šå¯¹åº”åç«¯çš„è¯·æ±‚ï¼Œæ ¹æ®åç«¯è¯·æ±‚ï¼Œæ‰¾åˆ°å¯¹åº”çš„controllerç±» ç„¶åæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ï¼Œåœ¨ä¸Šå›¾å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯è®¿é—® plugin ä¸­é»˜è®¤ä¸ºç©ºçš„ mappingï¼Œä¼ å…¥åˆ°åˆ†é¡µç›¸å…³çš„å‚æ•°ï¼Œç„¶åå»æŸ¥è¯¢æ•°æ®åº“ä¸­å¯¹åº”çš„æ’ä»¶è®°å½• æ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨ä¸ºä¸‹å›¾æ‰€ç¤ºï¼Œdivide çŠ¶æ€æ˜¯å¯ç”¨ï¼Œåœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œå°±æ˜¯ç”¨è¿™ä¸ªæ’ä»¶æ¥æµ‹è¯•ç½‘å…³ åŒæ—¶è¯·æ±‚çš„è¿˜æœ‰é€‰æ‹©å™¨ï¼Œè¯·æ±‚çš„ controller è§ä¸‹å›¾ã€‚åœ¨ä¸Šç¯‡çš„æ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨é¡µé¢æŠŠé€‰æ‹©å™¨ä¸­çš„æ¡ä»¶ CRUDï¼Œå¯ä»¥å®æ—¶ååº”åˆ°ç½‘å…³ä¸­å»ï¼Œè€Œä¸éœ€è¦é‡å¯ç½‘å…³ï¼Œæ‰€ä»¥è¿™é‡Œé™¤äº†queryæ–¹æ³•ä¸­ï¼Œå¢åŠ ã€åˆ é™¤ã€å’Œä¿®æ”¹æ–¹æ³•ä¸­,åœ¨ä¿å­˜åˆ°æ•°æ®åº“ä¹‹åéƒ½æœ‰ä¸€ä¸ª publishEvent æ–¹æ³•ã€‚å°±æ˜¯è¿™ä¸ªäº‹ä»¶æ–¹æ³•ï¼Œå¯ä»¥è®©ç”¨æˆ·ç›´æ¥åœ¨ soul åå°é…ç½®è§„åˆ™ï¼Œä»è€Œè¾¾åˆ°æ—¶æ—¶ç”Ÿæ•ˆçš„ç›®åœ° public int createOrUpdate(final SelectorDTO selectorDTO) { int selectorCount; SelectorDO selectorDO = SelectorDO.buildSelectorDO(selectorDTO); List\u0026amp;lt;SelectorConditionDTO\u0026amp;gt; selectorConditionDTOs = selectorDTO.getSelectorConditions(); if (StringUtils.isEmpty(selectorDTO.getId())) { selectorCount = selectorMapper.insertSelective(selectorDO); selectorConditionDTOs.forEach(selectorConditionDTO -\u0026amp;gt; { selectorConditionDTO.setSelectorId(selectorDO.getId()); selectorConditionMapper.insertSelective(SelectorConditionDO.buildSelectorConditionDO(selectorConditionDTO)); }); } else { selectorCount = selectorMapper.updateSelective(selectorDO); //delete rule condition then add selectorConditionMapper.deleteByQuery(new SelectorConditionQuery(selectorDO.getId())); selectorConditionDTOs.forEach(selectorConditionDTO -\u0026amp;gt; { selectorConditionDTO.setSelectorId(selectorDO.getId()); SelectorConditionDO selectorConditionDO = SelectorConditionDO.buildSelectorConditionDO(selectorConditionDTO); selectorConditionMapper.insertSelective(selectorConditionDO); }); } publishEvent(selectorDO, selectorConditionDTOs); return selectorCount; }   ä¸soul-bootstrap æ•°æ®åŒæ­¥(websocket)æºç åˆ†æ  ä¹‹å‰ä»‹ç»äº† admin é¡µé¢æ“ä½œä¹‹åæŠŠæ•°æ®ä¿å­˜æ•°æ®åº“ï¼Œç„¶åç”¨äº† spring è‡ªå¸¦çš„å“åº”å¼ç¼–ç¨‹æŠŠæ•°æ®åŒæ­¥åˆ° bootstrap é¡¹ç›®ï¼Œä»¥è¾¾åˆ°åŠ¨æ€åˆ·æ–°ç½‘å…³è§„åˆ™åŠæ’ä»¶ï¼Œè€Œä¸ç”¨æ·»åŠ é…ç½®åå»é‡å¯ç½‘å…³ã€‚ å½“ soul-bootstrap å¯åŠ¨æ—¶ï¼Œçœ‹æ—¥å¿—ä¼šæ‰“å‡ºæ¥è¿™ä¹ˆä¸€æ®µ\n2021-01-21 00:33:39.620 INFO 14276 --- [0.0-9095-exec-5] o.d.s.a.l.websocket.WebsocketCollector : websocket on open successful....  é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå®ƒç”¨ websocket å’Œè°è¿æ¥äº†ï¼Œåˆæ˜¯æ€ä¹ˆè¿æ¥çš„ï¼Ÿä¸‹é¢é€šè¿‡æ‰¾åˆ°æ‰“æ—¥å¿—çš„ä»£ç ï¼Œå†é€šè¿‡æ‰“æ–­ç‚¹çš„æ–¹å¼æ¥è°ƒè¯•ä¸€ä¸‹ï¼Œè¿™é‡Œæ˜¯æ‰“æ—¥å¿—å‡ºæ¥çš„åœ°æ–¹ å…ˆæ¥åˆ†æä¸€ä¸‹è¿™ä¸ªä»£ç ï¼š - ä» websocketConfig è¿™ä¸ªé…ç½®é‡Œé¢æ‹¿åˆ°é…çš„è¯·æ±‚åœ°å€ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å½“ç„¶æ˜¯åœ¨ä¸‹å›¾çš„è¿™ä¸ªåœ°æ–¹é…çš„ - æ‹¿åˆ°è¿™ä¸ªé…ç½®åœ°å€åï¼Œåˆ›å»ºäº†ä¸€ä¸ªå®šæ—¶çš„çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å¤§å°ä¸º urls.lengthï¼Œçº¿ç¨‹åç§°å‰ç¼€ä¸º\u0026amp;rdquo;websocket-connect\u0026amp;rdquo;çš„å®ˆæŠ¤çº¿ç¨‹ã€‚è¿™é‡Œä¸ºä»€ä¹ˆè¦åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå› ä¸ºè¿™åªæ˜¯ä¸ºäº†ä¿è¯ bootstrap å’Œ admin çš„ websocket è¿æ¥ä¸æ–­ï¼Œç±»ä¼¼äºå¿ƒè·³çš„ä½œç”¨ï¼Œæ‰€ä»¥ç”¨å®ˆæŠ¤çº¿ç¨‹æ˜¯æœ€å¥½çš„ - æ ¹æ®åˆ›å»ºçš„ client ç«¯ï¼Œä¸€ä¸ªä¸€ä¸ªçš„å»è¯·æ±‚é…ç½®æ–‡ä»¶é…çš„åœ°å€ï¼Œç„¶åæ‰“å°ä¹‹å‰æ‰€æ‰¾åˆ°çš„æ—¥å¿— - åé¢å°±å¯åŠ¨çº¿ç¨‹å»åˆ¤æ–­ client æ˜¯å¦å…³é—­ï¼Œå¦‚æœå…³é—­å°±ä¼šå»é‡æ–°è¿æ¥(åˆå§‹é—´éš”10ç§’ï¼Œç„¶åæ¯30ç§’å»æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥ï¼Œæ‰€ä»¥å¦‚æœä½ çœ‹åˆ°æ§åˆ¶å°æœ‰æ—¶ä¼šæ‰“å°å¤šä¸ªè¿æ¥æˆåŠŸçš„æ—¥å¿—ï¼Œè¯´æ˜é‡è¿äº†) - æˆ‘ä»¬å†æ¥çœ‹çœ‹åœ¨ admin åå°æ“ä½œçš„æ•°æ®æ˜¯æ€ä¹ˆåŒæ­¥åˆ° bootstrap ä¸­çš„å‘¢ï¼Œä¹‹å‰æœ‰è¯´è¿‡ï¼Œåœ¨åå°ä¿å­˜æˆ–è€…æ›´æ–°æ•°æ®ä¹‹åï¼Œä¼šè°ƒç”¨ publishEvent æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯ spring è‡ªå¸¦å“åº”å¼ç¼–ç¨‹çš„æ–¹æ³•ï¼Œæ—¢ç„¶æ˜¯å“åº”å¼ï¼Œé‚£å°±æ˜¯åŸºäºäº‹ä»¶çš„ï¼Œé‚£å°±å¾—æœ‰ listener ä¸€æ‰¾æœä¸å…¶ç„¶ï¼Œä¸Šå›¾ç”»çº¢æ¡†çš„åœ°æ–¹æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼Œæ²¡é”™ï¼Œç›‘å¬å™¨ï¼Œå’Œwebsocketç›¸å…³çš„ç›‘å¬å™¨ï¼Œå¦‚æœè¿˜æ˜¯æœ‰ç‚¹çœ‹ä¸æ˜ç™½ç›‘å¬å’Œä¹‹å‰çš„ publishEvent æœ‰ä»€ä¹ˆå…³ç³»ï¼Œé‚£å°±æŠŠç›‘å¬å™¨é‡Œçš„ä»£ç æ‰“ä¸Šæ–­ç‚¹ï¼Œè°ƒè¯•ä¸€æŠŠã€‚æˆ‘è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œå°±ç‚¹äº†è¿™ä¸ªåŒæ­¥æ‰€æœ‰æ•°æ® è¿™é‡Œè¿›çš„æ˜¯ DataChangedEventDispatcher è¿™ä¸ªç±»ï¼Œè°ƒç”¨äº†event ç›¸å…³çš„æ–¹æ³•ï¼Œåœ¨å·¦ä¸‹è§’è¿™ä¸ªåœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†ç†Ÿæ‚‰äº†æ–¹æ³•äº†ï¼Œæ²¡é”™å°±æ˜¯ä¸Šé¢è¯´çš„ publishEvent  ç„¶åä¼šè·³è½¬åˆ° WebsocketDataChangedListener è¿™ä¸ªç±»ä¸­ï¼Œè¿™é‡Œé‡ç‚¹çœ‹ä¸€ä¸‹åœ¨è°ƒè¯•æ–¹æ³•ä¸­ send æ–¹æ³•  è¿™é‡Œé€šè¿‡ send æ–¹æ³•æŠŠæ›´æ–°çš„æ•°æ®å‘åˆ° bootstrap ä¸­ï¼Œåˆ°æ­¤ admin æ€ä¹ˆåŒæ­¥æ•°æ®åˆ° bootstrap ä¸­å°±çœŸç›¸å¤§ç™½äº†  ä¸soul-bootstrap æ•°æ®åŒæ­¥(zookeeper)æºç åˆ†æ è¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾ï¼ŒæŠŠ websocket çš„é…ç½®å…ˆæ³¨é‡Šæ‰ï¼Œæ‰“å¼€ zookeeper çš„é…ç½®ï¼Œå‰ææ˜¯æŠŠæœ¬åœ°æˆ–è€…è¿œç¨‹çš„ zookeeper æœåŠ¡æ‰“å¼€ï¼Œç„¶åå¯åŠ¨ soul-admin é¦–å…ˆè¿›å…¥äº† ZookeeperDataInit ç±»çš„ run æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œä¹‹åï¼Œå¥‡æ€ªçš„ä¸€ç‚¹æ˜¯è·³åˆ°äº† WebsocketDataChangedListener ç±»ä¸­å»äº† è¿™ä¸€ç‚¹æ²¡å¼„æ˜ç™½ï¼Œç­‰è¿™ä¸ªç±»é‡Œé¢çš„ onPluginChanged æ–¹æ³•æ‰§è¡Œå®Œäº†ä¹‹åï¼Œ â€¦","date":1611100800,"description":"Soulç½‘å…³å­¦ä¹ Adminæºç åˆ†æ","dir":"blog/soul_resource_learning_07_admin/","fuzzywordcount":2300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"f45e2aa4ddf421cbb8a3e1a6fb52518a8b35fb47","permalink":"/zh/blog/soul_resource_learning_07_admin/","publishdate":"2021-01-20T00:00:00Z","readingtime":5,"relpermalink":"/zh/blog/soul_resource_learning_07_admin/","summary":"æºç åˆ†æ é¡µé¢æ“ä½œæºç åˆ†æ åœ¨åˆ†ææºç ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹å›¾ï¼Œé¡µé¢æ˜¾ç¤ºåŠ è½½çš„æ’ä»¶åˆ—è¡¨ä¼šå¯¹åº”åç«¯çš„è¯·æ±‚ï¼Œæ ¹æ®åç«¯è¯·æ±‚ï¼Œæ‰¾åˆ°å¯¹åº”çš„controllerç±» ç„¶å","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Adminæºç åˆ†æ","type":"blog","url":"/zh/blog/soul_resource_learning_07_admin/","wordcount":2262},{"author":"ææƒ","categories":"Soul","content":" å¯åŠ¨ soul-adminã€soul-bootstrapï¼Œ ä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸€ã€é…ç½®ç¯å¢ƒ 1ã€soul-admin æœåŠ¡é…ç½®ï¼Œéœ€è¦é‡å¯æœåŠ¡\nsoul-admin/src/main/resources/application.yml\nsoul: sync: zookeeper: url: localhost:2181 sessionTimeout: 5000 connectionTimeout: 2000  2ã€soul-bootstrap ç½‘å…³æœåŠ¡é…ç½®ï¼Œéœ€è¦é‡å¯\nsoul-bootstrap/pom.xml\n\u0026amp;lt;!--soul data sync start use zookeeper--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-zookeeper\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  soul-bootstrap/src/main/resources/application-local.yml\nsoul : sync: zookeeper: url: localhost:2181 sessionTimeout: 5000 connectionTimeout: 2000  äºŒã€å¯åŠ¨æœåŠ¡ 1ã€ å¯åŠ¨ zookeeper\nzookeeper ./bin/zkServer.sh start /usr/bin/java ZooKeeper JMX enabled by default Using config: /Documents/soft/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED  2ã€soul-admin ç½‘å…³åå°æœåŠ¡å¯åŠ¨ï¼ŒæœåŠ¡å¯åŠ¨åå¯ä»¥çœ‹åˆ°å‘èµ·çš„ZooKeeperè¯·æ±‚è°ƒç”¨\n 2021-01-20 17:34:48.752 INFO 64500 --- [-localhost:2181] org.I0Itec.zkclient.ZkEventThread : Starting ZkClient event thread. 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:zookeeper.version=3.5.6-c11b7e26bc554b8523dc929761dd28808913f091, built on 10/08/2019 20:18 GMT 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:host.name=10.7.254.31 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:java.version=1.8.0_261 2021-01-20 17:34:48.761 INFO 64500 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:java.vendor=Oracle Corporation ...... 2021-01-20 17:34:48.806 INFO 64500 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn : Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) 2021-01-20 17:34:48.826 INFO 64500 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn : Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:58214, server: localhost/0:0:0:0:0:0:0:1:2181 2021-01-20 17:34:48.857 INFO 64500 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn : Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x1000b5e22f50001, negotiated timeout = 5000 2021-01-20 17:34:48.861 INFO 64500 --- [ain-EventThread] org.I0Itec.zkclient.ZkClient : zookeeper state changed (SyncConnected)  3ã€soul-bootstrap ç½‘å…³æœåŠ¡å¯åŠ¨ï¼ŒæœåŠ¡å¯åŠ¨åå¯ä»¥çœ‹åˆ°å‘èµ·çš„ZooKeeperè¯·æ±‚è°ƒç”¨\n2021-01-20 17:35:58.996 INFO 64583 --- [ main] s.b.s.d.z.ZookeeperSyncDataConfiguration : you use zookeeper sync soul data....... 2021-01-20 17:35:59.003 INFO 64583 --- [-localhost:2181] org.I0Itec.zkclient.ZkEventThread : Starting ZkClient event thread. ...... 2021-01-20 17:35:59.012 INFO 64583 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:user.home=/Users/liquan 2021-01-20 17:35:59.012 INFO 64583 --- [ main] org.apache.zookeeper.ZooKeeper : Client environment:os.memory.total=310MB 2021-01-20 17:35:59.018 INFO 64583 --- â€¦","date":1611100800,"description":"Soulç½‘å…³å­¦ä¹ Zookeeperæ•°æ®åŒæ­¥","dir":"blog/soul_source_learning_13_zookeeper_01/","fuzzywordcount":2200,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"9674c2034bd28a675fe6ae6e8c71f825d09fdd66","permalink":"/zh/blog/soul_source_learning_13_zookeeper_01/","publishdate":"2021-01-20T00:00:00Z","readingtime":5,"relpermalink":"/zh/blog/soul_source_learning_13_zookeeper_01/","summary":"å¯åŠ¨ soul-adminã€soul-bootstrapï¼Œ ä½¿ç”¨zookeeperåŒæ­¥æ•°æ®åˆ°ç½‘å…³ ä¸€ã€é…ç½®ç¯å¢ƒ 1ã€soul-admin æœåŠ¡é…ç½®ï¼Œéœ€","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ Zookeeperæ•°æ®åŒæ­¥01","type":"blog","url":"/zh/blog/soul_source_learning_13_zookeeper_01/","wordcount":2181},{"author":"fanjinpeng","categories":"Soul","content":" HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ³¨å†Œé€»è¾‘åˆ†æ 1. æ³¨å†Œå…¥å£ HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ—¶ï¼Œä¼šè°ƒç”¨ soul-admin ä¸€ä¸ªæ¥å£ï¼ŒæŠŠéœ€è¦ Soul ç½‘å…³ç®¡ç†çš„æ¥å£æ³¨å†Œï¼Œä»Šå¤©å°±å…·ä½“çœ‹çœ‹åˆ°åº•å¹²äº†ç‚¹å„¿å•¥ã€‚\nå…ˆçœ‹ä¸‹è°ƒç”¨çš„æ¥å£ä¿¡æ¯å¦‚ä¸‹ï¼š\n// SpringMvcClientBeanPostProcessor.java /** * Instantiates a new Soul client bean post processor. * * @param soulSpringMvcConfig the soul spring mvc config */ public SpringMvcClientBeanPostProcessor(final SoulSpringMvcConfig soulSpringMvcConfig) { ValidateUtils.validate(soulSpringMvcConfig); this.soulSpringMvcConfig = soulSpringMvcConfig; url = soulSpringMvcConfig.getAdminUrl() + \u0026amp;quot;/soul-client/springmvc-register\u0026amp;quot;; executorService = new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue\u0026amp;lt;\u0026amp;gt;()); }  2. springmvc-register æ¥å£é€»è¾‘ å…¨å±€æœç´¢ \u0026amp;ldquo;springmvc-register\u0026amp;rdquo;ï¼Œæ‰¾åˆ° soul-admin æ¨¡å—ä¸‹çš„ SoulClientControllerï¼Œçœ‹åˆ°è¿™é‡Œï¼Œå¯¹äºç»å¸¸å†™ CRUD çš„æˆ‘ä»¬æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿå“ˆå“ˆ~\n// SoulClientController.java /** * Register spring mvc string. * * @param springMvcRegisterDTO the spring mvc register dto * @return the string */ @PostMapping(\u0026amp;quot;/springmvc-register\u0026amp;quot;) public String registerSpringMvc(@RequestBody final SpringMvcRegisterDTO springMvcRegisterDTO) { return soulClientRegisterService.registerSpringMvc(springMvcRegisterDTO); }  Service å±‚å®ç°ç±»ï¼š\n// SoulClientRegisterServiceImpl.java @Override @Transactional public String registerSpringMvc(final SpringMvcRegisterDTO dto) { if (dto.isRegisterMetaData()) { MetaDataDO exist = metaDataMapper.findByPath(dto.getPath()); if (Objects.isNull(exist)) { saveSpringMvcMetaData(dto); } } String selectorId = handlerSpringMvcSelector(dto); handlerSpringMvcRule(selectorId, dto); return SoulResultMessage.SUCCESS; }  dto.isRegisterMetaData() è¿™ä¸ªæ˜¯å¦æ³¨å†Œå…ƒæ•°æ®ä¿¡æ¯çš„åˆ¤æ–­ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨ï¼Œå­˜ç–‘ //TODOï¼Œå…ˆå¾€ä¸‹èµ°ã€‚\n2.1 å…ˆçœ‹çœ‹è¿™ä¸ªæ–¹æ³• handlerSpringMvcSelectorï¼Œå¤„ç† Selectorã€‚ // SoulClientRegisterServiceImpl.java private String handlerSpringMvcSelector(final SpringMvcRegisterDTO dto) { String contextPath = dto.getContext(); // æ ¹æ® contextPath åˆ°æ•°æ®åº“é‡ŒæŸ¥è¯¢ï¼Œæ˜¯å¦å·²ç»æ³¨å†Œè¿‡ã€‚ SelectorDO selectorDO = selectorService.findByName(contextPath); String selectorId; String uri = String.join(\u0026amp;quot;:\u0026amp;quot;, dto.getHost(), String.valueOf(dto.getPort())); if (Objects.isNull(selectorDO)) { // è¿˜æ²¡æœ‰æ³¨å†Œè¿‡ selectorId = registerSelector(contextPath, dto.getRpcType(), dto.getAppName(), uri); } else { // å·²ç»æ³¨å†Œè¿‡ï¼Œä¸šåŠ¡ç³»ç»Ÿé‡å¯äº†ä¼šåˆ°è¿™é‡Œ selectorId = selectorDO.getId(); //update upstream String handle = selectorDO.getHandle(); String handleAdd; DivideUpstream addDivideUpstream = buildDivideUpstream(uri); SelectorData selectorData = selectorService.buildByName(contextPath); if (StringUtils.isBlank(handle)) { handleAdd = GsonUtils.getInstance().toJson(Collections.singletonList(addDivideUpstream)); } else { List\u0026amp;lt;DivideUpstream\u0026amp;gt; exist = GsonUtils.getInstance().fromList(handle, DivideUpstream.class); for (DivideUpstream upstream : exist) { if (upstream.getUpstreamUrl().equals(addDivideUpstream.getUpstreamUrl())) { return selectorId; } } exist.add(addDivideUpstream); handleAdd = GsonUtils.getInstance().toJson(exist); } selectorDO.setHandle(handleAdd); selectorData.setHandle(handleAdd); // update db â€¦","date":1610928000,"description":"Soul Learning (2) HTTP Client Access Source Code Parsing","dir":"blog/soul_source_learning_02_http_client_register/","fuzzywordcount":2600,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"a3c0ba501d97f125dada6e0ea2d5b56e5536ba9f","permalink":"/blog/soul_source_learning_02_http_client_register/","publishdate":"2021-01-18T00:00:00Z","readingtime":6,"relpermalink":"/blog/soul_source_learning_02_http_client_register/","summary":"HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ³¨å†Œé€»è¾‘åˆ†æ 1. æ³¨å†Œå…¥å£ HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ—¶ï¼Œä¼šè°ƒç”¨ soul-admin ä¸€ä¸ªæ¥å£ï¼ŒæŠŠéœ€è¦ Soul ç½‘å…³ç®¡ç†çš„æ¥å£æ³¨å†Œï¼Œä»Šå¤©å°±å…·ä½“çœ‹çœ‹åˆ°åº•å¹²äº†ç‚¹å„¿å•¥ã€‚ å…ˆçœ‹ä¸‹","tags":["Soul"],"title":"Soul Gateway Learning (2) HTTP Client Access Source Code Parsing","type":"blog","url":"/blog/soul_source_learning_02_http_client_register/","wordcount":2520},{"author":"èŒƒé‡‘é¹","categories":"Soul","content":" HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ³¨å†Œé€»è¾‘åˆ†æ 1. æ³¨å†Œå…¥å£ HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ—¶ï¼Œä¼šè°ƒç”¨ soul-admin ä¸€ä¸ªæ¥å£ï¼ŒæŠŠéœ€è¦ Soul ç½‘å…³ç®¡ç†çš„æ¥å£æ³¨å†Œï¼Œä»Šå¤©å°±å…·ä½“çœ‹çœ‹åˆ°åº•å¹²äº†ç‚¹å„¿å•¥ã€‚\nå…ˆçœ‹ä¸‹è°ƒç”¨çš„æ¥å£ä¿¡æ¯å¦‚ä¸‹ï¼š\n// SpringMvcClientBeanPostProcessor.java /** * Instantiates a new Soul client bean post processor. * * @param soulSpringMvcConfig the soul spring mvc config */ public SpringMvcClientBeanPostProcessor(final SoulSpringMvcConfig soulSpringMvcConfig) { ValidateUtils.validate(soulSpringMvcConfig); this.soulSpringMvcConfig = soulSpringMvcConfig; url = soulSpringMvcConfig.getAdminUrl() + \u0026amp;quot;/soul-client/springmvc-register\u0026amp;quot;; executorService = new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue\u0026amp;lt;\u0026amp;gt;()); }  2. springmvc-register æ¥å£é€»è¾‘ å…¨å±€æœç´¢ \u0026amp;ldquo;springmvc-register\u0026amp;rdquo;ï¼Œæ‰¾åˆ° soul-admin æ¨¡å—ä¸‹çš„ SoulClientControllerï¼Œçœ‹åˆ°è¿™é‡Œï¼Œå¯¹äºç»å¸¸å†™ CRUD çš„æˆ‘ä»¬æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿå“ˆå“ˆ~\n// SoulClientController.java /** * Register spring mvc string. * * @param springMvcRegisterDTO the spring mvc register dto * @return the string */ @PostMapping(\u0026amp;quot;/springmvc-register\u0026amp;quot;) public String registerSpringMvc(@RequestBody final SpringMvcRegisterDTO springMvcRegisterDTO) { return soulClientRegisterService.registerSpringMvc(springMvcRegisterDTO); }  Service å±‚å®ç°ç±»ï¼š\n// SoulClientRegisterServiceImpl.java @Override @Transactional public String registerSpringMvc(final SpringMvcRegisterDTO dto) { if (dto.isRegisterMetaData()) { MetaDataDO exist = metaDataMapper.findByPath(dto.getPath()); if (Objects.isNull(exist)) { saveSpringMvcMetaData(dto); } } String selectorId = handlerSpringMvcSelector(dto); handlerSpringMvcRule(selectorId, dto); return SoulResultMessage.SUCCESS; }  dto.isRegisterMetaData() è¿™ä¸ªæ˜¯å¦æ³¨å†Œå…ƒæ•°æ®ä¿¡æ¯çš„åˆ¤æ–­ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨ï¼Œå­˜ç–‘ //TODOï¼Œå…ˆå¾€ä¸‹èµ°ã€‚\n2.1 å…ˆçœ‹çœ‹è¿™ä¸ªæ–¹æ³• handlerSpringMvcSelectorï¼Œå¤„ç† Selectorã€‚ // SoulClientRegisterServiceImpl.java private String handlerSpringMvcSelector(final SpringMvcRegisterDTO dto) { String contextPath = dto.getContext(); // æ ¹æ® contextPath åˆ°æ•°æ®åº“é‡ŒæŸ¥è¯¢ï¼Œæ˜¯å¦å·²ç»æ³¨å†Œè¿‡ã€‚ SelectorDO selectorDO = selectorService.findByName(contextPath); String selectorId; String uri = String.join(\u0026amp;quot;:\u0026amp;quot;, dto.getHost(), String.valueOf(dto.getPort())); if (Objects.isNull(selectorDO)) { // è¿˜æ²¡æœ‰æ³¨å†Œè¿‡ selectorId = registerSelector(contextPath, dto.getRpcType(), dto.getAppName(), uri); } else { // å·²ç»æ³¨å†Œè¿‡ï¼Œä¸šåŠ¡ç³»ç»Ÿé‡å¯äº†ä¼šåˆ°è¿™é‡Œ selectorId = selectorDO.getId(); //update upstream String handle = selectorDO.getHandle(); String handleAdd; DivideUpstream addDivideUpstream = buildDivideUpstream(uri); SelectorData selectorData = selectorService.buildByName(contextPath); if (StringUtils.isBlank(handle)) { handleAdd = GsonUtils.getInstance().toJson(Collections.singletonList(addDivideUpstream)); } else { List\u0026amp;lt;DivideUpstream\u0026amp;gt; exist = GsonUtils.getInstance().fromList(handle, DivideUpstream.class); for (DivideUpstream upstream : exist) { if (upstream.getUpstreamUrl().equals(addDivideUpstream.getUpstreamUrl())) { return selectorId; } } exist.add(addDivideUpstream); handleAdd = GsonUtils.getInstance().toJson(exist); } selectorDO.setHandle(handleAdd); selectorData.setHandle(handleAdd); // update db â€¦","date":1610928000,"description":"Soulç½‘å…³å­¦ä¹ (2-3)Httpå®¢æˆ·ç«¯æ¥å…¥æºç è§£æ","dir":"blog/soul_source_learning_02_http_client_register/","fuzzywordcount":2600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"2c483a5594990ffd04046345c06c86cb3f66c113","permalink":"/zh/blog/soul_source_learning_02_http_client_register/","publishdate":"2021-01-18T00:00:00Z","readingtime":6,"relpermalink":"/zh/blog/soul_source_learning_02_http_client_register/","summary":"HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ³¨å†Œé€»è¾‘åˆ†æ 1. æ³¨å†Œå…¥å£ HTTP ç”¨æˆ·æ¥å…¥ Soul ç½‘å…³æ—¶ï¼Œä¼šè°ƒç”¨ soul-admin ä¸€ä¸ªæ¥å£ï¼ŒæŠŠéœ€è¦ Soul ç½‘å…³ç®¡ç†çš„æ¥å£æ³¨å†Œï¼Œä»Šå¤©å°±å…·ä½“çœ‹çœ‹åˆ°åº•å¹²äº†ç‚¹å„¿å•¥ã€‚ å…ˆçœ‹ä¸‹","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ (2-3)Httpå®¢æˆ·ç«¯æ¥å…¥æºç è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_02_http_client_register/","wordcount":2520},{"author":"jipeng","categories":"Soul","content":" Divide æ’ä»¶å¦‚ä½•è½¬å‘httpè¯·æ±‚ å…ˆæ¥è®¾æƒ³ä¸€ä¸‹ï¼Œç½‘å…³å¦‚æœæ”¶åˆ°äº†ä¸€ä¸ªè¯·æ±‚http://xxx.com/openapi/appname/order/findById?id=3ï¼Œé‚£ä¹ˆæ€ä¹ˆå°†è¯·æ±‚è½¬å‘ç»™å¯¹åº”çš„ä¸šåŠ¡ï¼Ÿ\nå¯ä»¥æƒ³è±¡ä¸€ä¸‹å¤§æ¦‚æ˜¯è¿™å‡ ä¸ªæ­¥éª¤ï¼š\n 1.è§£æurl 2.æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œçœ‹è¿™ä¸ªurlæ˜¯å¯¹åº”äºå“ªä¸ªä¸šåŠ¡çº¿ 3.è¯»é…ç½®æ–‡ä»¶ï¼Œè·å–è¯¥ä¸šåŠ¡çº¿åœ¨ç½‘å…³æ³¨å†Œçš„æ‰€æœ‰apiåˆ—è¡¨ 4.åˆ¤æ–­è¯¥ç”¨æˆ·çš„è¿™ä¸ªapiè¯·æ±‚åœ¨ä¸åœ¨ä¸šåŠ¡çš„apiåˆ—è¡¨é‡Œé¢ 5.è¿›è¡Œç›¸å…³çš„é‰´æƒæ“ä½œï¼ˆç”¨æˆ·AK/SKé‰´æƒã€ç”¨æˆ·Quota/QPSæœ‰æ²¡æœ‰è¶…ï¼‰ 6.å¦‚æœç½‘å…³æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œé‚£ä¹ˆéœ€è¦è·å–ä¸šåŠ¡å…·ä½“ç»™APIé…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ 7.ç½‘å…³å‘å…·ä½“çš„ä¸šåŠ¡APIå‘èµ·è¯·æ±‚ 8.ç½‘å…³å°†æ”¶åˆ°çš„ä¸šåŠ¡APIçš„responseå‘é€ç»™ç”¨æˆ·  è¿™ç¯‡ç¬”è®°ä¸»è¦æ¥å­¦ä¹ ä¸€ä¸‹suolç½‘å…³æ˜¯æ€ä¹ˆè½¬å‘httpè¯·æ±‚çš„ã€‚\nå…ˆçœ‹ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£çš„ç›¸å…³ä»‹ç»httpç”¨æˆ·ã€Divideæ’ä»¶\nå®˜æ–¹æ–‡æ¡£é‡Œé¢ä»‹ç»åˆ°ï¼Œå¦‚æœç½‘å…³éœ€è¦æ”¯æŒhttpè½¬å‘ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç½‘å…³çš„pomé‡Œé¢æœ‰ä»¥ä¸‹ä¾èµ–ï¼š\n \u0026amp;lt;!--if you use http proxy start this--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-divide\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-httpclient\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!--if you use http proxy end this--\u0026amp;gt;  é‚£ä¹ˆå¯ä»¥çŸ¥é“httpè¯·æ±‚çš„ä»£ç†ä¸plugin-divide,plugin-httpclientè¿™ä¸¤ä¸ªæ’ä»¶æœ‰å…³ã€‚\næ’ä»¶é“¾ å®˜æ–¹æ–‡æ¡£ä¸­è¯´åˆ°divideè¿™ä¸ªæ’ä»¶æ˜¯å®ç°httpè¯·æ±‚ä»£ç†çš„æ ¸å¿ƒï¼Œä¸‹é¢çœ‹ä¸€ä¸‹soul-plugin/soul-plugin-divideè¿™ä¸ªæ¨¡å—çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªDividePluginç±»ï¼Œç»§æ‰¿è‡ªAbstractPluginï¼Œè€ŒAbstractPluginå®ç°äº†SoulPluginæ¥å£\nå¯ä»¥çœ‹åˆ°SoulPluginæ˜¯DividePluginçš„çˆ¶ç±»ï¼Œé‚£ä¹ˆçŒœæµ‹ä¸€ä¸‹SoulPluginæ˜¯æ‰€æœ‰æ’ä»¶çš„çˆ¶ç±»ã€‚å…¨å±€æœç´¢ä¸€ä¸‹SoulPluginæœç„¶å¦‚æ­¤ï¼Œå®ƒæ˜¯è¯¸å¤šæ’ä»¶çš„çˆ¶ç±»ã€‚\nåœ¨å…¨å±€æœç´¢SoulPluginçš„æ—¶å€™ï¼Œå‘ç°soul-web/src/main/java/org/dromara/soul/web/handleré‡Œæœ‰ä¸€ä¸ªç±»SoulWebHandleré‡Œé¢æœ‰ä¸€ä¸ªå±æ€§æ˜¯List\u0026amp;lt;SoulPlugin\u0026amp;gt;ï¼ŒçŒœæµ‹SoulWebHandlerå¯ä»¥æ“ä½œå¤šä¸ªæ’ä»¶ã€‚\nçœ‹ä¸€ä¸‹SoulWebHandlerçš„ç»§æ‰¿å…³ç³»å›¾ï¼Œå‘ç°å®ƒæ˜¯ç»§æ‰¿äº†WebHandlerï¼Œè€ŒWebHandleræ˜¯springæ¡†æ¶é‡Œé¢çš„ä¸€ä¸ªæ¥å£ã€‚\nç”±äºå¯¹WebFluxä¸äº†è§£ï¼Œä¸Šç½‘å¿«é€Ÿæœç´¢äº†ä¸€ä¸‹WebHandlerï¼Œå¾—çŸ¥è¿™æ˜¯WebFluxé‡Œé¢ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼Œå®ƒæä¾›äº†ä¸€å¥—é€šç”¨çš„httpè¯·æ±‚å¤„ç†æ–¹æ¡ˆã€‚\nè€Œsoulç½‘å…³çš„æºç é‡Œé¢ï¼Œè‡ªå·±å®ç°äº†ä¸€ä¸ªå®ç°äº†WebHandleræ¥å£çš„SoulWebHandlerç±»ï¼Œæ— ç–‘æ˜¯å¸Œæœ›æ¡†æ¶ä½¿ç”¨soulå®ç°çš„è¿™å¥—ä¸œè¥¿æ¥å¤„ç†è¯·æ±‚ã€‚\nåœ¨soul-web/src/main/java/org/dromara/soul/web/configurationé‡Œçš„SoulConfigurationç±»ï¼Œå®ƒåœ¨ç±»å¤´ä¸Šå£°æ˜äº†æ³¨è§£@Configurationï¼Œè¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªé…ç½®ã€‚SoulConfigurationç±»é‡Œé¢å‘springå®¹å™¨æ³¨å…¥äº†ä¸€ä¸ªåä¸ºwebHandlerçš„beanï¼Œè¯¥beanæ˜¯SoulWebHandlerç±»å‹çš„ã€‚Applicationä¼šåœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æè¢«@Configurationæ³¨è§£çš„ç±»ï¼Œæ‰€ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ï¼ŒSoulWebHandlerå°±è¢«æ³¨å…¥åˆ°springå®¹å™¨ä¸­å»äº†ã€‚\n @Bean(\u0026amp;quot;webHandler\u0026amp;quot;) public SoulWebHandler soulWebHandler(final ObjectProvider\u0026amp;lt;List\u0026amp;lt;SoulPlugin\u0026amp;gt;\u0026amp;gt; plugins) { List\u0026amp;lt;SoulPlugin\u0026amp;gt; pluginList = plugins.getIfAvailable(Collections::emptyList); final List\u0026amp;lt;SoulPlugin\u0026amp;gt; soulPlugins = pluginList.stream() .sorted(Comparator.comparingInt(SoulPlugin::getOrder)).collect(Collectors.toList()); soulPlugins.forEach(soulPlugin -\u0026amp;gt; log.info(\u0026amp;quot;load plugin:[{}] [{}]\u0026amp;quot;, soulPlugin.named(), soulPlugin.getClass().getName())); return new SoulWebHandler(soulPlugins); }  åˆå§‹åŒ–SoulWebHandlerçš„æ—¶å€™ï¼Œå°†æ’å¥½åºçš„æ’ä»¶ä¼ å…¥å…¶æ„é€ å‡½æ•°ä¸­ã€‚å„ä¸ªæ’ä»¶éƒ½æœ‰ä¸€ä¸ªorderå±æ€§ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå±æ€§æ¥å¯¹æ’ä»¶è¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚ä»¥DividePluginä¸ºä¾‹ï¼Œçœ‹ä¸‹å®ƒçš„orderå±æ€§æ˜¯ä»ä¸€ä¸ªæšä¸¾ç±»é‡Œé¢æ¥çš„ã€‚\n @Override public int getOrder() { return PluginEnum.DIVIDE.getCode(); }  è€Œå„ä¸ªæ’ä»¶çš„orderçš„å…·ä½“å€¼æ˜¯åœ¨soul-common/src/main/java/org/dromara/soul/common/enums/PluginEnumsè¿™ä¸ªæšä¸¾ç±»é‡Œé¢å®šä¹‰çš„ã€‚PluginEnumçš„codeå³ä¸ºå„ä¸ªæ’ä»¶çš„orderã€‚\næ’ä»¶çš„é¡ºåºä¸ºï¼šglobal -\u0026amp;gt; sign -\u0026amp;gt; waf -\u0026amp;gt; rate-limiter -\u0026amp;gt; hystrix -\u0026amp;gt; resilience4j -\u0026amp;gt; divide -\u0026amp;gt; webClient -\u0026amp;gt; â€¦â€¦â€¦â€¦\næ¯æ¬¡æœ‰ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼ŒWebHandlerå³SoulWebHandlerçš„handleæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•é‡Œé¢æœ€ä¸»è¦çš„å°±æ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ªæ’ä»¶é“¾DefaultSoulPluginChainï¼Œå¹¶æ‰§è¡Œè¯¥æ’ä»¶é“¾ã€‚\nçœ‹ä¸€ä¸‹DefaultSoulPluginChain â€¦","date":1610841600,"description":"How Does The Divide Plugin Forward HTTP Requests","dir":"blog/soul_source_larning_02_divide_plugin_source/","fuzzywordcount":3100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"87582eba66f445601b6bc4d76ad5b35970a253df","permalink":"/blog/soul_source_larning_02_divide_plugin_source/","publishdate":"2021-01-17T00:00:00Z","readingtime":7,"relpermalink":"/blog/soul_source_larning_02_divide_plugin_source/","summary":"Divide æ’ä»¶å¦‚ä½•è½¬å‘httpè¯·æ±‚ å…ˆæ¥è®¾æƒ³ä¸€ä¸‹ï¼Œç½‘å…³å¦‚æœæ”¶åˆ°äº†ä¸€ä¸ªè¯·æ±‚http://xxx.com/openapi/appname/order/fi","tags":["Soul"],"title":"Soul Learning(2) How Does The Divide Plugin Forward Http Requests","type":"blog","url":"/blog/soul_source_larning_02_divide_plugin_source/","wordcount":3042},{"author":"å­£é¹","categories":"Soul","content":" Divide æ’ä»¶å¦‚ä½•è½¬å‘httpè¯·æ±‚ å…ˆæ¥è®¾æƒ³ä¸€ä¸‹ï¼Œç½‘å…³å¦‚æœæ”¶åˆ°äº†ä¸€ä¸ªè¯·æ±‚http://xxx.com/openapi/appname/order/findById?id=3ï¼Œé‚£ä¹ˆæ€ä¹ˆå°†è¯·æ±‚è½¬å‘ç»™å¯¹åº”çš„ä¸šåŠ¡ï¼Ÿ\nå¯ä»¥æƒ³è±¡ä¸€ä¸‹å¤§æ¦‚æ˜¯è¿™å‡ ä¸ªæ­¥éª¤ï¼š\n 1.è§£æurl 2.æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œçœ‹è¿™ä¸ªurlæ˜¯å¯¹åº”äºå“ªä¸ªä¸šåŠ¡çº¿ 3.è¯»é…ç½®æ–‡ä»¶ï¼Œè·å–è¯¥ä¸šåŠ¡çº¿åœ¨ç½‘å…³æ³¨å†Œçš„æ‰€æœ‰apiåˆ—è¡¨ 4.åˆ¤æ–­è¯¥ç”¨æˆ·çš„è¿™ä¸ªapiè¯·æ±‚åœ¨ä¸åœ¨ä¸šåŠ¡çš„apiåˆ—è¡¨é‡Œé¢ 5.è¿›è¡Œç›¸å…³çš„é‰´æƒæ“ä½œï¼ˆç”¨æˆ·AK/SKé‰´æƒã€ç”¨æˆ·Quota/QPSæœ‰æ²¡æœ‰è¶…ï¼‰ 6.å¦‚æœç½‘å…³æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œé‚£ä¹ˆéœ€è¦è·å–ä¸šåŠ¡å…·ä½“ç»™APIé…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ 7.ç½‘å…³å‘å…·ä½“çš„ä¸šåŠ¡APIå‘èµ·è¯·æ±‚ 8.ç½‘å…³å°†æ”¶åˆ°çš„ä¸šåŠ¡APIçš„responseå‘é€ç»™ç”¨æˆ·  è¿™ç¯‡ç¬”è®°ä¸»è¦æ¥å­¦ä¹ ä¸€ä¸‹suolç½‘å…³æ˜¯æ€ä¹ˆè½¬å‘httpè¯·æ±‚çš„ã€‚\nå…ˆçœ‹ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£çš„ç›¸å…³ä»‹ç»httpç”¨æˆ·ã€Divideæ’ä»¶\nå®˜æ–¹æ–‡æ¡£é‡Œé¢ä»‹ç»åˆ°ï¼Œå¦‚æœç½‘å…³éœ€è¦æ”¯æŒhttpè½¬å‘ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç½‘å…³çš„pomé‡Œé¢æœ‰ä»¥ä¸‹ä¾èµ–ï¼š\n \u0026amp;lt;!--if you use http proxy start this--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-divide\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-httpclient\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${project.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!--if you use http proxy end this--\u0026amp;gt;  é‚£ä¹ˆå¯ä»¥çŸ¥é“httpè¯·æ±‚çš„ä»£ç†ä¸plugin-divide,plugin-httpclientè¿™ä¸¤ä¸ªæ’ä»¶æœ‰å…³ã€‚\næ’ä»¶é“¾ å®˜æ–¹æ–‡æ¡£ä¸­è¯´åˆ°divideè¿™ä¸ªæ’ä»¶æ˜¯å®ç°httpè¯·æ±‚ä»£ç†çš„æ ¸å¿ƒï¼Œä¸‹é¢çœ‹ä¸€ä¸‹soul-plugin/soul-plugin-divideè¿™ä¸ªæ¨¡å—çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªDividePluginç±»ï¼Œç»§æ‰¿è‡ªAbstractPluginï¼Œè€ŒAbstractPluginå®ç°äº†SoulPluginæ¥å£\nå¯ä»¥çœ‹åˆ°SoulPluginæ˜¯DividePluginçš„çˆ¶ç±»ï¼Œé‚£ä¹ˆçŒœæµ‹ä¸€ä¸‹SoulPluginæ˜¯æ‰€æœ‰æ’ä»¶çš„çˆ¶ç±»ã€‚å…¨å±€æœç´¢ä¸€ä¸‹SoulPluginæœç„¶å¦‚æ­¤ï¼Œå®ƒæ˜¯è¯¸å¤šæ’ä»¶çš„çˆ¶ç±»ã€‚\nåœ¨å…¨å±€æœç´¢SoulPluginçš„æ—¶å€™ï¼Œå‘ç°soul-web/src/main/java/org/dromara/soul/web/handleré‡Œæœ‰ä¸€ä¸ªç±»SoulWebHandleré‡Œé¢æœ‰ä¸€ä¸ªå±æ€§æ˜¯List\u0026amp;lt;SoulPlugin\u0026amp;gt;ï¼ŒçŒœæµ‹SoulWebHandlerå¯ä»¥æ“ä½œå¤šä¸ªæ’ä»¶ã€‚\nçœ‹ä¸€ä¸‹SoulWebHandlerçš„ç»§æ‰¿å…³ç³»å›¾ï¼Œå‘ç°å®ƒæ˜¯ç»§æ‰¿äº†WebHandlerï¼Œè€ŒWebHandleræ˜¯springæ¡†æ¶é‡Œé¢çš„ä¸€ä¸ªæ¥å£ã€‚\nç”±äºå¯¹WebFluxä¸äº†è§£ï¼Œä¸Šç½‘å¿«é€Ÿæœç´¢äº†ä¸€ä¸‹WebHandlerï¼Œå¾—çŸ¥è¿™æ˜¯WebFluxé‡Œé¢ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼Œå®ƒæä¾›äº†ä¸€å¥—é€šç”¨çš„httpè¯·æ±‚å¤„ç†æ–¹æ¡ˆã€‚\nè€Œsoulç½‘å…³çš„æºç é‡Œé¢ï¼Œè‡ªå·±å®ç°äº†ä¸€ä¸ªå®ç°äº†WebHandleræ¥å£çš„SoulWebHandlerç±»ï¼Œæ— ç–‘æ˜¯å¸Œæœ›æ¡†æ¶ä½¿ç”¨soulå®ç°çš„è¿™å¥—ä¸œè¥¿æ¥å¤„ç†è¯·æ±‚ã€‚\nåœ¨soul-web/src/main/java/org/dromara/soul/web/configurationé‡Œçš„SoulConfigurationç±»ï¼Œå®ƒåœ¨ç±»å¤´ä¸Šå£°æ˜äº†æ³¨è§£@Configurationï¼Œè¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªé…ç½®ã€‚SoulConfigurationç±»é‡Œé¢å‘springå®¹å™¨æ³¨å…¥äº†ä¸€ä¸ªåä¸ºwebHandlerçš„beanï¼Œè¯¥beanæ˜¯SoulWebHandlerç±»å‹çš„ã€‚Applicationä¼šåœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æè¢«@Configurationæ³¨è§£çš„ç±»ï¼Œæ‰€ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ï¼ŒSoulWebHandlerå°±è¢«æ³¨å…¥åˆ°springå®¹å™¨ä¸­å»äº†ã€‚\n @Bean(\u0026amp;quot;webHandler\u0026amp;quot;) public SoulWebHandler soulWebHandler(final ObjectProvider\u0026amp;lt;List\u0026amp;lt;SoulPlugin\u0026amp;gt;\u0026amp;gt; plugins) { List\u0026amp;lt;SoulPlugin\u0026amp;gt; pluginList = plugins.getIfAvailable(Collections::emptyList); final List\u0026amp;lt;SoulPlugin\u0026amp;gt; soulPlugins = pluginList.stream() .sorted(Comparator.comparingInt(SoulPlugin::getOrder)).collect(Collectors.toList()); soulPlugins.forEach(soulPlugin -\u0026amp;gt; log.info(\u0026amp;quot;load plugin:[{}] [{}]\u0026amp;quot;, soulPlugin.named(), soulPlugin.getClass().getName())); return new SoulWebHandler(soulPlugins); }  åˆå§‹åŒ–SoulWebHandlerçš„æ—¶å€™ï¼Œå°†æ’å¥½åºçš„æ’ä»¶ä¼ å…¥å…¶æ„é€ å‡½æ•°ä¸­ã€‚å„ä¸ªæ’ä»¶éƒ½æœ‰ä¸€ä¸ªorderå±æ€§ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå±æ€§æ¥å¯¹æ’ä»¶è¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚ä»¥DividePluginä¸ºä¾‹ï¼Œçœ‹ä¸‹å®ƒçš„orderå±æ€§æ˜¯ä»ä¸€ä¸ªæšä¸¾ç±»é‡Œé¢æ¥çš„ã€‚\n @Override public int getOrder() { return PluginEnum.DIVIDE.getCode(); }  è€Œå„ä¸ªæ’ä»¶çš„orderçš„å…·ä½“å€¼æ˜¯åœ¨soul-common/src/main/java/org/dromara/soul/common/enums/PluginEnumsè¿™ä¸ªæšä¸¾ç±»é‡Œé¢å®šä¹‰çš„ã€‚PluginEnumçš„codeå³ä¸ºå„ä¸ªæ’ä»¶çš„orderã€‚\næ’ä»¶çš„é¡ºåºä¸ºï¼šglobal -\u0026amp;gt; sign -\u0026amp;gt; waf -\u0026amp;gt; rate-limiter -\u0026amp;gt; hystrix -\u0026amp;gt; resilience4j -\u0026amp;gt; divide -\u0026amp;gt; webClient -\u0026amp;gt; â€¦â€¦â€¦â€¦\næ¯æ¬¡æœ‰ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼ŒWebHandlerå³SoulWebHandlerçš„handleæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•é‡Œé¢æœ€ä¸»è¦çš„å°±æ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ªæ’ä»¶é“¾DefaultSoulPluginChainï¼Œå¹¶æ‰§è¡Œè¯¥æ’ä»¶é“¾ã€‚\nçœ‹ä¸€ä¸‹DefaultSoulPluginChain â€¦","date":1610841600,"description":"Soulç½‘å…³å­¦ä¹ (2-2)divideæ’ä»¶æºç è§£æ","dir":"blog/soul_source_learning_02_divide_plugin_source/","fuzzywordcount":3100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"523ea346c1dea626e3fc7a9cc1f57d2d3a63d612","permalink":"/zh/blog/soul_source_learning_02_divide_plugin_source/","publishdate":"2021-01-17T00:00:00Z","readingtime":7,"relpermalink":"/zh/blog/soul_source_learning_02_divide_plugin_source/","summary":"Divide æ’ä»¶å¦‚ä½•è½¬å‘httpè¯·æ±‚ å…ˆæ¥è®¾æƒ³ä¸€ä¸‹ï¼Œç½‘å…³å¦‚æœæ”¶åˆ°äº†ä¸€ä¸ªè¯·æ±‚http://xxx.com/openapi/appname/order/fi","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ (2-2)Httpä»£ç†ä¹‹divideæ’ä»¶æºç è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_02_divide_plugin_source/","wordcount":3042},{"author":"yuanjie","categories":"Soul","content":" Divide æ’ä»¶ä½¿ç”¨ ä¸€ã€å¯åŠ¨é¡¹ç›® å…ˆå¯åŠ¨soul-bootstrapï¼ˆ9195ï¼‰ã€soul-adminï¼ˆ9095ï¼‰ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬é€šè¿‡bootstrapé…ç½®æ–‡ä»¶å¯ä»¥çœ‹åˆ°ï¼Œä¸¤è€…æ˜¯é€šè¿‡WebSocketåè®®è¿›è¡Œæ•°æ®åŒæ­¥ï¼š\né€šè¿‡bootstrapæ—¥å¿—ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼š\næ‰€è°“çš„æ•°æ®åŒæ­¥æ˜¯æŒ‡å°†soul-adminä¸­é…ç½®çš„æ•°æ®ï¼ŒåŒæ­¥åˆ°soulé›†ç¾¤ä¸­çš„JVMå†…å­˜é‡Œé¢ï¼Œæ˜¯ç½‘å…³é«˜æ€§èƒ½çš„å…³é”®ã€‚\næˆ‘ä»¬å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®ä¹‹åå°±å¯ä»¥é€šè¿‡åå°ç®¡ç†ç³»ç»Ÿæµ‹è¯•divideæ’ä»¶äº†ã€‚\näºŒã€divideæ’ä»¶ä»‹ç» divideæ’ä»¶æ˜¯ç½‘å…³å¤„ç†httpåè®®è¯·æ±‚çš„æ ¸å¿ƒå¤„ç†æ’ä»¶ï¼Œä¹Ÿæ˜¯soulå”¯ä¸€é»˜è®¤å¼€å¯çš„æ’ä»¶ï¼š\næˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ç½‘å…³åˆ°åº•æ˜¯åšä»€ä¹ˆçš„ï¼Œå»çŒœæµ‹ä¸€ä¸‹å¤„ç†httpè¯·æ±‚çš„divideæ’ä»¶å¯èƒ½å…·å¤‡å“ªäº›åŠŸèƒ½å‘¢ï¼Ÿ\né¦–å…ˆï¼Œä½œä¸ºå¾®æœåŠ¡ç½‘å…³ï¼Œå®ƒçš„èƒŒåä¸€å®šå­˜åœ¨å¤šæ¡ä¸šåŠ¡çº¿çš„åˆ†å¸ƒå¼å¾®æœåŠ¡é›†ç¾¤ï¼Œè€Œç½‘å…³ä½œä¸ºæ‰€æœ‰æœåŠ¡çš„ç»Ÿä¸€å…¥å£ï¼Œå¿…é¡»å…·å¤‡çš„èƒ½åŠ›å°±æ˜¯æµé‡åˆ†å‘/è·¯ç”±/è´Ÿè½½å‡è¡¡ç­‰ï¼Œè€Œdivideè¿™ä¸ªå•è¯é¡¾åæ€ä¹‰å°±æ˜¯åˆ†é…ã€åˆ†å‘çš„æ„æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŒœæµ‹divideæ’ä»¶å°±æ˜¯å¯¹httpè¯·æ±‚è¿›è¡Œå„ç§è§„åˆ™çš„è·¯ç”±è½¬å‘ï¼Œè¿™ä¹Ÿæ˜¯ç½‘å…³æœ€åŸºç¡€çš„èƒ½åŠ›ã€‚\næˆ‘ä»¬æ‰“å¼€ç®¡ç†ç•Œé¢ä¸Šçš„æ’ä»¶åˆ—è¡¨ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰æ’ä»¶éƒ½æ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé€‰æ‹©å™¨ï¼ˆselectorï¼‰å’Œé€‰æ‹©å™¨è§„åˆ™ã€‚\næ’ä»¶åŒ–è®¾è®¡æ€æƒ³æ˜¯soulç½‘å…³æœ€æ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œè€Œé€‰æ‹©å™¨å’Œè§„åˆ™è¿™ä¸¤ä¸ªæ¦‚å¿µä¹Ÿæ˜¯soulç½‘å…³çš„çµé­‚æ‰€åœ¨ï¼Œç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬æŒæ¡å¥½å®ƒï¼Œå°±èƒ½å¯¹ä»»ä½•æ¥å…¥ç½‘å…³çš„æµé‡è¿›è¡Œç®¡ç†ã€‚\nä¸€ä¸ªæ’ä»¶æœ‰å¤šä¸ªé€‰æ‹©å™¨ï¼Œä¸€ä¸ªé€‰æ‹©å™¨å¯¹åº”å¤šç§è§„åˆ™ã€‚é€‰æ‹©å™¨ç›¸å½“äºæ˜¯å¯¹æµé‡çš„ç¬¬ä¸€æ¬¡ç­›é€‰ï¼Œè§„åˆ™å°±æ˜¯æœ€ç»ˆçš„ç­›é€‰ã€‚\né€‰æ‹©å™¨  åç§°ï¼šä¸ºä½ çš„é€‰æ‹©å™¨èµ·ä¸€ä¸ªå®¹æ˜“åˆ†è¾¨çš„åå­— ç±»å‹ï¼šcustom flow æ˜¯è‡ªå®šä¹‰æµé‡ã€‚full flow æ˜¯å…¨æµé‡ã€‚è‡ªå®šä¹‰æµé‡å°±æ˜¯è¯·æ±‚ä¼šèµ°ä½ ä¸‹é¢çš„åŒ¹é…æ–¹å¼ä¸æ¡ä»¶ã€‚å…¨æµé‡åˆ™ä¸èµ°ã€‚ åŒ¹é…æ–¹å¼ï¼šand æˆ–è€…or æ˜¯æŒ‡ä¸‹é¢å¤šä¸ªæ¡ä»¶æ˜¯æŒ‰ç…§and è¿˜æ˜¯orçš„æ–¹å¼æ¥ç»„åˆã€‚ æ¡ä»¶ï¼š\n uriï¼šæ˜¯æŒ‡ä½ æ ¹æ®uriçš„æ–¹å¼æ¥ç­›é€‰æµé‡ï¼Œmatchçš„æ–¹å¼æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆ/**ï¼‰ headerï¼šæ˜¯æŒ‡æ ¹æ®è¯·æ±‚å¤´é‡Œé¢çš„å­—æ®µæ¥ç­›é€‰æµé‡ã€‚ queryï¼šæ˜¯æŒ‡æ ¹æ®uriçš„æŸ¥è¯¢æ¡ä»¶æ¥è¿›è¡Œç­›é€‰æµé‡ã€‚ ipï¼šæ˜¯æŒ‡æ ¹æ®ä½ è¯·æ±‚çš„çœŸå®ipï¼Œæ¥ç­›é€‰æµé‡ã€‚ hostï¼šæ˜¯æŒ‡æ ¹æ®ä½ è¯·æ±‚çš„çœŸå®hostï¼Œæ¥ç­›é€‰æµé‡ã€‚ postï¼šå»ºè®®ä¸è¦ä½¿ç”¨ã€‚ æ¡ä»¶åŒ¹é…ï¼š  match : æ¨¡ç³ŠåŒ¹é…ï¼Œå»ºè®®å’Œuriæ¡ä»¶æ­é…ï¼Œæ”¯æŒ restfulé£æ ¼çš„åŒ¹é…ã€‚ï¼ˆ/test/**ï¼‰ = : å‰åå€¼ç›¸ç­‰ï¼Œæ‰èƒ½åŒ¹é…ã€‚ regEx : æ­£åˆ™åŒ¹é…ï¼Œè¡¨ç¤ºå‰é¢ä¸€ä¸ªå€¼å»åŒ¹é…åé¢çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ like ï¼šå­—ç¬¦ä¸²æ¨¡ç³ŠåŒ¹é…ã€‚  æ˜¯å¦å¼€å¯ï¼šæ‰“å¼€æ‰ä¼šç”Ÿæ•ˆ æ‰“å°æ—¥å¿—ï¼šæ‰“å¼€çš„æ—¶å€™ï¼Œå½“åŒ¹é…ä¸Šçš„æ—¶å€™ï¼Œä¼šæ‰“å°åŒ¹é…æ—¥å¿—ã€‚ æ‰§è¡Œé¡ºåºï¼šå½“å¤šä¸ªé€‰æ‹©å™¨çš„æ—¶å€™ï¼Œæ‰§è¡Œé¡ºåºå°çš„ä¼˜å…ˆæ‰§è¡Œã€‚\né€‰æ‹©å™¨è§„åˆ™   å¯ä»¥çœ‹åˆ°ï¼Œè§„åˆ™çš„é…ç½®å’Œé€‰æ‹©å™¨ç±»ä¼¼ï¼Œå¯ä»¥ç†è§£ä¸ºæ›´ç»†ç²’åº¦çš„è‡ªå®šä¹‰é…ç½®ã€‚\nä¸‰ã€divideæ’ä»¶ä½¿ç”¨ åºŸè¯å°‘è¯´ï¼Œæˆ‘ä»¬ç›´æ¥è¿è¡Œsoulæä¾›çš„examplesæ¨¡å—æ¥æ¼”ç¤ºdivideæ’ä»¶ã€‚\næ³¨æ„ï¼Œæˆ‘ä»¬æœ€ç»ˆè¿è¡Œçš„æ˜¯soul-examples-httpæ¨¡å—ã€‚é…ç½®æ–‡ä»¶å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰contextPathå’ŒappNameï¼Œå¦‚ä¸Šå›¾ã€‚\næˆ‘ä»¬éœ€è¦æ³¨æ„ï¼ŒcontextPathè¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œç›¸å½“äºæ˜¯æˆ‘ä»¬æ‰€æœ‰httpè¯·æ±‚çš„namespaceï¼Œå’Œé€‰æ‹©å™¨ä¸€ä¸€å¯¹é½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªä¸šåŠ¡å¯¹åº”ä¸€ä¸ªcontextPathï¼Œä¸€ä¸ªä¸šåŠ¡ä¸‹é¢é…ç½®ç›¸åŒcontextPathçš„å¤šä¸ªæœåŠ¡å®ä¾‹ä¼šè‡ªåŠ¨æ˜ å°„åˆ°åŒä¸€ä¸ªé€‰æ‹©å™¨è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚\næˆ‘ä»¬å¯åŠ¨ç«¯å£ä¸º8188çš„è¿™ä¸ªè¿›ç¨‹åï¼Œå¯ä»¥å‘ç°ç®¡ç†æ§åˆ¶å°divideæ’ä»¶åˆ—è¡¨ä¸­è‡ªåŠ¨é…ç½®äº†è¿™ä¸ªå®ä¾‹å¯¹åº”çš„é€‰æ‹©å™¨ã€è§„åˆ™ï¼š\nå¯ä»¥çœ‹åˆ°æˆ‘å¯åŠ¨çš„è¿™ä¸ª8188é¡¹ç›®åœ°å€è‡ªåŠ¨æ³¨å†Œä¸Šå»äº†ï¼š\næµ‹è¯•ç½‘å…³è·¯ç”± é€šè¿‡postmanå…ˆæµ‹è¯•ä¸ç»è¿‡ç½‘å…³è½¬å‘ï¼š\nhttp://localhost:8188/order/findById?id=1  ç„¶åå†æµ‹è¯•é€šè¿‡ç½‘å…³è½¬å‘åˆ°è¿™ä¸ªæ¥å£ï¼š\nhttp://localhost:9195/my-http/order/findById?id=1  çœ‹æ—¥å¿—å‘ç°ç¡®å®ç»è¿‡äº†ç½‘å…³è½¬å‘åˆ°äº†8188æ¥å£åœ°å€ï¼š\næµ‹è¯•è´Ÿè½½å‡è¡¡ æˆ‘ä»¬ä¿®æ”¹ç«¯å£ä¸º8189ï¼Œå¯åŠ¨ç¬¬äºŒä¸ªè¿›ç¨‹ã€‚\næ³¨æ„IDEAéœ€è¦å–æ¶ˆ Single instance only çš„é™åˆ¶ï¼š\næˆ‘ä»¬å†è¿›å…¥ç®¡ç†æ§åˆ¶å°ï¼Œå‘ç°my-httpé€‰æ‹©å™¨ä¸‹å‡ºç°ä¸¤ä¸ªé…ç½®åœ°å€ï¼š\næ­¤æ—¶æˆ‘ä»¬ç»§ç»­æµ‹è¯•ï¼Œå‘ç°è´Ÿè½½å‡è¡¡ç­–ç•¥ç¡®å®ç”Ÿæ•ˆäº†ï¼š\nä»Šå¤©åªæ˜¯æ¼”ç¤ºäº†divideæ’ä»¶æœ€åŸºç¡€çš„é…ç½®ï¼Œè¿˜æœ‰å…¶ä»–å„ç§è§„åˆ™é…ç½®åé¢éƒ½å¯ä»¥è¯•ä¸€è¯•~\n","date":1610755200,"description":"Soul Learning(2) Use Divide Plugin","dir":"blog/soul_source_learning_02_divide_plugin/","fuzzywordcount":1700,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"6140e42808a6873cd47e1b7d8c5a120eabe87b7c","permalink":"/blog/soul_source_learning_02_divide_plugin/","publishdate":"2021-01-16T00:00:00Z","readingtime":4,"relpermalink":"/blog/soul_source_learning_02_divide_plugin/","summary":"Divide æ’ä»¶ä½¿ç”¨ ä¸€ã€å¯åŠ¨é¡¹ç›® å…ˆå¯åŠ¨soul-bootstrapï¼ˆ9195ï¼‰ã€soul-adminï¼ˆ9095ï¼‰ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬é€šè¿‡bootstrapé…","tags":["Soul"],"title":"Soul Learning(2) Use Divide Plugin","type":"blog","url":"/blog/soul_source_learning_02_divide_plugin/","wordcount":1671},{"author":"è¢æ°","categories":"Soul","content":" Divide æ’ä»¶ä½¿ç”¨ ä¸€ã€å¯åŠ¨é¡¹ç›® å…ˆå¯åŠ¨soul-bootstrapï¼ˆ9195ï¼‰ã€soul-adminï¼ˆ9095ï¼‰ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬é€šè¿‡bootstrapé…ç½®æ–‡ä»¶å¯ä»¥çœ‹åˆ°ï¼Œä¸¤è€…æ˜¯é€šè¿‡WebSocketåè®®è¿›è¡Œæ•°æ®åŒæ­¥ï¼š\né€šè¿‡bootstrapæ—¥å¿—ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼š\næ‰€è°“çš„æ•°æ®åŒæ­¥æ˜¯æŒ‡å°†soul-adminä¸­é…ç½®çš„æ•°æ®ï¼ŒåŒæ­¥åˆ°soulé›†ç¾¤ä¸­çš„JVMå†…å­˜é‡Œé¢ï¼Œæ˜¯ç½‘å…³é«˜æ€§èƒ½çš„å…³é”®ã€‚\næˆ‘ä»¬å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®ä¹‹åå°±å¯ä»¥é€šè¿‡åå°ç®¡ç†ç³»ç»Ÿæµ‹è¯•divideæ’ä»¶äº†ã€‚\näºŒã€divideæ’ä»¶ä»‹ç» divideæ’ä»¶æ˜¯ç½‘å…³å¤„ç†httpåè®®è¯·æ±‚çš„æ ¸å¿ƒå¤„ç†æ’ä»¶ï¼Œä¹Ÿæ˜¯soulå”¯ä¸€é»˜è®¤å¼€å¯çš„æ’ä»¶ï¼š\næˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ç½‘å…³åˆ°åº•æ˜¯åšä»€ä¹ˆçš„ï¼Œå»çŒœæµ‹ä¸€ä¸‹å¤„ç†httpè¯·æ±‚çš„divideæ’ä»¶å¯èƒ½å…·å¤‡å“ªäº›åŠŸèƒ½å‘¢ï¼Ÿ\né¦–å…ˆï¼Œä½œä¸ºå¾®æœåŠ¡ç½‘å…³ï¼Œå®ƒçš„èƒŒåä¸€å®šå­˜åœ¨å¤šæ¡ä¸šåŠ¡çº¿çš„åˆ†å¸ƒå¼å¾®æœåŠ¡é›†ç¾¤ï¼Œè€Œç½‘å…³ä½œä¸ºæ‰€æœ‰æœåŠ¡çš„ç»Ÿä¸€å…¥å£ï¼Œå¿…é¡»å…·å¤‡çš„èƒ½åŠ›å°±æ˜¯æµé‡åˆ†å‘/è·¯ç”±/è´Ÿè½½å‡è¡¡ç­‰ï¼Œè€Œdivideè¿™ä¸ªå•è¯é¡¾åæ€ä¹‰å°±æ˜¯åˆ†é…ã€åˆ†å‘çš„æ„æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŒœæµ‹divideæ’ä»¶å°±æ˜¯å¯¹httpè¯·æ±‚è¿›è¡Œå„ç§è§„åˆ™çš„è·¯ç”±è½¬å‘ï¼Œè¿™ä¹Ÿæ˜¯ç½‘å…³æœ€åŸºç¡€çš„èƒ½åŠ›ã€‚\næˆ‘ä»¬æ‰“å¼€ç®¡ç†ç•Œé¢ä¸Šçš„æ’ä»¶åˆ—è¡¨ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰æ’ä»¶éƒ½æ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé€‰æ‹©å™¨ï¼ˆselectorï¼‰å’Œé€‰æ‹©å™¨è§„åˆ™ã€‚\næ’ä»¶åŒ–è®¾è®¡æ€æƒ³æ˜¯soulç½‘å…³æœ€æ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œè€Œé€‰æ‹©å™¨å’Œè§„åˆ™è¿™ä¸¤ä¸ªæ¦‚å¿µä¹Ÿæ˜¯soulç½‘å…³çš„çµé­‚æ‰€åœ¨ï¼Œç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬æŒæ¡å¥½å®ƒï¼Œå°±èƒ½å¯¹ä»»ä½•æ¥å…¥ç½‘å…³çš„æµé‡è¿›è¡Œç®¡ç†ã€‚\nä¸€ä¸ªæ’ä»¶æœ‰å¤šä¸ªé€‰æ‹©å™¨ï¼Œä¸€ä¸ªé€‰æ‹©å™¨å¯¹åº”å¤šç§è§„åˆ™ã€‚é€‰æ‹©å™¨ç›¸å½“äºæ˜¯å¯¹æµé‡çš„ç¬¬ä¸€æ¬¡ç­›é€‰ï¼Œè§„åˆ™å°±æ˜¯æœ€ç»ˆçš„ç­›é€‰ã€‚\né€‰æ‹©å™¨ * **åç§°**ï¼šä¸ºä½ çš„é€‰æ‹©å™¨èµ·ä¸€ä¸ªå®¹æ˜“åˆ†è¾¨çš„åå­— * **ç±»å‹**ï¼šcustom flow æ˜¯è‡ªå®šä¹‰æµé‡ã€‚full flow æ˜¯å…¨æµé‡ã€‚è‡ªå®šä¹‰æµé‡å°±æ˜¯è¯·æ±‚ä¼šèµ°ä½ ä¸‹é¢çš„åŒ¹é…æ–¹å¼ä¸æ¡ä»¶ã€‚å…¨æµé‡åˆ™ä¸èµ°ã€‚ * **åŒ¹é…æ–¹å¼**ï¼šand æˆ–è€…or æ˜¯æŒ‡ä¸‹é¢å¤šä¸ªæ¡ä»¶æ˜¯æŒ‰ç…§and è¿˜æ˜¯orçš„æ–¹å¼æ¥ç»„åˆã€‚ * **æ¡ä»¶**ï¼š * uriï¼šæ˜¯æŒ‡ä½ æ ¹æ®uriçš„æ–¹å¼æ¥ç­›é€‰æµé‡ï¼Œmatchçš„æ–¹å¼æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆ/**ï¼‰ * headerï¼šæ˜¯æŒ‡æ ¹æ®è¯·æ±‚å¤´é‡Œé¢çš„å­—æ®µæ¥ç­›é€‰æµé‡ã€‚ * queryï¼šæ˜¯æŒ‡æ ¹æ®uriçš„æŸ¥è¯¢æ¡ä»¶æ¥è¿›è¡Œç­›é€‰æµé‡ã€‚ * ipï¼šæ˜¯æŒ‡æ ¹æ®ä½ è¯·æ±‚çš„çœŸå®ipï¼Œæ¥ç­›é€‰æµé‡ã€‚ * hostï¼šæ˜¯æŒ‡æ ¹æ®ä½ è¯·æ±‚çš„çœŸå®hostï¼Œæ¥ç­›é€‰æµé‡ã€‚ * postï¼šå»ºè®®ä¸è¦ä½¿ç”¨ã€‚ * æ¡ä»¶åŒ¹é…ï¼š * match : æ¨¡ç³ŠåŒ¹é…ï¼Œå»ºè®®å’Œuriæ¡ä»¶æ­é…ï¼Œæ”¯æŒ restfulé£æ ¼çš„åŒ¹é…ã€‚ï¼ˆ/test/**ï¼‰ * = : å‰åå€¼ç›¸ç­‰ï¼Œæ‰èƒ½åŒ¹é…ã€‚ * regEx : æ­£åˆ™åŒ¹é…ï¼Œè¡¨ç¤ºå‰é¢ä¸€ä¸ªå€¼å»åŒ¹é…åé¢çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ * like ï¼šå­—ç¬¦ä¸²æ¨¡ç³ŠåŒ¹é…ã€‚ * **æ˜¯å¦å¼€å¯**ï¼šæ‰“å¼€æ‰ä¼šç”Ÿæ•ˆ * **æ‰“å°æ—¥å¿—**ï¼šæ‰“å¼€çš„æ—¶å€™ï¼Œå½“åŒ¹é…ä¸Šçš„æ—¶å€™ï¼Œä¼šæ‰“å°åŒ¹é…æ—¥å¿—ã€‚ * **æ‰§è¡Œé¡ºåº**ï¼šå½“å¤šä¸ªé€‰æ‹©å™¨çš„æ—¶å€™ï¼Œæ‰§è¡Œé¡ºåºå°çš„ä¼˜å…ˆæ‰§è¡Œã€‚  é€‰æ‹©å™¨è§„åˆ™ å¯ä»¥çœ‹åˆ°ï¼Œè§„åˆ™çš„é…ç½®å’Œé€‰æ‹©å™¨ç±»ä¼¼ï¼Œå¯ä»¥ç†è§£ä¸ºæ›´ç»†ç²’åº¦çš„è‡ªå®šä¹‰é…ç½®ã€‚\nä¸‰ã€divideæ’ä»¶ä½¿ç”¨ åºŸè¯å°‘è¯´ï¼Œæˆ‘ä»¬ç›´æ¥è¿è¡Œsoulæä¾›çš„examplesæ¨¡å—æ¥æ¼”ç¤ºdivideæ’ä»¶ã€‚\næ³¨æ„ï¼Œæˆ‘ä»¬æœ€ç»ˆè¿è¡Œçš„æ˜¯soul-examples-httpæ¨¡å—ã€‚é…ç½®æ–‡ä»¶å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰contextPathå’ŒappNameï¼Œå¦‚ä¸Šå›¾ã€‚\næˆ‘ä»¬éœ€è¦æ³¨æ„ï¼ŒcontextPathè¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œç›¸å½“äºæ˜¯æˆ‘ä»¬æ‰€æœ‰httpè¯·æ±‚çš„namespaceï¼Œå’Œé€‰æ‹©å™¨ä¸€ä¸€å¯¹é½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªä¸šåŠ¡å¯¹åº”ä¸€ä¸ªcontextPathï¼Œä¸€ä¸ªä¸šåŠ¡ä¸‹é¢é…ç½®ç›¸åŒcontextPathçš„å¤šä¸ªæœåŠ¡å®ä¾‹ä¼šè‡ªåŠ¨æ˜ å°„åˆ°åŒä¸€ä¸ªé€‰æ‹©å™¨è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚\næˆ‘ä»¬å¯åŠ¨ç«¯å£ä¸º8188çš„è¿™ä¸ªè¿›ç¨‹åï¼Œå¯ä»¥å‘ç°ç®¡ç†æ§åˆ¶å°divideæ’ä»¶åˆ—è¡¨ä¸­è‡ªåŠ¨é…ç½®äº†è¿™ä¸ªå®ä¾‹å¯¹åº”çš„é€‰æ‹©å™¨ã€è§„åˆ™ï¼š\nå¯ä»¥çœ‹åˆ°æˆ‘å¯åŠ¨çš„è¿™ä¸ª8188é¡¹ç›®åœ°å€è‡ªåŠ¨æ³¨å†Œä¸Šå»äº†ï¼š\næµ‹è¯•ç½‘å…³è·¯ç”± é€šè¿‡postmanå…ˆæµ‹è¯•ä¸ç»è¿‡ç½‘å…³è½¬å‘ï¼š\nhttp://localhost:8188/order/findById?id=1  ç„¶åå†æµ‹è¯•é€šè¿‡ç½‘å…³è½¬å‘åˆ°è¿™ä¸ªæ¥å£ï¼š\nhttp://localhost:9195/my-http/order/findById?id=1  çœ‹æ—¥å¿—å‘ç°ç¡®å®ç»è¿‡äº†ç½‘å…³è½¬å‘åˆ°äº†8188æ¥å£åœ°å€ï¼š\næµ‹è¯•è´Ÿè½½å‡è¡¡ æˆ‘ä»¬ä¿®æ”¹ç«¯å£ä¸º8189ï¼Œå¯åŠ¨ç¬¬äºŒä¸ªè¿›ç¨‹ã€‚\næ³¨æ„IDEAéœ€è¦å–æ¶ˆ Single instance only çš„é™åˆ¶ï¼š\næˆ‘ä»¬å†è¿›å…¥ç®¡ç†æ§åˆ¶å°ï¼Œå‘ç°my-httpé€‰æ‹©å™¨ä¸‹å‡ºç°ä¸¤ä¸ªé…ç½®åœ°å€ï¼š\næ­¤æ—¶æˆ‘ä»¬ç»§ç»­æµ‹è¯•ï¼Œå‘ç°è´Ÿè½½å‡è¡¡ç­–ç•¥ç¡®å®ç”Ÿæ•ˆäº†ï¼š\nä»Šå¤©åªæ˜¯æ¼”ç¤ºäº†divideæ’ä»¶æœ€åŸºç¡€çš„é…ç½®ï¼Œè¿˜æœ‰å…¶ä»–å„ç§è§„åˆ™é…ç½®åé¢éƒ½å¯ä»¥è¯•ä¸€è¯•~\n","date":1610755200,"description":"Soulç½‘å…³å­¦ä¹ (2-1)divideæ’ä»¶ä½¿ç”¨","dir":"blog/soul_source_learning_02_divide_plugin/","fuzzywordcount":1800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"08e6332a7fda52e8db34c6dc66ff7a3534020ef7","permalink":"/zh/blog/soul_source_learning_02_divide_plugin/","publishdate":"2021-01-16T00:00:00Z","readingtime":4,"relpermalink":"/zh/blog/soul_source_learning_02_divide_plugin/","summary":"Divide æ’ä»¶ä½¿ç”¨ ä¸€ã€å¯åŠ¨é¡¹ç›® å…ˆå¯åŠ¨soul-bootstrapï¼ˆ9195ï¼‰ã€soul-adminï¼ˆ9095ï¼‰ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬é€šè¿‡bootstrapé…","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ (2-1)Httpä»£ç†ä¹‹divideæ’ä»¶ä½¿ç”¨","type":"blog","url":"/zh/blog/soul_source_learning_02_divide_plugin/","wordcount":1717},{"author":"zhuming","categories":"Soul","content":" æ’ä»¶é“¾æ€»ç»“ ä»ä¸€ä¸ªç±»å…³ç³»å›¾è¯´èµ·:\nå…¶ä¸­ä¸¤ä¸ªæœ€åŸºæœ¬çš„æ’ä»¶ç±»:\n SoulPlugin: å®šä¹‰æ’ä»¶èŒè´£çš„æ¥å£, é‡ç‚¹æ–¹æ³•execute() è¢«ä¸Šå±‚è°ƒç”¨, skip() æ–¹æ³•å¯ä»¥ä½¿æŸäº›æ’ä»¶åœ¨æŸäº›è¯·æ±‚ä¸­è¢«è·³è¿‡.\n AbstractPlugin: æŠ½è±¡ç±», å®ç°æ¥å£çš„ execute(), å®šä¹‰ä¸€å¥—é€šç”¨çš„æ‰§è¡Œæµç¨‹, å¹¶ä½¿ç”¨æ¨¡æ¿æ–¹æ³•çš„è®¾è®¡æ¨¡å¼, æä¾›doExecute()æŠ½è±¡æ–¹æ³•ä¾›å®ç°ç±»å†™è‡ªå·±çš„é€»è¾‘.\n  AbstractSoulPlugin å…·ä½“åˆ†æä¸‹ AbstractSoulPlugin ç±»çš„ execute():\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange, final SoulPluginChain chain) { String pluginName = named(); final PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName); // å¦‚æœ pluginData.getEnabled() ä¸º false, ä¼šç›´æ¥è·³åˆ°ä¸‹ä¸ªæ’ä»¶, ä»…æœ‰ä¸ºæ•°ä¸å¤šçš„æ’ä»¶ä¼šè¿›å…¥è¿™ä¸ªæ¡ä»¶åˆ¤æ–­ (DividePluginã€AlibabaDubboPluginç­‰) if (pluginData != null \u0026amp;amp;\u0026amp;amp; pluginData.getEnabled()) { // è·å¾—æ’ä»¶ä¸Šçš„æ‰€æœ‰é€‰æ‹©å™¨ final Collection\u0026amp;lt;SelectorData\u0026amp;gt; selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName); if (CollectionUtils.isEmpty(selectors)) { return CheckUtils.checkSelector(pluginName, exchange, chain); } // æ£€æŸ¥ä¸Šä¸‹æ–‡ä¸­çš„è¯·æ±‚è·¯å¾„, æ˜¯å¦ä¸é€‰æ‹©å™¨åŒ¹é…, å¹¶å¾—åˆ°å”¯ä¸€ä¸€ä¸ªåŒ¹é…çš„é€‰æ‹©å™¨æ•°æ® final SelectorData selectorData = matchSelector(exchange, selectors); if (Objects.isNull(selectorData)) { if (PluginEnum.WAF.getName().equals(pluginName)) { return doExecute(exchange, chain, null, null); } return CheckUtils.checkSelector(pluginName, exchange, chain); } if (selectorData.getLoged()) { log.info(\u0026amp;quot;{} selector success match , selector name :{}\u0026amp;quot;, pluginName, selectorData.getName()); } // è·å¾—é€‰æ‹©å™¨ä¸­çš„å„ä¸ªèµ„æºè§„åˆ™ final List\u0026amp;lt;RuleData\u0026amp;gt; rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId()); if (CollectionUtils.isEmpty(rules)) { if (PluginEnum.WAF.getName().equals(pluginName)) { return doExecute(exchange, chain, null, null); } return CheckUtils.checkRule(pluginName, exchange, chain); } RuleData rule; if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) { rule = rules.get(rules.size() - 1); } else { // åŒ¹é…è·¯å¾„, è·å¾—å”¯ä¸€ä¸€ä¸ªè§„åˆ™ rule = matchRule(exchange, rules); } if (Objects.isNull(rule)) { return CheckUtils.checkRule(pluginName, exchange, chain); } if (rule.getLoged()) { log.info(\u0026amp;quot;{} rule success match ,rule name :{}\u0026amp;quot;, pluginName, rule.getName()); } // æ‰§è¡Œå­ç±»çš„æ–¹æ³• return doExecute(exchange, chain, selectorData, rule); } // æ‰§è¡Œæ’ä»¶é“¾ä¸Šçš„ä¸‹ä¸ªæ’ä»¶ return chain.execute(exchange); }  é€šè¿‡ä»£ç åˆ†æ, å¯ä»¥å¾—åˆ°ä¸€äº›ç»“è®º:\n execute() æœ‰ä¸¤ä¸ªé€»è¾‘: ä¸€æ˜¯è¯·æ±‚è·¯å¾„ä¸é€‰æ‹©å™¨å’Œè§„åˆ™çš„åŒ¹é…, æœ€ç»ˆç¡®è®¤ä¸€ä¸ªå”¯ä¸€è§„åˆ™, å¹¶è°ƒç”¨å­ç±» doExecute(); äºŒæ˜¯æ‰§è¡Œæ’ä»¶é“¾ä¸Šçš„ä¸‹ä¸ªæ’ä»¶. execute() å®é™…æŠ½è±¡äº†ä¸€å¥—è§„åˆ™åŒ¹é…é€»è¾‘, ä¾›æ‰€æœ‰\u0026amp;rdquo;è½¬å‘ç±»å‹\u0026amp;rdquo;çš„æ’ä»¶ä½¿ç”¨çš„, è½¬å‘ç±»å‹çš„æ’ä»¶ç›®å‰æˆ‘äº†è§£çš„æœ‰ DividePlugin (httpè¯·æ±‚) å’Œ AlibabaDubboPlugin (dubboè¯·æ±‚), å…¶ä»–ç±»å‹çš„æ’ä»¶å¦‚æœä¸é‡å†™ execute() çš„æ–¹æ³•, ä¼šç›´æ¥èµ°å…¥ä¸‹ä¸ªæ’ä»¶.  SoulPluginChain è¿™é‡Œè¿˜æœ‰ä¸ªç‚¹, å°±æ˜¯æ’ä»¶é“¾çš„å½¢æˆä¸é“¾å¼è°ƒç”¨, æˆ‘ä»¬æ¥åˆ†æä¸‹ SoulPluginChain è¿™å—:\nSoulPluginChain æ¥å£åŒæ ·å®šä¹‰äº† execute() æ–¹æ³•ä¾›è°ƒç”¨è€…ä½¿ç”¨, å®ƒçš„å”¯ä¸€å­ç±» DefaultSoulPluginChain å®ç°äº†é“¾å¼è°ƒç”¨:\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange) { return Mono.defer(() -\u0026amp;gt; { // plugins ä¸­åŒ…å«æ‰€æœ‰ç½‘å…³åŠ è½½çš„æ’ä»¶ if (this.index \u0026amp;lt; plugins.size()) { // æ¯æ¬¡è°ƒç”¨execute()æ–¹æ³•, indexç´¢å¼•è‡ªå¢, ä¼šè°ƒç”¨åˆ°ä¸‹ä¸€ä¸ªæ’ä»¶ SoulPlugin plugin = plugins.get(this.index++); // ç»“åˆä¸Šä¸‹æ–‡åˆ¤æ–­å½“å‰æ’ä»¶æ˜¯å¦éœ€è¦è·³è¿‡ Boolean skip = plugin.skip(exchange); if (skip) { return this.execute(exchange); } else { return plugin.execute(exchange, this); } } else { return Mono.empty(); } }); } â€¦","date":1610668800,"description":"Soul Gateway learning plugin chain and load balancing analysis","dir":"blog/soul_source_learning_05_plugin/","fuzzywordcount":3600,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"6a9a3a7e8b883a4038e351e7f4d883834cf4ca7f","permalink":"/blog/soul_source_learning_05_plugin/","publishdate":"2021-01-15T00:00:00Z","readingtime":8,"relpermalink":"/blog/soul_source_learning_05_plugin/","summary":"æ’ä»¶é“¾æ€»ç»“ ä»ä¸€ä¸ªç±»å…³ç³»å›¾è¯´èµ·: å…¶ä¸­ä¸¤ä¸ªæœ€åŸºæœ¬çš„æ’ä»¶ç±»: SoulPlugin: å®šä¹‰æ’ä»¶èŒè´£çš„æ¥å£, é‡ç‚¹æ–¹æ³•execute() è¢«ä¸Šå±‚è°ƒç”¨, skip() æ–¹æ³•å¯ä»¥ä½¿æŸäº›æ’ä»¶åœ¨æŸäº›","tags":["Soul"],"title":"Soul Gateway learning plugin chain and load balancing analysis","type":"blog","url":"/blog/soul_source_learning_05_plugin/","wordcount":3567},{"author":"chenxi","categories":"Soul","content":" Analysis of soul (1) Set up soul environment  soul is a High-Performance Java API Gateway\nGitHubï¼šhttps://github.com/dromara/soul\ndocumentï¼šhttps://dromara.org/zh-cn/docs/soul/soul.html\n 1. Prepare source code 1.1. Fork dromara/soul repository to my github cchenxi/soul 1.2. Clone the repository git clone https://github.com/cchenxi/soul.git  1.3.Open the source code with idea 1.4. Compile the soul source code You can compile the project as follows.\nmvn clean package install -Dmaven.test.skip=true -Dmaven.javadoc.skip=true -Drat.skip=true -Dcheckstyle.skip=true  2. Startup soul 2.1. Startup soul-admin module  soul-admin is the management system for soul.\n Choose to use MySQL to storage gateway data and modify the datasource config.\nRun org.dromara.soul.admin.SoulAdminBootstrap.\nWhen success, please visit the website http://localhost:9095/, then jump to the login page, and input the corresponding user name and password to log in.\nThe user name is admin and the password is 123456.\n2.2. Startup soul-bootstrap module  soul-bootstrap is the core of soul.\n Check the configuration of soul-bootstrap.\nPlease make sure the ip and the port has been configured for soul-admin.\nIf the console output as follows, it means the startup is successful.\n2021-01-14 15:01:15.832 INFO 17943 --- [ main] b.s.s.d.w.WebsocketSyncDataConfiguration : you use websocket sync soul data....... 2021-01-14 15:01:15.924 INFO 17943 --- [ main] o.d.s.p.s.d.w.WebsocketSyncDataService : websocket connection is successful..... 2021-01-14 15:01:16.113 INFO 17943 --- [ main] o.s.b.a.e.web.EndpointLinksResolver : Exposing 2 endpoint(s) beneath base path \u0026#39;/actuator\u0026#39; log4j:WARN No appenders could be found for logger (com.alibaba.dubbo.common.logger.LoggerFactory). log4j:WARN Please initialize the log4j system properly. log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 2021-01-14 15:01:17.150 INFO 17943 --- [ main] o.s.b.web.embedded.netty.NettyWebServer : Netty started on port(s): 9195 2021-01-14 15:01:17.154 INFO 17943 --- [ main] o.d.s.b.SoulBootstrapApplication : Started SoulBootstrapApplication in 5.508 seconds (JVM running for 6.762)  3. Test  Add the soul-examples module to soul\u0026amp;rsquo;s pom.xml for test.\n 3.1. Startup an HTTP backend service Startup soul-examples-http\nYou can see the dependency in soul-examples-http\u0026amp;rsquo;s pom.xml.\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-client-springmvc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${soul.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Configure the application.yml\nsoul: http: adminUrl: http://localhost:9095 port: 8188 contextPath: /http appName: http full: false  If soul.http.full=false, you need to add the @SoulSpringMvcClient annotation in controller or controller method.\n3.1.1. Test the service Visit http://localhost:8188/test/findByUserId?userId=1 and the result as follows.\n3.1.2. Test forward HTTP request Visit â€¦","date":1610668800,"description":"Soul Learning(1) Environment Configuration","dir":"blog/soul_source_learning_01/","fuzzywordcount":1000,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"60087a4153a0bad904e416d6a73991a1d730ac31","permalink":"/blog/soul_source_learning_01/","publishdate":"2021-01-15T00:00:00Z","readingtime":5,"relpermalink":"/blog/soul_source_learning_01/","summary":"Analysis of soul (1) Set up soul environment  soul is a High-Performance Java API Gateway\nGitHubï¼šhttps://github.com/dromara/soul\ndocumentï¼šhttps://dromara.org/zh-cn/docs/soul/soul.html\n 1. Prepare source code 1.1. Fork dromara/soul repository to my github cchenxi/soul 1.2. Clone the repository git clone https://github.com/cchenxi/soul.git  1.3.Open the source code with idea 1.4. Compile the soul source code You can compile the project as follows.\nmvn clean package install -Dmaven.test.skip=true -Dmaven.javadoc.skip=true -Drat.skip=true -Dcheckstyle.skip=true  2. Startup soul 2.","tags":["Soul"],"title":"Soul Learning(1) Environment Configuration","type":"blog","url":"/blog/soul_source_learning_01/","wordcount":933},{"author":"é™ˆæ›¦","categories":"Soul","content":" Soulæºç åˆ†æï¼ˆ1ï¼‰ ç¯å¢ƒé…ç½®  soul is a High-Performance Java API Gateway\nGitHubï¼šhttps://github.com/dromara/soul\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://dromara.org/zh-cn/docs/soul/soul.html\n 1. æºä»£ç å‡†å¤‡ 1.1. fork dromara/soulæºä»£ç è‡³è‡ªå·±çš„ä»“åº“cchenxi/soul 1.2. cloneè‡ªå·±ä»“åº“ä¸­çš„soulæºä»£ç è‡³æœ¬åœ° git clone https://github.com/cchenxi/soul.git  1.3.ä½¿ç”¨ideaæ‰“å¼€soulæºä»£ç  1.4.ç¼–è¯‘soulæºä»£ç  æ‰§è¡Œä»¥ä¸‹mavenå‘½ä»¤ï¼Œç­‰å¾…ç¼–è¯‘å®Œæˆ\nmvn clean package install -Dmaven.test.skip=true -Dmaven.javadoc.skip=true -Drat.skip=true -Dcheckstyle.skip=true  2. å¯åŠ¨ soul 2.1. å¯åŠ¨soul-adminæ¨¡å—  soul-adminæ˜¯soulç½‘å…³çš„åå°ç®¡ç†ç³»ç»Ÿ\n é€‰æ‹©ä½¿ç”¨MySQLæ•°æ®åº“å­˜å‚¨ç½‘å…³æ•°æ®ï¼Œä¿®æ”¹æ•°æ®æºé…ç½®ä¸ºè‡ªå·±çš„æ•°æ®åº“é…ç½®ã€‚\nè¿è¡Œå¯åŠ¨ç±» org.dromara.soul.admin.SoulAdminBootstrapã€‚\nå¯åŠ¨æˆåŠŸåï¼Œè®¿é—®åœ°å€ http://localhost:9095/ ï¼Œè·³è½¬åˆ°ç™»å½•é¡µâ†“\nä½¿ç”¨ç”¨æˆ·åadminï¼Œå¯†ç  123456 ç™»å½•ã€‚\n2.2. å¯åŠ¨soul-bootstrapæ¨¡å—  soul-bootstrapæ˜¯ç½‘å…³ç³»ç»Ÿçš„æ ¸å¿ƒ\n æ£€æŸ¥soul-bootstrapçš„é…ç½®\nè¿™é‡Œéœ€è¦é…ç½®æˆ soul-adminçš„ipå’Œç«¯å£\næ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹å†…å®¹è¡¨ç¤º soul-bootstrapå¯åŠ¨æˆåŠŸ\n2021-01-14 15:01:15.832 INFO 17943 --- [ main] b.s.s.d.w.WebsocketSyncDataConfiguration : you use websocket sync soul data....... 2021-01-14 15:01:15.924 INFO 17943 --- [ main] o.d.s.p.s.d.w.WebsocketSyncDataService : websocket connection is successful..... 2021-01-14 15:01:16.113 INFO 17943 --- [ main] o.s.b.a.e.web.EndpointLinksResolver : Exposing 2 endpoint(s) beneath base path \u0026#39;/actuator\u0026#39; log4j:WARN No appenders could be found for logger (com.alibaba.dubbo.common.logger.LoggerFactory). log4j:WARN Please initialize the log4j system properly. log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 2021-01-14 15:01:17.150 INFO 17943 --- [ main] o.s.b.web.embedded.netty.NettyWebServer : Netty started on port(s): 9195 2021-01-14 15:01:17.154 INFO 17943 --- [ main] o.d.s.b.SoulBootstrapApplication : Started SoulBootstrapApplication in 5.508 seconds (JVM running for 6.762)  3. æµ‹è¯•httpè¯·æ±‚è½¬å‘  ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼ŒæŠŠsoul-examplesæ¨¡å—æ·»åŠ åˆ°soulçš„pomé‡Œ\n 3.1. å¯åŠ¨ä¸€ä¸ªæœåŠ¡ å¯åŠ¨soul-examples-httpé¡¹ç›®\nsoul-examples-httpçš„pomä¸­å¼•å…¥äº†ä¾èµ–\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-client-springmvc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;${soul.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  åœ¨ application.ymlä¸­é…ç½®\nsoul: http: adminUrl: http://localhost:9095 port: 8188 contextPath: /http appName: http full: false  å¦‚æœsoul.http.full=falseï¼Œåˆ™éœ€è¦åœ¨å…·ä½“çš„httpæ¥å£ä¸Šé…ç½® @SoulSpringMvcClient æ³¨è§£\n3.1.1. æµ‹è¯•httpæœåŠ¡ æ‰§è¡Œhttpè¯·æ±‚ http://localhost:8188/test/findByUserId?userId=1 ç»“æœå¦‚ä¸‹å›¾\n3.1.2. æµ‹è¯•ç½‘å…³è½¬å‘ æ‰§è¡Œhttpè¯·æ±‚ http://localhost:9195/http/test/findByUserId?userId=1 ç»“æœå¦‚ä¸‹å›¾\nåœ¨soul-bootstrapçš„æ§åˆ¶å°ä¸­è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯\n2021-01-14 20:42:57.123 INFO 29812 --- [work-threads-11] o.d.soul.plugin.base.AbstractSoulPlugin : divide selector success match , selector name :/http 2021-01-14 20:42:57.125 INFO 29812 --- [work-threads-11] o.d.soul.plugin.base.AbstractSoulPlugin : divide selector success match , selector name :/http/test/** 2021-01-14 20:42:57.126 INFO 29812 --- [work-threads-11] o.d.s.plugin.httpclient.WebClientPlugin : The request urlPath is http://172.27.121.155:8188/test/findByUserId?userId=1, retryTimes is 0  å¯ä»¥è§‚å¯Ÿåˆ°ç½‘å…³å¯ä»¥å°†è¯·æ±‚æ­£å¸¸è½¬å‘ã€‚\n3.2. å¯åŠ¨ä¸¤ä¸ªæœåŠ¡æ¨¡æ‹Ÿè´Ÿè½½å‡è¡¡ å‹¾é€‰ Allow parallel runï¼Œä¿®æ”¹ç«¯å£ä¸º8189ï¼Œå†æ¬¡å¯åŠ¨soul-examples-http â€¦","date":1610668800,"description":"Soulç½‘å…³å­¦ä¹ (1)ç¯å¢ƒé…ç½®","dir":"blog/soul_source_learning_01/","fuzzywordcount":1700,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"3a96524fdc06f3631dc2c569c3b39263f136a2c7","permalink":"/zh/blog/soul_source_learning_01/","publishdate":"2021-01-15T00:00:00Z","readingtime":4,"relpermalink":"/zh/blog/soul_source_learning_01/","summary":"Soulæºç åˆ†æï¼ˆ1ï¼‰ ç¯å¢ƒé…ç½® soul is a High-Performance Java API Gateway GitHubï¼šhttps://github.com/dromara/soul å®˜æ–¹æ–‡æ¡£ï¼šhttps","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ (1)ç¯å¢ƒé…ç½®","type":"blog","url":"/zh/blog/soul_source_learning_01/","wordcount":1625},{"author":"æœ±æ˜","categories":"Soul","content":" æ’ä»¶é“¾æ€»ç»“ ä»ä¸€ä¸ªç±»å…³ç³»å›¾è¯´èµ·:\nå…¶ä¸­ä¸¤ä¸ªæœ€åŸºæœ¬çš„æ’ä»¶ç±»:\n SoulPlugin: å®šä¹‰æ’ä»¶èŒè´£çš„æ¥å£, é‡ç‚¹æ–¹æ³•execute() è¢«ä¸Šå±‚è°ƒç”¨, skip() æ–¹æ³•å¯ä»¥ä½¿æŸäº›æ’ä»¶åœ¨æŸäº›è¯·æ±‚ä¸­è¢«è·³è¿‡.\n AbstractPlugin: æŠ½è±¡ç±», å®ç°æ¥å£çš„ execute(), å®šä¹‰ä¸€å¥—é€šç”¨çš„æ‰§è¡Œæµç¨‹, å¹¶ä½¿ç”¨æ¨¡æ¿æ–¹æ³•çš„è®¾è®¡æ¨¡å¼, æä¾›doExecute()æŠ½è±¡æ–¹æ³•ä¾›å®ç°ç±»å†™è‡ªå·±çš„é€»è¾‘.\n  AbstractSoulPlugin å…·ä½“åˆ†æä¸‹ AbstractSoulPlugin ç±»çš„ execute():\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange, final SoulPluginChain chain) { String pluginName = named(); final PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName); // å¦‚æœ pluginData.getEnabled() ä¸º false, ä¼šç›´æ¥è·³åˆ°ä¸‹ä¸ªæ’ä»¶, ä»…æœ‰ä¸ºæ•°ä¸å¤šçš„æ’ä»¶ä¼šè¿›å…¥è¿™ä¸ªæ¡ä»¶åˆ¤æ–­ (DividePluginã€AlibabaDubboPluginç­‰) if (pluginData != null \u0026amp;amp;\u0026amp;amp; pluginData.getEnabled()) { // è·å¾—æ’ä»¶ä¸Šçš„æ‰€æœ‰é€‰æ‹©å™¨ final Collection\u0026amp;lt;SelectorData\u0026amp;gt; selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName); if (CollectionUtils.isEmpty(selectors)) { return CheckUtils.checkSelector(pluginName, exchange, chain); } // æ£€æŸ¥ä¸Šä¸‹æ–‡ä¸­çš„è¯·æ±‚è·¯å¾„, æ˜¯å¦ä¸é€‰æ‹©å™¨åŒ¹é…, å¹¶å¾—åˆ°å”¯ä¸€ä¸€ä¸ªåŒ¹é…çš„é€‰æ‹©å™¨æ•°æ® final SelectorData selectorData = matchSelector(exchange, selectors); if (Objects.isNull(selectorData)) { if (PluginEnum.WAF.getName().equals(pluginName)) { return doExecute(exchange, chain, null, null); } return CheckUtils.checkSelector(pluginName, exchange, chain); } if (selectorData.getLoged()) { log.info(\u0026amp;quot;{} selector success match , selector name :{}\u0026amp;quot;, pluginName, selectorData.getName()); } // è·å¾—é€‰æ‹©å™¨ä¸­çš„å„ä¸ªèµ„æºè§„åˆ™ final List\u0026amp;lt;RuleData\u0026amp;gt; rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId()); if (CollectionUtils.isEmpty(rules)) { if (PluginEnum.WAF.getName().equals(pluginName)) { return doExecute(exchange, chain, null, null); } return CheckUtils.checkRule(pluginName, exchange, chain); } RuleData rule; if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) { rule = rules.get(rules.size() - 1); } else { // åŒ¹é…è·¯å¾„, è·å¾—å”¯ä¸€ä¸€ä¸ªè§„åˆ™ rule = matchRule(exchange, rules); } if (Objects.isNull(rule)) { return CheckUtils.checkRule(pluginName, exchange, chain); } if (rule.getLoged()) { log.info(\u0026amp;quot;{} rule success match ,rule name :{}\u0026amp;quot;, pluginName, rule.getName()); } // æ‰§è¡Œå­ç±»çš„æ–¹æ³• return doExecute(exchange, chain, selectorData, rule); } // æ‰§è¡Œæ’ä»¶é“¾ä¸Šçš„ä¸‹ä¸ªæ’ä»¶ return chain.execute(exchange); }  é€šè¿‡ä»£ç åˆ†æ, å¯ä»¥å¾—åˆ°ä¸€äº›ç»“è®º:\n execute() æœ‰ä¸¤ä¸ªé€»è¾‘: ä¸€æ˜¯è¯·æ±‚è·¯å¾„ä¸é€‰æ‹©å™¨å’Œè§„åˆ™çš„åŒ¹é…, æœ€ç»ˆç¡®è®¤ä¸€ä¸ªå”¯ä¸€è§„åˆ™, å¹¶è°ƒç”¨å­ç±» doExecute(); äºŒæ˜¯æ‰§è¡Œæ’ä»¶é“¾ä¸Šçš„ä¸‹ä¸ªæ’ä»¶. execute() å®é™…æŠ½è±¡äº†ä¸€å¥—è§„åˆ™åŒ¹é…é€»è¾‘, ä¾›æ‰€æœ‰\u0026amp;rdquo;è½¬å‘ç±»å‹\u0026amp;rdquo;çš„æ’ä»¶ä½¿ç”¨çš„, è½¬å‘ç±»å‹çš„æ’ä»¶ç›®å‰æˆ‘äº†è§£çš„æœ‰ DividePlugin (httpè¯·æ±‚) å’Œ AlibabaDubboPlugin (dubboè¯·æ±‚), å…¶ä»–ç±»å‹çš„æ’ä»¶å¦‚æœä¸é‡å†™ execute() çš„æ–¹æ³•, ä¼šç›´æ¥èµ°å…¥ä¸‹ä¸ªæ’ä»¶.  SoulPluginChain è¿™é‡Œè¿˜æœ‰ä¸ªç‚¹, å°±æ˜¯æ’ä»¶é“¾çš„å½¢æˆä¸é“¾å¼è°ƒç”¨, æˆ‘ä»¬æ¥åˆ†æä¸‹ SoulPluginChain è¿™å—:\nSoulPluginChain æ¥å£åŒæ ·å®šä¹‰äº† execute() æ–¹æ³•ä¾›è°ƒç”¨è€…ä½¿ç”¨, å®ƒçš„å”¯ä¸€å­ç±» DefaultSoulPluginChain å®ç°äº†é“¾å¼è°ƒç”¨:\npublic Mono\u0026amp;lt;Void\u0026amp;gt; execute(final ServerWebExchange exchange) { return Mono.defer(() -\u0026amp;gt; { // plugins ä¸­åŒ…å«æ‰€æœ‰ç½‘å…³åŠ è½½çš„æ’ä»¶ if (this.index \u0026amp;lt; plugins.size()) { // æ¯æ¬¡è°ƒç”¨execute()æ–¹æ³•, indexç´¢å¼•è‡ªå¢, ä¼šè°ƒç”¨åˆ°ä¸‹ä¸€ä¸ªæ’ä»¶ SoulPlugin plugin = plugins.get(this.index++); // ç»“åˆä¸Šä¸‹æ–‡åˆ¤æ–­å½“å‰æ’ä»¶æ˜¯å¦éœ€è¦è·³è¿‡ Boolean skip = plugin.skip(exchange); if (skip) { return this.execute(exchange); } else { return plugin.execute(exchange, this); } } else { return Mono.empty(); } }); } â€¦","date":1610668800,"description":"Soulç½‘å…³å­¦ä¹ æ’ä»¶é“¾ä¸è´Ÿè½½å‡è¡¡è§£æ","dir":"blog/soul_source_learning_05_plugin/","fuzzywordcount":3600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"25cc244bdfddbfa28fa87d24664e43e9b8b038d9","permalink":"/zh/blog/soul_source_learning_05_plugin/","publishdate":"2021-01-15T00:00:00Z","readingtime":8,"relpermalink":"/zh/blog/soul_source_learning_05_plugin/","summary":"æ’ä»¶é“¾æ€»ç»“ ä»ä¸€ä¸ªç±»å…³ç³»å›¾è¯´èµ·: å…¶ä¸­ä¸¤ä¸ªæœ€åŸºæœ¬çš„æ’ä»¶ç±»: SoulPlugin: å®šä¹‰æ’ä»¶èŒè´£çš„æ¥å£, é‡ç‚¹æ–¹æ³•execute() è¢«ä¸Šå±‚è°ƒç”¨, skip() æ–¹æ³•å¯ä»¥ä½¿æŸäº›æ’ä»¶åœ¨æŸäº›","tags":["Soul"],"title":"Soulç½‘å…³å­¦ä¹ æ’ä»¶é“¾ä¸è´Ÿè½½å‡è¡¡è§£æ","type":"blog","url":"/zh/blog/soul_source_learning_05_plugin/","wordcount":3567},{"author":"xiaoyu","categories":null,"content":" Dromara Dream Code Book Clubï¼ˆDromara 2020 event introductionï¼‰  Date: Sunday, December 27, 2020  Activity background  In order to increase the enthusiasm of community participants, promote the construction of the Dromara community, exercise everyone\u0026amp;rsquo;s expressive ability and improve the core strength of technology, the community organized this event in the form of source code reading.  Activity purpose, meaning and goal  Increase motivation Improve technical strength and expand everyone\u0026amp;rsquo;s horizons Exercise language skills Promote the harmony, unity and progress of the community Make the Dromara community bigger and bigger  Activity development  The activity is divided into multiple phases. First, twelve members are selected for a 12-day source code reading, and two online sharing is carried out during the period. In order to improve everyone\u0026amp;rsquo;s consciousness, we have set up a punishment system. First hand over 500 yuan to the administrator. If homework is not submitted at 8 am the next day, 100 yuan will be deducted for sharing latecomers. Those who ask for leave in advance do not need to be punished. Each person writes to their homework submission area in text based on the content they read every day.  Activity leader and main participants Principal  Cui, Kimming, Xiaoyu  The main participants  Dromara community member  ","date":1609081200,"description":"","dir":"activities/dromara-activites-introduce/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"21669328acddbabb03e5769e3c12694bf479bfca","permalink":"/activities/dromara-activites-introduce/","publishdate":"2020-12-27T15:00:00Z","readingtime":1,"relpermalink":"/activities/dromara-activites-introduce/","summary":"Dromara Dream Code Book Clubï¼ˆDromara 2020 event introductionï¼‰  Date: Sunday, December 27, 2020  Activity background  In order to increase the enthusiasm of community participants, promote the construction of the Dromara community, exercise everyone\u0026rsquo;s expressive ability and improve the core strength of technology, the community organized this event in the form of source code reading.  Activity purpose, meaning and goal  Increase motivation Improve technical strength and expand everyone\u0026rsquo;s horizons Exercise language skills Promote the harmony, unity and progress of the community Make the Dromara community bigger and bigger  Activity development  The activity is divided into multiple phases.","tags":["DreamCode","Dromara","GateWay"],"title":"Dromara Dream Code Book Club Introduction","type":"activities","url":"/activities/dromara-activites-introduce/","wordcount":203},{"author":"xiaoyu","categories":null,"content":" Dromara æ¢¦ç è¯»ä¹¦ä¼šï¼ˆDromara 2020 æ´»åŠ¨ä»‹ç»ï¼‰  æ—¥æœŸï¼š2020å¹´12æœˆ27æ—¥ï¼Œæ˜ŸæœŸæ—¥  æ´»åŠ¨èƒŒæ™¯  ä¸ºäº†æé«˜ç¤¾åŒºå‚ä¸è€…çš„ç§¯ææ€§, ä¿ƒè¿›Dromaraç¤¾åŒºçš„å»ºè®¾, é”»ç‚¼å¤§å®¶çš„è¡¨è¾¾èƒ½åŠ›å’Œæå‡æŠ€æœ¯æ ¸å¿ƒåŠ›é‡, ç¤¾åŒºä»¥æºç é˜…è¯»å½¢å¼è‡ªå‘è¡Œçš„ç»„ç»‡æœ¬æ¬¡æ´»åŠ¨  æ´»åŠ¨ç›®çš„,æ„ä¹‰å’Œç›®æ ‡  æé«˜ç§¯ææ€§ æå‡æŠ€æœ¯åŠ›é‡,æ‰©å±•å¤§å®¶è§†é‡ é”»ç‚¼è¯­è¨€è¡¨è¾¾èƒ½åŠ› ä¿ƒè¿›ç¤¾åŒºçš„å’Œè°ã€å›¢ç»“ã€å…±è¿› å°†Dromaraç¤¾åŒºåšçš„è¶Šæ¥è¶Šå¤§  æ´»åŠ¨å¼€å±•  æ´»åŠ¨åˆ†å¤šæœŸ,å…ˆæ˜¯æŒ‘é€‰åäºŒä½ç»„å‘˜è¿›è¡Œä¸ºæœŸ12å¤©çš„æºç é˜…è¯»,æœŸé—´è¿›è¡Œä¸¤æ¬¡çº¿ä¸Šåˆ†äº« ä¸ºäº†æé«˜å¤§å®¶çš„è‡ªè§‰æ€§æˆ‘ä»¬è®¾ç«‹äº†æƒ©ç½šåˆ¶åº¦,å…ˆäº¤å‡º500å…ƒ/äººç»™ç®¡ç†å‘˜,éš”å¤©çš„æ—©ä¸Š8ç‚¹ä½œä¸šæœªæäº¤,åˆ†äº«è¿Ÿåˆ°è€…æ‰£100å…ƒ/æ¬¡,æå‰è¯·å‡è€…æ— éœ€æƒ©ç½š æ¯äººæ ¹æ®æ¯å¤©é˜…è¯»çš„å†…å®¹,ä»¥æ–‡å­—å½¢å¼å†™åˆ°å„è‡ªçš„ä½œä¸šæäº¤åŒº  æ´»åŠ¨è´Ÿè´£äººä»¥åŠä¸»è¦å‚ä¸è€… è´Ÿè´£äºº  å´”,kimming,çŒ«å¤§äºº  ä¸»è¦å‚ä¸è€…  Dromara ç¤¾åŒºç»„å‘˜  ","date":1609081200,"description":"","dir":"activities/dromara-activites-introduce/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"a68ba03bdf8cf3038db5f04101e13d8a85be879f","permalink":"/zh/activities/dromara-activites-introduce/","publishdate":"2020-12-27T15:00:00Z","readingtime":1,"relpermalink":"/zh/activities/dromara-activites-introduce/","summary":"Dromara æ¢¦ç è¯»ä¹¦ä¼šï¼ˆDromara 2020 æ´»åŠ¨ä»‹ç»ï¼‰ æ—¥æœŸï¼š2020å¹´12æœˆ27æ—¥ï¼Œæ˜ŸæœŸæ—¥ æ´»åŠ¨èƒŒæ™¯ ä¸ºäº†æé«˜ç¤¾åŒºå‚ä¸è€…çš„ç§¯ææ€§, ä¿ƒè¿›Dromaraç¤¾åŒºçš„å»ºè®¾","tags":["DreamCode","Dromara","GateWay"],"title":"Dromara æ¢¦ç è¯»ä¹¦ä¼šä»‹ç»","type":"activities","url":"/zh/activities/dromara-activites-introduce/","wordcount":350},{"author":"xiaoyu","categories":"hmily","content":" Thank you guys for your support all the way, and keep everyone waiting. In this version, our team refactored the entire project, reasonably divided functional modules, added configuration centers, adjusted the underlying storage structure, solved difficult bugs, and supported other new features, and absorbed more outstanding open source community members to join in.\nArchitecture Features  High availabilityÂ·: Supports abnormal transaction rollback and overtime transaction recovery in distributed scenarios to prevent transaction suspension. Ease of use: Provide zero-invasive Spring-Boot, Spring-Namespace to quickly integrate with business systems. High performance: Decentralized design, fully integrated with business systems, naturally supports cluster deployment. Observability: Performance monitoring of multiple metrics by Metrics, as well as admin management UI . Multiple RPCs: support Dubbo, SpringCloud, Motan, Sofa-rpc and other well-known RPC frameworks. Log storage: Support Mysql, Oracle, Mongodb, Redis, Zookeeper, etc. Complex scenarios: Support RPC nested call transactions.  Refactoring part  Module division:\n Extract the SPI custom module and It\u0026amp;rsquo;s open-the-box.\n SPI module that defines multiple storage methods for transaction logs.\n SPI module that defines multiple serialization methods for transaction logs.\n Add configuration center, support various mainstream configuration centers (Nacos, Apollo, Zookeeper, etc.), and support dynamic refresh of configuration.\n Add metrics module to monitor various information at runtime.\n Remove the core transaction execution module.\n Extract multiple RPC support modules.\n Extract the Spring and Spring Boot support modules.\n  On the dependent package version:\n Guava upgraded to 2.9.0. Curator upgraded to 5.1.0.   Code quality:\n Strict check-style code inspection, adhering to the principle of elegance and simplicity (talk is cheap, show you code).   openness :\n The community pursues the basic principles of simplicity, happiness, and harmony.   Goal:\n Create a high-availability, high-performance, easy-to-use financial-level distributed transaction solution.   Solve bugs:  The Dubbo framework does not support the use of annotations (spring-boot-starter-dubbo). The Motan framework does not support the use of annotations. If Spring Cloud users use Feign and Hystrix to integrate Hmily, the thread switching problem occurs. In extreme cases, the transaction log serialization is abnormal. If timeout happen in try, It will cause the transaction suspension bug. When the confirm and cancel phases are abnormal, the transaction fails to rollback. In the transaction log storage, two modes of synchronous and asynchronous are supported for users to choose.  User guide For Hmily users, it only takes three steps to achieve the BASE transaction between RPC service calls\n Add the maven dependencies supported by Hmily for various RPC. Add Hmily configuration. Add @Hmily annotation to RPC interface method.  Dependency â€¦","date":1601251200,"description":"One year later, Hmily released version 2.1.1 of the new architecture","dir":"community/hmily-2.1.1/","fuzzywordcount":1100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"6c1b3b22d093bff01211673cf107296299f3b698","permalink":"/community/hmily-2.1.1/","publishdate":"2020-09-28T00:00:00Z","readingtime":3,"relpermalink":"/community/hmily-2.1.1/","summary":"Thank you guys for your support all the way, and keep everyone waiting. In this version, our team refactored the entire project, reasonably divided functional modules, added configuration centers, adjusted the underlying storage structure, solved difficult bugs, and supported other new features, and absorbed more outstanding open source community members to join in. Architecture Features High availabilityÂ·:","tags":["hmily"],"title":"One year later, the dromara team released version 2.1.1 of the new architecture Hmily distributed transaction framework ","type":"community","url":"/community/hmily-2.1.1/","wordcount":1070},{"author":"xiaoyu","categories":"hmily","content":" æ„Ÿè°¢æœ‹å‹ä»¬ä¸€è·¯ä»¥æ¥çš„æ”¯æŒï¼Œè®©å¤§å®¶ä¹…ç­‰äº†ã€‚åœ¨è¿™ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å›¢é˜Ÿé‡æ„äº†æ•´ä¸ªé¡¹ç›®ï¼Œåˆç†çš„åˆ’åˆ†åŠŸèƒ½æ¨¡å—ï¼Œæ–°å¢é…ç½®ä¸­å¿ƒï¼Œè°ƒæ•´åº•å±‚å­˜å‚¨ç»“æ„ï¼Œè§£å†³ç–‘éš¾bugï¼Œä»¥åŠå…¶ä»–æ–°åŠŸèƒ½çš„æ”¯æŒï¼Œä¹Ÿå¸æ”¶äº†æ›´å¤šå¼€æºç¤¾åŒºçš„ä¼˜ç§€äººæ‰çš„åŠ å…¥ã€‚\næ¶æ„å…¨æ™¯å›¾ åŠŸèƒ½  é«˜å¯é æ€§ ï¼šæ”¯æŒåˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œäº‹åŠ¡å¼‚å¸¸å›æ»šï¼Œè¶…æ—¶å¼‚å¸¸æ¢å¤ï¼Œé˜²æ­¢äº‹åŠ¡æ‚¬æŒ‚ã€‚ æ˜“ç”¨æ€§ ï¼šæä¾›é›¶ä¾µå…¥æ€§å¼çš„ Spring-Boot, Spring-Namespace å¿«é€Ÿä¸ä¸šåŠ¡ç³»ç»Ÿé›†æˆã€‚ é«˜æ€§èƒ½ ï¼šå»ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œä¸ä¸šåŠ¡ç³»ç»Ÿå®Œå…¨èåˆï¼Œå¤©ç„¶æ”¯æŒé›†ç¾¤éƒ¨ç½²ã€‚ å¯è§‚æµ‹æ€§ ï¼šMetricså¤šé¡¹æŒ‡æ ‡æ€§èƒ½ç›‘æ§ï¼Œä»¥åŠadminç®¡ç†åå°UIå±•ç¤ºã€‚ å¤šç§RPC ï¼šæ”¯æŒ Dubbo, SpringCloud,Montan ,sofa-rpcç­‰çŸ¥åRPCæ¡†æ¶ã€‚ æ—¥å¿—å­˜å‚¨ ï¼šæ”¯æŒ mysql, oracle, mongodb, redis, zookeeper ç­‰æ–¹å¼ã€‚ å¤æ‚åœºæ™¯ ï¼šæ”¯æŒRPCåµŒå¥—è°ƒç”¨äº‹åŠ¡ã€‚  é‡æ„éƒ¨åˆ†  åœ¨æ¨¡å—åˆ’åˆ†ä¸Šï¼š\n æŠ½ç¦»å‡ºå¼€ç®±å³ç”¨çš„SPIè‡ªå®šä¹‰æ¨¡å—ã€‚ å®šä¹‰äº‹åŠ¡æ—¥å¿—å¤šç§å­˜å‚¨æ–¹å¼çš„SPIæ¨¡å—ã€‚ å®šä¹‰äº‹åŠ¡æ—¥å¿—å¤šç§åºåˆ—åŒ–æ–¹å¼çš„SPIæ¨¡å—ã€‚ æ–°å¢é…ç½®ä¸­å¿ƒï¼Œæ”¯æŒå„ç§ä¸»æµçš„é…ç½®ä¸­å¿ƒï¼ˆnacosï¼Œapollo,zookeeperç­‰ï¼‰ï¼Œå¹¶æ”¯æŒé…ç½®çš„åŠ¨æ€åˆ·æ–°ã€‚ æ–°å¢metricsæ¨¡å—ï¼Œç”¨æ¥ç›‘æ§è¿è¡Œæ—¶å€™çš„å„ç§ä¿¡æ¯ã€‚ æŠ½ç¦»å‡ºæ ¸å¿ƒçš„äº‹åŠ¡æ‰§è¡Œæ¨¡å—ã€‚ æŠ½ç¦»å‡ºå¤šç§RPCæ”¯æŒæ¨¡å—ã€‚ æŠ½ç¦»å‡ºspringä¸spring boot æ”¯æŒæ¨¡å—ã€‚  åœ¨ä¾èµ–åŒ…ç‰ˆæœ¬ä¸Šï¼š\n guavaå‡çº§åˆ°29.0 curator å‡çº§åˆ°5.1.0  åœ¨ä»£ç è´¨é‡ä¸Šï¼š\n ä¸¥æ ¼çš„check-styleä»£ç æ£€æŸ¥ï¼Œç§‰æ‰¿ä¼˜é›…ï¼Œç®€å•æ˜“æ‡‚åŸåˆ™ï¼ˆtalk is cheap ,show you codeï¼‰ã€‚  åœ¨å¼€æ”¾æ€§ä¸Šï¼š\n ç¤¾åŒºå¥‰è¡Œç®€å•ï¼Œå¿«ä¹ï¼Œå’Œè°åŸºæœ¬åŸåˆ™  åœ¨ç›®æ ‡ä¸Šï¼š\n æ‰“é€ ä¸€æ¬¾é«˜å¯ç”¨ï¼Œé«˜æ€§èƒ½ï¼Œç®€å•æ˜“ç”¨é‡‘èçº§çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚   è§£å†³ç–‘éš¾bugï¼š  dubboæ¡†æ¶ä¸æ”¯æŒæ³¨è§£æ–¹å¼çš„ä½¿ç”¨ï¼ˆspring-boot-starter-dubbo)ã€‚ motanæ¡†æ¶ä¸æ”¯æŒæ³¨è§£æ–¹å¼çš„ä½¿ç”¨ã€‚ spring-cloudç”¨æˆ·å¦‚æœä½¿ç”¨feignä¸hystrixæ•´åˆhmilyæ—¶å€™çš„çº¿ç¨‹åˆ‡æ¢é—®é¢˜ã€‚ æç«¯æƒ…å†µä¸‹äº‹åŠ¡æ—¥å¿—åºåˆ—åŒ–å¼‚å¸¸ã€‚ tryé˜¶æ®µè¶…æ—¶å¼‚å¸¸ï¼Œå¯¼è‡´äº‹åŠ¡æ‚¬æŒ‚bugã€‚ confirmä¸cancelé˜¶æ®µå¼‚å¸¸æ—¶å€™ï¼Œäº‹åŠ¡æœªèƒ½æ­£ç¡®æ¢å¤bugã€‚ åœ¨äº‹åŠ¡æ—¥å¿—å­˜å‚¨ä¸Šï¼Œæ”¯æŒåŒæ­¥ä¸å¼‚æ­¥2ç§æ¨¡å¼ï¼Œä¾›ç”¨æˆ·é€‰æ‹©ã€‚  ç”¨æˆ·ä½¿ç”¨ä¸å‡çº§æŒ‡å— å¯¹äºhmilyç”¨æˆ·æ¥è¯´ï¼Œåªéœ€ä¸‰ä¸ªæ­¥éª¤ï¼Œå³å¯è§£å†³RPCæœåŠ¡è°ƒç”¨ä¹‹é—´çš„æŸ”æ€§äº‹åŠ¡\n å¼•ç”¨hmilyå¯¹å„ç§rpcæ”¯æŒçš„jaråŒ…ã€‚ æ·»åŠ hmilyé…ç½®ã€‚ åœ¨rpcæ¥å£æ–¹æ³•ä¸Šæ·»åŠ  @Hmilyæ³¨è§£ã€‚  ä¾èµ–çš„å˜æ›´\nç”¨æˆ·ä¾èµ–çš„æ–¹å¼æ²¡æœ‰æ›´æ”¹ï¼Œåªéœ€è¦å°†ç‰ˆæœ¬å‡çº§åˆ°2.1.0ã€‚ä¸‹é¢ä¸¾dubboå¾®æœåŠ¡åˆ—å­\ndubbo rpcå¾®æœåŠ¡\n dubboæ¥å£æœåŠ¡ä¾èµ–\n \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.1.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  dubboæœåŠ¡æä¾›è€…ä¾èµ–ï¼ˆ\u0026amp;lt;2.7ï¼‰\n \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.1.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; or \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.1.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   hmilyé…ç½®çš„å˜æ›´\nåœ¨æ–°ç‰ˆ2.1.0ä¸­ï¼Œæ–°å¢äº†hmily-configæ¨¡å—ï¼Œæ”¯æŒæœ¬åœ°ä¸æ³¨å†Œä¸­å¿ƒæ¨¡å¼ã€‚ç”¨æˆ·é¦–å…ˆéœ€è¦åœ¨é¡¹ç›®resouceæ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ªåç§°ä¸ºhmily.ymlçš„æ–‡ä»¶ã€‚é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt;resourceã€‚æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼ˆä¸€éƒ¨åˆ†ï¼Œä»¥ä¸‹æ˜¯é…ç½®æˆæœ¬åœ°æ¨¡å¼):\n server: configMode: local appName: account-dubbo # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. config: appName: account-dubbo serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://127.0.0.1:3306/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000  å¦‚æœä½ æƒ³å°†é…ç½®æ–‡ä»¶æ”¾åœ¨Nacosé…ç½®ä¸­å¿ƒï¼š\n ç¬¬ä¸€æ­¥ï¼š\nhmily: server: configMode: nacos appName: xxxxx # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. remote: nacos: server: 192.168.3.22:8848 dataId: hmily.properties group: DEFAULT_GROUP timeoutMs: 6000 fileExtension: yml passive: â€¦","date":1601251200,"description":"æ—¶éš”ä¸€å¹´ï¼ŒHmilyå‘å¸ƒå…¨æ–°æ¶æ„çš„2.1.1ç‰ˆæœ¬","dir":"community/hmily-2.1.1/","fuzzywordcount":2400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"d640e2f630861e00dd4dcb0871a759259789499d","permalink":"/zh/community/hmily-2.1.1/","publishdate":"2020-09-28T00:00:00Z","readingtime":5,"relpermalink":"/zh/community/hmily-2.1.1/","summary":"æ„Ÿè°¢æœ‹å‹ä»¬ä¸€è·¯ä»¥æ¥çš„æ”¯æŒï¼Œè®©å¤§å®¶ä¹…ç­‰äº†ã€‚åœ¨è¿™ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å›¢é˜Ÿé‡æ„äº†æ•´ä¸ªé¡¹ç›®ï¼Œåˆç†çš„åˆ’åˆ†åŠŸèƒ½æ¨¡å—ï¼Œæ–°å¢é…ç½®ä¸­å¿ƒï¼Œè°ƒæ•´åº•å±‚å­˜å‚¨ç»“æ„ï¼Œè§£å†³ç–‘éš¾","tags":["hmily"],"title":"æ—¶éš”ä¸€å¹´ï¼Œdromaraå›¢é˜Ÿå‘å¸ƒå…¨æ–°æ¶æ„Hmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„2.1.1ç‰ˆæœ¬","type":"community","url":"/zh/community/hmily-2.1.1/","wordcount":2338},{"author":"xiaoyu","categories":"hmily","content":" Hmily is a flexible distributed transaction architecture with high performance, high avalibility and ease to use. At present, it provides support for Dubbo, Spring-Cloud, Motan, GRPC and other RPC frameworks. In terms of ease of use, it provides zero-intrusive rapid integration of Spring-Boot and Spring-Namespace, with the goal of building a distributed transaction solution of financial level.\nAdjust Hmily architecture with more reasonable module partition Architecture:\nArchitecture adjustment:\n Pull out the core execution module, support a variety of transaction mode and mixed use of TCC mode, TAC mode. The core module removes dependencies on Spring. Define implementations of various SPI interfaces. New hmily-rpc : aggregates support for various RPC frameworks. Added hmily-spi : Hmily framework custom SPI mechanism implementation. New hmily-bom : resolves version dependency management conflicts. Added hmily-metrics: monitoring JVM, thread, transaction health, time, etc. New hmily-TCC : Core implementation of TCC pattern. Added hmily-TCC : Core implementation of TAC mode.  **SPI module partition: **\n Added hmily-repository: transaction log storage module with support (MySQL, Oracle, PostgreSQL, SQL Server, ZooKeeper, Redis, MongoDB, File). Added hmily-serializer: transaction log serializer module, support (Hessian, JDK, Kryo, Protobuf) Added hmily-config: config module to support (local mode, Zookeeper, Nacos, Apollo, Etcd). Added hmily-tac-SQLParser: SQL parsing module under TAC mode  Gather the Hmily Community Issue and solve bugs. For example, in the community, it is gather the problems reported by the community, as well as to cooperate with the community for developing new version.\n**Solve bug: **\n Dubbo framework does not support annotation (spring-boot-starter-dubbo) The Motan framework does not support the use of annotations Exceptions in Spring-Cloud users when integrating Hmily with Hystrix using Feign. Transaction log serialization exception. Timeout exception transaction suspension bug. Transaction timing recovers bugs.  **Added function: **\n build: Added travis-ci feature Transaction log support: Oracle, PostgreSQL, Sqlsever, Mongo, Zookeeper, File, Redis. Configuration module: new configuration center support for Apollo, ETCD, and Nacos Demo: Added Motan-RPC to use Hmily distributed transaction.  Community building  The community adheres to the principles of simplicity, pleasure, elegance, and harmony.\n Code guidelines: The code follows the HMILY-CHECKSTYLE standard, and there is plenty of room for flexibility. Talk is cheap,show you code. Open rule: I hope everyone here can offer good ideas, we can discuss together, review code repeatedly, think about solving bugs, grow happily.   Recently Hmily-2.1.0 of the latest architecture will be released (TCC mode only will be supported).\nConfiguration module\n Configuration dynamic refresh function, support all configuration centers.  TAC mode:\n sql-parser: accessing Apache-Shardingsphere, â€¦","date":1599523200,"description":"Monthly report after Hmily restart","dir":"community/hmily-restart/","fuzzywordcount":500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"897c67b206e4ae828013661149fa196aa60d0219","permalink":"/community/hmily-restart/","publishdate":"2020-09-08T00:00:00Z","readingtime":1,"relpermalink":"/community/hmily-restart/","summary":"Hmily is a flexible distributed transaction architecture with high performance, high avalibility and ease to use. At present, it provides support for Dubbo, Spring-Cloud, Motan, GRPC and other RPC frameworks. In terms of ease of use, it provides zero-intrusive rapid integration of Spring-Boot and Spring-Namespace, with the goal of building a distributed transaction solution of financial level. Adjust Hmily architecture with more reasonable module partition Architecture: Architecture adjustment: Pull out","tags":["hmily"],"title":"Hmily distributed transaction restart monthly report","type":"community","url":"/community/hmily-restart/","wordcount":494},{"author":"xiaoyu","categories":"hmily","content":" Hmilyæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ï¼Œé«˜å¯é ï¼Œæ˜“ä½¿ç”¨çš„æŸ”æ€§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œç›®å‰æä¾›äº†å¯¹dubboï¼Œspring-cloudï¼Œmotanï¼Œgrpcç­‰rpcæ¡†æ¶çš„æ”¯æŒï¼Œåœ¨æ˜“ç”¨æ€§ä¸Šæä¾›é›¶ä¾µå…¥æ€§å¼çš„ Spring-Boot, Spring-Namespace å¿«é€Ÿé›†æˆï¼Œç›®æ ‡æ˜¯æ‰“é€ é‡‘èçº§çš„ä¸€ä½“ç³»åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚\nè°ƒæ•´Hmilyæ¶æ„ï¼Œæ›´åˆç†çš„æ¨¡å—åˆ’åˆ† å…¨æ™¯å›¾ï¼š\næ¶æ„è°ƒæ•´ï¼š\n æŠ½ç¦»æ ¸å¿ƒæ‰§è¡Œæ¨¡å—ï¼Œæ”¯æŒå¤šç§äº‹åŠ¡æ¨¡å¼ä»¥åŠæ··åˆä½¿ç”¨ï¼ˆTCCæ¨¡å¼ï¼ŒTACæ¨¡å¼ï¼‰ æ ¸å¿ƒæ¨¡å—å»é™¤å¯¹springçš„ä¾èµ– å®šä¹‰å¤šç§SPIæ¥å£çš„å®ç° æ–°å¢ hmily-rpc : èšåˆå¤šç§rpcæ¡†æ¶çš„æ”¯æŒ æ–°å¢ hmily-spi : hmilyæ¡†æ¶è‡ªå®šä¹‰spiæœºåˆ¶å®ç° æ–°å¢ hmily-bom : è§£å†³ç‰ˆæœ¬ä¾èµ–ç®¡ç†å†²çªçš„é—®é¢˜ æ–°å¢ hmily-metrics : ç›‘æ§JVMï¼Œçº¿ç¨‹ï¼Œäº‹åŠ¡è¿è¡ŒçŠ¶æ€ï¼Œè€—æ—¶ç­‰ä¿¡æ¯ æ–°å¢ hmily-tcc : tccæ¨¡å¼çš„æ ¸å¿ƒå®ç° æ–°å¢ hmily-tac : tacæ¨¡å¼çš„æ ¸å¿ƒå®ç°  SPIæ¨¡å—åˆ’åˆ†ï¼š\n æ–°å¢ hmily-repository: äº‹åŠ¡æ—¥å¿—å­˜å‚¨æ¨¡å—ï¼Œæ”¯æŒï¼ˆmysqlï¼Œoracleï¼Œpostgresqlï¼Œsqlserverï¼Œzookeeperï¼Œredisï¼Œmongodbï¼Œfileï¼‰ æ–°å¢ hmily-serializer: äº‹åŠ¡æ—¥å¿—åºåˆ—åŒ–æ¨¡å—, æ”¯æŒ ï¼ˆhessianï¼Œjdkï¼Œkryoï¼Œprotobufï¼‰ æ–°å¢ hmily-configï¼šé…ç½®æ¨¡å—ï¼Œæ”¯æŒï¼ˆæœ¬åœ°æ¨¡å¼ï¼Œzookeeperï¼Œnacosï¼Œapolloï¼Œetcdï¼‰ æ–°å¢ hmily-tac-sqlparser ï¼štacæ¨¡å¼ä¸‹ï¼Œsqlè§£ææ¨¡å—  æ¢³ç†Hmilyç¤¾åŒºissueï¼Œè§£å†³bugã€‚ å¦‚ä¸Šå›¾ï¼šåœ¨ç¤¾åŒºä¸­ï¼Œä¸»è¦æ˜¯æ¢³ç†å’Œè§£å†³ä¹‹å‰ç¤¾åŒºåé¦ˆçš„é—®é¢˜ï¼Œä»¥åŠç¤¾åŒºåˆä½œè¿›è¡Œæ–°çš„å¼€å‘ã€‚\nè§£å†³bugï¼ˆåˆ—ä¸¾å‡ ä¸ªï¼‰ï¼š\n dubboæ¡†æ¶ä¸æ”¯æŒæ³¨è§£æ–¹å¼çš„ä½¿ç”¨ï¼ˆspring-boot-starter-dubboï¼‰ motanæ¡†æ¶ä¸æ”¯æŒæ³¨è§£æ–¹å¼çš„ä½¿ç”¨ spring-cloudç”¨æˆ·å¦‚æœä½¿ç”¨feignä¸hystrixæ•´åˆhmilyæ—¶å€™çš„å¼‚å¸¸é—®é¢˜ äº‹åŠ¡æ—¥å¿—åºåˆ—åŒ–å¼‚å¸¸ è¶…æ—¶å¼‚å¸¸äº‹åŠ¡æ‚¬æŒ‚bug äº‹åŠ¡å®šæ—¶æ¢å¤bug  ç¤¾åŒºå®ŒæˆåŠŸèƒ½ï¼ˆåˆ—ä¸¾å‡ ä¸ªï¼‰ï¼š\n buildï¼šæ–°å¢travis-ciåŠŸèƒ½ äº‹åŠ¡æ—¥å¿—æ”¯æŒï¼šoracle, postgresql,sqlsever,mongo,zookeeper,file,redis é…ç½®æ¨¡å—ï¼šæ–°å¢apollo,etcd,nacosé…ç½®ä¸­å¿ƒæ”¯æŒ demoï¼šæ–°å¢motan-rpcæ–¹å¼ä½¿ç”¨hmilyåˆ†å¸ƒå¼äº‹åŠ¡demo  ç¤¾åŒºå…±å»º ç¤¾åŒºå¥‰è¡Œç®€å•ï¼Œå¿«ä¹ï¼Œä¼˜é›…ï¼Œå’Œè°åŸºæœ¬åŸåˆ™ã€‚\n ä»£ç å‡†åˆ™ï¼šä»£ç éµå¾ªhmily-checkstyleæ ‡å‡†ï¼Œä¹Ÿæœ‰å¾ˆå¤šçµæ´»è‡ªç”±çš„ç©ºé—´ã€‚ï¼ˆtalk is cheap ,show you codeï¼‰ å¼€æ”¾å‡†åˆ™ï¼šå¸Œæœ›åœ¨è¿™é‡Œæ¯ä¸ªäººéƒ½æœ‰å¥½çš„æ€æƒ³å’Œè§‚ç‚¹ï¼Œå¤§å®¶ä¸€èµ·è®¨è®ºï¼Œåå¤reviewä»£ç ï¼Œæ€è€ƒè§£å†³bugï¼Œå¿«ä¹æˆé•¿ï¼Œç»ä¸æä¸€è¨€å ‚ã€‚  æœ€è¿‘ ä¼šå‘å¸ƒæœ€æ–°æ¶æ„çš„hmily-2.1.0ç‰ˆæœ¬ï¼ˆåªä¼šæ”¯æŒTCCæ¨¡å¼ï¼‰\né…ç½®æ¨¡å—\n é…ç½®åŠ¨æ€åˆ·æ–°åŠŸèƒ½ï¼Œæ”¯æŒæ‰€æœ‰çš„é…ç½®ä¸­å¿ƒ  TACæ¨¡å¼:\n SQL-parser: æ­£åœ¨æ¥å…¥apache-shardingsphere,apache-calcite SQL-revertï¼šæ­£åœ¨å¼€å‘  å¤§çº¦åœ¨å†¬å­£ å¾ˆé«˜å…´æ¥äº†è¿™é‡Œå­£èŠ‚ï¼Œåœ¨è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œä¼šå‘å¸ƒhmily-2.2.0ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬å°†å®Œå…¨æ”¯æŒTAC,TCCæ¨¡å¼ã€‚ TAC(transaction auto rollback) ï¼šæœ‰äº†è¿™ä¸ªæ¨¡å¼ï¼Œç”¨æˆ·å†ä¹Ÿä¸ç”¨æ‹…å¿ƒåƒTCCé‚£æ ·å»å†™åå‘çš„cancelæ–¹æ³•äº†ã€‚å¤§å¤§å‡å°‘äº†ä½¿ç”¨æˆæœ¬ä»¥åŠå­¦ä¹ æˆæœ¬ã€‚ TCC: ç¨³å®šæ€§ï¼Œå¯é æ€§å¾—åˆ°å¤§å¤§åŠ å¼ºï¼Œå½»åº•è§£å†³äº‹åŠ¡æ‚¬æŒ‚é—®é¢˜ã€‚\nä»¥åçš„ä»¥å  æ›´å¤šRPCæ¡†æ¶çš„æ”¯æŒï¼šbrpcç­‰ç­‰ã€‚ æ”¯æŒ XAæ¨¡å¼ã€‚  \u0026amp;hellip;\u0026amp;hellip;è¿™é‡Œç©ºèµ·æ¥ï¼Œå¾ˆå¤šå¤šçš„è§„åˆ’ï¼Œå¸Œæœ›ä½ æ¥å‚ä¸å»ºè®¾ã€‚\n githubï¼šhttps://github.com/dromara/hmily giteeï¼šhttps://github.com/shuaiqiyu/hmily qqç¾¤: 162614487  ","date":1599523200,"description":"â€‹Hmilyé‡å¯åæœˆåº¦æŠ¥å‘Š","dir":"community/hmily-restart/","fuzzywordcount":1400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"81b13b18953b5d05a7a14ddc9b79f730cb50e0ca","permalink":"/zh/community/hmily-restart/","publishdate":"2020-09-08T00:00:00Z","readingtime":3,"relpermalink":"/zh/community/hmily-restart/","summary":"Hmilyæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ï¼Œé«˜å¯é ï¼Œæ˜“ä½¿ç”¨çš„æŸ”æ€§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œç›®å‰æä¾›äº†å¯¹dubboï¼Œspring-cloudï¼Œmotanï¼Œgrpcç­‰rp","tags":["hmily"],"title":"Hmilyåˆ†å¸ƒå¼äº‹åŠ¡é‡å¯æœˆåº¦æŠ¥å‘Š","type":"community","url":"/zh/community/hmily-restart/","wordcount":1387},{"author":"xiaoyu","categories":"Soul","content":" Let\u0026amp;rsquo;s take a look at the new features first, and then I would like to share my story.\n Completely pluggable architecture design, plug-in hot swap. Fully supports all versions of Dubbo, Alibaba-Dubbo, Apache-Dubbo. Support Dubbo generalization call, multi-parameter, complex parameter interface. Enhance the monitor plug-in and remove the Influxdb, add metrics such as memory, CPU, QPS, TPS, response delay, and support access to Prometheus. The SpringCloud plugin supports Eureka and Nacos two registration centers. The waf plugin is enhanced to support black or white lists and mixed modes. Remove the Hystrix circuit breaker to be an independent plug-in. Fix the Zookeeper data synchronization bug, and add the data synchronization method implemented by Nacos. Support multiple kinds of soul-client, such as traditional Spring and Springboot. Optimize the soul-admin user interface. Fix load balancing algorithm bug. Fix uploading large files bug. etc.  Experience the new architecture and get a high-availability and high-performance gateway in 10 minutes! Bootstrap soul-admin  Please download soul-admin.jar, and bootstrap it. Please access http://localhost:9095/index.html , and the default user name is admin, password is 123456ã€‚\n\u0026amp;gt; wget https://yu199195.github.io/jar/soul-admin.jar \u0026amp;gt; java -jar soul-admin.jar --spring.datasource.url=\u0026amp;quot;jdbc:mysql://ä½ çš„url:3306/soul?useUnicode=true\u0026amp;amp;characterEncoding=utf-8\u0026amp;amp;useSSL=false\u0026amp;quot; --spring.datasource.username=\u0026#39;you username\u0026#39; --spring.datasource.password=\u0026#39;you password\u0026#39;  Build your own gateway  Firstly, you should create an empty Springboot project, please refer to soul-bootstrap. You can also visit the Spring official website :[https://spring.io/quickstart] Secondly, please add Maven dependency like followsï¼š  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.springframework.boot\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;spring-boot-starter-webflux\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.2-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.springframework.boot\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;spring-boot-starter-actuator\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.2-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!--soul gateway start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-gateway\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!--soul data sync start use websocket--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-websocket\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Please add the following configuration to your application.yaml:\nspring: main: allow-bean-definition-overriding: true management: health: defaults: enabled: false soul : sync: websocket : urls: ws://localhost:9095/websocket //Set to youe soul-admin address.   Experience plug-in hot swap under the new architecture  Q: If I want â€¦","date":1592352000,"description":"Soul released version 2.2.0 with new architecture that makes gateways so easy. ","dir":"community/soul-2.2.0/","fuzzywordcount":1700,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"a3c966cfbcd9bfe9cc33114ec2c82d9f160db20d","permalink":"/community/soul-2.2.0/","publishdate":"2020-06-17T00:00:00Z","readingtime":4,"relpermalink":"/community/soul-2.2.0/","summary":"Let\u0026rsquo;s take a look at the new features first, and then I would like to share my story. Completely pluggable architecture design, plug-in hot swap. Fully supports all versions of Dubbo, Alibaba-Dubbo, Apache-Dubbo. Support Dubbo generalization call, multi-parameter, complex parameter interface. Enhance the monitor plug-in and remove the Influxdb, add metrics such as memory, CPU, QPS, TPS, response delay, and support access to Prometheus. The SpringCloud plugin supports Eureka and","tags":["Soul"],"title":"ã€Soul gateway version2.2.0 releaseã€‘Make high-performance gateways so easy!","type":"community","url":"/community/soul-2.2.0/","wordcount":1648},{"author":"xiaoyu","categories":"Soul","content":" æˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹çœ‹æ–°å¢åŠŸèƒ½ï¼Œç„¶åå†è®²æ•…äº‹ã€‚\n å®Œå…¨çš„æ’ä»¶åŒ–æ¶æ„è®¾è®¡ï¼Œæ’ä»¶çƒ­æ’æ‹”ã€‚ å®Œæ•´æ”¯æŒdubboæ‰€æœ‰ç‰ˆæœ¬ï¼Œalibaba-dubbo ï¼Œapache-dubboã€‚ æ”¯æŒdubboæ³›åŒ–è°ƒç”¨ï¼Œå¤šå‚æ•°ï¼Œå¤æ‚å‚æ•°æ¥å£ã€‚ å¢å¼ºmonitoræ’ä»¶ï¼Œç§»é™¤influxdbæ”¯æŒï¼Œæ–°å¢å†…å­˜ï¼ŒCPUï¼ŒQPSï¼ŒTPSï¼Œå“åº”è¿Ÿå»¶ç­‰metricsï¼Œæ”¯æŒæ¥å…¥Prometheusã€‚ springCloudæ’ä»¶æ”¯æŒeurekaä¸nacosäºŒç§æ³¨å†Œä¸­å¿ƒã€‚ wafæ’ä»¶å¢å¼º,æ”¯æŒé»‘ç™½åå•ï¼Œä»¥åŠæ··åˆæ¨¡å¼ã€‚ æŠ½ç¦»Hystrixç†”æ–­åŠŸèƒ½ï¼Œç‹¬ç«‹æˆæ’ä»¶æ”¯æŒã€‚ ä¿®æŠ¤Zookeeperæ•°æ®åŒæ­¥æ–¹å¼bugï¼Œæ–°å¢nacosåŒæ­¥æ•°æ®æ–¹å¼ã€‚ å¤šç§soul-clientæ”¯æŒï¼Œæä¾›ä¼ ç»Ÿspringï¼Œä»¥åŠspringbootç­‰æ–¹å¼æ¥å…¥ã€‚ ä¼˜åŒ– soul-adminåå°æ§åˆ¶ç•Œé¢ã€‚ è´Ÿè½½å‡è¡¡ç®—æ³•bugä¿®æŠ¤ã€‚ ä¿®æŠ¤å¤§æ–‡ä»¶ä¸Šä¼ æ—¶å€™çš„bugã€‚ â€¦â€¦.å¤ªå¤šäº†ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚  ä½“éªŒæ–°æ¶æ„ï¼Œ10åˆ†é’Ÿæå®šä¸€ä¸ªé«˜å¯ç”¨é«˜æ€§èƒ½ç½‘å…³ã€‚ å¯åŠ¨ soul-admin - ä¸‹è½½soul-admin.jaråŒ…ï¼Œå¹¶å¯åŠ¨.\n\u0026amp;gt; wget https://yu199195.github.io/jar/soul-admin.jar \u0026amp;gt; java -jar soul-admin.jar --spring.datasource.url=\u0026amp;quot;jdbc:mysql://ä½ çš„url:3306/soul?useUnicode=true\u0026amp;amp;characterEncoding=utf-8\u0026amp;amp;useSSL=false\u0026amp;quot; --spring.datasource.username=\u0026#39;you username\u0026#39; --spring.datasource.password=\u0026#39;you password\u0026#39;   è®¿é—® http://localhost:9095/index.html é»˜è®¤çš„ç”¨æˆ·åï¼šadmin å¯†ç :123456ã€‚  æ­å»ºå±äºä½ çš„ç½‘å…³\n é¦–å…ˆä½ æ–°å»ºä¸€ä¸ªç©ºçš„springbooté¡¹ç›®ï¼Œå¯ä»¥å‚è€ƒ soul-bootstrap. ä¹Ÿå¯ä»¥åœ¨springå®˜ç½‘:[https://spring.io/quickstart] å¼•å…¥å¦‚ä¸‹jaråŒ…ï¼š\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.springframework.boot\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;spring-boot-starter-webflux\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.2-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.springframework.boot\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;spring-boot-starter-actuator\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.2-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!--soul gateway start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-gateway\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!--soul data sync start use websocket--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-sync-data-websocket\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  åœ¨ä½ çš„ application.yaml æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹é…ç½®ï¼š\nspring: main: allow-bean-definition-overriding: true management: health: defaults: enabled: false soul : sync: websocket : urls: ws://localhost:9095/websocket //è®¾ç½®æˆä½ çš„soul-adminåœ°å€  è¿™æ ·ç½‘å…³çš„ç¯å¢ƒå°±å·²ç»æ­å»ºå®Œæˆã€‚\n  ä½“éªŒæ–°æ¶æ„ä¸‹çš„æ’ä»¶çƒ­æ’æ‹”  é—®ï¼šæˆ‘æƒ³ä½¿ç”¨ç†”æ–­åŠŸèƒ½ï¼Œåº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ\n ç­”ï¼šä½ å¯ä»¥åœ¨pom.xmlæ–‡ä»¶ å¼•å…¥ä»¥ä¸‹ä¾èµ–,æ›´å¤šçš„è¿˜è¯·çœ‹ï¼šhttps://dromara.org/zh-cn/docs/soul/soul.html\n\u0026amp;lt;!-- soul hystrix plugin start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-hystrix\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!-- soul hystrix plugin end--\u0026amp;gt;  é—®:æˆ‘æ€ä¹ˆæ¥å…¥dubboæœåŠ¡å‘¢ï¼Ÿ\n ç­”ï¼š 1ï¼‰å¦‚æœä½ ä½¿ç”¨çš„æ˜¯alibaba-dubboï¼Œé‚£ä¹ˆä½ åº”è¯¥å¼•å…¥å¦‚ä¸‹ï¼š\n\u0026amp;lt;!--soul alibaba dubbo plugin start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;soul-spring-boot-starter-plugin-alibaba-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.2.0\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt; \u0026amp;lt;!-- soul alibaba dubbo plugin end--\u0026amp;gt;  2ï¼‰ å¦‚æœä½ ä½¿ç”¨apache-dubboï¼Œé‚£ä¹ˆä½ åº”è¯¥å¼•å…¥å¦‚ä¸‹ï¼š\n\u0026amp;lt;!--soul apache dubbo plugin start--\u0026amp;gt; \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; â€¦","date":1592352000,"description":"Soulå‘å¸ƒå…¨æ–°çš„æ¶æ„2.2.0ç‰ˆæœ¬ è®©ç½‘å…³å˜å¾—å¦‚æ­¤ç®€å•","dir":"community/soul-2.2.0/","fuzzywordcount":3400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"f996e5c754a818485b528f84778ebb9fa9589e8f","permalink":"/zh/community/soul-2.2.0/","publishdate":"2020-06-17T00:00:00Z","readingtime":7,"relpermalink":"/zh/community/soul-2.2.0/","summary":"æˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹çœ‹æ–°å¢åŠŸèƒ½ï¼Œç„¶åå†è®²æ•…äº‹ã€‚ å®Œå…¨çš„æ’ä»¶åŒ–æ¶æ„è®¾è®¡ï¼Œæ’ä»¶çƒ­æ’æ‹”ã€‚ å®Œæ•´æ”¯æŒdubboæ‰€æœ‰ç‰ˆæœ¬ï¼Œalibaba-dubbo ï¼Œapach","tags":["Soul"],"title":"ã€Soulç½‘å…³å‘å¸ƒ2.2.0ã€‘è®©é«˜æ€§èƒ½ç½‘å…³å˜å¾—å¦‚æ­¤ç®€å•ï¼","type":"community","url":"/zh/community/soul-2.2.0/","wordcount":3306},{"author":"xiaoyu","categories":"Soul","content":" It has been a year since I open sourced Soul gateway in October last year, and received many suggestions from you guys in community. It has provided very rich functions after optimization, many of functions are highly cusmized, visualized, and highly extensible, now let\u0026amp;rsquo;s make a summary.\nPlugin  Provides various plug-ins, such as signature, monitoring, rate limiting, circuit breaker, Http proxy, Dubbo proxy, Websocket, etc.\n Support users to quickly develop plug-ins.\n All plug-in data and switch state support dynamic changes.\n  Data Synchronization  Provides three different data synchronization strategies: Http long polling, Zookeeper, and Websocket, allowing users to choose freely. It is recommended to use Websocket, which is the lightest and more efficient in a cluster environment.  For Users  First of all, we provide a client package that is convenient for users to access. Users can quickly register their projects to the Soul gateway. By default, users don\u0026amp;rsquo;t need to care about Soul Gateway\u0026amp;rsquo;s selectors, rules and other configurations. The user\u0026amp;rsquo;s previous interface is completely zero intrusion, It is only need to change to the domain name of the Soul gateway. For Dubbo users, the conversion from Http protocol to Dubbo protocol is almost completed by Http. Soul gataway uses the Http protocol, so it is destined to be cross-language, It is feasible for .Net programmers, PHP programmers to interact with Java program.  For example, if you have a Dubbo interface, the parameter definition is a java bean,\npublic void insert(final DubboTest dubboTest) { } public class DubboTest implements Serializable { private String id; private String name; }  If you use the Soul gateway to call this method, your Http parameter is to pass a json string in the body, which is no different from a normal http call.\n{\u0026amp;quot;id\u0026amp;quot;:\u0026amp;quot;123\u0026amp;quot;,\u0026amp;quot;name\u0026amp;quot;:\u0026amp;quot;xiaoyu\u0026amp;quot;}  For Developers  With more and more users, the situation of each company is different. Soul gateway in 2.1.X version are more extensible, making it convenient for developers . For example, there are may things could be extensible, such as Plug-ins, Filters, Dubbo parameter parser, iphost parser, return results, etc. We know that the default return result of the soul gateway is:  {\u0026amp;quot;code\u0026amp;quot;:200, \u0026amp;quot;message \u0026amp;quot;: \u0026amp;quot;æˆåŠŸ!\u0026amp;quot;,\u0026amp;quot;data\u0026amp;quot; :\u0026amp;quot;helloWorld!\u0026amp;quot;}  However, when using the Soul gateway to call your business system, your business system may define the result that is not confirm the above structure. Maybe your field is called msg, which will cause a different structure and bring confusion to the front-end processing. We have noticed this thing: https://github.com/Dromara/soul/issues/109, now it has been optimized, users can customize the return results to define, the specifics depend on the Soul document.\nWhat scenarios of Soul gateway are suitable, and what should you pay attention to? First of all, I think we should follow pragmatism, â€¦","date":1576108800,"description":"How convenient is the 2.1.X version of Soul Gateway?","dir":"community/soul-2.1.x/","fuzzywordcount":1000,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"bbb59a239d65554ff0eb71d47e85dc82220725e3","permalink":"/community/soul-2.1.x/","publishdate":"2019-12-12T00:00:00Z","readingtime":2,"relpermalink":"/community/soul-2.1.x/","summary":"It has been a year since I open sourced Soul gateway in October last year, and received many suggestions from you guys in community. It has provided very rich functions after optimization, many of functions are highly cusmized, visualized, and highly extensible, now let\u0026rsquo;s make a summary. Plugin Provides various plug-ins, such as signature, monitoring, rate limiting, circuit breaker, Http proxy, Dubbo proxy, Websocket, etc. Support users to quickly develop","tags":["Soul"],"title":"How convenient is the 2.1.X version of Soul Gateway?","type":"community","url":"/community/soul-2.1.x/","wordcount":966},{"author":"xiaoyu","categories":"Soul","content":" Soul ç½‘å…³è‡ªä»å»å¹´10æœˆæˆ‘å¼€æºä»¥æ¥ï¼Œç»å†äº†ä¸€å¹´çš„äº‹æƒ…ï¼Œæ¥å—åˆ°äº†æ¥è‡ªç¤¾åŒºå¾ˆå¤šæœ‹å‹çš„å»ºè®®ï¼Œå¹¶è¿›è¡ŒæŒç»­ä¸æ–­çš„ä¼˜åŒ–ï¼Œå·²ç»æä¾›äº†éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯é«˜åº¦è‡ªå®šä¹‰ï¼Œå¯è§†åŒ–ï¼Œé«˜åº¦å¯æ‰©å±•çš„ï¼Œç°åœ¨åšä¸€ä¸ªå½’çº³æ€»ç»“ã€‚\næ’ä»¶\n- æä¾›äº†ç³»ç»Ÿè‡ªå¸¦çš„å„ç§æ’ä»¶ï¼Œæ¯”å¦‚ç­¾åï¼Œç›‘æ§ï¼Œé™æµï¼Œç†”æ–­ï¼Œhttpä»£ç†ï¼Œdubboä»£ç†ï¼Œwebsocketç­‰ç­‰ã€‚\n æ”¯æŒç”¨æˆ·å¿«é€Ÿçš„è¿›è¡Œæ’ä»¶çš„è‡ªå®šä¹‰å¼€å‘ã€‚\n æ’ä»¶çš„æ‰€æœ‰æ•°æ®ï¼Œå¼€å…³çŠ¶æ€æ”¯æŒåŠ¨æ€å˜æ›´ã€‚\n  æ•°æ®åŒæ­¥ - æä¾›äº† httpé•¿è½®è¯¢ï¼Œzookeeperï¼Œwebsocket ä¸‰ç§ä¸åŒçš„æ•°æ®åŒæ­¥ç­–ç•¥ï¼Œè®©ç”¨æˆ·è‡ªç”±é€‰æ‹©ã€‚ - æ¨èç”¨æˆ·ä½¿ç”¨websocketæ–¹å¼ï¼Œæœ€è½»é‡ï¼Œåœ¨é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œæ•ˆç‡æ›´é«˜ã€‚\nå¯¹äºç”¨æˆ· - é¦–å…ˆæˆ‘ä»¬æä¾›äº†ä¾¿äºç”¨æˆ·æ¥å…¥çš„ clientåŒ…ï¼Œç”¨æˆ·å¯ä»¥æŠŠå¿«é€Ÿçš„æŠŠè‡ªå·±çš„é¡¹ç›®æ¥å…¥åˆ°soul ç½‘å…³ã€‚ - é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·å®Œå…¨ä¸ç”¨å…³å¿ƒ soulç½‘å…³çš„é€‰æ‹©å™¨ï¼Œè§„åˆ™ç­‰é…ç½®ã€‚ - ç”¨æˆ·ä¹‹å‰çš„æ¥å£å®Œå…¨æ˜¯é›¶ä¾µå…¥ï¼Œä¸éœ€è¦ä»»ä½•æ›´æ”¹ï¼Œåªæ˜¯éœ€è¦æŠŠè®¿é—®åŸŸåæ”¹æˆç½‘å…³çš„åŸŸåå³å¯ã€‚ - æ¯”å¦‚ dubboç”¨æˆ·ï¼Œå‡ ä¹å°±æ˜¯httpçš„æ–¹å¼å®Œæˆäº† httpåè®®åˆ° dubboåè®®çš„äº’ç›¸è½¬æ¢ã€‚ - soul ä½¿ç”¨çš„æ˜¯httpåè®®ï¼Œé‚£ä¹ˆæ³¨å®šå®ƒå°±æ˜¯è·¨è¯­è¨€çš„ï¼Œnetç¨‹åºå‘˜ï¼Œphpç¨‹åºå‘˜ç­‰ç­‰ï¼Œè¦å’Œjavaè¿›è¡Œæ•°æ®äº¤äº’ï¼Œé‚£ä¹ˆå°±å¤§å¤§çš„å¯è¡Œäº†ã€‚\nä¸¾ä¸ªåˆ—å­ ï¼Œæ¯”å¦‚ä½ æœ‰ä¸€ä¸ª dubboæ¥å£ å‚æ•°å®šä¹‰æ˜¯ä¸€ä¸ªjava bean,\npublic void insert(final DubboTest dubboTest) { } public class DubboTest implements Serializable { private String id; private String name; }  å¦‚æœä½ ä½¿ç”¨ soulç½‘å…³è¦å‘èµ·å¯¹å®ƒçš„è°ƒç”¨ï¼Œä½ çš„httpä¼ å‚æ•° å°±æ˜¯åœ¨ body é‡Œé¢ ä¼ ä¸€ä¸ªjsonå­—ç¬¦ä¸² ï¼Œå’Œæ™®é€šçš„httpè°ƒç”¨æ— å·®åˆ«ã€‚\n{\u0026amp;quot;id\u0026amp;quot;:\u0026amp;quot;123\u0026amp;quot;,\u0026amp;quot;name\u0026amp;quot;:\u0026amp;quot;xiaoyu\u0026amp;quot;}  å¯¹äºå¼€å‘è€…(ç¨‹åºå‘˜)\n éšç€ä½¿ç”¨è€…è¶Šæ¥è¶Šå¤šï¼Œæ¯ä¸ªå…¬å¸ä½¿ç”¨æƒ…å†µåˆä¸ä¸€æ ·,soul ç½‘å…³åœ¨2.1.Xç‰ˆæœ¬ï¼Œå¤„å¤„ç•™å‡ºæ¥æ›´å¤šçš„é«˜åº¦è‡ªå®šä¹‰æ‰©å±•æ€§ï¼Œè®©å¼€å‘è€…ï¼Œæ›´åŠ æ–¹ä¾¿æˆ–è€…æœ‰ä¿¡å¿ƒèå…¥è¿›æ¥ã€‚ æ¯”å¦‚ï¼Œè‡ªå®šä¹‰æ’ä»¶ï¼Œè¿‡æ»¤å™¨ï¼Œdubboå‚æ•°è§£æå™¨ï¼Œiphostè§£æå™¨ï¼Œè¿”å›ç»“æœç­‰ç­‰ã€‚ã€‚è¿™é‡Œæˆ‘ç€é‡è¯´ä¸€ä¸‹è‡ªå®šä¹‰è¿”å›ç»“æœã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œsoul ç½‘å…³é»˜è®¤çš„è¿”å›ç»“æœæ˜¯ï¼š\n{\u0026amp;quot;code\u0026amp;quot;:200, \u0026amp;quot;message \u0026amp;quot;: \u0026amp;quot;æˆåŠŸ!\u0026amp;quot;,\u0026amp;quot;data\u0026amp;quot; :\u0026amp;quot;helloWorld!\u0026amp;quot;}   ä½†æ˜¯ï¼Œåœ¨è¿ç”¨ soul ç½‘å…³å¯¹ä½ çš„ä¸šåŠ¡ç³»ç»Ÿè¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œä½ çš„ä¸šåŠ¡ç³»ç»Ÿå¯èƒ½å®šä¹‰çš„ç»“æœå¹¶ä¸æ˜¯ä¸Šè¿°ç»“æ„ï¼Œå¯èƒ½ä½ çš„ å­—æ®µå« msg,è¿™æ ·å°±ä¼šé€ æˆç»“æ„ä¸ä¸€æ ·ï¼Œç»™å‰ç«¯å¤„ç†å¸¦æ¥äº†å›°æ‰°ã€‚æˆ‘ä»¬æ³¨æ„åˆ°äº†è¿™ä¸ªäº‹æƒ… ï¼šhttps://github.com/Dromara/soul/issues/109 , ç°åœ¨å·²ç»ä¼˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥å®šåˆ¶åŒ–çš„æ¥å®šä¹‰è¿”å›ç»“æœ,å…·ä½“çš„è¦çœ‹ soul æ–‡æ¡£ã€‚\nè¯´äº†è¿™ä¹ˆå¤šï¼Œå¹äº†è¿™ä¹ˆå¤šç‰›é€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ soulç½‘å…³åˆ°åº•å¯ä»¥åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹èƒ½å‘æŒ¥å¤§ä½œç”¨ã€‚\nåå°ç®¡ç†web\n é¦–å…ˆéšä¾¿å¾®æœåŠ¡çš„æµè¡Œï¼Œæˆ‘ä»¬çš„åå°éƒ½åˆ’åˆ†æˆå¾ˆå¤šçš„å¾®æœåŠ¡ï¼Œæˆ‘ç›¸ä¿¡ä½ ä»¬æ¯ä¸ªå…¬å¸éƒ½æœ‰ä¸€ä¸ªåå°ç®¡ç†ç³»ç»Ÿå§ï¼Œå¦‚æœæˆ‘æ²¡çŒœé”™çš„è¯ï¼Œä»–ä»¬å¤§ä½“ä¸Šæ˜¯å¦‚ä¸‹æ¶æ„ã€‚   å¾ˆç®€å•å¯¹å§ï¼Œå°±æ˜¯æœ‰ä¸ªè¿è¥ç®¡ç†å¹³å°çš„webé¡¹ç›®ï¼Œå»è°ƒç”¨æ¯ä¸ªå¾®æœåŠ¡ï¼Œæ¥è¿›è¡Œåå°çš„æŸ¥çœ‹ç­‰ç­‰ã€‚éšç€ä½ ä»¬ä¸šåŠ¡éœ€è¦çš„åŠ å¤§ï¼Œå¯èƒ½è¿™é‡Œéœ€è¦è°ƒç”¨çš„å¾®æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œä½ çš„ controllerè¶Šæ¥è¶Šå¤šï¼Œç°åœ¨æ¯”å¦‚ä½ ä¿®æ”¹äº† å•†å“æ¨¡å—çš„ æ¥å£ï¼Œä½ è¦å‘ç‰ˆä¼šé€ æˆæ‰€æœ‰å…¶ä»–çš„æ¨¡å—ä¹Ÿæ“ä½œä¸äº†ï¼ˆå°±æ˜¯ä½ å‘ç‰ˆå½±å“äº†å…¶ä»–æ¨¡å—çš„ä½¿ç”¨ï¼Œåˆ«æ è¿™é‡Œåªæ˜¯æ¯”æ–¹ï¼Œä¸è¦æ•´è“ç»¿å‘ç‰ˆå•¥çš„ï¼Œæ˜ç™½æ„æ€å§ï¼‰ã€‚ å¦‚æœæœ‰è¿è¥äººå‘˜åœ¨æ“ä½œå…¶ä»–æ¨¡å—ï¼Œä¼šä¸ä¼šåæ§½ä½ ï¼Ÿ  å‡å¦‚ä½ æ˜¯å…¬å¸æ¶æ„å¸ˆï¼Œæˆ‘è¯´çš„æ˜¯å‡å¦‚ï¼Œé‚£ä¹ˆä½ è¦æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå½“ç„¶ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·ä¸€ä¸ªå¤§çš„webç³»ç»Ÿï¼Œæ‹†åˆ†æˆå¾ˆå¤šå°webç³»ç»Ÿï¼Œå•ç‹¬çš„è¿›è¡Œå‘å¸ƒï¼Œä½†æ˜¯è¿™æ ·ä¼šå¼•å…¥ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆç»Ÿä¸€ç™»é™†ï¼Œé‰´æƒï¼Ÿï¼ˆå¾ˆå¤šåå°ç®¡ç†ç³»ç»Ÿè¿˜æœ‰æƒé™çš„åˆ’åˆ†ï¼‰ ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œsoul ç½‘å…³ å°±èƒ½å‘æŒ¥é‡è¦çš„ä½œç”¨äº†ï¼Œä¸‹é¢æˆ‘åªæ˜¯åˆ—ä¸¾äº†ä¸€ä¸‹ç®€å•çš„è°ƒç”¨å›¾ã€‚\nè¿™æ ·å¤šæ–¹ä¾¿ï¼Œé›†æˆäº†ç½‘å…³ï¼Œæ¯ä¸ªå¾®æœåŠ¡æ³¨å†Œåˆ°ç½‘å…³ï¼Œç½‘å…³æ ¹æ®è·¯ç”±è§„åˆ™æ¥è¿›è¡Œè°ƒç”¨ã€‚è‡ªåŠ¨å‘ç°æœåŠ¡ï¼Œè¿è¿ç»´é…ç½® nginxçš„å·¥ä½œéƒ½çœäº†ï¼ŒæŠŠè¿ç»´çš„å·¥èµ„ç»™ä½ ï¼Œç¾æ»‹æ»‹ã€‚\nå…¬å¸å…¥å£ç½‘å…³ï¼ˆå¼€æ”¾å¹³å°ï¼‰  å¦‚æœä¸€ä¸ªå…¬å¸è¦åšå¼€æ”¾å¹³å°æˆ–è€…å…¥å£ç½‘å…³ï¼Œé‰´æƒï¼Œé™æµï¼Œç›‘æ§ï¼Œç†”æ–­è‚¯å®šå°‘ä¸äº†ã€‚\n å¦‚æœè´µå…¬å¸æ˜¯dubboä½“ç³»ï¼Œå¼€å‘äººå‘˜å†™äº†dubboæœåŠ¡åï¼Œè¿˜è¦å‚»ä¹ä¹çš„æ–°å¢ä¸€ä¸ªwebé¡¹ç›®ï¼Œæ¥æä¾›æ¥å£ç»™åˆ«äººè°ƒç”¨å—ï¼Ÿ\n å¦‚æœä¸€ä¸ªæ¥å£è¢«æ”»å‡»ï¼Œä½ æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå¦‚æœè¢«å¤§æµé‡æ”»å‡»ï¼Œä½ æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\n ä¸å·§ï¼Œsoul åœ¨è®¾è®¡ä¹‹åˆå°±æ˜¯æ¥å¹²è¿™ç§äº‹æƒ…çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ•´ä½“çš„æ¶æ„å›¾ã€‚\n  é›¶é›¶æ€»æ€»è¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½  æ¯”å¦‚æ”¯æŒ websocket ä»£ç†ã€‚ æ¯”å¦‚æ”¯æŒæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€‚\n æ¯”å¦‚ä½ å¯ä»¥è‡ªå®šä¹‰çš„å¼€å‘ä½ çš„æ’ä»¶å•Šã€‚\n  æœ€åæœ€å  githubåœ°å€ ï¼šhttps://github.com/Dromara/soul\n giteeåœ°å€ ï¼šhttps://gitee.com/dromara/soul\n æ–‡æ¡£ï¼šhttps://dromara.org/zh-cn/docs/soul/soul.html\n æ¬¢è¿å¤§å®¶å…³æ³¨ï¼Œå¦‚æœè´µå…¬å¸æœ‰ä½¿ç”¨åˆ°ï¼Œæˆ–è€…éœ€è¦å­¦ä¹ äº¤æµï¼Œæˆ–è€…æä¾›ä»£ç å‚ä¸å¼€å‘çš„æœ‹å‹ä¹Ÿå¯ä»¥åŠ ç¾¤æ¥è¿›è¡Œè®¨è®º ï¼Œqqç¾¤ï¼ˆ429951241ï¼‰\n æœ€å 3.0 å·²ç»åœ¨è¿›è¡Œå¼€æºäº†ï¼Œ3.0æ˜¯ç»å†è¿‡2å¹´åŒ11å¤§å¹¶å‘åœºæ™¯éªŒè¯è¿‡çš„ï¼Œç°åœ¨ä¸€æ­¥ä¸€æ­¥å°†å®ƒå¼€æºå‡ºæ¥ï¼Œå¸Œæœ›ç»™å¤§å®¶å¸¦æ¥å¸®åŠ©.\n  ","date":1576108800,"description":"â€‹Soulç½‘å…³å‘å¸ƒ2.1.Xä¹‹åï¼Œå®ƒåˆ°åº•æœ‰å¤šæ–¹ä¾¿ï¼Ÿ","dir":"community/soul-2.1.x/","fuzzywordcount":2000,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"63553c4bfe2f18da1e6e15f45c9e1ffbd3845ea5","permalink":"/zh/community/soul-2.1.x/","publishdate":"2019-12-12T00:00:00Z","readingtime":4,"relpermalink":"/zh/community/soul-2.1.x/","summary":"Soul ç½‘å…³è‡ªä»å»å¹´10æœˆæˆ‘å¼€æºä»¥æ¥ï¼Œç»å†äº†ä¸€å¹´çš„äº‹æƒ…ï¼Œæ¥å—åˆ°äº†æ¥è‡ªç¤¾åŒºå¾ˆå¤šæœ‹å‹çš„å»ºè®®ï¼Œå¹¶è¿›è¡ŒæŒç»­ä¸æ–­çš„ä¼˜åŒ–ï¼Œå·²ç»æä¾›äº†éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½","tags":["Soul"],"title":"Soulç½‘å…³å‘å¸ƒçš„2.1.Xç‰ˆæœ¬ï¼Œåˆ°åº•æœ‰å¤šæ–¹ä¾¿ï¼Ÿ","type":"community","url":"/zh/community/soul-2.1.x/","wordcount":1992},{"author":"xiaoyu","categories":"Soul","content":" Soul Gateway released version 1.0.4-RELEASE  Fix the bug that appeared in the Soul-admin of version 1.0.3. The serialization method supports custom extensions. The default serialization method has been changed from Kroy to Java serialization method. Dubbo support.  Changes Dubbo usage  In the previous version (1.0.2 or 1.0.3), the parameters of Dubbo are passed through the header, and in the 1.0.4 version it is passed through the body.\n Relevant document information has been updated.\n  Recommendations on using version 1.0.4  Version 1.0.4 supports user-defined plug-in, and supports regular expression matching.\n The change of Dubbo parameter transfer and it would be more friendly to use.\n  If you used version 1.0.2 before and want to update to version 1.0.4.  Add role field in the plug-in table.\n Restart the Soul-admin of version 1.0.4.\n Perform synchronization of all plug-ins (because of serialization changes)\n Start the soul-web service of version 1.0.4.\n  For more information  QQ group: 429951241\n Official website document: https://dromara.org/website/zh-cn/docs/soul/soul.html\n Github: https://github.com/Dromara/soul\n Gitee: https://gitee.com/dromara/soul\n  ","date":1554768000,"description":"Soul Gateway released version 1.0.4-RELEASE","dir":"community/soul-1.0.4/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"7949c80c769c885bd142edd4105de9f81b198c3f","permalink":"/community/soul-1.0.4/","publishdate":"2019-04-09T00:00:00Z","readingtime":1,"relpermalink":"/community/soul-1.0.4/","summary":"Soul Gateway released version 1.0.4-RELEASE  Fix the bug that appeared in the Soul-admin of version 1.0.3. The serialization method supports custom extensions. The default serialization method has been changed from Kroy to Java serialization method. Dubbo support.  Changes Dubbo usage  In the previous version (1.0.2 or 1.0.3), the parameters of Dubbo are passed through the header, and in the 1.0.4 version it is passed through the body.","tags":["Soul"],"title":"Soul Gateway released version 1.0.4-RELEASE","type":"community","url":"/community/soul-1.0.4/","wordcount":158},{"author":"xiaoyu","categories":"Soul","content":" Soulç½‘å…³å‘å¸ƒ1.0.4-RELEASEç‰ˆæœ¬  ä¿®å¤åœ¨1.0.3ç‰ˆæœ¬çš„åå°ç®¡ç†ä¸­ï¼Œå‡ºç°çš„bugã€‚ é…ç½®ä¿¡æ¯åºåˆ—åŒ–æ–¹å¼æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ã€‚é»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ç”±kroy æ”¹ä¸ºäº†javaåºåˆ—åŒ–æ–¹å¼ã€‚ dubboæ¡†æ¶æ”¯æŒçš„æ›´æ”¹ã€‚  å¯¹dubboç”¨æˆ·ä½¿ç”¨çš„æ›´æ”¹ã€‚  åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼ˆ1.0.2 or 1.0.3ï¼‰ï¼Œdubboçš„å‚æ•°æ˜¯é€šè¿‡headerå¤´ä¸Šä¼ é€’ï¼Œåœ¨1.0.4ç‰ˆæœ¬ä¸­æ˜¯é€šè¿‡bodyä¼ é€’\n æ›´æ–°äº†ç›¸å…³çš„æ–‡æ¡£ä¿¡æ¯ã€‚\n  å…³äºä½¿ç”¨1.0.4ç‰ˆæœ¬çš„å»ºè®®ã€‚  1.0.4 ç‰ˆæœ¬æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶å¼€å‘ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚\n dubboå‚æ•°ä¼ é€’çš„æ›´æ”¹ï¼Œæˆ‘è§‰å¾—è¿™æ ·ä¼šæ›´åŠ å‹å¥½ã€‚\n  å¦‚æœæ‚¨ä¹‹å‰ä½¿ç”¨çš„1.0.2ç‰ˆæœ¬ï¼Œæƒ³è¦æ›´æ–°åˆ°1.0.4ç‰ˆæœ¬ã€‚  åœ¨æ’ä»¶è¡¨æ–°å¢roleå­—æ®µã€‚\n é‡æ–°å¯åŠ¨1.0.4ç‰ˆæœ¬çš„ç®¡ç†åå°ã€‚\n æ‰§è¡ŒåŒæ­¥æ‰€æœ‰æ’ä»¶ï¼ˆå› ä¸ºåºåˆ—åŒ–æ–¹å¼çš„æ›´æ”¹ï¼‰\n å¯åŠ¨1.0.4ç‰ˆæœ¬çš„soul-webæœåŠ¡ã€‚\n  é‡åˆ°é—®é¢˜ï¼Ÿ  æ·»åŠ qqç¾¤ï¼ˆ429951241ï¼‰\n å®˜ç½‘æ–‡æ¡£ï¼šhttps://dromara.org/website/zh-cn/docs/soul/soul.html\n githubåœ°å€: https://github.com/Dromara/soul\n giteeåœ°å€ï¼š https://gitee.com/dromara/soul\n  ","date":1554768000,"description":"Soulç½‘å…³å‘å¸ƒ1.0.4-RELEASEç‰ˆæœ¬","dir":"community/soul-1.0.4/","fuzzywordcount":500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"81e460f518d6e8f1651b4de4816341372eaeb619","permalink":"/zh/community/soul-1.0.4/","publishdate":"2019-04-09T00:00:00Z","readingtime":1,"relpermalink":"/zh/community/soul-1.0.4/","summary":"Soulç½‘å…³å‘å¸ƒ1.0.4-RELEASEç‰ˆæœ¬ ä¿®å¤åœ¨1.0.3ç‰ˆæœ¬çš„åå°ç®¡ç†ä¸­ï¼Œå‡ºç°çš„bugã€‚ é…ç½®ä¿¡æ¯åºåˆ—åŒ–æ–¹å¼æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ã€‚é»˜è®¤çš„åºåˆ—åŒ–","tags":["Soul"],"title":"Soulç½‘å…³å‘å¸ƒ1.0.4-RELEASEç‰ˆæœ¬","type":"community","url":"/zh/community/soul-1.0.4/","wordcount":452},{"author":"xiaoyu","categories":"hmily","content":" Hmily released 2.0.2-Release  Resolved the issue of SpringCloud using Hystrix to configure thread pool. New issue with SpringCloud embedded transaction calls.\n Added Hmily load balancing strategy.\n Other bug fixes and code optimizations.\n Remove unnecessary third-party JAR packages.\n Introduction of zero intrusion mode.\n  Hmily\u0026amp;rsquo;s support for the popular RPC framework and Spring.  Dubbo 2.7.0 for all versions below. SpringCloud Dalston and above, including support for Finchley and Greenwich\n All versions of Motan.\n All Spring versions up to 3.0.\n  Hmily has a load-balancing policy for user RPC clusters in version 2.0.2.  Hmily provides its own implementation of the load-balancing strategy, only for interfaces with @Hmily added  Dubbo cluster configuration with loadbalance=\u0026amp;ldquo;hmily\u0026amp;rdquo;\n\u0026amp;lt;dubbo:reference timeout=\u0026amp;quot;50000\u0026amp;quot; interface=\u0026amp;quot;org.dromara.hmily.demo.dubbo.account.api.service.AccountService\u0026amp;quot; id=\u0026amp;quot;accountService\u0026amp;quot; retries=\u0026amp;quot;0\u0026amp;quot; check=\u0026amp;quot;false\u0026amp;quot; actives=\u0026amp;quot;20\u0026amp;quot; loadbalance=\u0026amp;quot;hmily\u0026amp;quot;/\u0026amp;gt;  Spring Cloud added to the caller\u0026amp;rsquo;s YML configuration file:\nhmily ï¼š ribbon: rule enabled : true  Documents  Official document: https://dromara.org/website/zh-cn/docs/hmily/index.html\n Github: https://github.com/yu199195/hmily\n Gitee: https://gitee.com/dromara/hmily\n  Welcome to Star Fork, provide excellent code and suggestions.\n","date":1554422400,"description":"Hmily released 2.0.2-Release","dir":"community/hmily-2.0.2/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"63b9799a6f8166c12b76bce655175f69a925057b","permalink":"/community/hmily-2.0.2/","publishdate":"2019-04-05T00:00:00Z","readingtime":1,"relpermalink":"/community/hmily-2.0.2/","summary":"Hmily released 2.0.2-Release  Resolved the issue of SpringCloud using Hystrix to configure thread pool. New issue with SpringCloud embedded transaction calls.\n Added Hmily load balancing strategy.\n Other bug fixes and code optimizations.\n Remove unnecessary third-party JAR packages.\n Introduction of zero intrusion mode.\n  Hmily\u0026rsquo;s support for the popular RPC framework and Spring.  Dubbo 2.7.0 for all versions below. SpringCloud Dalston and above, including support for Finchley and Greenwich","tags":["hmily"],"title":"Hmily released 2.0.2-Release","type":"community","url":"/community/hmily-2.0.2/","wordcount":150},{"author":"xiaoyu","categories":"hmily","content":" Hmily å‘å¸ƒ2.0.2-RELEASE ç‰ˆæœ¬  è§£å†³SpringCloud ä½¿ç”¨hystrix é…ç½®çº¿ç¨‹æ± ç­–ç•¥çš„é—®é¢˜ã€‚\n æ–°å¢å¯¹springcloud å†…åµŒäº‹åŠ¡è°ƒç”¨çš„é—®é¢˜ã€‚\n æ–°å¢Hmilyè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚\n å…¶ä»–bugçš„ä¿®æŠ¤ï¼Œä¸ä»£ç çš„ä¼˜åŒ–ã€‚\n å»é™¤ä¸å¿…é¡»çš„ç¬¬ä¸‰æ–¹jaråŒ…ã€‚\n é›¶ä¾µå…¥æ–¹å¼çš„å¼•å…¥ã€‚\n  Hmilyå¯¹ç°åœ¨æµè¡ŒRPCæ¡†æ¶ä»¥åŠSpringçš„æ”¯æŒæƒ…å†µã€‚  dubbo 2.7.0ä»¥ä¸‹æ‰€æœ‰ç‰ˆæœ¬ã€‚\n Springcloud Dalstonä»¥ä¸Šç‰ˆæœ¬ï¼ŒåŒ…æ‹¬æ”¯æŒç°åœ¨çš„Finchley ä¸ Greenwich\n Motan æ‰€æœ‰ç‰ˆæœ¬ã€‚\n 3.0ä»¥ä¸Šæ‰€æœ‰Springç‰ˆæœ¬ã€‚\n  Hmily åœ¨2.0.2ç‰ˆæœ¬å¯¹ä½¿ç”¨è€…RPCé›†ç¾¤æ—¶å€™è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚  hmilyæä¾›äº†è‡ªå·±å®ç°çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œåªæ˜¯é’ˆå¯¹åŠ äº†@Hmilyçš„æ¥å£  dubbo é›†ç¾¤é…ç½®,é…ç½®è´Ÿè½½æ–¹å¼ä¸ºï¼šloadbalance=\u0026amp;ldquo;hmily\u0026amp;rdquo;\n\u0026amp;lt;dubbo:reference timeout=\u0026amp;quot;50000\u0026amp;quot; interface=\u0026amp;quot;org.dromara.hmily.demo.dubbo.account.api.service.AccountService\u0026amp;quot; id=\u0026amp;quot;accountService\u0026amp;quot; retries=\u0026amp;quot;0\u0026amp;quot; check=\u0026amp;quot;false\u0026amp;quot; actives=\u0026amp;quot;20\u0026amp;quot; loadbalance=\u0026amp;quot;hmily\u0026amp;quot;/\u0026amp;gt;  Springcloud åœ¨è°ƒç”¨æ–¹çš„ymlé…ç½®æ–‡ä»¶ä¸­æ–°å¢ï¼š\nhmily ï¼š ribbon: rule enabled : true  Hmilyçš„å…·ä½“ä½¿ç”¨æ–‡æ¡£ï¼š  å®˜ç½‘æ–‡æ¡£ ï¼šhttps://dromara.org/website/zh-cn/docs/hmily/index.html\n githubåœ°å€: https://github.com/yu199195/hmily\n giteeåœ°å€ï¼š https://gitee.com/dromara/hmily\n æ¬¢è¿å¤§å®¶star fork ï¼Œæä¾›ä¼˜ç§€çš„ä»£ç ä¸å»ºè®®ã€‚\n  ","date":1554422400,"description":"Hmilyå‘å¸ƒ2.0.2-RELEASEç‰ˆæœ¬","dir":"community/hmily-2.0.2/","fuzzywordcount":500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"16c3ba810bac7a102748180493562f2e1ce13371","permalink":"/zh/community/hmily-2.0.2/","publishdate":"2019-04-05T00:00:00Z","readingtime":1,"relpermalink":"/zh/community/hmily-2.0.2/","summary":"Hmily å‘å¸ƒ2.0.2-RELEASE ç‰ˆæœ¬ è§£å†³SpringCloud ä½¿ç”¨hystrix é…ç½®çº¿ç¨‹æ± ç­–ç•¥çš„é—®é¢˜ã€‚ æ–°å¢å¯¹springcloud å†…åµŒäº‹åŠ¡è°ƒ","tags":["hmily"],"title":"Hmilyå‘å¸ƒ2.0.2-RELEASEç‰ˆæœ¬","type":"community","url":"/zh/community/hmily-2.0.2/","wordcount":474},{"author":"xiaoyu","categories":"hmily","content":" Hmilyé«˜å¹¶å‘äº‹åŠ¡å¤„ç† å¼€å§‹å…ˆæ‰“ä¸ªå°å°çš„å¹¿å‘Š Hmilyåœ¨å‚å¼€æºä¸­å›½å¹´åº¦å—æ¬¢è¿æŠ•ç¥¨ https://www.oschina.net/project/top_cn_2018?origin=zhzd ç‚¹å‡»é“¾æ¥ï¼Œæœç´¢Hmilyå¸®å¿™æŠ•ä¸‹ç¥¨,åœ¨ç¬¬11æ¨ªæ’ç¬¬äºŒä¸ªï¼Œæ„Ÿè°¢å¤§å®¶ï¼ ä¹Ÿæ¬¢è¿å¤§å®¶å…³æ³¨ï¼Œæˆ–è€…æäº¤prï¼Œè®©Hmilyå˜çš„æ›´å¥½ï¼Œæ›´å®Œç¾ã€‚ gitHub: [https://github.com/yu199195/hmily] gitee: [https://gitee.com/dromara/hmily]\næ¥ä¸‹æ¥å›ç­”ä¸€ä¸‹ ç¤¾åŒºçš„ä¸€äº›é—®é¢˜ï¼Œå’Œå¤§å®¶ä¸€äº›ç–‘æƒ‘çš„åœ°æ–¹ï¼\n1. Hmilyçš„æ€§èƒ½é—®é¢˜ï¼Ÿ ç­”ï¼šHmilyæ˜¯é‡‡ç”¨AOPåˆ‡é¢çš„æ–¹å¼ä¸ä½ çš„RPCæ–¹æ³•ç»‘å®šï¼Œæ— éå°±æ˜¯åœ¨ä½ RPCè°ƒç”¨çš„æ—¶å€™ï¼Œä¿å­˜äº†æ—¥å¿—ï¼ˆé€šè¿‡å¼‚æ­¥disruptorï¼‰ï¼Œä¼ é€’äº†ä¸€äº›å‚æ•°ã€‚ç°åœ¨confrimï¼Œcancelä¹Ÿéƒ½ä¸ºå¼‚æ­¥çš„è°ƒç”¨ï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä½ çš„rpcæ€§èƒ½ä¸€æ ·ã€‚è®°ä½Hmilyä¸ç”Ÿäº§äº‹åŠ¡ï¼ŒHmilyåªæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡çš„æ¬è¿å·¥ã€‚ä¹‹å‰Hmilyåœ¨AOPåˆ‡é¢åŠ äº†ä¸€æŠŠé”ï¼Œå¯¼è‡´äº†æ€§èƒ½ä¸‹é™ï¼Œä¹Ÿå°±æ˜¯Spring cloud ä¸­å›½ç¤¾åŒºåšçš„é‚£ç¯‡æ–‡ç« ã€‚ç°åœ¨å·²ç»å…¨éƒ¨ä¿®å¤ï¼Œå¹¶ä¸”å…¨éƒ¨å¼‚æ­¥åŒ–ã€‚å…¶å®é‚£ä¹ˆæµ‹è¯•æ—¶ä¸åˆç†çš„ï¼Œå› ä¸ºæ˜¯å‹æµ‹çš„demoï¼Œéƒ½æ˜¯é»˜è®¤çš„é…ç½®ã€‚ä¸‹æ–‡æˆ‘ä¼šè®²è§£ï¼Œæ€ä¹ˆæ ·æ‰èƒ½æé«˜Hmiyæ€§èƒ½ã€‚\n2. å…³äºRPCè°ƒç”¨è¶…æ—¶Hmilyæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ ç­”ï¼š æˆ‘ä»¬æ”¯æŒåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­è°ƒç”¨ä¸€ä¸ªRPCæ–¹æ³•ï¼Œå¦‚æœè¶…æ—¶äº†ã€‚æ¯”å¦‚dubboè®¾ç½®çš„è¶…æ—¶æ—¶é—´æ˜¯100ms,å¯èƒ½ä½ çš„æ–¹æ³•ç”¨äº†140ms,ä½†æ˜¯ä½ çš„æ–¹æ³•æ˜¯æ‰§è¡ŒæˆåŠŸäº†çš„ã€‚ä½†æ˜¯å¯¹è°ƒç”¨æ–¹æ¥è¯´ï¼Œä½ æ˜¯å¤±è´¥çš„ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦å›æ»šã€‚æ‰€ä»¥Hmilyçš„åšæ³•æ˜¯ã€‚è°ƒç”¨è€…è®¤ä¸ºä½ æ˜¯å¤±è´¥çš„ï¼Œä¸ä¼šå°†åŠ å…¥çš„å›æ»šè°ƒç”¨é“¾æ¡ä¸­ã€‚å› æ­¤è¶…æ—¶çš„rpcæ¥å£æ–¹ï¼Œè¿›è¡Œè‡ªèº«çš„å›æ»šã€‚ä¼šæœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ¥è¿›è¡Œå›æ»šï¼Œå› ä¸ºæ—¥å¿—çŠ¶æ€æ˜¯tryé˜¶æ®µï¼Œä¼šè°ƒç”¨cancelæ–¹æ³•è¿›è¡Œå›æ»šï¼Œä»è€Œåˆ°è¾¾æœ€ç»ˆä¸€è‡´æ€§ï¼\n3.Hmilyæ”¯æŒé›†ç¾¤éƒ¨ç½²çš„é—®é¢˜ï¼Ÿä»¥åŠé›†ç¾¤ç¯å¢ƒä¸­ï¼Œå®šæ—¶ä»»åŠ¡æ—¥å¿—æ¢å¤çš„é—®é¢˜ï¼Ÿ ç­”ï¼šHmilyæ˜¯å’Œä½ çš„åº”ç”¨AOPåˆ‡é¢ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œå¤©ç„¶æ”¯æŒé›†ç¾¤ã€‚é›†ç¾¤ç¯å¢ƒä¸­å®šæ—¶æ¢å¤é—®é¢˜ï¼Œå…¶å®å‡ ä¹æ²¡æœ‰ï¼Œé™¤éä½ çš„é›†ç¾¤åŒæ—¶ä¸€ä¸‹æŒ‚æ‰ï¼Œæ‰ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚å½“ä½ é›†ç¾¤åŒæ—¶æŒ‚æ‰ï¼Œåœ¨æ¢å¤çš„æ—¶å€™ï¼Œæ—¥å¿—ä¼šæœ‰ä¸€ä¸ªversionå­—æ®µï¼Œæ›´æ–°æˆåŠŸçš„ï¼Œæ‰ä¼šå»è¿›è¡Œæ¢å¤ã€‚\n4.Hmilyæ˜¯å¼‚æ­¥ä¿å­˜æ—¥å¿—çš„ï¼Œé‚£ä¹ˆå¾ˆæç«¯æƒ…å†µä¸‹ï¼ˆä»£ç åˆšå¥½æ‰§è¡Œåˆ°è¿™ä¸€è¡Œ,ç„¶åjvmé€€å‡ºï¼Œæ–­ç”µå•¦ä»€ä¹ˆçš„ï¼‰ï¼Œæ—¥å¿—è¿˜æ²¡ä¿å­˜é‚£æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ ç­”:è¿™ç§æƒ³æ³•çš„ï¼Œè‚¯å®šæ˜¯æ²¡çœ‹æºç ï¼Œæˆ–è€…æ˜¯çœ‹äº†æ²¡æ€ä¹ˆçœ‹æ‡‚ã€‚åœ¨AOPåˆ‡é¢ä¸­ï¼Œä¼šå…ˆè¿›è¡Œæ—¥å¿—çš„å¼‚æ­¥ä¿å­˜ï¼Œæ³¨æ„çŠ¶æ€æ˜¯PRE_TRYã€‚åœ¨tryæ‰§è¡Œå®Œæˆåï¼Œæ›´æ–°ä¸ºtryã€‚å°±ç®—å­˜åœ¨å¯èƒ½ä½ è¯´çš„ä»€ä¹ˆæ–­ç”µï¼Œä»€ä¹ˆä½ åœ¨æ‰“æ–­ç”µè°ƒè¯•ï¼Œç„¶åkillæœåŠ¡ä¹‹ç±»çš„ã€‚ï¼ˆMysqlæˆ‘éƒ½å¯ä»¥è®©ä»–äº‹åŠ¡å¤±æ•ˆï¼Œä½ ä¿¡ä¸ä¿¡ï¼Ÿï¼‰æˆ‘åªèƒ½è¯´ï¼Œä¸è¦èŠ±å¤§åŠ›æ°”å»è§£å†³é‚£äº›å¶ç„¶çš„äº‹æƒ…ï¼Œæœ€å¥½çš„è§£å†³åŠæ³•æ˜¯ä¸è§£å†³å®ƒã€‚ Hmilyé’ˆå¯¹é«˜å¹¶å‘æ—¶å€™çš„å‚æ•°é…ç½®è°ƒä¼˜ã€‚ å¯èƒ½è¿™éƒ¨é—¨å†…å®¹é’ˆå¯¹ç†Ÿæ‚‰Hmilyçš„äººæ¥è¯´ï¼Œä¸ç†Ÿæ‚‰çš„ä¹Ÿæ²¡å…³ç³»ã€‚ç›´æ¥ä¸Šgithubä¸Šçœ‹ç›¸å…³æ–‡æ¡£å°±å¥½ã€‚ hmilyæ”¯æŒSpring bean xml æ–¹å¼çš„é…ç½®ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒspring boot start ymlæ–¹å¼çš„é…ç½®ã€‚\n\u0026amp;lt;bean id=\u0026amp;quot;hmilyTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.hmily.tcc.core.bootstrap.HmilyTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;recoverDelayTime\u0026amp;quot; value=\u0026amp;quot;120\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;retryMax\u0026amp;quot; value=\u0026amp;quot;3\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;loadFactor\u0026amp;quot; value=\u0026amp;quot;2\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;scheduledDelay\u0026amp;quot; value=\u0026amp;quot;120\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;scheduledThreadMax\u0026amp;quot; value=\u0026amp;quot;4\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;bufferSize\u0026amp;quot; value=\u0026amp;quot;4096\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;consumerThreads\u0026amp;quot; value=\u0026amp;quot;32\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;started\u0026amp;quot; value=\u0026amp;quot;false\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;asyncThreads\u0026amp;quot; value=\u0026amp;quot;32\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;tccDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.hmily.tcc.common.config.TccDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tcc?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   serializer :è¿™é‡Œæˆ‘æ¨èä½¿ç”¨æ˜¯kroyã€‚å½“ç„¶hmilyä¹Ÿæ”¯æŒhessian,protostuff,jdkã€‚åœ¨æˆ‘ä»¬æµ‹è¯•ä¸­è¡¨ç°ä¸º: kroy\u0026amp;gt;hessian\u0026amp;gt;protostuff\u0026amp;gt;jdk\n recoverDelayTime :å®šæ—¶ä»»åŠ¡å»¶è¿Ÿæ—¶é—´ï¼ˆå•ä½æ˜¯ç§’ï¼Œé»˜è®¤120ã€‚è¿™ä¸ªå‚æ•°åªæ˜¯è¦å¤§äºä½ çš„rpcè°ƒç”¨çš„è¶…æ—¶æ—¶é—´è®¾ç½®ã€‚\n retryMax : æœ€å¤§é‡å¤æ¬¡æ•°ï¼Œé»˜è®¤3æ¬¡ã€‚å½“ä½ çš„æœåŠ¡downæœºï¼Œå®šæ—¶ä»»åŠ¡ä¼šæ‰§è¡ŒretryMaxæ¬¡æ•°å»æ‰§è¡Œä½ çš„cancelè¿˜æ˜¯confrimã€‚ â€¦","date":1542153600,"description":"Hmily Configuration Optimization For High Concurrent Transactions","dir":"blog/hmily_current/","fuzzywordcount":1900,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"fb9a120decfa23beef7c28949e3a54748f40bbab","permalink":"/blog/hmily_current/","publishdate":"2018-11-14T00:00:00Z","readingtime":4,"relpermalink":"/blog/hmily_current/","summary":"Hmilyé«˜å¹¶å‘äº‹åŠ¡å¤„ç† å¼€å§‹å…ˆæ‰“ä¸ªå°å°çš„å¹¿å‘Š Hmilyåœ¨å‚å¼€æºä¸­å›½å¹´åº¦å—æ¬¢è¿æŠ•ç¥¨ https://www.oschina.net/project/top_cn_2018?origin=zhzd ç‚¹å‡»é“¾æ¥ï¼Œæœç´¢Hmilyå¸®å¿™æŠ•ä¸‹ç¥¨,åœ¨ç¬¬11æ¨ªæ’ç¬¬äºŒä¸ªï¼Œæ„Ÿ","tags":["hmily"],"title":"Hmily: Easy Handle Highly Concurrent Distributed Transactions","type":"blog","url":"/blog/hmily_current/","wordcount":1864},{"author":"xiaoyu","categories":"hmily","content":" Hmilyé«˜å¹¶å‘äº‹åŠ¡å¤„ç† å¼€å§‹å…ˆæ‰“ä¸ªå°å°çš„å¹¿å‘Š Hmilyåœ¨å‚å¼€æºä¸­å›½å¹´åº¦å—æ¬¢è¿æŠ•ç¥¨ https://www.oschina.net/project/top_cn_2018?origin=zhzd ç‚¹å‡»é“¾æ¥ï¼Œæœç´¢Hmilyå¸®å¿™æŠ•ä¸‹ç¥¨,åœ¨ç¬¬11æ¨ªæ’ç¬¬äºŒä¸ªï¼Œæ„Ÿè°¢å¤§å®¶ï¼ ä¹Ÿæ¬¢è¿å¤§å®¶å…³æ³¨ï¼Œæˆ–è€…æäº¤prï¼Œè®©Hmilyå˜çš„æ›´å¥½ï¼Œæ›´å®Œç¾ã€‚ gitHub: [https://github.com/yu199195/hmily] gitee: [https://gitee.com/dromara/hmily]\næ¥ä¸‹æ¥å›ç­”ä¸€ä¸‹ ç¤¾åŒºçš„ä¸€äº›é—®é¢˜ï¼Œå’Œå¤§å®¶ä¸€äº›ç–‘æƒ‘çš„åœ°æ–¹ï¼\n1. Hmilyçš„æ€§èƒ½é—®é¢˜ï¼Ÿ ç­”ï¼šHmilyæ˜¯é‡‡ç”¨AOPåˆ‡é¢çš„æ–¹å¼ä¸ä½ çš„RPCæ–¹æ³•ç»‘å®šï¼Œæ— éå°±æ˜¯åœ¨ä½ RPCè°ƒç”¨çš„æ—¶å€™ï¼Œä¿å­˜äº†æ—¥å¿—ï¼ˆé€šè¿‡å¼‚æ­¥disruptorï¼‰ï¼Œä¼ é€’äº†ä¸€äº›å‚æ•°ã€‚ç°åœ¨confrimï¼Œcancelä¹Ÿéƒ½ä¸ºå¼‚æ­¥çš„è°ƒç”¨ï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä½ çš„rpcæ€§èƒ½ä¸€æ ·ã€‚è®°ä½Hmilyä¸ç”Ÿäº§äº‹åŠ¡ï¼ŒHmilyåªæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡çš„æ¬è¿å·¥ã€‚ä¹‹å‰Hmilyåœ¨AOPåˆ‡é¢åŠ äº†ä¸€æŠŠé”ï¼Œå¯¼è‡´äº†æ€§èƒ½ä¸‹é™ï¼Œä¹Ÿå°±æ˜¯Spring cloud ä¸­å›½ç¤¾åŒºåšçš„é‚£ç¯‡æ–‡ç« ã€‚ç°åœ¨å·²ç»å…¨éƒ¨ä¿®å¤ï¼Œå¹¶ä¸”å…¨éƒ¨å¼‚æ­¥åŒ–ã€‚å…¶å®é‚£ä¹ˆæµ‹è¯•æ—¶ä¸åˆç†çš„ï¼Œå› ä¸ºæ˜¯å‹æµ‹çš„demoï¼Œéƒ½æ˜¯é»˜è®¤çš„é…ç½®ã€‚ä¸‹æ–‡æˆ‘ä¼šè®²è§£ï¼Œæ€ä¹ˆæ ·æ‰èƒ½æé«˜Hmiyæ€§èƒ½ã€‚\n2. å…³äºRPCè°ƒç”¨è¶…æ—¶Hmilyæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ ç­”ï¼š æˆ‘ä»¬æ”¯æŒåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­è°ƒç”¨ä¸€ä¸ªRPCæ–¹æ³•ï¼Œå¦‚æœè¶…æ—¶äº†ã€‚æ¯”å¦‚dubboè®¾ç½®çš„è¶…æ—¶æ—¶é—´æ˜¯100ms,å¯èƒ½ä½ çš„æ–¹æ³•ç”¨äº†140ms,ä½†æ˜¯ä½ çš„æ–¹æ³•æ˜¯æ‰§è¡ŒæˆåŠŸäº†çš„ã€‚ä½†æ˜¯å¯¹è°ƒç”¨æ–¹æ¥è¯´ï¼Œä½ æ˜¯å¤±è´¥çš„ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦å›æ»šã€‚æ‰€ä»¥Hmilyçš„åšæ³•æ˜¯ã€‚è°ƒç”¨è€…è®¤ä¸ºä½ æ˜¯å¤±è´¥çš„ï¼Œä¸ä¼šå°†åŠ å…¥çš„å›æ»šè°ƒç”¨é“¾æ¡ä¸­ã€‚å› æ­¤è¶…æ—¶çš„rpcæ¥å£æ–¹ï¼Œè¿›è¡Œè‡ªèº«çš„å›æ»šã€‚ä¼šæœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ¥è¿›è¡Œå›æ»šï¼Œå› ä¸ºæ—¥å¿—çŠ¶æ€æ˜¯tryé˜¶æ®µï¼Œä¼šè°ƒç”¨cancelæ–¹æ³•è¿›è¡Œå›æ»šï¼Œä»è€Œåˆ°è¾¾æœ€ç»ˆä¸€è‡´æ€§ï¼\n3.Hmilyæ”¯æŒé›†ç¾¤éƒ¨ç½²çš„é—®é¢˜ï¼Ÿä»¥åŠé›†ç¾¤ç¯å¢ƒä¸­ï¼Œå®šæ—¶ä»»åŠ¡æ—¥å¿—æ¢å¤çš„é—®é¢˜ï¼Ÿ ç­”ï¼šHmilyæ˜¯å’Œä½ çš„åº”ç”¨AOPåˆ‡é¢ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œå¤©ç„¶æ”¯æŒé›†ç¾¤ã€‚é›†ç¾¤ç¯å¢ƒä¸­å®šæ—¶æ¢å¤é—®é¢˜ï¼Œå…¶å®å‡ ä¹æ²¡æœ‰ï¼Œé™¤éä½ çš„é›†ç¾¤åŒæ—¶ä¸€ä¸‹æŒ‚æ‰ï¼Œæ‰ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚å½“ä½ é›†ç¾¤åŒæ—¶æŒ‚æ‰ï¼Œåœ¨æ¢å¤çš„æ—¶å€™ï¼Œæ—¥å¿—ä¼šæœ‰ä¸€ä¸ªversionå­—æ®µï¼Œæ›´æ–°æˆåŠŸçš„ï¼Œæ‰ä¼šå»è¿›è¡Œæ¢å¤ã€‚\n4.Hmilyæ˜¯å¼‚æ­¥ä¿å­˜æ—¥å¿—çš„ï¼Œé‚£ä¹ˆå¾ˆæç«¯æƒ…å†µä¸‹ï¼ˆä»£ç åˆšå¥½æ‰§è¡Œåˆ°è¿™ä¸€è¡Œ,ç„¶åjvmé€€å‡ºï¼Œæ–­ç”µå•¦ä»€ä¹ˆçš„ï¼‰ï¼Œæ—¥å¿—è¿˜æ²¡ä¿å­˜é‚£æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ ç­”:è¿™ç§æƒ³æ³•çš„ï¼Œè‚¯å®šæ˜¯æ²¡çœ‹æºç ï¼Œæˆ–è€…æ˜¯çœ‹äº†æ²¡æ€ä¹ˆçœ‹æ‡‚ã€‚åœ¨AOPåˆ‡é¢ä¸­ï¼Œä¼šå…ˆè¿›è¡Œæ—¥å¿—çš„å¼‚æ­¥ä¿å­˜ï¼Œæ³¨æ„çŠ¶æ€æ˜¯PRE_TRYã€‚åœ¨tryæ‰§è¡Œå®Œæˆåï¼Œæ›´æ–°ä¸ºtryã€‚å°±ç®—å­˜åœ¨å¯èƒ½ä½ è¯´çš„ä»€ä¹ˆæ–­ç”µï¼Œä»€ä¹ˆä½ åœ¨æ‰“æ–­ç”µè°ƒè¯•ï¼Œç„¶åkillæœåŠ¡ä¹‹ç±»çš„ã€‚ï¼ˆMysqlæˆ‘éƒ½å¯ä»¥è®©ä»–äº‹åŠ¡å¤±æ•ˆï¼Œä½ ä¿¡ä¸ä¿¡ï¼Ÿï¼‰æˆ‘åªèƒ½è¯´ï¼Œä¸è¦èŠ±å¤§åŠ›æ°”å»è§£å†³é‚£äº›å¶ç„¶çš„äº‹æƒ…ï¼Œæœ€å¥½çš„è§£å†³åŠæ³•æ˜¯ä¸è§£å†³å®ƒã€‚ Hmilyé’ˆå¯¹é«˜å¹¶å‘æ—¶å€™çš„å‚æ•°é…ç½®è°ƒä¼˜ã€‚ å¯èƒ½è¿™éƒ¨é—¨å†…å®¹é’ˆå¯¹ç†Ÿæ‚‰Hmilyçš„äººæ¥è¯´ï¼Œä¸ç†Ÿæ‚‰çš„ä¹Ÿæ²¡å…³ç³»ã€‚ç›´æ¥ä¸Šgithubä¸Šçœ‹ç›¸å…³æ–‡æ¡£å°±å¥½ã€‚ hmilyæ”¯æŒSpring bean xml æ–¹å¼çš„é…ç½®ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒspring boot start ymlæ–¹å¼çš„é…ç½®ã€‚\n\u0026amp;lt;bean id=\u0026amp;quot;hmilyTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.hmily.tcc.core.bootstrap.HmilyTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;recoverDelayTime\u0026amp;quot; value=\u0026amp;quot;120\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;retryMax\u0026amp;quot; value=\u0026amp;quot;3\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;loadFactor\u0026amp;quot; value=\u0026amp;quot;2\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;scheduledDelay\u0026amp;quot; value=\u0026amp;quot;120\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;scheduledThreadMax\u0026amp;quot; value=\u0026amp;quot;4\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;bufferSize\u0026amp;quot; value=\u0026amp;quot;4096\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;consumerThreads\u0026amp;quot; value=\u0026amp;quot;32\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;started\u0026amp;quot; value=\u0026amp;quot;false\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;asyncThreads\u0026amp;quot; value=\u0026amp;quot;32\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;tccDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.hmily.tcc.common.config.TccDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tcc?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   serializer :è¿™é‡Œæˆ‘æ¨èä½¿ç”¨æ˜¯kroyã€‚å½“ç„¶hmilyä¹Ÿæ”¯æŒhessian,protostuff,jdkã€‚åœ¨æˆ‘ä»¬æµ‹è¯•ä¸­è¡¨ç°ä¸º: kroy\u0026amp;gt;hessian\u0026amp;gt;protostuff\u0026amp;gt;jdk\n recoverDelayTime :å®šæ—¶ä»»åŠ¡å»¶è¿Ÿæ—¶é—´ï¼ˆå•ä½æ˜¯ç§’ï¼Œé»˜è®¤120ã€‚è¿™ä¸ªå‚æ•°åªæ˜¯è¦å¤§äºä½ çš„rpcè°ƒç”¨çš„è¶…æ—¶æ—¶é—´è®¾ç½®ã€‚\n retryMax : æœ€å¤§é‡å¤æ¬¡æ•°ï¼Œé»˜è®¤3æ¬¡ã€‚å½“ä½ çš„æœåŠ¡downæœºï¼Œå®šæ—¶ä»»åŠ¡ä¼šæ‰§è¡ŒretryMaxæ¬¡æ•°å»æ‰§è¡Œä½ çš„cancelè¿˜æ˜¯confrimã€‚ â€¦","date":1542153600,"description":"Hmilyé’ˆå¯¹é«˜å¹¶å‘äº‹åŠ¡çš„é…ç½®ä¼˜åŒ–","dir":"blog/hmily_current/","fuzzywordcount":1900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"6cc88ad873f48c3f5810fc5a3e3bcb9edd25c2d2","permalink":"/zh/blog/hmily_current/","publishdate":"2018-11-14T00:00:00Z","readingtime":4,"relpermalink":"/zh/blog/hmily_current/","summary":"Hmilyé«˜å¹¶å‘äº‹åŠ¡å¤„ç† å¼€å§‹å…ˆæ‰“ä¸ªå°å°çš„å¹¿å‘Š Hmilyåœ¨å‚å¼€æºä¸­å›½å¹´åº¦å—æ¬¢è¿æŠ•ç¥¨ https://www.oschina.net/project/top_cn_2018?origin=zhzd ç‚¹å‡»é“¾æ¥ï¼Œæœç´¢Hmilyå¸®å¿™æŠ•ä¸‹ç¥¨,åœ¨ç¬¬11æ¨ªæ’ç¬¬äºŒä¸ªï¼Œæ„Ÿ","tags":["hmily"],"title":"Hmily: è½»æ¾æå®šé«˜å¹¶å‘åˆ†å¸ƒå¼äº‹åŠ¡","type":"blog","url":"/zh/blog/hmily_current/","wordcount":1864},{"author":"xiaoyu","categories":"hmily","content":" Hmilyæ¡†æ¶ç‰¹æ€§[https://github.com/yu199195/hmily]  æ— ç¼é›†æˆSpring,Spring boot startã€‚\n æ— ç¼é›†æˆDubbo,SpringCloud,Motanç­‰rpcæ¡†æ¶ã€‚\n å¤šç§äº‹åŠ¡æ—¥å¿—çš„å­˜å‚¨æ–¹å¼ï¼ˆredisï¼Œmongdb,mysqlç­‰ï¼‰ã€‚\n å¤šç§ä¸åŒæ—¥å¿—åºåˆ—åŒ–æ–¹å¼ï¼ˆKryo,protostuff,hessionï¼‰ã€‚\n äº‹åŠ¡è‡ªåŠ¨æ¢å¤ã€‚\n æ”¯æŒå†…åµŒäº‹åŠ¡çš„ä¾èµ–ä¼ é€’ã€‚\n ä»£ç é›¶ä¾µå…¥,é…ç½®ç®€å•çµæ´»ã€‚   Hmilyä¸ºä»€ä¹ˆè¿™ä¹ˆé«˜æ€§èƒ½ï¼Ÿ 1.é‡‡ç”¨disruptorè¿›è¡Œäº‹åŠ¡æ—¥å¿—çš„å¼‚æ­¥è¯»å†™ï¼ˆdisruptoræ˜¯ä¸€ä¸ªæ— é”ï¼Œæ— GCçš„å¹¶å‘ç¼–ç¨‹æ¡†æ¶ï¼‰ package com.hmily.tcc.core.disruptor.publisher; import com.hmily.tcc.common.bean.entity.TccTransaction; import com.hmily.tcc.common.enums.EventTypeEnum; import com.hmily.tcc.core.concurrent.threadpool.HmilyThreadFactory; import com.hmily.tcc.core.coordinator.CoordinatorService; import com.hmily.tcc.core.disruptor.event.HmilyTransactionEvent; import com.hmily.tcc.core.disruptor.factory.HmilyTransactionEventFactory; import com.hmily.tcc.core.disruptor.handler.HmilyConsumerDataHandler; import com.hmily.tcc.core.disruptor.translator.HmilyTransactionEventTranslator; import com.lmax.disruptor.BlockingWaitStrategy; import com.lmax.disruptor.IgnoreExceptionHandler; import com.lmax.disruptor.RingBuffer; import com.lmax.disruptor.dsl.Disruptor; import com.lmax.disruptor.dsl.ProducerType; import org.springframework.beans.factory.DisposableBean; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; import java.util.concurrent.Executor; import java.util.concurrent.LinkedBlockingQueue; import java.util.concurrent.ThreadPoolExecutor; import java.util.concurrent.TimeUnit; import java.util.concurrent.atomic.AtomicInteger; /** * event publisher. * * @author xiaoyu(Myth) */ @Component public class HmilyTransactionEventPublisher implements DisposableBean { private Disruptor\u0026amp;lt;HmilyTransactionEvent\u0026amp;gt; disruptor; private final CoordinatorService coordinatorService; @Autowired public HmilyTransactionEventPublisher(final CoordinatorService coordinatorService) { this.coordinatorService = coordinatorService; } /** * disruptor start. * * @param bufferSize this is disruptor buffer size. * @param threadSize this is disruptor consumer thread size. */ public void start(final int bufferSize, final int threadSize) { disruptor = new Disruptor\u0026amp;lt;\u0026amp;gt;(new HmilyTransactionEventFactory(), bufferSize, r -\u0026amp;gt; { AtomicInteger index = new AtomicInteger(1); return new Thread(null, r, \u0026amp;quot;disruptor-thread-\u0026amp;quot; + index.getAndIncrement()); }, ProducerType.MULTI, new BlockingWaitStrategy()); final Executor executor = new ThreadPoolExecutor(threadSize, threadSize, 0, TimeUnit.MILLISECONDS, new LinkedBlockingQueue\u0026amp;lt;\u0026amp;gt;(), HmilyThreadFactory.create(\u0026amp;quot;hmily-log-disruptor\u0026amp;quot;, false), new ThreadPoolExecutor.AbortPolicy()); HmilyConsumerDataHandler[] consumers = new HmilyConsumerDataHandler[threadSize]; for (int i = 0; i \u0026amp;lt; threadSize; i++) { consumers[i] = new HmilyConsumerDataHandler(executor, coordinatorService); } disruptor.handleEventsWithWorkerPool(consumers); disruptor.setDefaultExceptionHandler(new IgnoreExceptionHandler()); disruptor.start(); } /** * publish disruptor event. * * @param tccTransaction {@linkplain â€¦","date":1537833600,"description":"High-Performance Asynchronous Distributed Transaction TCC Framework","dir":"blog/hmily_introduction/","fuzzywordcount":2700,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"b7b689726bd3d6d352d1283a04d1013b7cf80530","permalink":"/blog/hmily_introduction/","publishdate":"2018-09-25T00:00:00Z","readingtime":6,"relpermalink":"/blog/hmily_introduction/","summary":"Hmilyæ¡†æ¶ç‰¹æ€§[https://github.com/yu199195/hmily] æ— ç¼é›†æˆSpring,Spring boot startã€‚ æ— ç¼","tags":["hmily","TCC"],"title":"Hmily: High-Performance Asynchronous Distributed Transaction TCC Framework","type":"blog","url":"/blog/hmily_introduction/","wordcount":2682},{"author":"xiaoyu","categories":"hmily","content":" Hmilyæ¡†æ¶ç‰¹æ€§[https://github.com/yu199195/hmily]  æ— ç¼é›†æˆSpring,Spring boot startã€‚\n æ— ç¼é›†æˆDubbo,SpringCloud,Motanç­‰rpcæ¡†æ¶ã€‚\n å¤šç§äº‹åŠ¡æ—¥å¿—çš„å­˜å‚¨æ–¹å¼ï¼ˆredisï¼Œmongdb,mysqlç­‰ï¼‰ã€‚\n å¤šç§ä¸åŒæ—¥å¿—åºåˆ—åŒ–æ–¹å¼ï¼ˆKryo,protostuff,hessionï¼‰ã€‚\n äº‹åŠ¡è‡ªåŠ¨æ¢å¤ã€‚\n æ”¯æŒå†…åµŒäº‹åŠ¡çš„ä¾èµ–ä¼ é€’ã€‚\n ä»£ç é›¶ä¾µå…¥,é…ç½®ç®€å•çµæ´»ã€‚   Hmilyä¸ºä»€ä¹ˆè¿™ä¹ˆé«˜æ€§èƒ½ï¼Ÿ 1.é‡‡ç”¨disruptorè¿›è¡Œäº‹åŠ¡æ—¥å¿—çš„å¼‚æ­¥è¯»å†™ï¼ˆdisruptoræ˜¯ä¸€ä¸ªæ— é”ï¼Œæ— GCçš„å¹¶å‘ç¼–ç¨‹æ¡†æ¶ï¼‰ package com.hmily.tcc.core.disruptor.publisher; import com.hmily.tcc.common.bean.entity.TccTransaction; import com.hmily.tcc.common.enums.EventTypeEnum; import com.hmily.tcc.core.concurrent.threadpool.HmilyThreadFactory; import com.hmily.tcc.core.coordinator.CoordinatorService; import com.hmily.tcc.core.disruptor.event.HmilyTransactionEvent; import com.hmily.tcc.core.disruptor.factory.HmilyTransactionEventFactory; import com.hmily.tcc.core.disruptor.handler.HmilyConsumerDataHandler; import com.hmily.tcc.core.disruptor.translator.HmilyTransactionEventTranslator; import com.lmax.disruptor.BlockingWaitStrategy; import com.lmax.disruptor.IgnoreExceptionHandler; import com.lmax.disruptor.RingBuffer; import com.lmax.disruptor.dsl.Disruptor; import com.lmax.disruptor.dsl.ProducerType; import org.springframework.beans.factory.DisposableBean; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; import java.util.concurrent.Executor; import java.util.concurrent.LinkedBlockingQueue; import java.util.concurrent.ThreadPoolExecutor; import java.util.concurrent.TimeUnit; import java.util.concurrent.atomic.AtomicInteger; /** * event publisher. * * @author xiaoyu(Myth) */ @Component public class HmilyTransactionEventPublisher implements DisposableBean { private Disruptor\u0026amp;lt;HmilyTransactionEvent\u0026amp;gt; disruptor; private final CoordinatorService coordinatorService; @Autowired public HmilyTransactionEventPublisher(final CoordinatorService coordinatorService) { this.coordinatorService = coordinatorService; } /** * disruptor start. * * @param bufferSize this is disruptor buffer size. * @param threadSize this is disruptor consumer thread size. */ public void start(final int bufferSize, final int threadSize) { disruptor = new Disruptor\u0026amp;lt;\u0026amp;gt;(new HmilyTransactionEventFactory(), bufferSize, r -\u0026amp;gt; { AtomicInteger index = new AtomicInteger(1); return new Thread(null, r, \u0026amp;quot;disruptor-thread-\u0026amp;quot; + index.getAndIncrement()); }, ProducerType.MULTI, new BlockingWaitStrategy()); final Executor executor = new ThreadPoolExecutor(threadSize, threadSize, 0, TimeUnit.MILLISECONDS, new LinkedBlockingQueue\u0026amp;lt;\u0026amp;gt;(), HmilyThreadFactory.create(\u0026amp;quot;hmily-log-disruptor\u0026amp;quot;, false), new ThreadPoolExecutor.AbortPolicy()); HmilyConsumerDataHandler[] consumers = new HmilyConsumerDataHandler[threadSize]; for (int i = 0; i \u0026amp;lt; threadSize; i++) { consumers[i] = new HmilyConsumerDataHandler(executor, coordinatorService); } disruptor.handleEventsWithWorkerPool(consumers); disruptor.setDefaultExceptionHandler(new IgnoreExceptionHandler()); disruptor.start(); } /** * publish disruptor event. * * @param tccTransaction {@linkplain â€¦","date":1537833600,"description":"é«˜æ€§èƒ½ä¸€éƒ¨åˆ†ä¸æ˜¯äº‹åŠ¡TCCæ¡†æ¶","dir":"blog/hmily_introduction/","fuzzywordcount":2700,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"a651c37edc73a29abc85340ce541f54e6537d351","permalink":"/zh/blog/hmily_introduction/","publishdate":"2018-09-25T00:00:00Z","readingtime":6,"relpermalink":"/zh/blog/hmily_introduction/","summary":"Hmilyæ¡†æ¶ç‰¹æ€§[https://github.com/yu199195/hmily] æ— ç¼é›†æˆSpring,Spring boot startã€‚ æ— ç¼","tags":["hmily","TCC"],"title":"Hmily: é«˜æ€§èƒ½å¼‚æ­¥åˆ†å¸ƒå¼äº‹åŠ¡TCCæ¡†æ¶","type":"blog","url":"/zh/blog/hmily_introduction/","wordcount":2682},{"author":null,"categories":null,"content":" The document is improving ","date":-62135596800,"description":"Distributed scheduling framework.","dir":"projects/athena/overview/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"195010e1f6c2a0da3ec7b0c23dfb7cbbeed976fa","permalink":"/projects/athena/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/athena/overview/","summary":" The document is improving ","tags":null,"title":"Athena Introduction","type":"projects","url":"/projects/athena/overview/","wordcount":4},{"author":null,"categories":null,"content":" æ–‡æ¡£å®Œå–„ä¸­ï¼Œæ•¬è¯·æœŸå¾… ","date":-62135596800,"description":"metrics å­—èŠ‚ç å·¥å…·.","dir":"projects/athena/overview/","fuzzywordcount":100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"4c83aee1b2ebbc3c9a378d9610c24ac660306438","permalink":"/zh/projects/athena/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/athena/overview/","summary":"æ–‡æ¡£å®Œå–„ä¸­ï¼Œæ•¬è¯·æœŸå¾…","tags":null,"title":"Athenaä»‹ç»","type":"projects","url":"/zh/projects/athena/overview/","wordcount":10},{"author":null,"categories":null,"content":" Bootstrap raincat-admin Prerequisite of bootstrap: The distributed transaction has been deployed and in running. You can choose RPC framework in follows whatever you want.\n Dubbo user Springcloud user  Bootstrap method Method1: Package and deploy by yourself  First of all, the JDK version must be 1.8+ and Git and Maven are installed locally, then execute the following commands.  git clone https://github.com/yu199195/Raincat.git maven clean install   Secondly, please use your dev tool to open the project, such as IDEA, Eclipse. Please modify your application.yml as follows.  userNameï¼Œpassword are the login user name and password. Redis configuration is consistent with your txManager. spring.profiles.active is the way you store the log, please modify the corresponding yml file. For example, the following code snippet shows how to configure application-db.yml when use DB as storage.   server: port: 8888 context-path: /admin spring: application: name: raincat-admin profiles: active: db tx: admin : userName : admin password : admin redis: hostName: localhost port : 6379 #password: cluster : false # nodes: 127.0.0.1:70001;127.0.1:7002 # redirects: 20   Thirdly, application.list is your applicationName of your micro service, and separated with commas.  serializer : The way to serialize the transaction log. retry.max: The maximum retry time.   recover: application: list : alipay-service,wechat-service,pay-service serializer : support: kryo retry : max: 10 db: driver : com.mysql.jdbc.Driver url: jdbc:mysql://localhost:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username: root password: 123456   Finally, please modify your index.html, and run the main() method in AdminApplication, then visit http://ip:port/admin in the browser, enter the user name and password to log in.  \u0026amp;lt;!--Modify your ip port in href--\u0026amp;gt; \u0026amp;lt;a id=\u0026amp;quot;serverIpAddress\u0026amp;quot; style=\u0026amp;quot;display: none\u0026amp;quot; href=\u0026amp;quot;http://192.168.1.132:8888/admin\u0026amp;quot;\u0026amp;gt;  Method2: Obtain the admin jar package from the maven central warehouse. \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-admin\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Please create a config directory and application.yml, etc. Then modify the yml file and start up the application.  ","date":-62135596800,"description":"Bootstrap raincat-admin","dir":"projects/raincat/admin-starter/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"bdd08f2ca383462c4ac181c91b3d76bcd91f72ed","permalink":"/projects/raincat/admin-starter/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/raincat/admin-starter/","summary":"Bootstrap raincat-admin Prerequisite of bootstrap: The distributed transaction has been deployed and in running. You can choose RPC framework in follows whatever you want.\n Dubbo user Springcloud user  Bootstrap method Method1: Package and deploy by yourself  First of all, the JDK version must be 1.8+ and Git and Maven are installed locally, then execute the following commands.  git clone https://github.com/yu199195/Raincat.git maven clean install   Secondly, please use your dev tool to open the project, such as IDEA, Eclipse.","tags":null,"title":"Bootstrap raincat-admin","type":"projects","url":"/projects/raincat/admin-starter/","wordcount":287},{"author":null,"categories":null,"content":" Bootstrap raincat-manager Bootstrap method Method 1: Pull the code from github and compile it by yourself: https://github.com/yu199195/Raincat  Modify the Redis configuration in application.yml.  transactionWaitMaxTime: 500 redisSaveMaxTime: 3000 tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123   transactionWaitMaxTime is the transaction maximum waiting time.\n redisSaveMaxTime is the Redis maximum waiting time.\n tx:manager:netty\n port is the Netty port for long connections which you can modify by yourself.   serialize is the Netty serialization protocol (Kroy in recommended), and it should be consistent with the serialization protocol at client.\n maxConnection is the maximum number of long connections.\n maxThreads is the number of Netty worker thread.\n heartTime is the heartbeat interval (seconds).\n  Method 2: Obtain the raincat-manager jar from the maven central warehouse.  Please create a config directory, and configure application.yml. Then modify the yml file and start up the application. If you want to know more details, please refer to the springboot configuration file.  ","date":-62135596800,"description":"Bootstrap raincat-manager","dir":"projects/raincat/raincat-manager-starter/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"dbb2bd8f4ef36e38a5b2f2c972dc033abb80a567","permalink":"/projects/raincat/raincat-manager-starter/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/raincat/raincat-manager-starter/","summary":"Bootstrap raincat-manager Bootstrap method Method 1: Pull the code from github and compile it by yourself: https://github.com/yu199195/Raincat  Modify the Redis configuration in application.yml.  transactionWaitMaxTime: 500 redisSaveMaxTime: 3000 tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123   transactionWaitMaxTime is the transaction maximum waiting time.","tags":null,"title":"Bootstrap raincat-manager","type":"projects","url":"/projects/raincat/raincat-manager-starter/","wordcount":173},{"author":null,"categories":null,"content":" Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA) and Locate on hmily-demo-dubbo Module Configuringï¼ˆhmily-demo-dubbo-account module for instanceï¼‰  Configure with your business database (account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Modify hmily.yml, with mysql persistence backend  repository: database: driverClassName: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Configure with your zookeeper address(es)(can run one locally)  \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;localhost:2181\u0026amp;quot;/\u0026amp;gt;   run DubboHmilyAccountApplication.java  Run hmily-demo-dubbo-inventory(refer to simillar instructions above). Run hmily-demo-dubbo-order(refer to simillar instructions above). Access on http://127.0.0.1:8087/swagger-ui.html for more. ","date":-62135596800,"description":"Dubbo Quick Start","dir":"projects/hmily/quick-start-dubbo/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"8e82dd39d7b359defe77f7ffb27e68b120875d46","permalink":"/projects/hmily/quick-start-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/quick-start-dubbo/","summary":"Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA) and Locate on hmily-demo-dubbo Module Configuringï¼ˆhmily-demo-dubbo-account module for instanceï¼‰  Configure with your business database (account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026lt;db_host_ip\u0026gt;:\u0026lt;db_host_port\u0026gt;/hmily_account?useUnicode=true\u0026amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Modify hmily.","tags":null,"title":"Dubbo Quick Start","type":"projects","url":"/projects/hmily/quick-start-dubbo/","wordcount":153},{"author":null,"categories":null,"content":" Add myth-annotation dependency to Dubbo api project.  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Add the @Myth annotation to the Dubbo Interface method and set the name of the message queue, which is the queue from which the messaging middleware sends messages.  @Myth(destination = \u0026amp;quot;account\u0026amp;quot;) boolean payment(AccountDTO accountDTO);   In the Dubbo service provider (the participating method of the transaction, the callee ).\n add myth-dubbo dependency\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   The MythTransactionBootstrap startup class can be configured in xml or @Bean. Please refer to the specific configuration:configuration for details  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   Add @Myth to the implementation of your interface\n Listen to the message queue (message queue name written in the annotations method), invoke the framework provides MythMqReceiveService.processMessage() method. If you use JMS, you can refer to the Demo project for details.\n@JmsListener(destination = \u0026amp;quot;account\u0026amp;quot;,containerFactory = \u0026amp;quot;queueListenerContainerFactory\u0026amp;quot;) public void receiveQueue(byte[] message) { LOGGER.info(\u0026amp;quot;=========Deducting the account information to receive Myth framework incoming information==========\u0026amp;quot;); final Boolean success = mythMqReceiveService.processMessage(message); if(success){ //If the consumption is successful, the message is out of the queue, otherwise it is not consumed. } }   In the Dubbo consumer (the invoker of the transaction, the caller)\n add â€¦","date":-62135596800,"description":"Myth Dubbo User","dir":"projects/myth/dubbo-user/","fuzzywordcount":500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"433f36fa4db03e976d642f353cf822978b1636ac","permalink":"/projects/myth/dubbo-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/myth/dubbo-user/","summary":"Add myth-annotation dependency to Dubbo api project.  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.myth\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;myth-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt;   Add the @Myth annotation to the Dubbo Interface method and set the name of the message queue, which is the queue from which the messaging middleware sends messages.  @Myth(destination = \u0026quot;account\u0026quot;) boolean payment(AccountDTO accountDTO);   In the Dubbo service provider (the participating method of the transaction, the callee ).\n add myth-dubbo dependency","tags":null,"title":"Dubbo User","type":"projects","url":"/projects/myth/dubbo-user/","wordcount":464},{"author":null,"categories":null,"content":" Firstly, you should bootstrap raincat-manager, please refer to how to bootstrap Txmanager for details. Then, please add dependency in maven at your Dubbo service, and add @TxTransaction annotation in your distributed transaction method. \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Configure TxTransactionBootstrap by Spring XML \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Configure TxTransactionBootstrap by spring boot starter  Firstly, please add maven dependency raincat-spring-boot-starter-dubbo provided by Raincat.\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-spring-boot-starter-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Secondly, configure the application.yml like follows.  org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456  txManagerUrl is the ip and port that you bootstrap txManager . Please add http:// at head.\n serializer is the way of transaction log serialization.\n nettySerializer is the serialization way of how to communicate with txManager. Please be caution that It should be consistent with the configuration in txManager.\n compensation is the property whether the compensation is required or not, the service will compensate itself in some extreme cases.\n compensationCacheType is the storage log types, and support Redis, Mongodb, Zookeeper, etc. For details, please refer to the config.\n  NOTICEï¼šYou need to open AOP when you want to use XML to â€¦","date":-62135596800,"description":"dubbo user configuration","dir":"projects/raincat/dubbo-user/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"4eaf23e6604a9b217319619ace1eabbe00725e82","permalink":"/projects/raincat/dubbo-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/raincat/dubbo-user/","summary":"Firstly, you should bootstrap raincat-manager, please refer to how to bootstrap Txmanager for details. Then, please add dependency in maven at your Dubbo service, and add @TxTransaction annotation in your distributed transaction method. \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;raincat-dubbo\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.0-RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;  Configure TxTransactionBootstrap by Spring XML \u0026lt;context:component-scan base-package=\u0026quot;org.dromara.*\u0026quot;/\u0026gt; \u0026lt;aop:aspectj-autoproxy expose-proxy=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;bean id=\u0026quot;txTransactionBootstrap\u0026quot; class=\u0026quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026quot;\u0026gt; \u0026lt;property name=\u0026quot;txManagerUrl\u0026quot; value=\u0026quot;http://localhost:8761\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;serializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;nettySerializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensation\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensationCacheType\u0026quot; value=\u0026quot;db\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;txDbConfig\u0026quot;\u0026gt; \u0026lt;bean class=\u0026quot;org.","tags":null,"title":"Dubbo user configuration","type":"projects","url":"/projects/raincat/dubbo-user/","wordcount":246},{"author":null,"categories":null,"content":" The Dubbo Interface Sectioon  Introduce the jar packages into your interface project.  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Add the @Hmily annotation on the interface method in which you need to perform Hmily distributed transactions.\npublic interface HelloService { @Hmily void say(String hello); }  The project with Dubbo implementation  Step 1 ï¼š Introduce the jar package of the hmily dependency\n Step 2 ï¼š Add Hmily configuration\n Step 3 ï¼š Add the specific annotation to the implementation method. you need to complete the development of confirm and cancel method, if in TCC mode.\n  Introduce The Maven dependency Spring-Namespace  for Alibaba-Dubbo Users  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  for Aapche-Dubbo Users\n  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-apache-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   the configuration should be made in the xml file like below  \u0026amp;lt;!-- set up to enable the aspectj-autoproxy --\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyTransactionAspect\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.aop.SpringHmilyTransactionAspect\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot  for Alibaba-Dubbo Users  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   for Aapche-Dubbo Users  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-apache-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Introduce the Hmily configuration  new a configuration file named hmily.yml under the resource directory of the current project\n the specific parameter configuration can refer to configuration detail,Local configuration mode, Zookeeper configuration mode, nacos configuration mode,apollo configuration mode\n  Add annotations on the implementation interface We have completed the integration described above,and the next we will talk about the specific implementation.\nTCC Mode  Add @HmilyTCC (confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;) annotation to the concrete implementation of the interface method identified by \u0026amp;lsquo;@Hmily\u0026amp;rsquo;.\n confirmMethod : the method name for confirmï¼ŒThe method parameter list and return type should be consistent with the identification method.\n cancelMethod : the method for cancelï¼ŒThe method parameter list and return type should be â€¦","date":-62135596800,"description":"Dubbo user guide","dir":"projects/hmily/user-dubbo/","fuzzywordcount":700,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"c94d387240bfe786b4fcf14640a25be402c2773a","permalink":"/projects/hmily/user-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/hmily/user-dubbo/","summary":"The Dubbo Interface Sectioon  Introduce the jar packages into your interface project.  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   Add the @Hmily annotation on the interface method in which you need to perform Hmily distributed transactions.\npublic interface HelloService { @Hmily void say(String hello); }  The project with Dubbo implementation  Step 1 ï¼š Introduce the jar package of the hmily dependency\n Step 2 ï¼š Add Hmily configuration","tags":null,"title":"Dubbo user guide","type":"projects","url":"/projects/hmily/user-dubbo/","wordcount":630},{"author":null,"categories":null,"content":" cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-dubbo\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware\nspring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer   Modifiy applicationContext.xml on Indicator Item And choose repositorySupport and modifiy it If you use database compensation , You have to create a new database for exampleï¼šmyth xml \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   Modifiy spring-dubbo.xml on Indicator Item And modifiy zookeeper url\n```xml   ``` * run DubboAccountApplication.java\n run DubboInventoryApplication.java\n run DubboOrderApplication.java\nthis mq sender so befer:\n in applicationContext.xml choose import you mq sender config\n  \u0026amp;lt;import resource=\u0026amp;quot;spring-rocketmq.xml\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-rabbitmq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-kafka.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import â€¦","date":-62135596800,"description":"Dubbo å¿«é€Ÿå¼€å§‹","dir":"projects/myth/quick-start-dubbo/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"f0a917e50c4b779e355f66b2b35f98912ef27a02","permalink":"/zh/projects/myth/quick-start-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/myth/quick-start-dubbo/","summary":"cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-dubbo Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test","tags":null,"title":"Dubbo å¿«é€Ÿå¼€å§‹","type":"projects","url":"/zh/projects/myth/quick-start-dubbo/","wordcount":241},{"author":null,"categories":null,"content":" åœ¨dubbo api é¡¹ç›®å¼•å…¥myth-annotation jaråŒ…  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨dubbo interface æ–¹æ³•ä¸ŠåŠ ä¸Š@Mythæ³¨è§£ ,å¹¶è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—åç§°,æ­¤é˜Ÿåˆ—å°±æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶å‘æ¶ˆæ¯çš„é˜Ÿåˆ—ï¼š  @Myth(destination = \u0026amp;quot;account\u0026amp;quot;) boolean payment(AccountDTO accountDTO);   åœ¨dubbo æœåŠ¡æä¾›æ–¹ï¼ˆäº‹åŠ¡çš„å‚ä¸æ–¹æ³•ï¼Œè¢«è°ƒç”¨æ–¹ï¼‰\n å¼•å…¥myth-dubbo åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   é…ç½® MythTransactionBootstrapå¯åŠ¨ç±»,å¯ä»¥é‡‡ç”¨xmlæ–¹å¼ï¼Œæˆ–è€…@Beançš„æ–¹å¼,å…·ä½“é…ç½®å¯ä»¥å‚è€ƒ:é…ç½®è¯¦è§£  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   åœ¨ä½ æ¥å£çš„å®ç°æ–¹æ³•ä¸ŠåŠ ä¸Š@Myth\n ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ³¨è§£æ–¹æ³•ä¸Šå†™çš„æ¶ˆæ¯é˜Ÿåˆ—åç§°),è°ƒç”¨æ¡†æ¶æä¾› çš„MythMqReceiveService.processMessageæ–¹æ³•ã€‚åˆ—å¦‚ä½¿ç”¨jmsï¼Œå…·ä½“å¯ä»¥å‚è€ƒdemoå·¥ç¨‹ã€‚\n@JmsListener(destination = \u0026amp;quot;account\u0026amp;quot;,containerFactory = \u0026amp;quot;queueListenerContainerFactory\u0026amp;quot;) public void receiveQueue(byte[] message) { LOGGER.info(\u0026amp;quot;=========æ‰£å‡è´¦æˆ·ä¿¡æ¯æ¥æ”¶åˆ°Mythæ¡†æ¶ä¼ å…¥çš„ä¿¡æ¯==========\u0026amp;quot;); final Boolean success = mythMqReceiveService.processMessage(message); if(success){ //æ¶ˆè´¹æˆåŠŸï¼Œæ¶ˆæ¯å‡ºé˜Ÿåˆ—ï¼Œå¦åˆ™ä¸æ¶ˆè´¹ } }   åœ¨dubbo æ¶ˆè´¹æ–¹ï¼ˆäº‹åŠ¡çš„å‘èµ·è€…ï¼Œè°ƒç”¨æ–¹ï¼‰\n å¼•å…¥myth-dubbo åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    é…ç½® MythTransactionBootstrapå¯åŠ¨ç±»,å¯ä»¥é‡‡ç”¨xmlæ–¹å¼ï¼Œæˆ–è€…@Beançš„æ–¹å¼,å…·ä½“é…ç½®å¯ä»¥å‚è€ƒ:é…ç½®è¯¦è§£\n\u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; â€¦","date":-62135596800,"description":"Myth Dubbo User","dir":"projects/myth/dubbo-user/","fuzzywordcount":1000,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"e30f0aee67968b85591e7c33da466fdfea0ac0a6","permalink":"/zh/projects/myth/dubbo-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/myth/dubbo-user/","summary":"åœ¨dubbo api é¡¹ç›®å¼•å…¥myth-annotation jaråŒ… \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.myth\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;myth-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨dubbo interface æ–¹æ³•ä¸ŠåŠ ä¸Š@Mythæ³¨è§£ ,å¹¶è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—åç§°,æ­¤é˜Ÿåˆ—å°±æ˜¯æ¶ˆ","tags":null,"title":"Dubbo ç”¨æˆ·","type":"projects","url":"/zh/projects/myth/dubbo-user/","wordcount":978},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Zookeeper  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo-dubboé¡¹ç›®ã€‚ ä¿®æ”¹é¡¹ç›®é…ç½®ï¼ˆhmily-demo-dubbo-accountä¸ºåˆ—å­ï¼‰  ä¿®æ”¹ä¸šåŠ¡æ•°æ®åº“(accounté¡¹ç›®ä¸ºåˆ—å­)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    ä¿®æ”¹ hmily.yml,è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨  repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    åœ¨spring-dubboä¸­ä¿®æ”¹ä½ çš„zookeeperåœ°å€ï¼ˆå¯ä»¥åœ¨è‡ªå·±ç”µè„‘æœ¬åœ°å¯åŠ¨ä¸€ä¸ªzookeeperæœåŠ¡ï¼‰  \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;localhost:2181\u0026amp;quot;/\u0026amp;gt;   run DubboHmilyAccountApplication.java  å¯åŠ¨hmily-demo-dubbo-inventory å‚è€ƒä¸Šè¿°ã€‚ å¯åŠ¨hmily-demo-dubbo-order å‚è€ƒä¸Šè¿°ã€‚ è®¿é—®ï¼šhttp://127.0.0.1:8087/swagger-ui.htmlã€‚ ","date":-62135596800,"description":"Dubboå¿«é€Ÿä½“éªŒ","dir":"projects/hmily/quick-start-dubbo/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"fbf8a182b96b41e4b4e6402081e7b6ff371e3ef7","permalink":"/zh/projects/hmily/quick-start-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/quick-start-dubbo/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Zookeeper ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-dem","tags":null,"title":"Dubboå¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/hmily/quick-start-dubbo/","wordcount":519},{"author":null,"categories":null,"content":" Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA) and Locate on hmily-demo-grpc Module Configuringï¼ˆhmily-demo-grpc-accoun module for instanceï¼‰  Configure with your business database (account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Modify hmily.yml, with mysql persistence backend  repository: database: driverClassName: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   run GrpcHmilyAccountApplication.java  Run hmily-demo-tars-springboot-inventory(refer to simillar instructions above). Run hmily-demo-tars-springboot-order(refer to simillar instructions above). Access on http://127.0.0.1:28087/swagger-ui.html for more. ","date":-62135596800,"description":"Grpc Quick Start","dir":"projects/hmily/quick-start-grpc/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"a7d431f965718f2bfc8527a881562e9c0e65ecf4","permalink":"/projects/hmily/quick-start-grpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/quick-start-grpc/","summary":"Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA) and Locate on hmily-demo-grpc Module Configuringï¼ˆhmily-demo-grpc-accoun module for instanceï¼‰  Configure with your business database (account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026lt;db_host_ip\u0026gt;:\u0026lt;db_host_port\u0026gt;/hmily_account?useUnicode=true\u0026amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Modify hmily.","tags":null,"title":"Grpc Quick Start","type":"projects","url":"/projects/hmily/quick-start-grpc/","wordcount":142},{"author":null,"categories":null,"content":" Grpc User Guide  Unary synchronous calls to GRPC are supported only at present.\n Introduce the jar packages\n Introduce the Hmily configuration\n Add @HmilyTCC or @HmilyTAC annotation on the concrete implementation method(Service provider).\n  Introduce The Maven dependency Spring-Namespace\n Introduce the hmily-grpc dependency   \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-grpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   make the configuration in the XML configuration file as below:\n\u0026amp;lt;!--Configure the base packages that the Hmily framework need to scan --\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.hmily.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- set up to enable the aspectj-autoproxy --\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- Configure the bean parameters for Hmily startup --\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot\n Introduce the hmily-spring-boot-starter-grpc dependency\nxml \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-grpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    Introduce the Hmily configuration  new a configuration file named hmily.yml under the resource directory of the current project\n the specific parameter configuration can refer to configuration detail,Local configuration mode, Zookeeper configuration mode, nacos configuration mode,apollo configuration mode\n  Grpc Filter configuration  Add filter GrpcHmilyTransactionFilter to GRPC client. Add filter GrpcHmilyServerFilter to GRPC server.  Grpc client call  Use the GrpcHmilyClient to make the remote call instead of the original call.  AccountResponse response = GrpcHmilyClient.syncInvoke(accountServiceBlockingStub, \u0026amp;quot;payment\u0026amp;quot;, request, AccountResponse.class);  The input parameters are the called AbstratcSub, the method name, the specific parameter, and the return value type,respectively.\nTCC Mode  Add the @HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;) annotation on the concrete implementation of the transaction method on the server side.\n confirmMethod : the method name for confirmï¼ŒThe method parameter list and return type should be consistent with the identification method.\n cancelMethod : the method for cancelï¼ŒThe method parameter list and return type should be consistent with the identification method.\n The TCC mode should ensure the idempotence of the confirm and cancel methods,Users need to develop these two methods by themselves,The confirmation and rollback behavior of all transactions are completely up tp users.The Hmily framework is just responsible for making calls.\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) â€¦","date":-62135596800,"description":"Grpc User Guide","dir":"projects/hmily/user-grpc/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"3578f82c9fb122accb2754db4c234a34fcf63750","permalink":"/projects/hmily/user-grpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/user-grpc/","summary":"Grpc User Guide  Unary synchronous calls to GRPC are supported only at present.\n Introduce the jar packages\n Introduce the Hmily configuration\n Add @HmilyTCC or @HmilyTAC annotation on the concrete implementation method(Service provider).\n  Introduce The Maven dependency Spring-Namespace\n Introduce the hmily-grpc dependency   \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-grpc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   make the configuration in the XML configuration file as below:\n\u0026lt;!--Configure the base packages that the Hmily framework need to scan --\u0026gt; \u0026lt;context:component-scan base-package=\u0026quot;org.","tags":null,"title":"Grpc User Guide","type":"projects","url":"/projects/hmily/user-grpc/","wordcount":367},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Zookeeper  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo-grpcé¡¹ç›®ã€‚ ä¿®æ”¹é¡¹ç›®é…ç½®ï¼ˆhmily-demo-grpc-accountä¸ºåˆ—å­ï¼‰  ä¿®æ”¹ä¸šåŠ¡æ•°æ®åº“(accounté¡¹ç›®ä¸ºåˆ—å­)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    ä¿®æ”¹ hmily.yml,è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨  repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    run GrpcHmilyAccountApplication.java  å¯åŠ¨hmily-demo-tars-springboot-inventory å‚è€ƒä¸Šè¿°ã€‚ å¯åŠ¨hmily-demo-tars-springboot-order å‚è€ƒä¸Šè¿°ã€‚ è®¿é—®ï¼šhttp://127.0.0.1:28087/swagger-ui.htmlã€‚ ","date":-62135596800,"description":"Grpcå¿«é€Ÿä½“éªŒ","dir":"projects/hmily/quick-start-grpc/","fuzzywordcount":500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"57d54c4ad341cae42b985a81991921c0c9518d4b","permalink":"/zh/projects/hmily/quick-start-grpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/quick-start-grpc/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Zookeeper ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-dem","tags":null,"title":"Grpcå¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/hmily/quick-start-grpc/","wordcount":480},{"author":null,"categories":null,"content":" Grpcç”¨æˆ·æŒ‡å—  ç›®å‰åªæ”¯æŒgrpcçš„ä¸€å…ƒåŒæ­¥è°ƒç”¨\n å¼•å…¥jaråŒ…\n å¼•å…¥hmilyé…ç½®\n åœ¨å…·ä½“çš„å®ç°æ–¹æ³•ä¸Šï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰ï¼ŒåŠ ä¸Š@HmilyTCC or HmilyTAC æ³¨è§£\n  å¼•å…¥ä¾èµ– Spring-Namespace\n å¼•å…¥ä¾èµ–\n  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-grpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®\n\u0026amp;lt;!--é…ç½®æ‰«ç hmilyæ¡†æ¶çš„åŒ…--\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.hmily.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--è®¾ç½®å¼€å¯aspectj-autoproxy--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--é…ç½®Hmilyå¯åŠ¨çš„beanå‚æ•°--\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot\n å¼•å…¥ä¾èµ–\nxml \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-grpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    å¼•å…¥Hmilyé…ç½®  åœ¨é¡¹ç›®çš„ resource æ–°å»ºæ–‡ä»¶åä¸º: hmily.ym é…ç½®æ–‡ä»¶ã€‚\n å…·ä½“çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£,æœ¬åœ°é…ç½®æ¨¡å¼, zookeeperé…ç½®æ¨¡å¼, nacosé…ç½®æ¨¡å¼,apolloé…ç½®æ¨¡å¼\n  Grpcæ‹¦æˆªå™¨é…ç½®  åœ¨ grpcå®¢æˆ·ç«¯ä¸­æ·»åŠ æ‹¦æˆªå™¨ GrpcHmilyTransactionFilterã€‚ åœ¨ grpcæœåŠ¡ç«¯ä¸­æ·»åŠ æ‹¦æˆªå™¨ GrpcHmilyServerFilterã€‚  Grpcå®¢æˆ·ç«¯è°ƒç”¨  ä½¿ç”¨GrpcHmilyClientä»£æ›¿åŸæ¥çš„è°ƒç”¨æ–¹å¼æ¥è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚  AccountResponse response = GrpcHmilyClient.syncInvoke(accountServiceBlockingStub, \u0026amp;quot;payment\u0026amp;quot;, request, AccountResponse.class);  å…¥å‚åˆ†åˆ«ä¸ºè¢«è°ƒç”¨çš„AbstratcSub,æ–¹æ³•å,å…·ä½“çš„å‚æ•°ä»¥åŠè¿”å›å€¼ç±»å‹\nTCCæ¨¡å¼  å¯¹æœåŠ¡ç«¯äº‹åŠ¡æ–¹æ³•çš„å…·ä½“å®ç°,åŠ ä¸Š@HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;)\n confirmMethod : ç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : å›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n TCCæ¨¡å¼åº”è¯¥ä¿è¯ confirm å’Œ cancel æ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå»å¼€å‘è¿™ä¸ª2ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰çš„äº‹åŠ¡çš„ç¡®è®¤ä¸å›æ»šï¼Œå®Œå…¨ç”±ç”¨æˆ·å†³å®šã€‚Hmilyæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è¿›è¡Œè°ƒç”¨\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  é‡è¦æ³¨æ„äº‹é¡¹ å¼‚å¸¸  try, confirm, cancel æ–¹æ³•çš„æ‰€æœ‰å¼‚å¸¸ä¸è¦è‡ªè¡Œcatch ä»»ä½•å¼‚å¸¸éƒ½åº”è¯¥æŠ›å‡ºç»™ Hmilyæ¡†æ¶å¤„ç†ã€‚  ","date":-62135596800,"description":"Grpcç”¨æˆ·æŒ‡å—","dir":"projects/hmily/user-grpc/","fuzzywordcount":800,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"7afe11acd39e52424c40f3d69baaee5b64d1b260","permalink":"/zh/projects/hmily/user-grpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/user-grpc/","summary":"Grpcç”¨æˆ·æŒ‡å— ç›®å‰åªæ”¯æŒgrpcçš„ä¸€å…ƒåŒæ­¥è°ƒç”¨ å¼•å…¥jaråŒ… å¼•å…¥hmilyé…ç½® åœ¨å…·ä½“çš„å®ç°æ–¹æ³•ä¸Šï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰ï¼ŒåŠ ä¸Š@HmilyTCC or HmilyTAC æ³¨","tags":null,"title":"Grpcç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/hmily/user-grpc/","wordcount":728},{"author":null,"categories":null,"content":" @Hmily /** * The annotation Hmily. * * @author xiaoyu */ @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface Hmily { }   This annotation is the interface identification of Hmily Distributed Transaction,it indicated that the interface participates in Hmily Distributed Transaction.  @HmilyTCC @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface HmilyTCC { /** * Confirm method string. * * @return the string */ String confirmMethod() default \u0026amp;quot;\u0026amp;quot;; /** * Cancel method string. * * @return the string */ String cancelMethod() default \u0026amp;quot;\u0026amp;quot;; /** * Pattern pattern enum. * * @return the pattern enum */ TransTypeEnum pattern() default TransTypeEnum.TCC; }   This annotation is the AOP point of TCC Mode of Hmily Distributed Transaction,it can add on your local concrete implementation method.\n confirmMethod : to annotate the identification method,it is the method name for confirm,the method parameter list and return type should be consistent with the identification method.\n cancelMethod : to annotate the identification method,it is the method name for rollback,the method parameter list and return type should be consistent with the identification method.\n  @HmilyTAC /** * The annotation HmilyTAC. * * @author xiaoyu */ @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface HmilyTAC { }   This annotation is the AOP point of TAC Mode of Hmily Distributed Transaction,it can add on your local concrete implementation method.  ","date":-62135596800,"description":"Hmily Annotation","dir":"projects/hmily/annotation/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"cc378a311c21863212efc93a2a93bd057682dc4d","permalink":"/projects/hmily/annotation/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/annotation/","summary":"@Hmily /** * The annotation Hmily. * * @author xiaoyu */ @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface Hmily { }   This annotation is the interface identification of Hmily Distributed Transaction,it indicated that the interface participates in Hmily Distributed Transaction.  @HmilyTCC @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface HmilyTCC { /** * Confirm method string. * * @return the string */ String confirmMethod() default \u0026quot;\u0026quot;; /** * Cancel method string. * * @return the string */ String cancelMethod() default \u0026quot;\u0026quot;; /** * Pattern pattern enum.","tags":null,"title":"Hmily Annotation","type":"projects","url":"/projects/hmily/annotation/","wordcount":203},{"author":null,"categories":null,"content":" What\u0026amp;rsquo;s Hmilyï¼Ÿ Hmily is a high-performance, zero penetration, financial-level distributed transactions solution. At present, it mainly provides support for flexible transactions, including TCC, TAC (in which, it will automatically generate rollback SQL) schemes, and XA and more schemes will be supported in the future.\nFeatures  High reliability : It supports abnormal transaction rollback and transaction overtime abnormal recovery to prevent transaction suspension in distributed scenarios.\n Ease of use : It provides zero penetration Spring-Boot and Spring-Namespace schemes to integrate with business systems quickly.\n High performance : Decentralized design, fully integrated with business systems, and naturally supports cluster deployment.\n Observability : Performance monitoring of multiple metrics will be collected by Metrics, performance metrics is able to display in admin management system.\n Multiple RPC Framework support : It supports well-known RPC frameworks such as Dubbo, SpringCloud, Motan, brpc, tars, etc.\n Multiple log store medium support : It supports many mediums as log store, such as mysql, oracle, mongodb, redis, zookeeper, etc.\n Complex business scene : It supports transaction around nested RPC calls.\n  Requirements  The JDK version must be JDK8 or later.\n In TCC mode, you must use a RPC framework, such as: Dubbo, SpringCloud, Motan\n In TAC mode, you must use relational databases, such as: mysql, oracle, sqlsever\n  TCC Mode When using the TCC mode, you should provide three methods: try, confirm, and cancel according to your business requirements, and the confirm and cancel methods should be implemented by yourselves, the framework is only responsible for calling them to achieve transaction consistency.\nTAC Mode When using the TAC mode, you must use a relational database for business operations, and the framework will automatically generate a rollback SQL. When the business is abnormal, the rollback SQL will be executed to achieve transaction consistency\nAbout Hmily is a flexible distributed transaction solution that provides TCC and TAC modes.\nIt can be easily integrated by business with zero intrusion and rapid integration.\nIn terms of performance, log storage is asynchronous (optional) and uses asynchronous execution, without sacrificing business methods.\nIt was previously developed by myself personally, and it is currently restarted at JD Digital Technique Group, and it will become JD Digital Technique Group\u0026amp;rsquo;s distributed transaction solution in the future.\nSupport  If you have any questions, please join the QQ group for discussion  WeChat public account   ","date":-62135596800,"description":"Hmily is Finance-level distributed transaction solutions, Supports multiple RPC frameworks, such as Dubbo, SpringCloud, Motan, GRPC, BRPC, Tars.","dir":"projects/hmily/overview/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"fec43e953cf408372fd38c1ac35fe28e03498a87","permalink":"/projects/hmily/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/overview/","summary":"What\u0026rsquo;s Hmilyï¼Ÿ Hmily is a high-performance, zero penetration, financial-level distributed transactions solution. At present, it mainly provides support for flexible transactions, including TCC, TAC (in which, it will automatically generate rollback SQL) schemes, and XA and more schemes will be supported in the future.\nFeatures  High reliability : It supports abnormal transaction rollback and transaction overtime abnormal recovery to prevent transaction suspension in distributed scenarios.\n Ease of use : It provides zero penetration Spring-Boot and Spring-Namespace schemes to integrate with business systems quickly.","tags":null,"title":"Hmily Introduction","type":"projects","url":"/projects/hmily/overview/","wordcount":381},{"author":null,"categories":null,"content":" Hmily Metrics At present,Prometheus is used to collect metrics in hmily\u0026amp;rsquo;s metrics module, and the pull mode is used to expose metrics information interface.\nThe metrics collected fall into two fundamental categories:\n JVM information to application: Memory, CPU, Thread Usage, etc.\n Transaction information: including the transactions total, the transaction latency, the transaction status, the transaction role.\n  Hmily Metrics in detail How to show  You can pull the metrics information from the metrics configuration of application via Grafana.  ","date":-62135596800,"description":"Hmily Metrics","dir":"projects/hmily/metrics/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"4c4b6e65e14fd62e4d5f788da6b34fd1ea415797","permalink":"/projects/hmily/metrics/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/metrics/","summary":"Hmily Metrics At present,Prometheus is used to collect metrics in hmily\u0026rsquo;s metrics module, and the pull mode is used to expose metrics information interface.\nThe metrics collected fall into two fundamental categories:\n JVM information to application: Memory, CPU, Thread Usage, etc.\n Transaction information: including the transactions total, the transaction latency, the transaction status, the transaction role.\n  Hmily Metrics in detail How to show  You can pull the metrics information from the metrics configuration of application via Grafana.","tags":null,"title":"Hmily Metrics","type":"projects","url":"/projects/hmily/metrics/","wordcount":77},{"author":null,"categories":null,"content":" Project members (the names not listed in order)    Name github Role Company     Xiao Yu yu199195 VP JD   Zhang Yong Lun tuohai666 committer JD   Zhao Jun cherrylzhao committer China Unicom   Chen Bin prFor committer A startup company   Jiang Xiao Feng SteNicholas committer Alibaba Cloud   Li Lang cysy-lli committer Ctrip   Tang Yu Dong tydhot committer perfma    ","date":-62135596800,"description":"Hmily Team","dir":"projects/hmily/team/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"4afc3096b5e7ebfbbce534349181a2684741f599","permalink":"/projects/hmily/team/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/team/","summary":" Project members (the names not listed in order)    Name github Role Company     Xiao Yu yu199195 VP JD   Zhang Yong Lun tuohai666 committer JD   Zhao Jun cherrylzhao committer China Unicom   Chen Bin prFor committer A startup company   Jiang Xiao Feng SteNicholas committer Alibaba Cloud   Li Lang cysy-lli committer Ctrip   Tang Yu Dong tydhot committer perfma    ","tags":null,"title":"Hmily Team","type":"projects","url":"/projects/hmily/team/","wordcount":54},{"author":null,"categories":null,"content":" Term  Initiator: The initiator of a global transaction, the first place where transactions need to be performed on distributed resources in a request link resource method. In the Hmily framework, it can be expressed as: a request first encounters @HmilyTCC or @HmilyTAC annotated method, the method which application belongs to is called the initiator.\n Participants: Distributed services or resources that need to participate in a distributed transaction scenario together with other services. In the Hmily framework, it\u0026amp;rsquo;s showed as an interface that appears as an RPC framework is annotated with @Hmily.\n Coordinator: The role used to coordinate distributed transactions is commit or rollback. It can be remote, local, centralized, or decentralized. The coordinator in the Hmily framework is a local decentralized role.\n TCC ï¼šAbbreviation for the three stages of Try, Confirm, and Cancel.\n TAC ï¼šShort for Try Auto Cancel. Hmily framework will automatically generate the reverse operation resource behavior after the resources are reserved in the Try stage.\n  ","date":-62135596800,"description":"Hmily Term","dir":"projects/hmily/term/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"8a2effa12db4953b22240e6ed435c0ca65d53304","permalink":"/projects/hmily/term/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/term/","summary":"Term  Initiator: The initiator of a global transaction, the first place where transactions need to be performed on distributed resources in a request link resource method. In the Hmily framework, it can be expressed as: a request first encounters @HmilyTCC or @HmilyTAC annotated method, the method which application belongs to is called the initiator.\n Participants: Distributed services or resources that need to participate in a distributed transaction scenario together with other services.","tags":null,"title":"Hmily Term","type":"projects","url":"/projects/hmily/term/","wordcount":158},{"author":null,"categories":null,"content":" Hmily Transaction Context @Data public class HmilyTransactionContext { /** * transId. */ private Long transId; /** * participant id. */ private Long participantId; /** * participant ref id. */ private Long participantRefId; /** * this hmily action. */ private int action; /** * Transaction Participant Role. */ private int role; /** * transType. */ private String transType; }  HmilyTransactionContext is the core class used by the Hmily distributed transaction framework to pass the transaction context when making RPC calls. it was stored in \u0026amp;lsquo;ThreadLocal\u0026amp;rsquo; by default and then do RPC parameter passing. You can also configure it to the scenarios that use thread context switching. the contextTransmittalMode = transmittable should be specified in the configuration at this point, then the Alibaba opensource library will be used.\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.alibaba\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;transmittable-thread-local\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.11.5\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Passing Transaction Context with Dubbo The concrete implementation class was in the org.dromara.hmily.dubbo.filter.DubboHmilyTransactionFilter class.ï¼Œ Please do RPC parameter passing through the RpcContext.getContext().setAttachment(String key, String value).\nPassing Transaction Context with Motan The concrete implementation class was in the org.dromara.hmily.motan.filter.MotanHmilyTransactionFilter class.ï¼Œ Please do RPC parameter passing through the Request.setAttachment(String key, String value).\nPassing Transaction Context with Spring Cloud The concrete implementation class was in the org.dromara.hmily.springcloud.feign.HmilyFeignInterceptor class.ï¼Œ Please do RPC parameter passing through the RequestTemplate.header(String name, String... values).\n","date":-62135596800,"description":"Hmily Transaction Context","dir":"projects/hmily/context/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"9acd1a365b116843583b688e98935383cb7e4b01","permalink":"/projects/hmily/context/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/context/","summary":"Hmily Transaction Context @Data public class HmilyTransactionContext { /** * transId. */ private Long transId; /** * participant id. */ private Long participantId; /** * participant ref id. */ private Long participantRefId; /** * this hmily action. */ private int action; /** * Transaction Participant Role. */ private int role; /** * transType. */ private String transType; }  HmilyTransactionContext is the core class used by the Hmily distributed transaction framework to pass the transaction context when making RPC calls.","tags":null,"title":"Hmily Transaction Context","type":"projects","url":"/projects/hmily/context/","wordcount":207},{"author":null,"categories":null,"content":" Hmilyæ˜¯ä»€ä¹ˆï¼Ÿ Hmilyæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ï¼Œé›¶ä¾µå…¥ï¼Œé‡‘èçº§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œç›®å‰ä¸»è¦æä¾›æŸ”æ€§äº‹åŠ¡çš„æ”¯æŒï¼ŒåŒ…å« TCC, TAC(è‡ªåŠ¨ç”Ÿæˆå›æ»šSQL) æ–¹æ¡ˆï¼Œæœªæ¥è¿˜ä¼šæ”¯æŒ XA ç­‰æ–¹æ¡ˆã€‚\nåŠŸèƒ½  é«˜å¯é æ€§ ï¼šæ”¯æŒåˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œäº‹åŠ¡å¼‚å¸¸å›æ»šï¼Œè¶…æ—¶å¼‚å¸¸æ¢å¤ï¼Œé˜²æ­¢äº‹åŠ¡æ‚¬æŒ‚ã€‚\n æ˜“ç”¨æ€§ ï¼šæä¾›é›¶ä¾µå…¥æ€§å¼çš„ Spring-Boot, Spring-Namespace å¿«é€Ÿä¸ä¸šåŠ¡ç³»ç»Ÿé›†æˆã€‚\n é«˜æ€§èƒ½ ï¼šå»ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œä¸ä¸šåŠ¡ç³»ç»Ÿå®Œå…¨èåˆï¼Œå¤©ç„¶æ”¯æŒé›†ç¾¤éƒ¨ç½²ã€‚\n å¯è§‚æµ‹æ€§ ï¼šMetricså¤šé¡¹æŒ‡æ ‡æ€§èƒ½ç›‘æ§ï¼Œä»¥åŠadminç®¡ç†åå°UIå±•ç¤ºã€‚\n å¤šç§RPC ï¼š æ”¯æŒ Dubbo, SpringCloud,Motan, brpc, tars ç­‰çŸ¥åRPCæ¡†æ¶ã€‚\n æ—¥å¿—å­˜å‚¨ ï¼š æ”¯æŒ mysql, oracle, mongodb, redis, zookeeper ç­‰æ–¹å¼ã€‚\n å¤æ‚åœºæ™¯ ï¼š æ”¯æŒRPCåµŒå¥—è°ƒç”¨äº‹åŠ¡ã€‚\n  å¿…è¦å‰æ  å¿…é¡»ä½¿ç”¨ JDK8+\n TCCæ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¿…é¡»è¦ä½¿ç”¨ä¸€æ¬¾ RPC æ¡†æ¶, æ¯”å¦‚ : Dubbo, SpringCloud,Motan\n TACæ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¿…é¡»ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“, æ¯”å¦‚ï¼šmysql, oracle, sqlsever\n  TCCæ¨¡å¼ å½“ä½¿ç”¨TCCæ¨¡å¼çš„æ—¶å€™,ç”¨æˆ·æ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€æ±‚æä¾› try, confirm, cancel ç­‰ä¸‰ä¸ªæ–¹æ³•ï¼Œ å¹¶ä¸” confirm, cancel æ–¹æ³•ç”±è‡ªèº«å®Œæˆå®ç°ï¼Œæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è°ƒç”¨ï¼Œæ¥è¾¾åˆ°äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚\nTACæ¨¡å¼ å½“ç”¨æˆ·ä½¿ç”¨TACæ¨¡å¼çš„æ—¶å€™ï¼Œç”¨æˆ·å¿…é¡»ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“æ¥è¿›è¡Œä¸šåŠ¡æ“ä½œï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨ç”Ÿæˆå›æ»šSQL, å½“ä¸šåŠ¡å¼‚å¸¸çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œå›æ»šSQLæ¥è¾¾åˆ°äº‹åŠ¡çš„ä¸€è‡´æ€§\nå…³äºHmily Hmilyæ˜¯æŸ”æ€§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†TCC ä¸ TAC æ¨¡å¼ã€‚\nå®ƒä»¥é›¶ä¾µå…¥ä»¥åŠå¿«é€Ÿé›†æˆæ–¹å¼èƒ½å¤Ÿæ–¹ä¾¿çš„è¢«ä¸šåŠ¡è¿›è¡Œæ•´åˆã€‚\nåœ¨æ€§èƒ½ä¸Šï¼Œæ—¥å¿—å­˜å‚¨å¼‚æ­¥ï¼ˆå¯é€‰ï¼‰ä»¥åŠä½¿ç”¨å¼‚æ­¥æ‰§è¡Œçš„æ–¹å¼ï¼Œä¸æŸè€—ä¸šåŠ¡æ–¹æ³•æ–¹æ³•ã€‚\nä¹‹å‰æ˜¯ç”±æˆ‘ä¸ªäººå¼€å‘ï¼Œç›®å‰åœ¨äº¬ä¸œæ•°ç§‘é‡å¯ï¼Œæœªæ¥ä¼šæˆä¸ºäº¬ä¸œæ•°ç§‘çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚\næŠ€æœ¯æ”¯æŒ  å¦‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åŠ å…¥QQç¾¤è¿›è¡Œè®¨è®º  å¾®ä¿¡å…¬ä¼—å·   ","date":-62135596800,"description":"Hmilyæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ï¼Œé›¶ä¾µå…¥ï¼ŒæŸ”æ€§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œç›®å‰ä¸»è¦æä¾›æŸ”æ€§äº‹åŠ¡çš„æ”¯æŒï¼ŒåŒ…å« TCC, TAC(è‡ªåŠ¨ç”Ÿæˆå›æ»šSQL) æ–¹æ¡ˆï¼Œæœªæ¥è¿˜ä¼šæ”¯æŒ XA ç­‰æ–¹æ¡ˆã€‚","dir":"projects/hmily/overview/","fuzzywordcount":700,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"46a4aceb75e37af1f4a763b390695a17c3117b9c","permalink":"/zh/projects/hmily/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/overview/","summary":"Hmilyæ˜¯ä»€ä¹ˆï¼Ÿ Hmilyæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ï¼Œé›¶ä¾µå…¥ï¼Œé‡‘èçº§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œç›®å‰ä¸»è¦æä¾›æŸ”æ€§äº‹åŠ¡çš„æ”¯æŒï¼ŒåŒ…å« TCC, TAC(è‡ªåŠ¨ç”Ÿæˆå›æ»šSQL) æ–¹","tags":null,"title":"Hmily ä»‹ç»","type":"projects","url":"/zh/projects/hmily/overview/","wordcount":645},{"author":null,"categories":null,"content":" Hmily-Admin startup tutorial (not completedï¼‰:  Admin is the background management system for viewing transaction logs in Hmily. It has many features, Such as viewing abnormal logs, modifying the number of retries and so on.\n First, make sure that your project is using Hmily and is running properly.\n Second, the JDK used by the user must be 1.8+. Git and Maven are installed locally, then execute the following command\n  Step 2ï¼šModify index.html under the static folder of your project \u0026amp;lt;!--href use your ip and port--\u0026amp;gt; \u0026amp;lt;a id=\u0026amp;quot;serverIpAddress\u0026amp;quot; style=\u0026amp;quot;display: none\u0026amp;quot; href=\u0026amp;quot;http://192.168.1.132:8888/admin\u0026amp;quot;\u0026amp;gt;  Step 3: Run the main method in AdminApplication Step 4: Visit http://ip:port/tcc-admin/index.html in the browser, then enter the user name and password to login. If you have any questions, please join the QQ group: 162614487 for discussion ","date":-62135596800,"description":"Hmily-Admin","dir":"projects/hmily/admin/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"8936d55c5158db1fe822580a6e6b743dd0ecea27","permalink":"/projects/hmily/admin/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/admin/","summary":"Hmily-Admin startup tutorial (not completedï¼‰:  Admin is the background management system for viewing transaction logs in Hmily. It has many features, Such as viewing abnormal logs, modifying the number of retries and so on.\n First, make sure that your project is using Hmily and is running properly.\n Second, the JDK used by the user must be 1.8+. Git and Maven are installed locally, then execute the following command","tags":null,"title":"Hmily-Admin","type":"projects","url":"/projects/hmily/admin/","wordcount":126},{"author":null,"categories":null,"content":" Hmily-Admin å¯åŠ¨æ•™ç¨‹ï¼ˆæœªå®Œæˆï¼‰:  admin æ˜¯Hmilyä¸­æŸ¥çœ‹äº‹åŠ¡æ—¥å¿—çš„åå°ç®¡ç†ç³»ç»Ÿã€‚ å¯ä»¥æŸ¥çœ‹å¼‚å¸¸çš„æ—¥å¿—ï¼Œä¿®æ”¹é‡è¯•æ¬¡æ•°ç­‰åŠŸèƒ½.\n é¦–å…ˆç¡®ä¿ä½ çš„é¡¹ç›®ä½¿ç”¨äº†Hmilyå¹¶ä¸”æ­£å¸¸è¿è¡Œ.\n é¦–å…ˆç”¨æˆ·ä½¿ç”¨çš„JDKå¿…é¡»æ˜¯1.8+ æœ¬åœ°å®‰è£…äº†git ,maven ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n  æ­¥éª¤äºŒï¼šä¿®æ”¹æœ¬é¡¹ç›®static æ–‡ä»¶å¤¹ä¸‹çš„ index.html \u0026amp;lt;!--href ä¿®æ”¹æˆä½ çš„ip ç«¯å£--\u0026amp;gt; \u0026amp;lt;a id=\u0026amp;quot;serverIpAddress\u0026amp;quot; style=\u0026amp;quot;display: none\u0026amp;quot; href=\u0026amp;quot;http://192.168.1.132:8888/admin\u0026amp;quot;\u0026amp;gt;  æ­¥éª¤ä¸‰: è¿è¡Œ AdminApplication ä¸­çš„mainæ–¹æ³•ã€‚ æ­¥éª¤å››:åœ¨æµè§ˆå™¨è®¿é—® http://ip:port/tcc-admin/index.html ,è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ç™»å½•ã€‚ å¦‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åŠ å…¥QQç¾¤ï¼š162614487 è¿›è¡Œè®¨è®º ","date":-62135596800,"description":"Hmily-Admin","dir":"projects/hmily/admin/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"e5f34864c9cfe26307b520e9c74d5fefb6b1ea73","permalink":"/zh/projects/hmily/admin/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/admin/","summary":"Hmily-Admin å¯åŠ¨æ•™ç¨‹ï¼ˆæœªå®Œæˆï¼‰: admin æ˜¯Hmilyä¸­æŸ¥çœ‹äº‹åŠ¡æ—¥å¿—çš„åå°ç®¡ç†ç³»ç»Ÿã€‚ å¯ä»¥æŸ¥çœ‹å¼‚å¸¸çš„æ—¥å¿—ï¼Œä¿®æ”¹é‡è¯•æ¬¡æ•°ç­‰åŠŸèƒ½. é¦–å…ˆç¡®ä¿ä½ çš„é¡¹ç›®ä½¿ç”¨äº†Hmilyå¹¶","tags":null,"title":"Hmily-Admin","type":"projects","url":"/zh/projects/hmily/admin/","wordcount":217},{"author":null,"categories":null,"content":" Configuration Detailï¼š  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n  hmily: server: configMode: local appName: xiaoyu # The following configuration will be read when server.configMode equals local config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:  Hmily.server Configuration    Name Type Default Required Description     configMode String local yes Configuration mode supports local,zookeeper,nacos, and apollo now. If configuration is local, it will read the configuration from yml file;If the configuration is other modes, it will get the configuration form configuration centre.   appName String null yes Application name. AppName will be overwritten if also configured in hmilyConfig.    Hmily.config Configuration  This is the core configuration of the whole framework     Name Type Default Required Description     appName String null yes It filled in your Microservices application\u0026amp;rsquo;s name generally, but don\u0026amp;rsquo;t repeat it   serializer String kryo no This is mode of serializing the specified transaction logï¼Œand currently supports filling in kryo, hessian, jdk, jdk, protostuff   contextTransmittalMode String threadLocal no This is the mode of transaction context transfer, and currently supports filling in threadLocal, transmittable (Cross-thread mode)   scheduledThreadMax int CPU * 2 no Maximum number of scheduled threads   scheduledRecoveryDelay int(unit:sec) 60 no Scheduling cycle of auto recovering transaction log   scheduledCleanDelay int(unit:sec) 60 no Scheduling cycle of cleaning transaction log   scheduledPhyDeletedDelay int(unit:sec) 60 no Scheduling cycle of deleting transaction log   scheduledInitDelay â€¦","date":-62135596800,"description":"Hmily Configuration Detail","dir":"projects/hmily/config/","fuzzywordcount":1300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"804b328f2572d7025e5b3f9de603971d5b754357","permalink":"/projects/hmily/config/","publishdate":"0001-01-01T00:00:00Z","readingtime":6,"relpermalink":"/projects/hmily/config/","summary":"Configuration Detailï¼š  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource\n  hmily: server: configMode: local appName: xiaoyu # The following configuration will be read when server.configMode equals local config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.","tags":null,"title":"Hmily-Config","type":"projects","url":"/projects/hmily/config/","wordcount":1250},{"author":null,"categories":null,"content":" é…ç½®è¯¦è§£ï¼š  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n  hmily: server: configMode: local appName: xiaoyu # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:  hmily.serveré…ç½®    åç§° ç±»å‹ é»˜è®¤å€¼ æ˜¯å¦å¿…å¡« è¯´æ˜     configMode String local å¿…å¡« é…ç½®æ¨¡å¼ï¼Œç°åœ¨æ”¯æŒlocal,zookeeper,nacos,apollo,é…ç½®ä¸ºlocalï¼Œåˆ™ä¼šè¯»å–ymlæ–‡ä»¶é‡Œçš„é…ç½®ï¼Œå…¶ä»–æ¨¡å¼ï¼Œåˆ™ä¼šè¯»å–é…ç½®ä¸­å¿ƒçš„   appName String æ—  å¿…å¡« åº”ç”¨çš„åç§°ï¼Œå¦‚æœhmilyConfigä¸­ä¹Ÿé…ç½®äº†appNameåˆ™ä¼šè¦†ç›–æ­¤é…ç½®    hmily.configé…ç½®  è¿™æ˜¯æ•´ä¸ªæ¡†æ¶çš„æ ¸å¿ƒé…ç½®     åç§° ç±»å‹ é»˜è®¤å€¼ æ˜¯å¦å¿…å¡« è¯´æ˜     appName String æ—  å¿…å¡« ä¸€èˆ¬å¡«ä½ å¾®æœåŠ¡çš„åº”ç”¨åç§°ï¼Œè¯·ä¸è¦é‡å¤   serializer String kryo éå¿…å¡« è¿™æ˜¯æŒ‡å®šäº‹åŠ¡æ—¥å¿—çš„åºåˆ—åŒ–æ–¹å¼ï¼Œç›®å‰æ”¯æŒå¡«å†™ kryo, hessian, jdk, protostuff   contextTransmittalMode String threadLocal éå¿…å¡« è¿™æ˜¯äº‹åŠ¡ä¸Šä¸‹æ–‡ä¼ é€’çš„æ¨¡å¼ï¼Œç›®å‰æ”¯æŒå¡«å†™ threadLocal, transmittable (è·¨çº¿ç¨‹æ¨¡å¼)   scheduledThreadMax int CPU * 2 éå¿…å¡« è°ƒåº¦çº¿ç¨‹æ•°æœ€å¤§çº¿ç¨‹æ•°é‡   scheduledRecoveryDelay int(å•ä½:ç§’) 60 éå¿…å¡« äº‹åŠ¡æ—¥å¿—è‡ªåŠ¨æ¢å¤è°ƒåº¦å‘¨æœŸ   scheduledCleanDelay int(å•ä½:ç§’) 60 éå¿…å¡« äº‹åŠ¡æ—¥å¿—æ¸…ç†è°ƒåº¦å‘¨æœŸ   scheduledPhyDeletedDelay int(å•ä½:ç§’) 60 éå¿…å¡« äº‹åŠ¡æ—¥å¿—ç‰©ç†åˆ é™¤è°ƒåº¦å‘¨æœŸ   scheduledInitDelay int(å•ä½:ç§’) 30 éå¿…å¡« è°ƒåº¦ä»»åŠ¡å¯åŠ¨å»¶è¿Ÿæ—¶é—´   recoverDelayTime int(å•ä½:ç§’) 60 éå¿…å¡« äº‹åŠ¡æ—¥å¿—æ¢å¤è¿Ÿå»¶æ—¶é—´   cleanDelayTime int(å•ä½:ç§’) 60 éå¿…å¡« äº‹åŠ¡æ—¥å¿—æ¸…ç†è¿Ÿå»¶æ—¶é—´   limit int 100 éå¿…å¡« è·å–äº‹åŠ¡æ—¥å¿—è¡Œæ•°å¤§å°   retryMax int 10 éå¿…å¡« æœ€å¤§é‡è¯•æ¬¡æ•°   bufferSize int 4096 * 2 * 2 éå¿…å¡« disruptorçš„bufferSizeå¤§å°   consumerThreads int CPU * 2 éå¿…å¡« disruptoræ¶ˆè´¹è€…çº¿ç¨‹æ•°é‡   asyncRepository boolean true éå¿…å¡« æ˜¯å¦å¼‚æ­¥å­˜å‚¨äº‹åŠ¡æ—¥å¿—ï¼Œè®¾ç½®ä¸ºfalseåˆ™ä¸ºåŒæ­¥   autoSql boolean true éå¿…å¡« æ˜¯å¦è‡ªåŠ¨æ‰§è¡Œæ¡†æ¶è‡ªåŠ¨å»ºåº“å»ºè¡¨SQLè¯­å¥ï¼ˆå¦‚æœå·²ç»åˆ›å»ºå¯ä»¥è®¾ç½®ä¸ºfalseï¼‰   phyDeleted boolean true éå¿…å¡« åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦ç‰©ç†åˆ é™¤æ—¥å¿—ã€‚è®¾ç½®ä¸ºfalseï¼Œåˆ™åªä¼šæ›´æ”¹æ—¥å¿—çŠ¶æ€   storeDays int(å•ä½:å¤©) 3 éå¿…å¡« å¦‚æœ phyDeleted è®¾ç½®ä¸ºfalseçš„æ—¶å€™ï¼Œæ—¥å¿—å­˜å‚¨å¤©æ•°   repository String mysql å¿…å¡« è¿™æ˜¯æŒ‡å®šäº‹åŠ¡æ—¥å¿—çš„å­˜å‚¨æ–¹å¼ï¼Œç›®å‰æ”¯æŒå¡«å†™ mysql, oracle, postgresql, sqlserver, mongo, redis, file    repositoryé…ç½® repositoryæ˜¯Hmilyç”¨æ¥å­˜å‚¨äº‹åŠ¡æ—¥å¿—çš„é…ç½®ï¼Œç›®å‰æ”¯æŒ:database(mysql, oracle, postgresql, sqlserver), file(æœ¬åœ°æ¨¡å¼ï¼Œæµ‹è¯•ï¼Œå¼€å‘ç¯å¢ƒç”¨), mongodb, zookeeper, redisã€‚\n databaseé…ç½®(é»˜è®¤ä½¿ç”¨hikariè¿æ¥æ± ):     åç§° ç±»å‹ é»˜ â€¦","date":-62135596800,"description":"Hmilyé…ç½®è¯¦è§£","dir":"projects/hmily/config/","fuzzywordcount":2600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"f93094e1975f84f81110b43c7fa410e104326e41","permalink":"/zh/projects/hmily/config/","publishdate":"0001-01-01T00:00:00Z","readingtime":6,"relpermalink":"/zh/projects/hmily/config/","summary":"é…ç½®è¯¦è§£ï¼š æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf","tags":null,"title":"Hmily-Config","type":"projects","url":"/zh/projects/hmily/config/","wordcount":2581},{"author":null,"categories":null,"content":" Local Configuration  File Name : hmily.yml.\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = apollo\n The framework will pull the configuration according to your configured apollo.\n  hmily: server: configMode: apollo appName: # The following configuration will be read when server.configMode equals apollo. remote: apollo: configService: 127.0.0.1:8080 # apollo service address namespace: test # namespace appId: test # group secret: xxxx # the secret key env: dev # environment fileExtension: yml # format of configuration file of apollo (properties or ymlï¼‰   You can add configurations in apollo, and the format is as follows(yml):  hmily: config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026amp;rsquo;t have to be configured all.\n metrics is optional; If it is not configuredï¼Œit means you don\u0026amp;rsquo;t enable metrics.\n  ","date":-62135596800,"description":"apollo configuration centre mode","dir":"projects/hmily/config-apollo/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"d91a7edb345962c1d8a6d96faf463f62f9fcf452","permalink":"/projects/hmily/config-apollo/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/config-apollo/","summary":"Local Configuration  File Name : hmily.yml.\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = apollo\n The framework will pull the configuration according to your configured apollo.\n  hmily: server: configMode: apollo appName: # The following configuration will be read when server.","tags":null,"title":"Hmily-Config-Apollo","type":"projects","url":"/projects/hmily/config-apollo/","wordcount":290},{"author":null,"categories":null,"content":" æœ¬åœ°é…ç½®  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n å…·ä½“çš„å…¨å†…å®¹å¦‚ä¸‹ : æ³¨æ„è®¾ç½® hmily.server.configMode = apollo\n æ¡†æ¶çš„æˆ–é¦–å…ˆæ ¹æ®ä½ çš„ apollo é…ç½®ï¼Œç„¶åä» apollo è·å–é…ç½®\n  hmily: server: configMode: apollo appName: # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. remote: apollo: configService: 127.0.0.1:8080 # apolloæœåŠ¡åœ°å€ namespace: test # namespace appId: test # group secret: xxxx #ç§˜é’¥ env: dev #ç¯å¢ƒ fileExtension: yml #apolloä¸Šé…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼ˆpropertiesæˆ–è€…ymlï¼‰äºŒé€‰ä¸€   ç„¶åï¼Œä½ å¯ä»¥åœ¨apolloä¸Šæ·»åŠ é…ç½®ï¼Œé…ç½®æ ¼å¼å¦‚æœä¸‹ï¼ˆymlï¼‰ï¼š  hmily: config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   æ³¨æ„ repositoryçš„é…ç½®æ˜¯SPIçš„æ‰©å±•æ–¹å¼ï¼Œå‡ ç§æ–¹å¼ç”±ä½ å»é€‰æ‹©ä¸€ç§ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨é…ç½®ã€‚\n metrics é…ç½®å¯æœ‰å¯æ— ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä»£è¡¨ä¸å¼€å¯metrics\n  ","date":-62135596800,"description":"apolloé…ç½®ä¸­å¿ƒæ¨¡å¼","dir":"projects/hmily/config-apollo/","fuzzywordcount":500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"91cb3b81a29cb5bdfd81452ba09f82784c93b473","permalink":"/zh/projects/hmily/config-apollo/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/config-apollo/","summary":"æœ¬åœ°é…ç½® æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026gt;","tags":null,"title":"Hmily-Config-Apollo","type":"projects","url":"/zh/projects/hmily/config-apollo/","wordcount":454},{"author":null,"categories":null,"content":" Local Configuration  File Name: hmily.ymlã€‚\n Path: The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = consul\n The framework will pull the configuration according to your configured consul.\n  hmily: server: configMode: consul appName: xxxxx remote: consul: hostAndPort: 127.0.0.1:8500 # consul service address hostAndPorts: key: test # the key of consul blacklistTimeInMillis: 6000 fileExtension: yml # the format of the configuration of consul (properties or yml) passive: true # enable automatic update   Pay attention to consul service address configuration, if it is cluster, please configure hostAndPorts Nodes, configure hostAndPort to standalone mode. You have to set one of them, if the two is empty, it will adopt cluster configuration.\n And you need to add hmily configuration in the above configured key, the configuration is as follows:\n  hmily: config: appName: serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026amp;rsquo;t have to be configured all.\n metrics is optional; If it is not configuredï¼Œit means you don\u0026amp;rsquo;t enable metrics.\n  ","date":-62135596800,"description":"Consul configuration centre mode","dir":"projects/hmily/config-consul/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"abc89c1124b74c3f71261de7a77f2bf69b2369e3","permalink":"/projects/hmily/config-consul/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/config-consul/","summary":"Local Configuration  File Name: hmily.ymlã€‚\n Path: The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = consul\n The framework will pull the configuration according to your configured consul.\n  hmily: server: configMode: consul appName: xxxxx remote: consul: hostAndPort: 127.","tags":null,"title":"Hmily-Config-Consul","type":"projects","url":"/projects/hmily/config-consul/","wordcount":319},{"author":null,"categories":null,"content":" æœ¬åœ°é…ç½®  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n å…·ä½“çš„å…¨å†…å®¹å¦‚ä¸‹ : æ³¨æ„è®¾ç½® hmily.server.configMode = consul\n æ¡†æ¶çš„æˆ–é¦–å…ˆæ ¹æ®ä½ çš„ consul é…ç½®ï¼Œç„¶åä» consul è·å–é…ç½®\n  hmily: server: configMode: consul appName: xxxxx remote: consul: hostAndPort: 127.0.0.1:8500 # consulæœåŠ¡åœ°å€ hostAndPorts: key: test # consul ä¸Šçš„key blacklistTimeInMillis: 6000 fileExtension: yml # consulä¸Šé…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼ˆpropertiesæˆ–è€…ymlï¼‰äºŒé€‰ä¸€ passive: true # å¼€å¯è‡ªåŠ¨æ›´æ–°   æ³¨æ„consulæœåŠ¡åœ°å€é…ç½®ï¼Œå¦‚æœæ˜¯é›†ç¾¤ï¼Œé‚£ä¹ˆè¯·é…ç½®hostAndPortsèŠ‚ç‚¹ï¼Œå•å‡»é…ç½®hostAndPortï¼Œä¸¤è€…å¿…é¡»æœ‰ä¸€ä¸ªä¸ä¸ºç©ºã€‚ä¸¤è€…éƒ½ä¸ä¸ºç©ºï¼Œé‡‡ç”¨çš„æ˜¯é›†ç¾¤é…ç½®\n ç„¶åï¼Œä½ éœ€è¦åœ¨ä¸Šè¿°é…ç½®çš„keyä¸Šå†™å…¥hmilyçš„é…ç½®ï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\n  hmily: config: appName: serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   æ³¨æ„ repositoryçš„é…ç½®æ˜¯SPIçš„æ‰©å±•æ–¹å¼ï¼Œå‡ ç§æ–¹å¼ç”±ä½ å»é€‰æ‹©ä¸€ç§ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨é…ç½®ã€‚\n metrics é…ç½®å¯æœ‰å¯æ— ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä»£è¡¨ä¸å¼€å¯metrics\n  ","date":-62135596800,"description":"Consulé…ç½®ä¸­å¿ƒæ¨¡å¼","dir":"projects/hmily/config-consul/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"85741609640c91f8859af7db5a4cb7347f569c42","permalink":"/zh/projects/hmily/config-consul/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/config-consul/","summary":"æœ¬åœ°é…ç½® æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026gt;","tags":null,"title":"Hmily-Config-Consul","type":"projects","url":"/zh/projects/hmily/config-consul/","wordcount":504},{"author":null,"categories":null,"content":" Local Configuration  File Name: hmily.yml.\n Path: The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = etcd\n The framework will pull the configuration according to your configured etcd.\n  hmily: server: configMode: etcd appName: xxxxx # The following configuration will be read when server.configMode equals etcd. remote: etcd: server: http://127.0.0.1:2379 # etcd service address key: test # key of etcd timeoutMs: 6000 fileExtension: yml # format of configuration of etcd (properties or yml) update : # Default is falseï¼Œwhether need to write local configuration file to zookeeper updateFileName: # when update is true, name of configuration file, which located in the yaml file of resource directory of the projectä½äºé¡¹ç›®çš„ resourceæ–‡ä»¶å¤¹ä¸‹çš„yamlæ ¼å¼   And you need to add hmily configuration in the above configured key, the context is as follows:  hmily: config: appName: serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026amp;rsquo;t have to be configured all.\n metrics is optional; If it is not configuredï¼Œit means you don\u0026amp;rsquo;t enable metrics.\n  ","date":-62135596800,"description":"etcd configuration centre mode","dir":"projects/hmily/config-etcd/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"57f4adcc91ac3307f201f834e55e206d761567e0","permalink":"/projects/hmily/config-etcd/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/config-etcd/","summary":"Local Configuration File Name: hmily.yml. Path: The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource The specific contents are as follows : Notice setting hmily.server.configMode = etcd The framework will pull the configuration according to your configured etcd. hmily: server: configMode: etcd appName: xxxxx # The following","tags":null,"title":"Hmily-Config-Etcd","type":"projects","url":"/projects/hmily/config-etcd/","wordcount":373},{"author":null,"categories":null,"content":" æœ¬åœ°é…ç½®  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n å…·ä½“çš„å…¨å†…å®¹å¦‚ä¸‹ : æ³¨æ„è®¾ç½® hmily.server.configMode = etcd\n æ¡†æ¶çš„æˆ–é¦–å…ˆæ ¹æ®ä½ çš„ etcd é…ç½®ï¼Œç„¶åä» etcd è·å–é…ç½®\n  hmily: server: configMode: etcd appName: xxxxx # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. remote: etcd: server: http://127.0.0.1:2379 # etcdæœåŠ¡åœ°å€ key: test # etcd ä¸Šçš„keyï¼Œ timeoutMs: 6000 fileExtension: yml #etcdä¸Šé…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼ˆpropertiesæˆ–è€…ymlï¼‰äºŒé€‰ä¸€ update : #é»˜è®¤æ˜¯false ï¼Œæ˜¯å¦éœ€è¦å°†æœ¬åœ°çš„é…ç½®æ–‡ä»¶å†™åˆ°zookeeper updateFileName: #updateå±æ€§ä¸ºtrueæ—¶å€™ ï¼Œé…ç½®æ–‡ä»¶åç§°ï¼Œä½äºé¡¹ç›®çš„ resourceæ–‡ä»¶å¤¹ä¸‹çš„yamlæ ¼å¼   ç„¶åï¼Œä½ éœ€è¦åœ¨ä¸Šè¿°é…ç½®çš„keyä¸Šå†™å…¥hmilyçš„é…ç½®ï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š  hmily: config: appName: serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   æ³¨æ„ repositoryçš„é…ç½®æ˜¯SPIçš„æ‰©å±•æ–¹å¼ï¼Œå‡ ç§æ–¹å¼ç”±ä½ å»é€‰æ‹©ä¸€ç§ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨é…ç½®ã€‚\n metrics é…ç½®å¯æœ‰å¯æ— ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä»£è¡¨ä¸å¼€å¯metrics\n  ","date":-62135596800,"description":"etcdé…ç½®ä¸­å¿ƒæ¨¡å¼","dir":"projects/hmily/config-etcd/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"8652aa886d5e2b29ed194226bad81dbf77109af3","permalink":"/zh/projects/hmily/config-etcd/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/config-etcd/","summary":"æœ¬åœ°é…ç½® æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026gt;","tags":null,"title":"Hmily-Config-Etcd","type":"projects","url":"/zh/projects/hmily/config-etcd/","wordcount":530},{"author":null,"categories":null,"content":" Local Configuration  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = local\n All configurations of the framework base on your local configuration files.\n Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026amp;rsquo;t have to be configured all.\n metrics is optional; If it is not configuredï¼Œit means you don\u0026amp;rsquo;t enable metrics.\n  hmily: server: configMode: local appName: # The following configuration will be read when server.configMode equals local config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:  ","date":-62135596800,"description":"Local configuration mode","dir":"projects/hmily/config-local/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"569c66056233e5c20a7f2453ce1eee69bcbab913","permalink":"/projects/hmily/config-local/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/config-local/","summary":"Local Configuration  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = local\n All configurations of the framework base on your local configuration files.\n Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026rsquo;t have to be configured all.","tags":null,"title":"Hmily-Config-Local","type":"projects","url":"/projects/hmily/config-local/","wordcount":238},{"author":null,"categories":null,"content":" æœ¬åœ°é…ç½®  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n å…·ä½“çš„å…¨å†…å®¹å¦‚ä¸‹ : æ³¨æ„è®¾ç½® hmily.server.configMode = local\n æ¡†æ¶çš„æ‰€æœ‰çš„é…ç½®å°±æ˜¯åŸºäºä½ æœ¬åœ°æ–‡ä»¶é‡Œé¢çš„é…ç½®\n æ³¨æ„ repositoryçš„é…ç½®æ˜¯SPIçš„æ‰©å±•æ–¹å¼ï¼Œå‡ ç§æ–¹å¼ç”±ä½ å»é€‰æ‹©ä¸€ç§ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨é…ç½®ã€‚\n metrics é…ç½®å¯æœ‰å¯æ— ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä»£è¡¨ä¸å¼€å¯metrics\n  hmily: server: configMode: local appName: # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:  ","date":-62135596800,"description":"æœ¬åœ°é…ç½®æ¨¡å¼","dir":"projects/hmily/config-local/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"8cf520a489831cb4d91418b9dbd9fedaf115cf2d","permalink":"/zh/projects/hmily/config-local/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/config-local/","summary":"æœ¬åœ°é…ç½® æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026gt;","tags":null,"title":"Hmily-Config-Local","type":"projects","url":"/zh/projects/hmily/config-local/","wordcount":351},{"author":null,"categories":null,"content":" Local Conguration  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = naocs\n The framework will pull the configuration from your configured nacos.\n  hmily: server: configMode: nacos appName: # The following configuration will be read when server.configMode equals nacos remote: nacos: server: 127.0.0.1:2181 # nacos service address dataId: test # dataId group: test # group timeoutMs: 6000 # Timeout(ms) fileExtension: yml # the format of the configuration of nacos (properties or yml)   And you can add configuration in nacos, the format is as follows(yml):  hmily: config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026amp;rsquo;t have to be configured all.\n metrics is optional; If it is not configuredï¼Œit means you don\u0026amp;rsquo;t enable metrics.\n  ","date":-62135596800,"description":"nacos configuration centre mode","dir":"projects/hmily/config-nacos/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"7be9f4182936790839e46fadaef6d3ba1619b3fe","permalink":"/projects/hmily/config-nacos/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/config-nacos/","summary":"Local Conguration  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = naocs\n The framework will pull the configuration from your configured nacos.\n  hmily: server: configMode: nacos appName: # The following configuration will be read when server.","tags":null,"title":"Hmily-Config-Nacos","type":"projects","url":"/projects/hmily/config-nacos/","wordcount":283},{"author":null,"categories":null,"content":" æœ¬åœ°é…ç½®  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n å…·ä½“çš„å…¨å†…å®¹å¦‚ä¸‹ : æ³¨æ„è®¾ç½® hmily.server.configMode = naocs\n æ¡†æ¶çš„æˆ–é¦–å…ˆæ ¹æ®ä½ çš„ nacos é…ç½®ï¼Œç„¶åä» nacos è·å–é…ç½®\n  hmily: server: configMode: nacos appName: # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. remote: nacos: server: 127.0.0.1:2181 # nacosæœåŠ¡åœ°å€ dataId: test # dataId group: test # group timeoutMs: 6000 #è¶…æ—¶æ—¶é—´ï¼ˆmsï¼‰ fileExtension: yml #nacosä¸Šé…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼ˆpropertiesæˆ–è€…ymlï¼‰äºŒé€‰ä¸€   ç„¶åï¼Œä½ å¯ä»¥åœ¨nacosä¸Šæ·»åŠ é…ç½®ï¼Œé…ç½®æ ¼å¼å¦‚æœä¸‹ï¼ˆymlï¼‰ï¼š  hmily: config: appName: xiaoyu serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   æ³¨æ„ repositoryçš„é…ç½®æ˜¯SPIçš„æ‰©å±•æ–¹å¼ï¼Œå‡ ç§æ–¹å¼ç”±ä½ å»é€‰æ‹©ä¸€ç§ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨é…ç½®ã€‚\n metrics é…ç½®å¯æœ‰å¯æ— ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä»£è¡¨ä¸å¼€å¯metrics\n  ","date":-62135596800,"description":"nacosé…ç½®ä¸­å¿ƒæ¨¡å¼","dir":"projects/hmily/config-nacos/","fuzzywordcount":500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"a4f631094be0037ba9b72f05e0ab5dcfc3f2a63b","permalink":"/zh/projects/hmily/config-nacos/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/config-nacos/","summary":"æœ¬åœ°é…ç½® æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026gt;","tags":null,"title":"Hmily-Config-Nacos","type":"projects","url":"/zh/projects/hmily/config-nacos/","wordcount":452},{"author":null,"categories":null,"content":" Local Configuration  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = zookeeper\n The framework will pull the configuration from your configured zookeeper.\n  hmily: server: configMode: zookeeper appName: # The following configuration will be read when server.configMode equals zookeeper remote: zookeeper: serverList: 127.0.0.1:2181 # your zookeeper service address, multiple addresses are separated by \u0026#39;,\u0026#39; fileExtension: yml # the format of the configuration of zookeeper(properties or yml) path: /hmily/xiaoyu # file path to zookeeper configuration update : # the deaflut is false, it means whether write the local configuration to zookeeper updateFileName: # it is the name of configuration when the property of \u0026#39;update\u0026#39; is true, and it is under the resource directory and the format is yaml   And you can add the needed configuration of hmily under the path, the configuration format is as follows(yml):  hmily: config: appName: serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   Notice that the configurations of repository are extensions of SPI, you can select one from those modes, which don\u0026amp;rsquo;t have to be configured all.\n metrics is optional; If it is not configuredï¼Œit means you don\u0026amp;rsquo;t enable metrics.\n  ","date":-62135596800,"description":"zookeeper configuration centre mode","dir":"projects/hmily/config-zookeeper/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"4e7f9a1ece30a1c69445af47dc74e0ab976bc13a","permalink":"/projects/hmily/config-zookeeper/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/config-zookeeper/","summary":"Local Configuration  File Name: hmily.ymlã€‚\n Pathï¼š The default path is the resource directory of the project, which can be specified by -Dhmily.conf, and you can also put the configuration in user.dir directory. Priority: -Dhmily.conf \u0026gt; user.dir \u0026gt; resource\n The specific contents are as follows : Notice setting hmily.server.configMode = zookeeper\n The framework will pull the configuration from your configured zookeeper.\n  hmily: server: configMode: zookeeper appName: # The following configuration will be read when server.","tags":null,"title":"Hmily-Config-Zookeeper","type":"projects","url":"/projects/hmily/config-zookeeper/","wordcount":333},{"author":null,"categories":null,"content":" æœ¬åœ°é…ç½®  æ–‡ä»¶åä¸º : hmily.ymlã€‚\n è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026amp;gt; user.dir \u0026amp;gt; resource\n å…·ä½“çš„å…¨å†…å®¹å¦‚ä¸‹ : æ³¨æ„è®¾ç½® hmily.server.configMode = zookeeper\n æ¡†æ¶çš„æˆ–é¦–å…ˆæ ¹æ®ä½ çš„ zookeeper é…ç½®ï¼Œç„¶åä» zookeeper è·å–é…ç½®\n  hmily: server: configMode: zookeeper appName: # å¦‚æœserver.configMode eq local çš„æ—¶å€™æ‰ä¼šè¯»å–åˆ°è¿™é‡Œçš„é…ç½®ä¿¡æ¯. remote: zookeeper: serverList: 127.0.0.1:2181 #ä½ çš„zookeeperæœåŠ¡åœ°å€ï¼Œå¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” fileExtension: yml #zookeeperä¸Šé…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼ˆpropertiesæˆ–è€…ymlï¼‰äºŒé€‰ä¸€ path: /hmily/xiaoyu #zookeeperä¸Šé…ç½®æ–‡ä»¶çš„è·¯å¾„ update : #é»˜è®¤æ˜¯false ï¼Œæ˜¯å¦éœ€è¦å°†æœ¬åœ°çš„é…ç½®æ–‡ä»¶å†™åˆ°zookeeper updateFileName: #updateå±æ€§ä¸ºtrueæ—¶å€™ ï¼Œé…ç½®æ–‡ä»¶åç§°ï¼Œä½äºé¡¹ç›®çš„ resourceæ–‡ä»¶å¤¹ä¸‹çš„yamlæ ¼å¼   ç„¶åï¼Œä½ å¯ä»¥åœ¨ä¸Šè¿°çš„ path é…ç½®è·¯å¾„ä¸‹ï¼Œå»å†™å…¥hmilyæ¡†æ¶æ‰€éœ€è¦çš„é…ç½®ï¼Œé…ç½®æ ¼å¼å¦‚æœä¸‹ï¼ˆymlï¼‰ï¼š  hmily: config: appName: serializer: kryo contextTransmittalMode: threadLocal scheduledThreadMax: 16 scheduledRecoveryDelay: 60 scheduledCleanDelay: 60 scheduledPhyDeletedDelay: 600 scheduledInitDelay: 30 recoverDelayTime: 60 cleanDelayTime: 180 limit: 200 retryMax: 10 bufferSize: 8192 consumerThreads: 16 asyncRepository: true autoSql: true phyDeleted: true storeDays: 3 repository: mysql repository: database: driverClassName: com.mysql.jdbc.Driver url : username: password: maxActive: 20 minIdle: 10 connectionTimeout: 30000 idleTimeout: 600000 maxLifetime: 1800000 file: path: prefix: /hmily mongo: databaseName: url: userName: password: zookeeper: host: localhost:2181 sessionTimeOut: 1000 rootPath: /hmily redis: cluster: false sentinel: false clusterUrl: sentinelUrl: masterName: hostName: port: password: maxTotal: 8 maxIdle: 8 minIdle: 2 maxWaitMillis: -1 minEvictableIdleTimeMillis: 1800000 softMinEvictableIdleTimeMillis: 1800000 numTestsPerEvictionRun: 3 testOnCreate: false testOnBorrow: false testOnReturn: false testWhileIdle: false timeBetweenEvictionRunsMillis: -1 blockWhenExhausted: true timeOut: 1000 metrics: metricsName: prometheus host: port: 9091 async: true threadCount : 16 jmxConfig:   æ³¨æ„ repositoryçš„é…ç½®æ˜¯SPIçš„æ‰©å±•æ–¹å¼ï¼Œå‡ ç§æ–¹å¼ç”±ä½ å»é€‰æ‹©ä¸€ç§ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨é…ç½®ã€‚\n metrics é…ç½®å¯æœ‰å¯æ— ï¼Œå¦‚æœä¸é…ç½®ï¼Œåˆ™ä»£è¡¨ä¸å¼€å¯metrics\n  ","date":-62135596800,"description":"zookeeperé…ç½®ä¸­å¿ƒæ¨¡å¼","dir":"projects/hmily/config-zookeeper/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"2eb557c4bcdb77c02a36358b07997299d28239ae","permalink":"/zh/projects/hmily/config-zookeeper/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/config-zookeeper/","summary":"æœ¬åœ°é…ç½® æ–‡ä»¶åä¸º : hmily.ymlã€‚ è·¯å¾„ï¼š é»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®çš„ resourceç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -Dhmily.conf æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æŠŠé…ç½®æ”¾åœ¨ user.dir ç›®å½•ä¸‹ã€‚ ä¼˜å…ˆçº§åˆ« -Dhmily.conf \u0026gt;","tags":null,"title":"Hmily-Config-Zookeeper","type":"projects","url":"/zh/projects/hmily/config-zookeeper/","wordcount":571},{"author":null,"categories":null,"content":" HmilyTransactionContextäº‹åŠ¡ä¸Šä¸‹æ–‡ @Data public class HmilyTransactionContext { /** * transId. */ private Long transId; /** * participant id. */ private Long participantId; /** * participant ref id. */ private Long participantRefId; /** * this hmily action. */ private int action; /** * äº‹åŠ¡å‚ä¸çš„è§’è‰². */ private int role; /** * transType. */ private String transType; }  HmilyTransactionContext æ˜¯Hmilyåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶è¿›è¡ŒRPCè°ƒç”¨æ—¶ç”¨äºä¼ é€’äº‹åŠ¡ä¸Šä¸‹æ–‡çš„æ ¸å¿ƒç±», é»˜è®¤ä¼šå°†å…¶å­˜å‚¨åœ¨ThreadLocalä¸­ï¼Œç„¶åè¿›è¡ŒRPCçš„å‚æ•°ä¼ é€’ï¼Œä¹Ÿå¯ä»¥é…ç½®ä½¿ç”¨çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„çš„åœºæ™¯ï¼Œ è¿™ä¸ªæ—¶å€™éœ€è¦åœ¨é…ç½®ä¸­æŒ‡å®š contextTransmittalMode = transmittable,å°†ä¼šä½¿ç”¨alibabaå¼€æºç±»åº“ã€‚\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.alibaba\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;transmittable-thread-local\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.11.5\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Dubboæ¡†æ¶ä¼ é€’äº‹åŠ¡ä¸Šä¸‹æ–‡ å…·ä½“å®ç°ç±»åœ¨org.dromara.hmily.dubbo.filter.DubboHmilyTransactionFilterä¸­ï¼Œ é€šè¿‡ RpcContext.getContext().setAttachment(String key, String value) è¿›è¡ŒRPCä¼ å‚æ•°ã€‚\nMotanæ¡†æ¶ä¼ é€’äº‹åŠ¡ä¸Šä¸‹æ–‡ å…·ä½“å®ç°ç±»åœ¨org.dromara.hmily.motan.filter.MotanHmilyTransactionFilterä¸­ï¼Œ é€šè¿‡ Request.setAttachment(String key, String value) è¿›è¡ŒRPCä¼ å‚æ•°ã€‚\nSpringCloudæ¡†æ¶ä¼ é€’äº‹åŠ¡ä¸Šä¸‹æ–‡ å…·ä½“å®ç°ç±»åœ¨org.dromara.hmily.springcloud.feign.HmilyFeignInterceptorä¸­ï¼Œ é€šè¿‡ RequestTemplate.header(String name, String... values) è¿›è¡ŒRPCä¼ å‚æ•°ã€‚\n","date":-62135596800,"description":"Hmily-Contextäº‹åŠ¡ä¸Šä¸‹æ–‡","dir":"projects/hmily/context/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"27f12b2c83a727c1c59ae216f63a61b3f5ec5b16","permalink":"/zh/projects/hmily/context/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/context/","summary":"HmilyTransactionContextäº‹åŠ¡ä¸Šä¸‹æ–‡ @Data public class HmilyTransactionContext { /** * transId. */ private Long transId; /** * participant id. */ private Long participantId; /** * participant ref id. */ private Long participantRefId; /** * this hmily action. */ private int action; /** * äº‹åŠ¡","tags":null,"title":"Hmily-Context","type":"projects","url":"/zh/projects/hmily/context/","wordcount":516},{"author":null,"categories":null,"content":" Metrics ç›®å‰hmilyçš„metricsæ¨¡å—ï¼Œé‡‡ç”¨ prometheusæ¥è¿›è¡Œé‡‡é›†ï¼Œä½¿ç”¨pullæ¨¡å¼å¯¹å¤–æš´éœ²metricsä¿¡æ¯æ¥å£ã€‚\næ”¶é›†çš„metricsä¸»è¦åˆ†ä¸ºäºŒä¸ªå¤§ç±»ã€‚\n åº”ç”¨çš„JVMä¿¡æ¯ï¼šå†…å­˜ï¼Œcpuï¼Œçº¿ç¨‹ä½¿ç”¨ç­‰ç­‰\n äº‹åŠ¡ä¿¡æ¯ï¼šåŒ…æ‹¬äº‹åŠ¡çš„æ€»æ•°ï¼Œäº‹åŠ¡çš„è¿Ÿå»¶ï¼Œäº‹åŠ¡çš„çŠ¶æ€ï¼Œäº‹åŠ¡çš„è§’è‰²\n  æŒ‡æ ‡è¯¦è§£ å¦‚ä½•å±•ç¤º  ç”¨æˆ·å¯ä»¥ä½¿ç”¨ Grafana ä»åº”ç”¨é‡Œé¢çš„metricsé…ç½®æ‹‰å–çš„metricsä¿¡æ¯  ","date":-62135596800,"description":"Metrics","dir":"projects/hmily/metrics/","fuzzywordcount":200,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"1209e148e81f6aeb5aa08fa3d6d0e63b709a97d9","permalink":"/zh/projects/hmily/metrics/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/metrics/","summary":"Metrics ç›®å‰hmilyçš„metricsæ¨¡å—ï¼Œé‡‡ç”¨ prometheusæ¥è¿›è¡Œé‡‡é›†ï¼Œä½¿ç”¨pullæ¨¡å¼å¯¹å¤–æš´éœ²metricsä¿¡æ¯æ¥å£ã€‚ æ”¶é›†çš„metric","tags":null,"title":"Hmily-Metrics","type":"projects","url":"/zh/projects/hmily/metrics/","wordcount":174},{"author":null,"categories":null,"content":" TAC The TAC mode is actually a variant of the TCC mode. Just as the name implies, the TAC mode is called automatic rollback. As compared with the TCC mode, the user doesn\u0026amp;rsquo;t have to concern about how to write the rollback method at all. and then it can reduces user development volume and is entirely transparent to users.\n TAC Mode is only suitable for Relational Database.\n TAC Mode will intercept the user\u0026amp;rsquo;s SQL statement to generate reverse rollback SQL, and the compatibility of SQL will also be a ordeal.\n  ","date":-62135596800,"description":"Hmily-TAC","dir":"projects/hmily/tac/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"58609eebdc6bf207426e0c657e1535f7b6ec337d","permalink":"/projects/hmily/tac/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/tac/","summary":"TAC The TAC mode is actually a variant of the TCC mode. Just as the name implies, the TAC mode is called automatic rollback. As compared with the TCC mode, the user doesn\u0026rsquo;t have to concern about how to write the rollback method at all. and then it can reduces user development volume and is entirely transparent to users.\n TAC Mode is only suitable for Relational Database.\n TAC Mode will intercept the user\u0026rsquo;s SQL statement to generate reverse rollback SQL, and the compatibility of SQL will also be a ordeal.","tags":null,"title":"Hmily-TAC","type":"projects","url":"/projects/hmily/tac/","wordcount":90},{"author":null,"categories":null,"content":" TCC TCCæ¨¡å¼æ˜¯ç»å…¸çš„æŸ”æ€§äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦ä½¿ç”¨è€…æä¾› try, confirm, cancel ä¸‰ä¸ªæ–¹æ³•ï¼Œ çœŸæ­£çš„æƒ…å†µä¸‹ä¼šæ‰§è¡Œ try, confirm, å¼‚å¸¸æƒ…å†µä¸‹ä¼šæ‰§è¡Œtry, cancelã€‚ confirm æ–¹æ³•å¹¶ä¸æ˜¯ å¿…é¡»çš„ï¼Œå®Œå…¨ä¾èµ–äºç”¨æˆ·çš„try æ–¹æ³•å¦‚ä½•å»å†™ã€‚ confirm, cancel 2ä¸ªæ–¹æ³•ä¹Ÿéœ€è¦ç”¨æˆ·å»ä¿è¯å¹‚ç­‰æ€§, è¿™ä¼šé™„åŠ ä¸€å®šçš„å·¥ä½œé‡ï¼Œç”±äºåœ¨tryæ–¹æ³•å®Œæˆä¹‹åï¼Œæ•°æ®å·²ç»æäº¤äº†ï¼Œå› æ­¤å®ƒå¹¶ä¸ä¿è¯æ•°æ®çš„éš”ç¦»æ€§ã€‚ä½†æ˜¯è¿™æ ·ï¼Œå®ƒçš„ æ€§èƒ½ç›¸å¯¹è¾ƒé«˜ï¼Œä¸€ä¸ªå¥½çš„ç³»ç»Ÿè®¾è®¡ï¼Œæ˜¯éå¸¸é€‚ç”¨é€‚ç”¨TCCæ¨¡å¼ã€‚ä¸‹é¢æ˜¯Hmily æ¡†æ¶çš„ TCC æµç¨‹å›¾  åœ¨æç«¯å¼‚å¸¸æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æœåŠ¡çªç„¶å®•æœºï¼Œè¶…æ—¶å¼‚å¸¸ç­‰ï¼Œä¾èµ–ä¸è‡ªèº«çš„è°ƒç”¨ä»»åŠ¡ï¼Œæ¥è¿›è¡Œæ—¥å¿—çš„äº‹åŠ¡æ¢å¤ã€‚\n åœ¨confirm, cancel é˜¶æ®µï¼Œå¦‚æœæœ‰ä»»ä½•å¼‚å¸¸ä¼šç»§ç»­æ‰§è¡Œç›¸åº”çš„é˜¶æ®µï¼Œå¦‚æœè¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°è¿˜æœªæˆåŠŸï¼Œå°†ä¸å†è¿›è¡Œé‡è¯•ï¼Œéœ€è¦äººå·¥ä»‹å…¥ã€‚\n åœ¨æœåŠ¡é›†ç¾¤çš„æƒ…å†µä¸‹ï¼Œconfirm, cancel 2ä¸ªæ–¹æ³•ç”¨æˆ·å»å°½é‡ä¿è¯å…¶å¹‚ç­‰æ€§ã€‚\n  ","date":-62135596800,"description":"Hmily-TCC","dir":"projects/hmily/tcc/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"ab3fbd094b55130ba3997d7c129f22d0d45f7fbf","permalink":"/zh/projects/hmily/tcc/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/tcc/","summary":"TCC TCCæ¨¡å¼æ˜¯ç»å…¸çš„æŸ”æ€§äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦ä½¿ç”¨è€…æä¾› try, confirm, cancel ä¸‰ä¸ªæ–¹æ³•ï¼Œ çœŸæ­£çš„æƒ…å†µä¸‹ä¼šæ‰§è¡Œ try, confirm, å¼‚å¸¸æƒ…å†µä¸‹ä¼šæ‰§è¡Œtry, cancelã€‚ confirm æ–¹æ³•å¹¶ä¸æ˜¯","tags":null,"title":"Hmily-TCC","type":"projects","url":"/zh/projects/hmily/tcc/","wordcount":349},{"author":null,"categories":null,"content":" @Hmily /** * The annotation Hmily. * * @author xiaoyu */ @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface Hmily { }   è¯¥æ³¨è§£ä¸ºhmilyåˆ†å¸ƒå¼äº‹åŠ¡æ¥å£æ ‡è¯†ï¼Œè¡¨ç¤ºè¯¥æ¥å£å‚ä¸hmilyåˆ†å¸ƒå¼äº‹åŠ¡  @HmilyTCC @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface HmilyTCC { /** * Confirm method string. * * @return the string */ String confirmMethod() default \u0026amp;quot;\u0026amp;quot;; /** * Cancel method string. * * @return the string */ String cancelMethod() default \u0026amp;quot;\u0026amp;quot;; /** * Pattern pattern enum. * * @return the pattern enum */ TransTypeEnum pattern() default TransTypeEnum.TCC; }   è¯¥æ³¨è§£ä¸ºHmilyåˆ†å¸ƒå¼äº‹åŠ¡TCCæ¨¡å¼çš„åˆ‡é¢ï¼ˆAOP pointï¼‰ï¼Œå¯ä»¥æ ‡è¯†åœ¨ä½ æœ¬åœ°å…·ä½“å®ç°æ–¹æ³•ä¸Šã€‚\n confirmMethod : æ³¨è§£æ ‡è¯†æ–¹æ³•çš„ï¼Œç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : æ³¨è§£æ ‡è¯†æ–¹æ³•çš„ï¼Œå›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n  @HmilyTAC /** * The annotation HmilyTAC. * * @author xiaoyu */ @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface HmilyTAC { }   è¯¥æ³¨è§£ä¸ºHmilyåˆ†å¸ƒå¼äº‹åŠ¡TACæ¨¡å¼çš„åˆ‡é¢ï¼ˆAOP pointï¼‰ï¼Œå¯ä»¥æ ‡è¯†åœ¨ä½ çš„æœ¬åœ°æ–¹æ³•å…·ä½“å®ç°ä¸Šã€‚  ","date":-62135596800,"description":"annotation","dir":"projects/hmily/annotation/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"665da8d1a0ec43b5feadab5532f39783b1ab5832","permalink":"/zh/projects/hmily/annotation/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/annotation/","summary":"@Hmily /** * The annotation Hmily. * * @author xiaoyu */ @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface Hmily { } è¯¥æ³¨è§£ä¸ºhmilyåˆ†å¸ƒå¼äº‹åŠ¡æ¥å£æ ‡è¯†ï¼Œè¡¨ç¤ºè¯¥æ¥å£å‚ä¸hmilyåˆ†å¸ƒå¼äº‹åŠ¡ @HmilyTCC @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface HmilyTCC { /** * Confirm method string. * * @return the","tags":null,"title":"Hmily-annotation","type":"projects","url":"/zh/projects/hmily/annotation/","wordcount":301},{"author":null,"categories":null,"content":"","date":-62135596800,"description":"hmily development guidelines","dir":"projects/hmily/code-conduct/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"db31031e4d576dab8beafe848a6c6c21a81302dd","permalink":"/projects/hmily/code-conduct/","publishdate":"0001-01-01T00:00:00Z","readingtime":0,"relpermalink":"/projects/hmily/code-conduct/","summary":"","tags":null,"title":"Hmily-code-conduct","type":"projects","url":"/projects/hmily/code-conduct/","wordcount":0},{"author":null,"categories":null,"content":"","date":-62135596800,"description":"hmilyç¼–ç æŒ‡å—","dir":"projects/hmily/code-conduct/","fuzzywordcount":100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"6228fff3a43aab0d8106d96fbfd97de8b70d8c54","permalink":"/zh/projects/hmily/code-conduct/","publishdate":"0001-01-01T00:00:00Z","readingtime":0,"relpermalink":"/zh/projects/hmily/code-conduct/","summary":"","tags":null,"title":"Hmily-code-conduct","type":"projects","url":"/zh/projects/hmily/code-conduct/","wordcount":0},{"author":null,"categories":null,"content":" Committer Promotion After you have made a lot of contributions, the community will invite you join Committers\nBecome a committer you will have\n Hmily repository write permissions\n Idea free license\n  Committer Responsibilities  Develop new features; Refactor codes; Review pull requests reliably and in time; Consider and accept feature requests; Answer questions; Update documentation and example; Improve processes and tools; Guide new contributors join community.  Committer Routine  Committer needs to check the list of pull requests and issues to be processed in the community on a daily basis and assign them to the appropriate committer, that is, assignee.\n After a committer is assigned with an issue, the following work is required:\n Estimate whether it is a long-term issue. If it is, please label it as pending. Add issue labels, such as bug, enhancement, discussion, etc. Add milestone.   Notice\nRegardless of whether it is a community issue, there must be an assignee until the issue is resolved.\n","date":-62135596800,"description":"Hmily committer guidelines","dir":"projects/hmily/committer/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"34d42512951463e632886242e281186237d59351","permalink":"/projects/hmily/committer/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/committer/","summary":"Committer Promotion After you have made a lot of contributions, the community will invite you join Committers\nBecome a committer you will have\n Hmily repository write permissions\n Idea free license\n  Committer Responsibilities  Develop new features; Refactor codes; Review pull requests reliably and in time; Consider and accept feature requests; Answer questions; Update documentation and example; Improve processes and tools; Guide new contributors join community.  Committer Routine  Committer needs to check the list of pull requests and issues to be processed in the community on a daily basis and assign them to the appropriate committer, that is, assignee.","tags":null,"title":"Hmily-committer","type":"projects","url":"/projects/hmily/committer/","wordcount":155},{"author":null,"categories":null,"content":" æäº¤è€…æå å½“ä½ åšäº†å¾ˆå¤šè´¡çŒ®ä»¥åï¼Œç¤¾åŒºä¼šè¿›è¡Œæåã€‚ æˆä¸ºcommitterä½ ä¼šæ‹¥æœ‰\n hmilyä»“åº“å†™çš„æƒé™\n idea æ­£ç‰ˆä½¿ç”¨\n  æäº¤è€…è´£ä»»  å¼€å‘æ–°åŠŸèƒ½ï¼› ä»£ç é‡æ„ï¼› åŠæ—¶å’Œå¯é çš„è¯„å®¡Pull Requestï¼› æ€è€ƒå’Œæ¥çº³æ–°ç‰¹æ€§è¯·æ±‚ï¼› è§£ç­”é—®é¢˜ï¼› ç»´æŠ¤æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹ï¼› æ”¹è¿›æµç¨‹å’Œå·¥å…·ï¼› å¼•å¯¼æ–°çš„å‚ä¸è€…èå…¥ç¤¾åŒºã€‚  æ—¥å¸¸å·¥ä½œ  committeréœ€è¦æ¯å¤©æŸ¥çœ‹ç¤¾åŒºå¾…å¤„ç†çš„Pull Requestå’Œissueåˆ—è¡¨ï¼ŒæŒ‡å®šç»™åˆé€‚çš„committerï¼Œå³assigneeã€‚\n assigneeåœ¨è¢«åˆ†é…issueåï¼Œéœ€è¦è¿›è¡Œå¦‚ä¸‹åˆ¤æ–­ï¼š\n åˆ¤æ–­æ˜¯å¦æ˜¯é•¿æœŸissueï¼Œå¦‚æ˜¯ï¼Œåˆ™æ ‡è®°ä¸ºpendingã€‚ åˆ¤æ–­issueç±»å‹ï¼Œå¦‚ï¼šbugï¼Œenhancementï¼Œdiscussionç­‰ã€‚ åˆ¤æ–­Milestoneï¼Œå¹¶æ ‡è®°ã€‚   æ³¨æ„\næ— è®ºæ˜¯å¦æ˜¯ç¤¾åŒºissueï¼Œéƒ½å¿…é¡»æœ‰assigneeï¼Œç›´åˆ°issueå®Œæˆã€‚\n","date":-62135596800,"description":"Hmily-committeræäº¤è€…æŒ‡å—","dir":"projects/hmily/committer/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"b7be93553744f09ed788cd696c351e709bb55abe","permalink":"/zh/projects/hmily/committer/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/committer/","summary":"æäº¤è€…æå å½“ä½ åšäº†å¾ˆå¤šè´¡çŒ®ä»¥åï¼Œç¤¾åŒºä¼šè¿›è¡Œæåã€‚ æˆä¸ºcommitterä½ ä¼šæ‹¥æœ‰ hmilyä»“åº“å†™çš„æƒé™ idea æ­£ç‰ˆä½¿ç”¨ æäº¤è€…è´£ä»» å¼€å‘æ–°åŠŸèƒ½ï¼› ä»£ç é‡æ„","tags":null,"title":"Hmily-committer","type":"projects","url":"/zh/projects/hmily/committer/","wordcount":358},{"author":null,"categories":null,"content":" You can report a bug, submit a new function enhancement suggestion, or submit a pull request directly.\nSubmit an Issue  Before submitting an issue, please go through a comprehensive search to make sure the problem cannot be solved just by searching. Check the Issue List to make sure the problem is not repeated. Create a new issue and choose the type of issue. Define the issue with a clear and descriptive title.. Fill in necessary information according to the template. Choose a label after issue created, for example: bugï¼Œenhancementï¼Œdiscussion. Please pay attention for your issue, you may need provide more information during discussion.  Developer Flow Fork Hmily repo  Fork a Hmily repo to your own repo to work, then setting upstream.  git remote add upstream https://github.com/dromara/hmily.git  Choose Issue  Please choose the issue to be edited. If it is a new issue discovered or a new function enhancement to offer, please create an issue and set the right label for it. After choosing the relevant issue, please reply with a deadline to indicate that you are working on it.  Create Branch  Switch to forked master branch, pull codes from upstream, then create a new branch.  git checkout master git pull upstream master git checkout -b issueNo  Notice ï¼šWe will merge PR using squash, commit log will be different form upstream if you use old branch\nCoding  Please obey the Code of Conduct during the process of development and finish the check before submitting the pull request. push code to your fork repo.  git add modified-file-names git commit -m \u0026#39;commit log\u0026#39; git push origin issueNo  Submit Pull Request  Send a pull request to the master branch. The mentor will do code review before discussing some details (including the design, the implementation and the performance) with you. The request will be merged into the branch of current development version after the edit is well enough. At last, congratulate to be an official contributor of Hmily  Delete Branch  You can delete the remote branch (origin/issueNo) and the local branch (issueNo) associated with the remote branch (origin/issueNo) after the mentor merged the pull request into the master branch of Hmily.  git checkout master git branch -d issueNo git push origin --delete issueNo  Notice Please note that in order to show your id in the contributor list, donâ€™t forget the configurations below:\ngit config --global user.name \u0026amp;quot;username\u0026amp;quot; git config --global user.email \u0026amp;quot;username@mail.com\u0026amp;quot;  ","date":-62135596800,"description":"Hmily-contributor-guide","dir":"projects/hmily/contributor/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"c5c174a68978271968ec1b18ffcd3ee1bc709445","permalink":"/projects/hmily/contributor/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/contributor/","summary":"You can report a bug, submit a new function enhancement suggestion, or submit a pull request directly.\nSubmit an Issue  Before submitting an issue, please go through a comprehensive search to make sure the problem cannot be solved just by searching. Check the Issue List to make sure the problem is not repeated. Create a new issue and choose the type of issue. Define the issue with a clear and descriptive title.","tags":null,"title":"Hmily-contributor","type":"projects","url":"/projects/hmily/contributor/","wordcount":396},{"author":null,"categories":null,"content":" æ‚¨å¯ä»¥æŠ¥å‘Šbugï¼Œæäº¤ä¸€ä¸ªæ–°çš„åŠŸèƒ½å¢å¼ºå»ºè®®æˆ–è€…ç›´æ¥å¯¹ä»¥ä¸Šå†…å®¹æäº¤æ”¹è¿›è¡¥ä¸ã€‚\næäº¤issue  åœ¨æäº¤issueä¹‹å‰ï¼Œè¯·ç»è¿‡å……åˆ†çš„æœç´¢ï¼Œç¡®å®šè¯¥issueä¸æ˜¯é€šè¿‡ç®€å•çš„æ£€ç´¢å³å¯ä»¥è§£å†³çš„é—®é¢˜ã€‚ æŸ¥çœ‹issueåˆ—è¡¨ï¼Œç¡®å®šè¯¥issueä¸æ˜¯ä¸€ä¸ªé‡å¤çš„é—®é¢˜ã€‚ æ–°å»ºä¸€ä¸ªissueå¹¶é€‰æ‹©æ‚¨çš„issueç±»å‹ã€‚ ä½¿ç”¨ä¸€ä¸ªæ¸…æ™°å¹¶æœ‰æè¿°æ€§çš„æ ‡é¢˜æ¥å®šä¹‰issueã€‚ æ ¹æ®æ¨¡æ¿å¡«å†™å¿…è¦ä¿¡æ¯ã€‚ åœ¨æäº¤issueä¹‹åï¼Œå¯¹è¯¥issueåˆ†é…åˆé€‚çš„æ ‡ç­¾ã€‚å¦‚ï¼šbugï¼Œenhancementï¼Œdiscussionç­‰ã€‚ è¯·å¯¹è‡ªå·±æäº¤çš„issueä¿æŒå…³æ³¨ï¼Œåœ¨è®¨è®ºä¸­è¿›ä¸€æ­¥æä¾›å¿…è¦ä¿¡æ¯ã€‚  å¼€å‘æµç¨‹ Forkåˆ†æ”¯åˆ°æœ¬åœ°ï¼Œè®¾ç½®upstream  ä»hmilyçš„repoä¸Šforkä¸€ä¸ªåˆ†æ”¯åˆ°æ‚¨è‡ªå·±çš„repoæ¥å¼€å§‹å·¥ä½œï¼Œå¹¶è®¾ç½®upstreamä¸ºhmilyçš„repoã€‚  git remote add upstream https://github.com/dromara/hmily.git  é€‰æ‹©issue  è¯·åœ¨é€‰æ‹©æ‚¨è¦ä¿®æ”¹çš„issueã€‚å¦‚æœæ˜¯æ‚¨æ–°å‘ç°çš„é—®é¢˜æˆ–æƒ³æä¾›issueä¸­æ²¡æœ‰çš„åŠŸèƒ½å¢å¼ºï¼Œè¯·å…ˆæ–°å»ºä¸€ä¸ªissueå¹¶è®¾ç½®æ­£ç¡®çš„æ ‡ç­¾ã€‚ åœ¨é€‰ä¸­ç›¸å…³çš„issueä¹‹åï¼Œè¯·å›å¤ä»¥è¡¨æ˜æ‚¨å½“å‰æ­£åœ¨è¿™ä¸ªissueä¸Šå·¥ä½œã€‚å¹¶åœ¨å›å¤çš„æ—¶å€™ä¸ºè‡ªå·±è®¾ç½®ä¸€ä¸ªdeadlineï¼Œæ·»åŠ è‡³å›å¤å†…å®¹ä¸­ã€‚  åˆ›å»ºåˆ†æ”¯  åˆ‡æ¢åˆ°forkçš„masteråˆ†æ”¯ï¼Œæ‹‰å–æœ€æ–°ä»£ç ï¼Œåˆ›å»ºæœ¬æ¬¡çš„åˆ†æ”¯ã€‚  git checkout master git pull upstream master git checkout -b issueNo  æ³¨æ„ ï¼šPRä¼šæŒ‰ç…§squashçš„æ–¹å¼è¿›è¡Œmergeï¼Œå¦‚æœä¸åˆ›å»ºæ–°åˆ†æ”¯ï¼Œæœ¬åœ°å’Œè¿œç¨‹çš„æäº¤è®°å½•å°†ä¸èƒ½ä¿æŒåŒæ­¥ã€‚\nç¼–ç   è¯·æ‚¨åœ¨å¼€å‘è¿‡ç¨‹ä¸­éµå¾ªhmilyçš„ å¼€å‘è§„èŒƒã€‚å¹¶åœ¨å‡†å¤‡æäº¤pull requestä¹‹å‰å®Œæˆç›¸åº”çš„æ£€æŸ¥ã€‚ å°†ä¿®æ”¹çš„ä»£ç pushåˆ°forkåº“çš„åˆ†æ”¯ä¸Šã€‚  git add ä¿®æ”¹ä»£ç  git commit -m \u0026#39;commit log\u0026#39; git push origin issueNo  æäº¤PR  å‘é€ä¸€ä¸ªpull requeståˆ°hmilyçš„masteråˆ†æ”¯ã€‚ æ¥ç€å¯¼å¸ˆåšCodeReviewï¼Œç„¶åä»–ä¼šä¸æ‚¨è®¨è®ºä¸€äº›ç»†èŠ‚ï¼ˆåŒ…æ‹¬è®¾è®¡ï¼Œå®ç°ï¼Œæ€§èƒ½ç­‰ï¼‰ã€‚å½“å¯¼å¸ˆå¯¹æœ¬æ¬¡ä¿®æ”¹æ»¡æ„åï¼Œä¼šå°†æäº¤åˆå¹¶åˆ°å½“å‰å¼€å‘ç‰ˆæœ¬çš„åˆ†æ”¯ä¸­ã€‚ æœ€åï¼Œæ­å–œæ‚¨å·²ç»æˆä¸ºäº†hmilyçš„è´¡çŒ®è€…ï¼  åˆ é™¤åˆ†æ”¯  åœ¨å¯¼å¸ˆå°†pull requeståˆå¹¶åˆ°hmilyçš„masteråˆ†æ”¯ä¸­ä¹‹åï¼Œæ‚¨å°±å¯ä»¥å°†è¿œç¨‹çš„åˆ†æ”¯ï¼ˆorigin/issueNoï¼‰åŠä¸è¿œç¨‹åˆ†æ”¯ï¼ˆorigin/issueNoï¼‰å…³è”çš„æœ¬åœ°åˆ†æ”¯ï¼ˆissueNoï¼‰åˆ é™¤ã€‚  git checkout master git branch -d issueNo git push origin --delete issueNo  æ³¨æ„ ä¸ºäº†è®©æ‚¨çš„idæ˜¾ç¤ºåœ¨contributoråˆ—è¡¨ä¸­ï¼Œåˆ«å¿˜äº†ä»¥ä¸‹è®¾ç½®ï¼š\ngit config --global user.name \u0026amp;quot;username\u0026amp;quot; git config --global user.email \u0026amp;quot;username@mail.com\u0026amp;quot;  ","date":-62135596800,"description":"Hmily-contributorè´¡çŒ®è€…æŒ‡å—","dir":"projects/hmily/contributor/","fuzzywordcount":1000,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"897065d661e3482f0011b75e9d2ae8434831d5e3","permalink":"/zh/projects/hmily/contributor/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/contributor/","summary":"æ‚¨å¯ä»¥æŠ¥å‘Šbugï¼Œæäº¤ä¸€ä¸ªæ–°çš„åŠŸèƒ½å¢å¼ºå»ºè®®æˆ–è€…ç›´æ¥å¯¹ä»¥ä¸Šå†…å®¹æäº¤æ”¹è¿›è¡¥ä¸ã€‚ æäº¤issue åœ¨æäº¤issueä¹‹å‰ï¼Œè¯·ç»è¿‡å……åˆ†çš„æœç´¢ï¼Œç¡®å®šè¯¥iss","tags":null,"title":"Hmily-contributor","type":"projects","url":"/zh/projects/hmily/contributor/","wordcount":963},{"author":null,"categories":null,"content":" TAC TACæ¨¡å¼å…¶å®æ˜¯TCCæ¨¡å¼çš„å˜ç§,é¡¾åæ€ä¹‰ TAC æ¨¡å¼è¢«ç§°ä¸ºè‡ªåŠ¨å›æ»š,ç›¸æ¯”äº TCCæ¨¡å¼ï¼Œç”¨æˆ·å®Œå…¨ä¸ç”¨å…³å¿ƒ å›æ»šæ–¹æ³•å¦‚ä½•å»å†™ï¼Œå‡å°‘äº†ç”¨æˆ·çš„å¼€å‘é‡ï¼Œå¯¹ç”¨æˆ·å®Œå…¨é€æ˜ã€‚\n TAC æ¨¡å¼åªé€‚åˆäºå…³ç³»å‹æ•°æ®åº“ã€‚\n TAC æ¨¡å¼ä¼šæ‹¦æˆªç”¨æˆ·çš„SQLè¯­å¥ç”Ÿæˆåå‘å›æ»šSQLï¼ŒSQLçš„å…¼å®¹åº¦ä¹Ÿä¼šæ˜¯ä¸€å¤§è€ƒéªŒã€‚\n  ","date":-62135596800,"description":"tac","dir":"projects/hmily/tac/","fuzzywordcount":200,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"b248c8ac0383696627e8f639f042dbad5b440774","permalink":"/zh/projects/hmily/tac/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/tac/","summary":"TAC TACæ¨¡å¼å…¶å®æ˜¯TCCæ¨¡å¼çš„å˜ç§,é¡¾åæ€ä¹‰ TAC æ¨¡å¼è¢«ç§°ä¸ºè‡ªåŠ¨å›æ»š,ç›¸æ¯”äº TCCæ¨¡å¼ï¼Œç”¨æˆ·å®Œå…¨ä¸ç”¨å…³å¿ƒ å›æ»šæ–¹æ³•å¦‚ä½•å»å†™ï¼Œå‡å°‘äº†ç”¨æˆ·çš„å¼€å‘é‡ï¼Œå¯¹","tags":null,"title":"Hmily-tac","type":"projects","url":"/zh/projects/hmily/tac/","wordcount":130},{"author":null,"categories":null,"content":" TCC The TCC Mode is a classic flexible transaction solution that needs the users to provided try, confirm, cancel methods. The try, confirm methods will be invoked under normal circumstances,and the try, cancel methods will be invoked as an exception occurs. the confirm method is not required,it entirely depends on the users how to implement the try method. the both confirm and cancel method also need the users to guarantee the idempotency, but it will bring addtional workload to the users. Because after the try method finished, the data had been committed. But with this,the performances will be even better. A good system design is very applicable to the TCC Mode. This is the flow diagram of TCC in Hmily framework as below:  In extreme cases, such as sudden service crash, timeout exceptions, and much more, the transaction recovery of the log depends on its own calling task.\n At the both confirm and cancel stage,if there are any exception occur, the corresponding stage will continue to be executed. If the maximum number of retries is exceeded, the transaction has not succeeded, It will not retry any more, then manual intervention is required at this time.\n In the case of a service cluster, the users need to do the best to ensure the idempotence of these two methods confirm, cancel.\n  ","date":-62135596800,"description":"tcc","dir":"projects/hmily/tcc/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"67d30126d857251634d592e0bafcf996f79c4685","permalink":"/projects/hmily/tcc/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/tcc/","summary":"TCC The TCC Mode is a classic flexible transaction solution that needs the users to provided try, confirm, cancel methods. The try, confirm methods will be invoked under normal circumstances,and the try, cancel methods will be invoked as an exception occurs. the confirm method is not required,it entirely depends on the users how to implement the try method. the both confirm and cancel method also need the users to guarantee the idempotency, but it will bring addtional workload to the users.","tags":null,"title":"Hmily-tcc","type":"projects","url":"/projects/hmily/tcc/","wordcount":219},{"author":null,"categories":null,"content":" The document is improving ","date":-62135596800,"description":"Distributed scheduling framework.","dir":"projects/hodor/overview/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"007599da79c513b8c058cf7b9d286758c4db24c2","permalink":"/projects/hodor/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hodor/overview/","summary":" The document is improving ","tags":null,"title":"Hodor Introduction","type":"projects","url":"/projects/hodor/overview/","wordcount":4},{"author":null,"categories":null,"content":" æ–‡æ¡£å®Œå–„ä¸­ï¼Œæ•¬è¯·æœŸå¾… ","date":-62135596800,"description":"åˆ†å¸ƒå¼è°ƒåº¦æ¡†æ¶.","dir":"projects/hodor/overview/","fuzzywordcount":100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"50f7e92cbc247eb7f365720cea762cf265b41eab","permalink":"/zh/projects/hodor/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hodor/overview/","summary":"æ–‡æ¡£å®Œå–„ä¸­ï¼Œæ•¬è¯·æœŸå¾…","tags":null,"title":"Hodorä»‹ç»","type":"projects","url":"/zh/projects/hodor/overview/","wordcount":10},{"author":null,"categories":null,"content":" Spring-boot framework which use netty as httpServer instead of tomcat.\nSpring-boot user  import jar\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.happylife.netty\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;happylife-netty\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;1.0-SNAPSHOT\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Add the following code to the application class of spring boot:\n  @Bean public EmbeddedServletContainerFactory servletContainer(){ NettyContainerConfig nettyContainerConfig = new NettyContainerConfig(); NettyEmbeddedServletContainerFactory factory = new NettyEmbeddedServletContainerFactory(nettyContainerConfig); return factory; }  ","date":-62135596800,"description":"Spring-boot framework which use netty as httpServer instead of tomcat.","dir":"projects/jinx/overview/","fuzzywordcount":100,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"b284bde165a09c23c707084889ab6d6e9db9156e","permalink":"/projects/jinx/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/jinx/overview/","summary":" Spring-boot framework which use netty as httpServer instead of tomcat.\nSpring-boot user  import jar\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.happylife.netty\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;happylife-netty\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0-SNAPSHOT\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;  Add the following code to the application class of spring boot:\n  @Bean public EmbeddedServletContainerFactory servletContainer(){ NettyContainerConfig nettyContainerConfig = new NettyContainerConfig(); NettyEmbeddedServletContainerFactory factory = new NettyEmbeddedServletContainerFactory(nettyContainerConfig); return factory; }  ","tags":null,"title":"Jinx Introduction","type":"projects","url":"/projects/jinx/overview/","wordcount":47},{"author":null,"categories":null,"content":" Spring-bootæ¡†æ¶é‡‡ç”¨nettyå–ä»£tomcatæ¥åšhttpæœåŠ¡\nSpring-bootç”¨æˆ·  é¦–å…ˆå¼•èµ·jaråŒ…  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.happylife.netty\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;happylife-netty\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;1.0-SNAPSHOT\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨spring-bootçš„Applicationç±»ä¸­åŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼š  @Bean public EmbeddedServletContainerFactory servletContainer(){ NettyContainerConfig nettyContainerConfig = new NettyContainerConfig(); NettyEmbeddedServletContainerFactory factory = new NettyEmbeddedServletContainerFactory(nettyContainerConfig); return factory; }  ","date":-62135596800,"description":"Spring-bootæ¡†æ¶é‡‡ç”¨nettyå–ä»£tomcatæ¥åšhttpæœåŠ¡","dir":"projects/jinx/overview/","fuzzywordcount":200,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"256a6b33ce06467dd183d245357d64288f0b4775","permalink":"/zh/projects/jinx/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/jinx/overview/","summary":"Spring-bootæ¡†æ¶é‡‡ç”¨nettyå–ä»£tomcatæ¥åšhttpæœåŠ¡ Spring-bootç”¨æˆ· é¦–å…ˆå¼•èµ·jaråŒ… \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.happylife.netty\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;happylife-netty\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0-SNAPSHOT\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨spring-","tags":null,"title":"Jinx ä»‹ç»","type":"projects","url":"/zh/projects/jinx/overview/","wordcount":112},{"author":null,"categories":null,"content":" Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA), Locate on hmily-demo-dubbo Module and Run Build with Maven Configuringï¼ˆhmily-demo-motan-account module for instanceï¼‰  Configure with your business database in application.yml(account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Configure with motan registration address(es) in application.yml (can run with local zookeeper instance(s))  hmily: motan: # for registration address registry: address: 127.0.0.1:2181 # replace with registration address   Modify hmily.yml, with mysql persistence backend  repository: database: driverClassName: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   run MotanHmilyAccountApplication.java  Run hmily-demo-motan-inventory(refer to simillar instructions above). Run hmily-demo-motan-order(refer to simillar instructions above). Access on http://127.0.0.1:8088/swagger-ui.html for more. ","date":-62135596800,"description":"motan Quick Start","dir":"projects/hmily/quick-start-motan/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"1f5e6ca8b2b4f80815a1c229bdc96e4c827d68b6","permalink":"/projects/hmily/quick-start-motan/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/quick-start-motan/","summary":"Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA), Locate on hmily-demo-dubbo Module and Run Build with Maven Configuringï¼ˆhmily-demo-motan-account module for instanceï¼‰  Configure with your business database in application.yml(account module for instance)  spring: datasource: driver-class-name: com.","tags":null,"title":"Motan Quick Start","type":"projects","url":"/projects/hmily/quick-start-motan/","wordcount":174},{"author":null,"categories":null,"content":" Add myth-annotation dependency to motan api project.  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Add the @Myth annotation to the motan Interface method and set the name of the message queue, which is the queue from which the messaging middleware sends messages.  @Myth(destination = \u0026amp;quot;account\u0026amp;quot;) boolean payment(AccountDTO accountDTO);   In the motan service provider (the participating method of the transaction, the callee).\n add myth-motan dependency\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Configure MythTransactionBootstrap to start the class, either as XML or as @Bean. Specific configuration can refer to here:configuration for details  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   Add @Myth to the implementation of your interface.\n Listen to the message queue (message queue name written in the annotations method), invoke the framework provides MythMqReceiveService.processMessage() method. If you use JMS, you can refer to the Demo project for details.\n@JmsListener(destination = \u0026amp;quot;account\u0026amp;quot;,containerFactory = \u0026amp;quot;queueListenerContainerFactory\u0026amp;quot;) public void receiveQueue(byte[] message) { LOGGER.info(\u0026amp;quot;=========Deducting the account information to receive Myth framework incoming information.==========\u0026amp;quot;); final Boolean success = mythMqReceiveService.processMessage(message); if(success){ //If the consumption is successful, the message is out of the queue, otherwise it is not consumed. } }   In the motan consumer (the invoker of the transaction, the caller)\n add â€¦","date":-62135596800,"description":"Myth Motan User","dir":"projects/myth/motan-user/","fuzzywordcount":500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"b96e0993b917ff08d902dcc3543096cde1d48086","permalink":"/projects/myth/motan-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/myth/motan-user/","summary":"Add myth-annotation dependency to motan api project.  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.myth\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;myth-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt;   Add the @Myth annotation to the motan Interface method and set the name of the message queue, which is the queue from which the messaging middleware sends messages.  @Myth(destination = \u0026quot;account\u0026quot;) boolean payment(AccountDTO accountDTO);   In the motan service provider (the participating method of the transaction, the callee).\n add myth-motan dependency\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.","tags":null,"title":"Motan User","type":"projects","url":"/projects/myth/motan-user/","wordcount":464},{"author":null,"categories":null,"content":" Motan Interface Sectioon  Introduce the jar packages into your interface project.  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Add the @Hmily annotation on the interface method in which you need to perform Hmily distributed transactions.  public interface HelloService { @Hmily void say(String hello); }  The project with Motan implementation  Step 1 ï¼š Introduce the jar package of the hmily dependency\n Step 2 ï¼š Add Hmily configuration\n Step 3 ï¼š Add the specific annotation to the implementation method. you need to complete the development of confirm and cancel method, if in TCC mode.\n  Introduce The Maven dependency Spring-Namespace  Introduce the hmily-motan dependency  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   make the configuration in the XML configuration file as below:  \u0026amp;lt;!-- set up to enable the aspectj-autoproxy --\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyTransactionAspect\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.aop.SpringHmilyTransactionAspect\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot-starter  Introduce the hmily-spring-boot-starter-motan dependency  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Introduce the Hmily configuration  new a configuration file named hmily.yml under the resource directory of the current project\n the specific parameter configuration can refer to configuration detail,Local configuration mode, Zookeeper configuration mode, nacos configuration mode,apollo configuration mode\n  Add annotations on the implementation interface We have completed the integration and configuration described above, and the next let\u0026amp;rsquo;s explain how to use it in detail.\nTCC Mode  Add @HmilyTCC (confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;) annotation to the concrete implementation of the interface method identified by \u0026amp;lsquo;@Hmily\u0026amp;rsquo;.\n confirmMethod : the method name for confirmï¼ŒThe method parameter list and return type should be consistent with the identification method.\n cancelMethod : the method for cancelï¼ŒThe method parameter list and return type should be consistent with the identification method.\n The TCC mode should ensure the idempotence of the confirm and cancel methods,Users need to develop these two methods by themselves,The confirmation and rollback behavior of all transactions are completely up tp users.The Hmily framework is just responsible for making calls.\n  public class HelloServiceImpl implements â€¦","date":-62135596800,"description":"Hmily-Motan Distributed Transaction User Guide","dir":"projects/hmily/user-motan/","fuzzywordcount":700,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"f31a0351067a48e039bb17f0d2bfd50f0cc609a0","permalink":"/projects/hmily/user-motan/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/hmily/user-motan/","summary":"Motan Interface Sectioon  Introduce the jar packages into your interface project.  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   Add the @Hmily annotation on the interface method in which you need to perform Hmily distributed transactions.  public interface HelloService { @Hmily void say(String hello); }  The project with Motan implementation  Step 1 ï¼š Introduce the jar package of the hmily dependency\n Step 2 ï¼š Add Hmily configuration","tags":null,"title":"Motan User Guide","type":"projects","url":"/projects/hmily/user-motan/","wordcount":620},{"author":null,"categories":null,"content":" Firstly, you should bootstrap raincat-manager, please refer to how to bootstrap Txmanager for details. Then, please add following dependency in maven at your service, and add @TxTransaction annotation in your distributed transaction method. \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Configure TxTransactionBootstrap by Spring XML \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Configure TxTransactionBootstrap by Spring boot starter  Firstly, please add maven dependency raincat-spring-boot-starter-motan.\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-spring-boot-starter-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Secondly, please configure the application.yml like follows.  org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456  txManagerUrl is the ip and port that you bootstrap txManager . Please add http:// at head.\n serializer is the way of transaction log serialization.\n nettySerializer is the serialization way of how to communicate with txManager. Please be caution that It should be consistent with the configuration in txManager.\n compensation is the property whether compensation is required or not, the service will compensate itself in some cases.\n compensationCacheType is the storage types of log, support Redis, Mongodb, Zookeeper, etc. For details, please refer to the config.\n  NOTICE: You need to open AOP when you want to use XML to configure.\n","date":-62135596800,"description":"motan user  guide","dir":"projects/raincat/motan-user/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"1a49ce99f3d9f1015f1ad8b36b91d746b99b75a1","permalink":"/projects/raincat/motan-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/raincat/motan-user/","summary":"Firstly, you should bootstrap raincat-manager, please refer to how to bootstrap Txmanager for details. Then, please add following dependency in maven at your service, and add @TxTransaction annotation in your distributed transaction method. \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;raincat-motan\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.0-RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;  Configure TxTransactionBootstrap by Spring XML \u0026lt;context:component-scan base-package=\u0026quot;org.dromara.*\u0026quot;/\u0026gt; \u0026lt;aop:aspectj-autoproxy expose-proxy=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;bean id=\u0026quot;txTransactionBootstrap\u0026quot; class=\u0026quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026quot;\u0026gt; \u0026lt;property name=\u0026quot;txManagerUrl\u0026quot; value=\u0026quot;http://localhost:8761\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;serializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;nettySerializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensation\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensationCacheType\u0026quot; value=\u0026quot;db\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;txDbConfig\u0026quot;\u0026gt; \u0026lt;bean class=\u0026quot;org.","tags":null,"title":"Motan user guide","type":"projects","url":"/projects/raincat/motan-user/","wordcount":235},{"author":null,"categories":null,"content":" cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-motan\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And zookeeper url And choose you Message Oriented Middleware\nspring: motan: zookeeper: 192.168.1.148:2181 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer   Modifiy applicationContext.xml on Indicator Item And choose repositorySupport and modifiy it  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  run MotanAccountApplication.java\n run MotanInventoryApplication.java\n run MotanOrderApplication.java\nthis mq sender so befer:\n in applicationContext.xml choose import you mq sender config\n  \u0026amp;lt;import resource=\u0026amp;quot;spring-rocketmq.xml\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-rabbitmq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-kafka.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-activemq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt;   modifiy you mq config for example  \u0026amp;lt;bean id=\u0026amp;quot;defaultMQProducer\u0026amp;quot; â€¦","date":-62135596800,"description":"Motan å¿«é€Ÿå¼€å§‹","dir":"projects/myth/quick-start-motan/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"6410e98e25bfaa06e53e9f5f0707984193e7e15b","permalink":"/zh/projects/myth/quick-start-motan/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/myth/quick-start-motan/","summary":"cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-motan Modifiy application.yml on Indicator Item And Modifiy you jdbc url And zookeeper url And choose you Message Oriented Middleware spring: motan: zookeeper: 192.168.1.148:2181 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer:","tags":null,"title":"Motan å¿«é€Ÿå¼€å§‹","type":"projects","url":"/zh/projects/myth/quick-start-motan/","wordcount":208},{"author":null,"categories":null,"content":" åœ¨motan api é¡¹ç›®å¼•å…¥myth-annotation jaråŒ…  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨motan interface æ–¹æ³•ä¸ŠåŠ ä¸Š@Mythæ³¨è§£ ,å¹¶è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—åç§°,æ­¤é˜Ÿåˆ—å°±æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶å‘æ¶ˆæ¯çš„é˜Ÿåˆ—ï¼š  @Myth(destination = \u0026amp;quot;account\u0026amp;quot;) boolean payment(AccountDTO accountDTO);   åœ¨motan æœåŠ¡æä¾›æ–¹ï¼ˆäº‹åŠ¡çš„å‚ä¸æ–¹æ³•ï¼Œè¢«è°ƒç”¨æ–¹ï¼‰\n å¼•å…¥myth-motan åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   é…ç½® MythTransactionBootstrapå¯åŠ¨ç±»,å¯ä»¥é‡‡ç”¨xmlæ–¹å¼ï¼Œæˆ–è€…@Beançš„æ–¹å¼,å…·ä½“é…ç½®å¯ä»¥å‚è€ƒ:é…ç½®è¯¦è§£  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   åœ¨ä½ æ¥å£çš„å®ç°æ–¹æ³•ä¸ŠåŠ ä¸Š@Myth\n ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ³¨è§£æ–¹æ³•ä¸Šå†™çš„æ¶ˆæ¯é˜Ÿåˆ—åç§°),è°ƒç”¨æ¡†æ¶æä¾› çš„MythMqReceiveService.processMessageæ–¹æ³•ã€‚åˆ—å¦‚ä½¿ç”¨jmsï¼Œå…·ä½“å¯ä»¥å‚è€ƒdemoå·¥ç¨‹ã€‚\n@JmsListener(destination = \u0026amp;quot;account\u0026amp;quot;,containerFactory = \u0026amp;quot;queueListenerContainerFactory\u0026amp;quot;) public void receiveQueue(byte[] message) { LOGGER.info(\u0026amp;quot;=========æ‰£å‡è´¦æˆ·ä¿¡æ¯æ¥æ”¶åˆ°Mythæ¡†æ¶ä¼ å…¥çš„ä¿¡æ¯==========\u0026amp;quot;); final Boolean success = mythMqReceiveService.processMessage(message); if(success){ //æ¶ˆè´¹æˆåŠŸï¼Œæ¶ˆæ¯å‡ºé˜Ÿåˆ—ï¼Œå¦åˆ™ä¸æ¶ˆè´¹ } }   åœ¨motan æ¶ˆè´¹æ–¹ï¼ˆäº‹åŠ¡çš„å‘èµ·è€…ï¼Œè°ƒç”¨æ–¹ï¼‰\n å¼•å…¥myth-motan åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    é…ç½® MythTransactionBootstrapå¯åŠ¨ç±»,å¯ä»¥é‡‡ç”¨xmlæ–¹å¼ï¼Œæˆ–è€…@Beançš„æ–¹å¼,å…·ä½“é…ç½®å¯ä»¥å‚è€ƒ:é…ç½®è¯¦è§£\n\u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; â€¦","date":-62135596800,"description":"Myth Motan User","dir":"projects/myth/motan-user/","fuzzywordcount":1000,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"28be0e1462461dc93a905a7ff214bd902076a23d","permalink":"/zh/projects/myth/motan-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/myth/motan-user/","summary":"åœ¨motan api é¡¹ç›®å¼•å…¥myth-annotation jaråŒ… \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.myth\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;myth-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨motan interface æ–¹æ³•ä¸ŠåŠ ä¸Š@Mythæ³¨è§£ ,å¹¶è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—åç§°,æ­¤é˜Ÿåˆ—å°±æ˜¯æ¶ˆ","tags":null,"title":"Motan ç”¨æˆ·","type":"projects","url":"/zh/projects/myth/motan-user/","wordcount":978},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Zookeeper  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo-motané¡¹ç›®ï¼Œè¿›è¡Œmavenæ„å»º ä¿®æ”¹é¡¹ç›®é…ç½®ï¼ˆhmily-demo-motan-accountä¸ºåˆ—å­ï¼‰  application.yml ä¸‹ä¿®æ”¹ä¸šåŠ¡æ•°æ®åº“(accounté¡¹ç›®ä¸ºåˆ—å­)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    application.yml ä¸‹ä¿®æ”¹motançš„æ³¨å†Œä¸­å¿ƒåœ°å€(å¯ä»¥åœ¨è‡ªå·±ç”µè„‘æœ¬åœ°å¯åŠ¨ä¸€ä¸ªzookeeperæœåŠ¡)  hmily : motan : #æ³¨å†Œä¸­å¿ƒé…ç½® registry : address : 127.0.0.1:2181 #æ³¨å†Œä¸­å¿ƒåœ°å€   ä¿®æ”¹ hmily.yml,è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨  repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    run MotanHmilyAccountApplication.java  å¯åŠ¨hmily-demo-motan-inventory å‚è€ƒä¸Šè¿°ã€‚ å¯åŠ¨hmily-demo-motan-order å‚è€ƒä¸Šè¿°ã€‚ è®¿é—®ï¼šhttp://127.0.0.1:8088/swagger-ui.htmlã€‚ ","date":-62135596800,"description":"motanå¿«é€Ÿä½“éªŒ","dir":"projects/hmily/quick-start-motan/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"6874d46d471a1d72334dfd6c7d749642cc4e63aa","permalink":"/zh/projects/hmily/quick-start-motan/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/quick-start-motan/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Zookeeper ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-dem","tags":null,"title":"Motanå¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/hmily/quick-start-motan/","wordcount":537},{"author":null,"categories":null,"content":" Motanæ¥å£éƒ¨åˆ†  åœ¨ä½ çš„æ¥å£é¡¹ç›®ä¸­å¼•å…¥jaråŒ…ã€‚  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚  public interface HelloService { @Hmily void say(String hello); }  Motanå®ç°é¡¹ç›®  æ­¥éª¤ä¸€ ï¼š å¼•å…¥ä¾èµ–hmilyçš„jaråŒ…\n æ­¥éª¤äºŒ ï¼š æ–°å¢Hmilyé…ç½®\n æ­¥éª¤ä¸‰ ï¼š åœ¨å®ç°æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ã€‚TCCæ¨¡å¼ï¼Œåˆ™éœ€è¦å®Œæˆ confirmï¼Œcancelæ–¹æ³•çš„å¼€å‘\n  å¼•å…¥ä¾èµ– Spring-Namespace  å¼•å…¥ä¾èµ–  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®  \u0026amp;lt;!--è®¾ç½®å¼€å¯aspectj-autoproxy--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyTransactionAspect\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.aop.SpringHmilyTransactionAspect\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot-starter  ç”¨æˆ·å¼•å…¥  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  å¼•å…¥ hmilyé…ç½®  åœ¨é¡¹ç›®çš„ resource æ·»åŠ æ–‡ä»¶åä¸º:hmily.ymlé…ç½®æ–‡ä»¶\n å…·ä½“çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£,æœ¬åœ°é…ç½®æ¨¡å¼, zookeeperé…ç½®æ¨¡å¼, nacosé…ç½®æ¨¡å¼,apolloé…ç½®æ¨¡å¼\n  å®ç°æ¥å£ä¸Šæ·»åŠ æ³¨è§£ åœ¨ä¸Šè¿°ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†é›†æˆä¸é…ç½®ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¯¦è§£è¯´ä¸€ä¸‹å¦‚ä½•è¿›è¡Œä½¿ç”¨ã€‚\nTCCæ¨¡å¼  åœ¨æ·»åŠ @Hmily æ ‡è¯†çš„æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸Š åŠ ä¸Š@HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;)\n confirmMethod : ç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : å›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n TCCæ¨¡å¼åº”è¯¥ä¿è¯ confirm å’Œ cancel æ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå»å¼€å‘è¿™ä¸ª2ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰çš„äº‹åŠ¡çš„ç¡®è®¤ä¸å›æ»šï¼Œå®Œå…¨ç”±ç”¨æˆ·å†³å®šã€‚Hmilyæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è¿›è¡Œè°ƒç”¨\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  motanæ³¨è§£ç”¨æˆ· å¯¹äºä½¿ç”¨ @MotanReferer æ³¨è§£æ¥æ³¨å…¥motanæœåŠ¡çš„ç”¨æˆ·ï¼Œè¯·æ³¨æ„ï¼šä½ å¯ä»¥éœ€è¦åšå¦‚ä¸‹é…ç½®:\nspring-namespace ç”¨æˆ· åœ¨ä½ çš„xmlé…ç½®ä¸­ï¼Œéœ€è¦å°† org.dromara.hmily.spring.annotation.RefererAnnotationBeanPostProcessor æ³¨å…¥æˆspringçš„bean\n\u0026amp;lt;bean id = \u0026amp;quot;refererAnnotationBeanPostProcessor\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.annotation.RefererAnnotationBeanPostProcessor\u0026amp;quot;/\u0026amp;gt;  spring-bootç”¨æˆ· éœ€è¦åœ¨ymlæ–‡ä»¶é‡Œé¢å¼€å¯æ³¨è§£æ”¯æŒï¼š\nhmily.support.rpc.annotation = true  æˆ–è€…åœ¨é¡¹ç›®ä¸­æ˜¾ç¤ºæ³¨å…¥ï¼š\n@Bean public BeanPostProcessor refererAnnotationBeanPostProcessor() { return new RefererAnnotationBeanPostProcessor(); }  TACæ¨¡å¼ (åœ¨å¼€å‘ï¼Œæœªå‘å¸ƒ)  å¯¹@Hmily æ ‡è¯†çš„æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°åŠ ä¸Š@HmilyTAC   é‡è¦æ³¨æ„äº‹é¡¹ åœ¨è°ƒç”¨ä»»ä½•RPCè°ƒç”¨ä¹‹å‰ï¼Œå½“ä½ éœ€è¦èšåˆrpcè°ƒç”¨æˆä¸ºä¸€æ¬¡åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œéœ€è¦åœ¨èšåˆRPCè°ƒç”¨çš„æ–¹æ³•ä¸Šï¼Œå…ˆè¡Œæ·»åŠ  @HmilyTCC æˆ–è€… @HmilyTAC æ³¨è§£,è¡¨ç¤ºå¼€å¯å…¨å±€äº‹åŠ¡ã€‚\nè´Ÿè½½å‡è¡¡  å¦‚æœæœåŠ¡éƒ¨ç½²äº†å‡ ä¸ªèŠ‚ç‚¹ï¼Œ è´Ÿè½½å‡è¡¡ç®—æ³•æœ€å¥½ä½¿ç”¨ hmily, è¿™æ · try, confirm, cancel è°ƒç”¨ä¼šè½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ å……åˆ†åˆ©ç”¨äº†ç¼“å­˜ï¼Œææäº†æ•ˆç‡ã€‚\n æ”¯æŒä¸€ä¸‹å‡ ç§ hmilyActiveWeight, hmilyConfigurableWeight, hmilyConsistent, hmilyLocalFirst, hmilyRandom, hmilyRoundRobin å‡ ç§æ–¹å¼å‡æ˜¯ç»§æ‰¿Motan â€¦","date":-62135596800,"description":"Hmily-Motanåˆ†å¸ƒå¼äº‹åŠ¡ç”¨æˆ·æŒ‡å—","dir":"projects/hmily/user-motan/","fuzzywordcount":1100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"fd3b8d73ac60ac841f6a0c3e5ceb0ebb7b7effff","permalink":"/zh/projects/hmily/user-motan/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/zh/projects/hmily/user-motan/","summary":"Motanæ¥å£éƒ¨åˆ† åœ¨ä½ çš„æ¥å£é¡¹ç›®ä¸­å¼•å…¥jaråŒ…ã€‚ \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚ public interface HelloService { @Hmily void say(String hello); } Motan","tags":null,"title":"Motanç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/hmily/user-motan/","wordcount":1045},{"author":null,"categories":null,"content":" source code parsing for annotation  /** * Myth is the annotation of distributed transaction framework. */ @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.METHOD}) public @interface Myth { /** * The destination name for this listener, resolved through the container-wide */ String destination(); /** * Target interface class * If you are a SpringCloud user, you need to specify the target interface service. * (Since SpringCloud is an HTTP request that cannot be invoked through reflection serialization, this property is added.) * If you are a Dubbo user, you do not need to specify it. * If you are a Motan user, you do not need to specify it, too. * * @return Class */ Class target() default Object.class; /** * The method name of target interface * If you are a SpringCloud user, you need to specify the method name of the target. * ï¼ˆSince SpringCloud is an HTTP request that cannot be invoked through reflection serialization, this property is added.ï¼‰ * If you are a Dubbo user, you do not need to specify it. * If you are a Motan user, you do not need to specify it, too. * * @return String */ String targetMethod() default \u0026amp;quot;\u0026amp;quot;; /** * Whether there is a transaction, Here specifically refers to the invoker have a database operation.ï¼ˆIs there a transaction operationï¼‰ * * @return PropagationEnum */ PropagationEnum propagation() default PropagationEnum.PROPAGATION_REQUIRED; /** * MQ message pattern * * @return MessageTypeEnum */ MessageTypeEnum pattern() default MessageTypeEnum.P2P;  The usage of Annotation: add the @Myth annotation to interface method and implementation class(Dubbo,motan added to the API interface. The SpringCloud needs to be added to FeignClient). Refer to the demo project for details.\n applicationContext.xml for details:  \u0026amp;lt;!-- aspect configuration, whether to open the AOP aspect--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--The package of the scanning framework--\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--The property configuration of start class --\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; â€¦","date":-62135596800,"description":"Myth Configuration","dir":"projects/myth/config/","fuzzywordcount":800,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"6811269ec7690c2aa227a8366aa3718a84832857","permalink":"/projects/myth/config/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/myth/config/","summary":"source code parsing for annotation /** * Myth is the annotation of distributed transaction framework. */ @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.METHOD}) public @interface Myth { /** * The destination name for this listener, resolved through the container-wide */ String destination(); /** * Target interface class * If you are a SpringCloud user, you need to specify the target interface service. * (Since SpringCloud is an HTTP request that cannot be invoked through reflection","tags":null,"title":"Myth Configuration","type":"projects","url":"/projects/myth/config/","wordcount":775},{"author":null,"categories":null,"content":" An open source framework that uses message queue to solve distributed transactions. Developed based on Java language (JDK1.8), it supports Dubbo, SpringCloud, Motan and other RPC frameworks for distributed transactions.\nFeatures  Integrate spring-boot-starter. RPC framework support: dubbo,motan,springcloud. Message middleware suooprt : jms(activimq), amqp(rabbitmq), kafka, roceketmq. Local transaction storage support: redis, mogondb, zookeeper, file, mysql. Transaction log serialization support ï¼šjavaï¼Œhessianï¼Œkryoï¼Œprotostuff. Aspect AOP facets are used to integrate with Spring and support clustering, high availability and high concurrency. Simple configuration, simple integration, simple source code, high stability, has been used in the production environment. Built-in classic distributed transaction scene Demo project, and Swagger-UI visual interface can be quickly experienced.  Parsing the source code  https://juejin.im/post/5a5c63986fb9a01cb64ec517  Video  Setup environment and running Explain principle(one) Explain principle(two)  Prerequisite  JDK 1.8+ Maven 3.2.x Git RPC framework dubbo or motan or springcloudã€‚ Message Oriented Middleware  ","date":-62135596800,"description":"Myth Introduction","dir":"projects/myth/overview/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"6af1dc856f4f538087d18b8034ec6037c7d4ef5a","permalink":"/projects/myth/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/myth/overview/","summary":"An open source framework that uses message queue to solve distributed transactions. Developed based on Java language (JDK1.8), it supports Dubbo, SpringCloud, Motan and other RPC frameworks for distributed transactions.\nFeatures  Integrate spring-boot-starter. RPC framework support: dubbo,motan,springcloud. Message middleware suooprt : jms(activimq), amqp(rabbitmq), kafka, roceketmq. Local transaction storage support: redis, mogondb, zookeeper, file, mysql. Transaction log serialization support ï¼šjavaï¼Œhessianï¼Œkryoï¼Œprotostuff. Aspect AOP facets are used to integrate with Spring and support clustering, high availability and high concurrency.","tags":null,"title":"Myth Introduction","type":"projects","url":"/projects/myth/overview/","wordcount":137},{"author":null,"categories":null,"content":" é‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„å¼€æºæ¡†æ¶, åŸºäºjavaè¯­è¨€æ¥å¼€å‘ï¼ˆJDK1.8ï¼‰ï¼Œæ”¯æŒdubboï¼Œspringcloud,motanç­‰rpcæ¡†æ¶è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡ã€‚\nFeatures  å¤©ç„¶æ— ç¼é›†æˆ spring-boot-starter ã€‚\n RPCæ¡†æ¶æ”¯æŒ : dubbo,motan,springcloudã€‚\n æ¶ˆæ¯ä¸­é—´ä»¶æ”¯æŒ : jms(activimq),amqp(rabbitmq),kafka,roceketmqã€‚\n æœ¬åœ°äº‹åŠ¡å­˜å‚¨æ”¯æŒ : redis,mogondb,zookeeper,file,mysqlã€‚\n äº‹åŠ¡æ—¥å¿—åºåˆ—åŒ–æ”¯æŒ ï¼šjavaï¼Œhessianï¼Œkryoï¼Œprotostuffã€‚\n é‡‡ç”¨Aspect AOP åˆ‡é¢æ€æƒ³ä¸Springæ— ç¼é›†æˆï¼Œå¤©ç„¶æ”¯æŒé›†ç¾¤,é«˜å¯ç”¨,é«˜å¹¶å‘ã€‚\n é…ç½®ç®€å•ï¼Œé›†æˆç®€å•ï¼Œæºç ç®€æ´ï¼Œç¨³å®šæ€§é«˜ï¼Œå·²åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚\n å†…ç½®ç»å…¸çš„åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯demoå·¥ç¨‹ï¼Œå¹¶æœ‰swagger-uiå¯è§†åŒ–ç•Œé¢å¯ä»¥å¿«é€Ÿä½“éªŒã€‚\n  æºç è§£æ  https://juejin.im/post/5a5c63986fb9a01cb64ec517   è§†é¢‘è¯¦è§£  ç¯å¢ƒæ­å»ºä»¥åŠè¿è¡Œ : http://www.iqiyi.com/w_19rw5zuigl.html åŸç†è®²è§£ï¼ˆ1ï¼‰ï¼šhttp://www.iqiyi.com/w_19rw5ztpkh.html åŸç†è®²è§£ï¼ˆ2ï¼‰ï¼šhttp://www.iqiyi.com/w_19rw5zslm1.html   Prerequisite  JDK 1.8+ Maven 3.2.x Git RPC framework dubbo or motan or springcloudã€‚ Message Oriented Middleware  ","date":-62135596800,"description":"Mythæ˜¯åŸºäºå¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œæ— ç¼æ”¯æŒdubboï¼Œspringcloud,motanç­‰rpcæ¡†æ¶çš„å¾®æœåŠ¡","dir":"projects/myth/overview/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"d76c2e39dd7f3763b1e6ee578e5855d4e23c0122","permalink":"/zh/projects/myth/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/myth/overview/","summary":"é‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„å¼€æºæ¡†æ¶, åŸºäºjavaè¯­è¨€æ¥å¼€å‘ï¼ˆJDK1.8ï¼‰ï¼Œæ”¯æŒdubboï¼Œspringcloud,motanç­‰rpcæ¡†æ¶","tags":null,"title":"Myth ä»‹ç»","type":"projects","url":"/zh/projects/myth/overview/","wordcount":505},{"author":null,"categories":null,"content":" æ³¨è§£æºç è§£æ  /** * mythåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶æ³¨è§£ */ @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.METHOD}) public @interface Myth { /** * The destination name for this listener, resolved through the container-wide */ String destination(); /** * ç›®æ ‡æ¥å£ç±» * å¦‚æœæ˜¯springcloudç”¨æˆ·ï¼Œéœ€è¦æŒ‡å®šç›®æ ‡çš„æ¥å£æœåŠ¡ * ï¼ˆå› ä¸ºspringcloudæ˜¯httpçš„è¯·æ±‚ï¼Œé€šè¿‡åå°„åºåˆ—åŒ–æ–¹å¼æ²¡åŠæ³•è°ƒç”¨ï¼Œæ‰€æœ‰åŠ äº†è¿™ä¸ªå±æ€§ï¼‰ * å¦‚æœæ˜¯dubboç”¨æˆ· åˆ™ä¸éœ€è¦æŒ‡å®š * å¦‚æœæ˜¯motanç”¨æˆ· åˆ™ä¸éœ€è¦æŒ‡å®š * * @return Class */ Class target() default Object.class; /** * ç›®æ ‡æ¥å£æ–¹æ³•åç§° * å¦‚æœæ˜¯springcloudç”¨æˆ·ï¼Œéœ€è¦æŒ‡å®šç›®æ ‡çš„æ–¹æ³•åç§° * ï¼ˆå› ä¸ºspringcloudæ˜¯httpçš„è¯·æ±‚ï¼Œé€šè¿‡åå°„åºåˆ—åŒ–æ–¹å¼æ²¡åŠæ³•è°ƒç”¨ï¼Œæ‰€æœ‰åŠ äº†è¿™ä¸ªå±æ€§ï¼‰ * å¦‚æœæ˜¯dubboç”¨æˆ· åˆ™ä¸éœ€è¦æŒ‡å®š * å¦‚æœæ˜¯motanç”¨æˆ· åˆ™ä¸éœ€è¦æŒ‡å®š * * @return String */ String targetMethod() default \u0026amp;quot;\u0026amp;quot;; /** * æ˜¯å¦æœ‰äº‹åŠ¡ è¿™é‡Œå…·ä½“æŒ‡çš„æ˜¯å‘èµ·æ–¹æ˜¯å¦æœ‰è¿›è¡Œæ•°æ®åº“çš„æ“ä½œï¼ˆæ˜¯å¦æœ‰äº‹åŠ¡æ“ä½œï¼‰ * * @return PropagationEnum */ PropagationEnum propagation() default PropagationEnum.PROPAGATION_REQUIRED; /** * mq æ¶ˆæ¯æ¨¡å¼ * * @return MessageTypeEnum */ MessageTypeEnum pattern() default MessageTypeEnum.P2P;   æ³¨è§£ä½¿ç”¨ï¼š åœ¨æ¥å£æ–¹æ³•å’Œå®ç°ç±»ä¸Šæ·»åŠ @Mythæ³¨è§£ï¼ˆdubbo,motan åŠ åœ¨apiæ¥å£ä¸Šï¼Œspringcloudåˆ™éœ€è¦åŠ åœ¨feignClientä¸Šï¼‰ï¼Œå…·ä½“å‚è€ƒdemoå·¥ç¨‹ã€‚\n applicationContext.xml è¯¦è§£ï¼š\n  \u0026amp;lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦å¼€å¯AOPåˆ‡é¢--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--æ‰«ææ¡†æ¶çš„åŒ…--\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--å¯åŠ¨ç±»å±æ€§é…ç½®--\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   MythTransactionBootstrap è¯¦è§£ï¼ˆå…·ä½“å‚è§com.github.myth.common.config.MythConfigï¼‰  \u0026amp;lt;!--æ•°æ®ä¿å­˜åºåˆ—åŒ–æ–¹å¼ spiæ‰©å±•æ”¯æŒ java kroyï¼Œhessian protostuff æ¨èä½¿ç”¨kroy--\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--åè°ƒèµ„æºçº¿ç¨‹æ± æœ€å¤§é˜Ÿåˆ—--\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--åè°ƒèµ„æºçº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹--\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;4\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- çº¿ç¨‹æ± ä¸­çš„é˜Ÿåˆ—ç±»å‹ spiæ‰©å±•æ”¯æŒ Linked Array SynchronousQueue--\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--çº¿ç¨‹æ± ä¸­çš„æ‹’ç»ç­–ç•¥ spiæ‰©å±•æ”¯æŒ Abort â€¦","date":-62135596800,"description":"Myth Configuration","dir":"projects/myth/config/","fuzzywordcount":1400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"e6cc4187323a61f322c93e1ea3524998aaed6731","permalink":"/zh/projects/myth/config/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/zh/projects/myth/config/","summary":"æ³¨è§£æºç è§£æ /** * mythåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶æ³¨è§£ */ @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.METHOD}) public @interface Myth { /** * The destination name for this listener, resolved through the container-wide */ String destination(); /** * ç›®æ ‡æ¥å£ç±» * å¦‚æœæ˜¯springcloudç”¨æˆ·ï¼Œéœ€è¦","tags":null,"title":"Myth é…ç½®","type":"projects","url":"/zh/projects/myth/config/","wordcount":1318},{"author":null,"categories":null,"content":" Startup premise: the distributed transaction project has been deployed and running, and users use it according to their own RPC framework.\n First, the JDK must be 1.8+, and Git and Maven are installed locally. Execute the following command.\ngit clone https://github.com/yu199195/myth.git maven clean install  Open the project with your development toolï¼Œfor example Idea , Eclipse.\n  Step One:  Edit application.properties in myth-admin project.  server.port=8888 server.context-path=/myth-admin server.address=0.0.0.0 spring.application.name=myth-admin #Activation method: refers to the method used to store the transaction log, which is the same as the business module. spring.profiles.active=db # myth admin username myth.admin.userName=admin # myth admin password myth.admin.password=admin # The suffix of the transaction log storage path of each project must be specified here. myth.repository.suffix.list=account-service,inventory-service,order-service # Supported serialization methods, each item needs to be configured to be the same. myth.serializer.support=kryo myth.retry.max=10 #dbSuport myth.db.driver=com.mysql.jdbc.Driver myth.db.url=jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 myth.db.username=xiaoyu myth.db.password=Wgj@555888 #redis myth.redis.cluster=false myth.redis.hostName=192.168.1.68 myth.redis.port=6379 myth.redis.password= #myth.redis.clusterUrl=127.0.0.1:70001;127.0.1:7002 #mongo myth.mongo.url=192.168.1.68:27017 myth.mongo.dbName=happylife #myth.mongo.userName=xiaoyu myth.mongo.password=123456 #zookeeper myth.zookeeper.host=192.168.1.116:2181 myth.zookeeper.sessionTimeOut=200000  Configuration explanation  myth.repository.suffix.list: it is necessary to configure the resource suffix of each system module participating in the distributed transaction of myth, and multiple modules are separated by \u0026amp;ldquo;,\u0026amp;rdquo;,which must be configured here.\n myth.serializer.support: it refers to the serialization mode of configuration transaction compensation information in Tcc distributed transaction system.\n spring.profiles.active: The type of admin project activation supports db, file, mongo and zookeeper. This refers to the storage mode of transaction compensation information in the distributed transaction system participating in Myth. If you use db for storage, it is configured as db, and information such as db is configured at the same time. Other ways are the same. Note that each module should use the same serialization method and storage type.\n myth.admin: Here is the user and password of the admin system, and the user can make custom changes.\n  Step Two: modify index.html under the static folder of this project. \u0026amp;lt;!--replace your ip and port in href property--\u0026amp;gt; \u0026amp;lt;a id=\u0026amp;quot;serverIpAddress\u0026amp;quot; style=\u0026amp;quot;display: none\u0026amp;quot; href=\u0026amp;quot;http://localhost:8888/admin\u0026amp;quot;\u0026amp;gt;  Step Three: run the main method in MythAdminApplication . Step Four: visit http://ip:port/myth-admin/index.html in the â€¦","date":-62135596800,"description":"Myth-admin startup tutorial","dir":"projects/myth/start-myth-admin/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"96b852d1a686122e872b75c71c545a41b7cc0af9","permalink":"/projects/myth/start-myth-admin/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/myth/start-myth-admin/","summary":"Startup premise: the distributed transaction project has been deployed and running, and users use it according to their own RPC framework.\n First, the JDK must be 1.8+, and Git and Maven are installed locally. Execute the following command.\ngit clone https://github.com/yu199195/myth.git maven clean install  Open the project with your development toolï¼Œfor example Idea , Eclipse.\n  Step One:  Edit application.properties in myth-admin project.  server.port=8888 server.","tags":null,"title":"Myth-admin startup tutorial","type":"projects","url":"/projects/myth/start-myth-admin/","wordcount":348},{"author":null,"categories":null,"content":" å¯åŠ¨å‰æï¼šåˆ†å¸ƒå¼äº‹åŠ¡é¡¹ç›®å·²ç»éƒ¨ç½²å¹¶ä¸”è¿è¡Œèµ·æ¥ï¼Œç”¨æˆ·æ ¹æ®è‡ªå·±çš„RPCæ¡†æ¶è¿›è¡Œä½¿ç”¨\n é¦–å…ˆç”¨æˆ·ä½¿ç”¨çš„JDKå¿…é¡»æ˜¯1.8+ æœ¬åœ°å®‰è£…äº†git ,maven ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\ngit clone https://github.com/yu199195/myth.git maven clean install  ä½¿ç”¨ä½ çš„å¼€å‘å·¥å…·æ‰“å¼€é¡¹ç›®ï¼Œæ¯”å¦‚idea Eclipse\n  æ­¥éª¤ä¸€ï¼š  ä¿®æ”¹ myth-adminé¡¹ç›®ä¸­çš„application.propertiesæ–‡ä»¶  server.port=8888 server.context-path=/myth-admin server.address=0.0.0.0 spring.application.name=myth-admin #æ¿€æ´»æ–¹å¼ æŒ‡çš„æ˜¯å­˜å‚¨äº‹åŠ¡æ—¥å¿—é‡‡å–çš„æ–¹å¼ åŒä¸šåŠ¡æ¨¡å—ä¸€æ · spring.profiles.active=db # myth ç®¡ç†åå°ç”¨æˆ·å myth.admin.userName=admin # myth ç®¡ç†åå°å¯†ç  myth.admin.password=admin # å„é¡¹ç›®çš„äº‹åŠ¡æ—¥å¿—å­˜å‚¨è·¯å¾„çš„åç¼€ï¼Œè¿™é‡Œä¸€å®šéœ€è¦æŒ‡å®š myth.repository.suffix.list=account-service,inventory-service,order-service # å„é¡¹ç›®æ”¯æŒçš„åºåˆ—åŒ–æ–¹å¼ æ¯ä¸ªé¡¹ç›®éœ€è¦é…ç½®æˆä¸€æ ·çš„ myth.serializer.support=kryo myth.retry.max=10 #dbSuport myth.db.driver=com.mysql.jdbc.Driver myth.db.url=jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 myth.db.username=xiaoyu myth.db.password=Wgj@555888 #redis myth.redis.cluster=false myth.redis.hostName=192.168.1.68 myth.redis.port=6379 myth.redis.password= #myth.redis.clusterUrl=127.0.0.1:70001;127.0.1:7002 #mongo myth.mongo.url=192.168.1.68:27017 myth.mongo.dbName=happylife #myth.mongo.userName=xiaoyu myth.mongo.password=123456 #zookeeper myth.zookeeper.host=192.168.1.116:2181 myth.zookeeper.sessionTimeOut=200000  é…ç½®è§£é‡Š  å…³äº myth.repository.suffix.listé…ç½®ï¼šè¿™é‡Œéœ€è¦é…ç½®æ¯ä¸ªå‚ä¸mythåˆ†å¸ƒå¼äº‹åŠ¡çš„ç³»ç»Ÿæ¨¡å—çš„èµ„æºåç¼€ï¼Œå¤šä¸ªæ¨¡å—ç”¨ \u0026amp;ldquo;,\u0026amp;rdquo; åˆ†éš”ï¼Œè¿™é‡Œå¿…é¡»è¦é…ç½®ã€‚\n å…³äº myth.serializer.support é…ç½®ï¼Œè¿™é‡Œæ˜¯æŒ‡å‚ä¸Tccåˆ†å¸ƒå¼äº‹åŠ¡ç³»ç»Ÿä¸­ï¼Œé…ç½®äº‹åŠ¡è¡¥å¿ä¿¡æ¯çš„åºåˆ—åŒ–æ–¹å¼ã€‚\n å…³äº spring.profiles.active é…ç½® adminé¡¹ç›®æ¿€æ´»çš„ç±»å‹ï¼Œæ”¯æŒdbï¼Œfileï¼Œmongoï¼Œzookeeperï¼Œ è¿™é‡Œæ˜¯æŒ‡å‚ä¸Mythåˆ†å¸ƒå¼äº‹åŠ¡ç³»ç»Ÿä¸­ï¼Œé…ç½®äº‹åŠ¡è¡¥å¿ä¿¡æ¯å­˜å‚¨æ–¹å¼ï¼Œå¦‚æœæ‚¨ç”¨dbå­˜å‚¨ï¼Œé‚£è¿™é‡Œå°±é…ç½®æˆdbï¼ŒåŒæ—¶é…ç½®å¥½dbç­‰ä¿¡æ¯ã€‚ å…¶ä»–æ–¹å¼åŒç†ã€‚ æ³¨æ„ï¼Œæ¯ä¸ªæ¨¡å—è¯·ä½¿ç”¨ç›¸åŒçš„åºåˆ—åŒ–æ–¹å¼å’Œå­˜å‚¨ç±»å‹\n å…³äº myth.admin ç­‰é…ç½®ã€‚ è¿™é‡Œå°±æ˜¯ç®¡ç†åå°ç™»å½•çš„ç”¨æˆ·ä¸å¯†ç ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ›´æ”¹ã€‚\n  æ­¥éª¤äºŒï¼šä¿®æ”¹æœ¬é¡¹ç›®static æ–‡ä»¶å¤¹ä¸‹çš„ index.html \u0026amp;lt;!--href ä¿®æ”¹æˆä½ çš„ip ç«¯å£--\u0026amp;gt; \u0026amp;lt;a id=\u0026amp;quot;serverIpAddress\u0026amp;quot; style=\u0026amp;quot;display: none\u0026amp;quot; href=\u0026amp;quot;http://localhost:8888/admin\u0026amp;quot;\u0026amp;gt;  æ­¥éª¤ä¸‰: è¿è¡Œ MythAdminApplication ä¸­çš„mainæ–¹æ³•ã€‚ æ­¥éª¤å››:åœ¨æµè§ˆå™¨è®¿é—® http://ip:port/myth-admin/index.html ,è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ç™»å½•ã€‚ å¦‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åŠ å…¥QQç¾¤ï¼š162614487 è¿›è¡Œè®¨è®º\n","date":-62135596800,"description":"Myth-admin startup tutorial","dir":"projects/myth/start-myth-admin/","fuzzywordcount":700,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"32e8bb4a5d2dc4e814ef4d7e598a5493145bc75a","permalink":"/zh/projects/myth/start-myth-admin/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/myth/start-myth-admin/","summary":"å¯åŠ¨å‰æï¼šåˆ†å¸ƒå¼äº‹åŠ¡é¡¹ç›®å·²ç»éƒ¨ç½²å¹¶ä¸”è¿è¡Œèµ·æ¥ï¼Œç”¨æˆ·æ ¹æ®è‡ªå·±çš„RPCæ¡†æ¶è¿›è¡Œä½¿ç”¨ é¦–å…ˆç”¨æˆ·ä½¿ç”¨çš„JDKå¿…é¡»æ˜¯1.8+ æœ¬åœ°å®‰è£…äº†git ,maven ï¼Œæ‰§è¡Œä»¥ä¸‹","tags":null,"title":"Myth-admin å¯åŠ¨æ•™ç¨‹","type":"projects","url":"/zh/projects/myth/start-myth-admin/","wordcount":665},{"author":null,"categories":null,"content":" I have imported the jar package to my project, but found that my project cannot be started, what should I do if any error reported?  Answer : When you meet this kind of error, it requires you to locate the problem yourself, you can check the items as bellow:  check whether the framework configuration is carried out according to the document whether your project runtime environment is correct whether there is any dependency conflict problem   If your problem is still present after above check items, you can provide an issue on github of this project, our team will provide technique support as soon as possible.\nWhat if the microservice act as abnormal, but the transaction was not rolled back?  Answer : First of all, you can check the transaction log records. If the transaction log records exist, the rollback will be performed after the scheduled time you configured.  What should I do if I compile the source code and found that the get and set methods are missing?  Answer : The source code uses lombok, you may need to install the corresponding plug-in in your development tool. (No set get method does not affect the operation).  ","date":-62135596800,"description":"Frequently asked questions","dir":"projects/hmily/faq/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"84bf7acf770406520b2276e6a6d95395d5343c18","permalink":"/projects/hmily/faq/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/faq/","summary":"I have imported the jar package to my project, but found that my project cannot be started, what should I do if any error reported?  Answer : When you meet this kind of error, it requires you to locate the problem yourself, you can check the items as bellow:  check whether the framework configuration is carried out according to the document whether your project runtime environment is correct whether there is any dependency conflict problem   If your problem is still present after above check items, you can provide an issue on github of this project, our team will provide technique support as soon as possible.","tags":null,"title":"Questions","type":"projects","url":"/projects/hmily/faq/","wordcount":196},{"author":null,"categories":null,"content":" cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-dubbo\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware\n  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer   Modifiy applicationContext.xml on Indicator Item And choose repositorySupport and modifiy it\n If you use database compensation , You have to create a new database for exampleï¼šmyth\n\u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   Modifiy spring-dubbo.xml on Indicator Item And modifiy zookeeper url   \u0026amp;lt;dubbo:application name=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;192.168.1.148:2181\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;dubbo:protocol accesslog=\u0026amp;quot;true\u0026amp;quot; name=\u0026amp;quot;dubbo\u0026amp;quot; port=\u0026amp;quot;20888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;dubbo:service interface=\u0026amp;quot;com.github.myth.demo.dubbo.account.api.service.AccountService\u0026amp;quot; ref=\u0026amp;quot;accountService\u0026amp;quot;/\u0026amp;gt;   run DubboAccountApplication.java\n run â€¦","date":-62135596800,"description":"Myth Quick Start Dubbo","dir":"projects/myth/quick-start-dubbo/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"5095043006cd2e3b511ff20fef8040e7861f926a","permalink":"/projects/myth/quick-start-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/myth/quick-start-dubbo/","summary":"cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-dubbo\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware\n  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.","tags":null,"title":"Quick Start Dubbo","type":"projects","url":"/projects/myth/quick-start-dubbo/","wordcount":238},{"author":null,"categories":null,"content":" cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-motan\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And zookeeper url And choose you Message Oriented Middleware\n  spring: motan: zookeeper: 192.168.1.148:2181 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer   Modifiy applicationContext.xml on Indicator Item And choose repositorySupport and modifiy it  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   run MotanAccountApplication.java\n run MotanInventoryApplication.java\n run MotanOrderApplication.java\nthis mq sender so befer:\n in applicationContext.xml choose import you mq sender config\n  \u0026amp;lt;import resource=\u0026amp;quot;spring-rocketmq.xml\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-rabbitmq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-kafka.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-activemq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt;   modifiy you mq config for example  \u0026amp;lt;bean â€¦","date":-62135596800,"description":"Myth Quick Start Motan","dir":"projects/myth/quick-start-motan/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"e228a1e4ffec3165510d4db67472f959c4816ce1","permalink":"/projects/myth/quick-start-motan/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/myth/quick-start-motan/","summary":"cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-motan\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And zookeeper url And choose you Message Oriented Middleware\n  spring: motan: zookeeper: 192.168.1.148:2181 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.","tags":null,"title":"Quick Start Motan","type":"projects","url":"/projects/myth/quick-start-motan/","wordcount":208},{"author":null,"categories":null,"content":" cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-springcloud\n run EurekaServerApplication.java\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware\n  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer   Modifiy applicationContext.xml on Indicator Item And choose repositorySupport and modifiy it\n If you use database compensation , You have to create a new database for exampleï¼šmyth  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   run SpringCloudAccountApplication.java\n run SpringCloudInventoryApplication.java\n run SpringcloudOrderApplication.java this mq sender so befer:\n in applicationContext.xml choose import you mq sender config\n  \u0026amp;lt;import resource=\u0026amp;quot;spring-rocketmq.xml\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-rabbitmq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-kafka.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import â€¦","date":-62135596800,"description":"Myth Quick Start SpringCloud","dir":"projects/myth/quick-start-springcloud/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"ae3987a138101bf32cad1c2e7f0b425b5633eb5b","permalink":"/projects/myth/quick-start-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/myth/quick-start-springcloud/","summary":"cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-springcloud\n run EurekaServerApplication.java\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware\n  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.","tags":null,"title":"Quick Start SpringCloud","type":"projects","url":"/projects/myth/quick-start-springcloud/","wordcount":219},{"author":null,"categories":null,"content":" Raincat Strongly consistent distributed transactions are implemented based on two-phase commit + local transaction compensation mechanism. Principle\nIt is based on Java language (JDK1.8), supports Dubbo, Motan, Springcloud for distributed transactions.\nDue to the file name is too long, you can executes git config --global core.longpaths true when pulling the code.\nFeatures  Frame features\n Seamlessly integrate spring or spring boot.\n Support Dubbo, Motan, Springcloud, and other RPC frameworks for distributed transactions.\n Transaction initiator, participant and coordinator are based on Netty long connection which is stable and efficient.\n The coordinator uses Eureka as the registry center and supports cluster mode.\n It would be seamless to integrate with Spring by AOP.\n The configuration, integration and source code are concise. It has been used in the production environment with high stability.\n It has been provided built-in distributed transaction scenario demo, and you can use swagger-ui visual interface for quick experience.\n  The role in transaction\n The transaction initiator which can be understood as a consumer, such as: Dubbo consumer, Springcloud caller, used for initiating a distributed transaction.\n Transaction participants which can be understood as providers such as: Dubbo provider, Springcloud rest service provider, participating in the transaction of the transaction initiator.\n Transaction coordinator (tx-manager), which coordinates the submission and rollback of distributed transactions.\n  Technical solutions\n The coordinator (tx-manager) uses Eureka as the registry center to do cluster configuration for high availability, and use Redis cluster to storage distributed transaction data. Rest services is provided by Springboot, and Netty is used to communicate with participants and initiators for long connections.\n The initiator and the coordinator use AOP, SPI, multi-threading, asynchronous callback, thread pool, Netty communication, etc.\n  SPI expansion\n Local transaction recovery support Redis, Mogondb, Zookeeper, File, Mysql and other relational databases. Local transaction serialization support Java, Hessian, Kryo, Protostuff. Netty communication serialization support Hessian, Kryo, Protostuff.   Prerequisite  JDK 1.8+ Maven 3.2.x Git RPC framework dubbo or motan or springcloudã€‚  Architecture  Architecture diagramï¼š  Flow diagramï¼š\n  Video Environment Bootstrap Commitment Rollback Administration  Support  If you have any questions, please join the QQ group for discussion.  WeChat public account   ","date":-62135596800,"description":"Raincat is a strongly consistent distributed transaction framework based on a two-phase commit + local transaction compensation mechanism. support RPC framework, like Dubbo, Motan and Springcloud","dir":"projects/raincat/overview/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"31fdd0e59b740a72677437f75116e9bf43eb1e6f","permalink":"/projects/raincat/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/raincat/overview/","summary":"Raincat Strongly consistent distributed transactions are implemented based on two-phase commit + local transaction compensation mechanism. Principle\nIt is based on Java language (JDK1.8), supports Dubbo, Motan, Springcloud for distributed transactions.\nDue to the file name is too long, you can executes git config --global core.longpaths true when pulling the code.\nFeatures  Frame features\n Seamlessly integrate spring or spring boot.\n Support Dubbo, Motan, Springcloud, and other RPC frameworks for distributed transactions.","tags":null,"title":"Raincat Introduction","type":"projects","url":"/projects/raincat/overview/","wordcount":341},{"author":null,"categories":null,"content":" Raincat å¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ˜¯åŸºäºäºŒé˜¶æ®µæäº¤+æœ¬åœ°äº‹åŠ¡è¡¥å¿æœºåˆ¶æ¥å®ç°ã€‚åŸç†ä»‹ç»\nåŸºäºjavaè¯­è¨€æ¥å¼€å‘ï¼ˆJDK1.8ï¼‰ï¼Œæ”¯æŒdubbo,motan,springcloudè¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡ã€‚\nå› ä¸ºæ–‡ä»¶åå¤ªé•¿ï¼Œå¤§å®¶åœ¨æ‹‰å–ä»£ç çš„æ—¶å€™æ‰§gitå‘½ä»¤ï¼šgit config \u0026amp;ndash;global core.longpaths true Features  æ¡†æ¶ç‰¹æ€§\n æ— ç¼é›†æˆspring æˆ– spring bootã€‚\n æ”¯æŒdubbo,motan,springcloud,ç­‰rpcæ¡†æ¶è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡ã€‚\n äº‹åŠ¡å‘èµ·è€…ï¼Œå‚ä¸è€…ä¸åè°ƒè€…åº•å±‚åŸºäºnettyé•¿è¿æ¥é€šä¿¡,ç¨³å®šé«˜æ•ˆã€‚\n åè°ƒè€…é‡‡ç”¨eurekaåšæ³¨å†Œä¸­å¿ƒï¼Œæ”¯æŒé›†ç¾¤æ¨¡å¼ã€‚\n é‡‡ç”¨Aspect AOP åˆ‡é¢æ€æƒ³ä¸Springæ— ç¼é›†æˆã€‚\n é…ç½®ç®€å•ï¼Œé›†æˆç®€å•ï¼Œæºç ç®€æ´ï¼Œç¨³å®šæ€§é«˜ï¼Œå·²åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚\n å†…ç½®ç»å…¸çš„åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯demoå·¥ç¨‹ï¼Œå¹¶æœ‰swagger-uiå¯è§†åŒ–ç•Œé¢å¯ä»¥å¿«é€Ÿä½“éªŒã€‚\n  äº‹åŠ¡è§’è‰²\n äº‹åŠ¡å‘èµ·è€…ï¼ˆå¯ç†è§£ä¸ºæ¶ˆè´¹è€… å¦‚ï¼šdubboçš„æ¶ˆè´¹è€…,springcloudçš„è°ƒç”¨æ–¹ï¼‰,å‘èµ·åˆ†å¸ƒå¼äº‹åŠ¡\n äº‹åŠ¡å‚ä¸è€…ï¼ˆå¯ç†è§£ä¸ºæä¾›è€… å¦‚ï¼šdubboçš„æä¾›è€…,springcloudçš„restæœåŠ¡æä¾›è€…),å‚ä¸äº‹åŠ¡å‘èµ·è€…çš„äº‹åŠ¡\n äº‹åŠ¡åè°ƒè€…ï¼ˆtx-managerï¼‰ï¼Œåè°ƒåˆ†å¸ƒå¼äº‹åŠ¡çš„æäº¤ï¼Œå›æ»šç­‰ã€‚\n  æŠ€æœ¯æ–¹æ¡ˆ\n åè°ƒè€…ï¼ˆtx-managerï¼‰é‡‡ç”¨eurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œé›†ç¾¤é…ç½®ï¼Œè¾¾åˆ°æœåŠ¡çš„é«˜å¯ç”¨ï¼Œé‡‡ç”¨redisé›†ç¾¤æ¥åˆ†å¸ƒå¼å­˜å‚¨äº‹åŠ¡æ•°æ®, springboot æä¾›restæœåŠ¡ï¼Œé‡‡ç”¨nettyä¸å‚ä¸è€…ï¼Œå‘èµ·è€…è¿›è¡Œé•¿è¿æ¥é€šä¿¡ã€‚\n å‘èµ·è€…ä¸åè°ƒè€…ï¼Œé‡‡ç”¨Aspect AOP åˆ‡é¢æ€æƒ³ï¼ŒSPIï¼Œå¤šçº¿ç¨‹ï¼Œå¼‚æ­¥å›è°ƒï¼Œçº¿ç¨‹æ± ï¼Œnettyé€šä¿¡ç­‰æŠ€æœ¯ã€‚\n  SPIæ‰©å±•\n æœ¬åœ°äº‹åŠ¡æ¢å¤ï¼Œæ”¯æŒredisï¼Œmogondbï¼Œzookeeperï¼Œfileï¼Œmysqlç­‰å…³ç³»å‹æ•°æ®åº“ æœ¬åœ°äº‹åŠ¡åºåˆ—åŒ–ä¿å­˜ï¼Œæ”¯æŒjavaï¼Œhessianï¼Œkryoï¼Œprotostuff nettyé€šä¿¡åºåˆ—åŒ–æ–¹å¼ï¼Œæ”¯æŒ hessianï¼Œkryoï¼Œprotostuff   Prerequisite  JDK 1.8+ Maven 3.2.x Git RPC framework dubbo or motan or springcloudã€‚  æ¶æ„è®¾è®¡  æ¶æ„è®¾è®¡å›¾ ï¼š  æµç¨‹å›¾ ï¼š\n  è§†é¢‘æºç åˆ†æ ç¯å¢ƒæ­å»º å¯åŠ¨è¿‡ç¨‹ äº‹åŠ¡æäº¤ å›æ»šæ¢å¤ ç®¡ç†åå° Support  å¦‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åŠ å…¥QQç¾¤è¿›è¡Œè®¨è®º  å¾®ä¿¡å…¬ä¼—å·   # Contribution\n","date":-62135596800,"description":"Raincatæ˜¯åŸºäºäºŒé˜¶æ®µæäº¤+æœ¬åœ°äº‹åŠ¡è¡¥å¿æœºåˆ¶æ¥å®ç°çš„å¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ã€‚æ— ç¼æ”¯æŒdubbo,motan,springcloudç­‰Rpcæ¡†æ¶çš„å¾®æœåŠ¡ã€‚","dir":"projects/raincat/overview/","fuzzywordcount":900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"bedfdea663c27d8d473d9e350a6a76b621d42988","permalink":"/zh/projects/raincat/overview/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/raincat/overview/","summary":"Raincat å¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ˜¯åŸºäºäºŒé˜¶æ®µæäº¤+æœ¬åœ°äº‹åŠ¡è¡¥å¿æœºåˆ¶æ¥å®ç°ã€‚åŸç†ä»‹ç» åŸºäºjavaè¯­è¨€æ¥å¼€å‘ï¼ˆJDK1.8ï¼‰ï¼Œæ”¯æŒdubbo,motan,","tags":null,"title":"Raincat ä»‹ç»","type":"projects","url":"/zh/projects/raincat/overview/","wordcount":854},{"author":null,"categories":null,"content":" SOFA-RPC Interface Sectioon  Introduce the jar packages into your interface project.  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Add the @Hmily annotation on the interface method in which you need to perform Hmily distributed transactions.\npublic interface HelloService { @Hmily void say(String hello); }  The project with SOFA-RPC implementation  Step 1 ï¼š Introduce the jar package of the hmily dependency\n Step 2 ï¼š Add Hmily configuration\n Step 3 ï¼š Add the specific annotation to the implementation method. you need to complete the development of confirm and cancel method, if in TCC mode.\n  Introduce The Maven dependency Spring-Namespace  Introduce the hmily-sofa-rpc dependency  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-sofa-rpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  make the configuration in the XML configuration file as below:\n  \u0026amp;lt;!-- set up to enable the aspectj-autoproxy --\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyTransactionAspect\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.aop.SpringHmilyTransactionAspect\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot  Introduce the hmily-spring-boot-starter-sofa-rpc dependency  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-sofa-rpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Introduce the Hmily configuration  new a configuration file named hmily.yml under the resource directory of the current project\n the specific parameter configuration can refer to configuration detail,Local configuration mode, Zookeeper configuration mode, nacos configuration mode,apollo configuration mode\n  Add annotations on the implementation interface We have completed the integration described above,and the next we will talk about the specific implementation.\nTCC Mode  Add @HmilyTCC (confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;) annotation to the concrete implementation of the interface method identified by \u0026amp;lsquo;@Hmily\u0026amp;rsquo;.\n confirmMethod : the method name for confirmï¼ŒThe method parameter list and return type should be consistent with the identification method.\n cancelMethod : the method for cancelï¼ŒThe method parameter list and return type should be consistent with the identification method.\n The TCC mode should ensure the idempotence of the confirm and cancel methods,Users need to develop these two methods by themselves,The confirmation and rollback behavior of all transactions are completely up tp users.The Hmily framework is just responsible for making calls.\n  public class HelloServiceImpl implements HelloService { â€¦","date":-62135596800,"description":"SOFA-RPC User Guide","dir":"projects/hmily/user-rpc/","fuzzywordcount":600,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"0c2555a83f4e51ee037f201aa956dd0f29e6fcbb","permalink":"/projects/hmily/user-rpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/hmily/user-rpc/","summary":"SOFA-RPC Interface Sectioon  Introduce the jar packages into your interface project.  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   Add the @Hmily annotation on the interface method in which you need to perform Hmily distributed transactions.\npublic interface HelloService { @Hmily void say(String hello); }  The project with SOFA-RPC implementation  Step 1 ï¼š Introduce the jar package of the hmily dependency\n Step 2 ï¼š Add Hmily configuration","tags":null,"title":"SOFA-RPC User Guide","type":"projects","url":"/projects/hmily/user-rpc/","wordcount":515},{"author":null,"categories":null,"content":" Spring-Cloud User Guide  Step 1: Introduce the jar packages\n Step 2: Introduce the Hmily configuration\n Step 3: Add @HmilyTCC or @HmilyTAC annotation on the concrete implementation method(Service provider).\n Step 4: Add @Hmily annotation on the feignClient call method(Consumer side).\n  1.Introduce The Maven dependency Spring-Namespace  Introduce the hmily-springcloud dependency  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   make the configuration in the XML configuration file as below:  \u0026amp;lt;!--Configure the base packages that the Hmily framework need to scan --\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.hmily.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- set up to enable the aspectj-autoproxy --\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- Configure the bean parameters for Hmily startup --\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot-Starter  Introduce the hmily-spring-boot-starter-springcloud dependency  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  2.Introduce the Hmily configuration  new a configuration file named hmily.yml under the resource directory of the current project\n the specific parameter configuration can refer to configuration detail,Local configuration mode, Zookeeper configuration mode, nacos configuration mode,apollo configuration mode\n  3. Add annotations on the service implementation method TCC Mode  Add @HmilyTCC (confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;) annotation to the concrete implementation of the interface method identified by \u0026amp;lsquo;@Hmily\u0026amp;rsquo;.\n confirmMethod : the method name for confirmï¼ŒThe method parameter list and return type should be consistent with the identification method.\n cancelMethod : the method for cancelï¼ŒThe method parameter list and return type should be consistent with the identification method.\n The TCC mode should ensure the idempotence of the confirm and cancel methods,Users need to develop these two methods by themselves,The confirmation and rollback behavior of all transactions are completely up tp users.The Hmily framework is just responsible for making calls.\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  TAC Mode(Under development, not released)  Add @HmilyTAC annotation to the â€¦","date":-62135596800,"description":"Hmily-Spring Cloud Distributed Transaction User Guide","dir":"projects/hmily/user-springcloud/","fuzzywordcount":600,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"c41d6ae6fb5b255ac153fc6936085582c5367fef","permalink":"/projects/hmily/user-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/hmily/user-springcloud/","summary":"Spring-Cloud User Guide  Step 1: Introduce the jar packages\n Step 2: Introduce the Hmily configuration\n Step 3: Add @HmilyTCC or @HmilyTAC annotation on the concrete implementation method(Service provider).\n Step 4: Add @Hmily annotation on the feignClient call method(Consumer side).\n  1.Introduce The Maven dependency Spring-Namespace  Introduce the hmily-springcloud dependency  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-springcloud\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   make the configuration in the XML configuration file as below:  \u0026lt;!","tags":null,"title":"Spring Cloud User Guide","type":"projects","url":"/projects/hmily/user-springcloud/","wordcount":541},{"author":null,"categories":null,"content":" Prerequisites  JDK 1.8+ Maven 3.2.x Git  Cloning the GitHub Repository and Quick Installation  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA), Locate on hmily-demo-dubbo Module and Run Build with Maven Run with EurekaServerApplication.java in hmily-demo-springcloud-eureka project. Configuringï¼ˆhmily-demo-springcloud-account module for instanceï¼‰  Configure with your business database (account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Modify hmily.yml, with mysql persistence backend  repository: database: driverClassName: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   run SpringCloudHmilyAccountApplication.java  Run hmily-demo-springcloud-inventory(refer to simillar instructions above). Run hmily-demo-springcloud-order(refer to simillar instructions above). Access on http://127.0.0.1:8884/swagger-ui.html for more. ","date":-62135596800,"description":"Hmily-SpringCloud Quick Start for Distributed Transactions","dir":"projects/hmily/quick-start-springcloud/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"3c087cfc0d507bb5f090a57e5422542efcbcb97d","permalink":"/projects/hmily/quick-start-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/quick-start-springcloud/","summary":"Prerequisites  JDK 1.8+ Maven 3.2.x Git  Cloning the GitHub Repository and Quick Installation  \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA), Locate on hmily-demo-dubbo Module and Run Build with Maven Run with EurekaServerApplication.java in hmily-demo-springcloud-eureka project. Configuringï¼ˆhmily-demo-springcloud-account module for instanceï¼‰  Configure with your business database (account module for instance)  spring: datasource: driver-class-name: com.","tags":null,"title":"SpringCloud Quick Start","type":"projects","url":"/projects/hmily/quick-start-springcloud/","wordcount":151},{"author":null,"categories":null,"content":" In the springcloud service provider (the participating method of the transaction, the called party).\n add myth-springcloud dependency\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Configure MythTransactionBootstrap to start the class, either as XML or as @Bean. Specific configuration can refer to here:configuration for details.  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Add @Myth to the implementation method of springcloud service.\n Listen to the message queue (message queue name written in the annotations method), invoke the framework provides MythMqReceiveService.processMessage() method. If you use JMS, you can refer to the Demo project for details.\n@JmsListener(destination = \u0026amp;quot;account\u0026amp;quot;,containerFactory = \u0026amp;quot;queueListenerContainerFactory\u0026amp;quot;) public void receiveQueue(byte[] message) { LOGGER.info(\u0026amp;quot;=========æ‰£å‡è´¦æˆ·ä¿¡æ¯æ¥æ”¶åˆ°Mythæ¡†æ¶ä¼ å…¥çš„ä¿¡æ¯==========\u0026amp;quot;); final Boolean success = mythMqReceiveService.processMessage(message); if(success){ //æ¶ˆè´¹æˆåŠŸï¼Œæ¶ˆæ¯å‡ºé˜Ÿåˆ—ï¼Œå¦åˆ™ä¸æ¶ˆè´¹ } }   In the springcloud consumer (the invoker of the transaction, the caller)\n add myth-springcloud dependency\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    Set feignClient to add @Myth annotation to the interface, the target must be set to the service interface you actually call, and it must be set correctly.\n@FeignClient(value = \u0026amp;quot;account-service\u0026amp;quot;, configuration = MyConfiguration.class) public interface AccountClient { @Myth(destination = \u0026amp;quot;account\u0026amp;quot;, target = AccountService.class) Boolean â€¦","date":-62135596800,"description":"Myth SpringCloud User","dir":"projects/myth/springcloud-user/","fuzzywordcount":600,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"505b8df6cae812d2e4356d1be583b6c020f193aa","permalink":"/projects/myth/springcloud-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/myth/springcloud-user/","summary":"In the springcloud service provider (the participating method of the transaction, the called party). add myth-springcloud dependency \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.myth\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;myth-springcloud\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; Configure MythTransactionBootstrap to start the class, either as XML or as @Bean. Specific configuration can refer to here:configuration for details. \u0026lt;context:component-scan base-package=\u0026quot;com.github.myth.*\u0026quot;/\u0026gt; \u0026lt;aop:aspectj-autoproxy expose-proxy=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;bean id=\u0026quot;mythTransactionBootstrap\u0026quot; class=\u0026quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026quot;\u0026gt; \u0026lt;property name=\u0026quot;repositorySuffix\u0026quot; value=\u0026quot;account-service\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;serializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;coordinatorQueueMax\u0026quot; value=\u0026quot;5000\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;coordinatorThreadMax\u0026quot; value=\u0026quot;8\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;rejectPolicy\u0026quot; value=\u0026quot;Abort\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;blockingQueueType\u0026quot; value=\u0026quot;Linked\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;repositorySupport\u0026quot; value=\u0026quot;db\u0026quot;/\u0026gt; \u0026lt;property","tags":null,"title":"SpringCloud User","type":"projects","url":"/projects/myth/springcloud-user/","wordcount":571},{"author":null,"categories":null,"content":" åœ¨springcloud æœåŠ¡æä¾›æ–¹ï¼ˆäº‹åŠ¡çš„å‚ä¸æ–¹æ³•ï¼Œè¢«è°ƒç”¨æ–¹ï¼‰\n å¼•å…¥myth-springcloud åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   é…ç½® MythTransactionBootstrapå¯åŠ¨ç±»,å¯ä»¥é‡‡ç”¨xmlæ–¹å¼ï¼Œæˆ–è€…@Beançš„æ–¹å¼,å…·ä½“é…ç½®å¯ä»¥å‚è€ƒ:é…ç½®è¯¦è§£  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  springcloudæœåŠ¡çš„å®ç°æ–¹æ³•ä¸ŠåŠ ä¸Š @Myth\n ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ³¨è§£æ–¹æ³•ä¸Šå†™çš„æ¶ˆæ¯é˜Ÿåˆ—åç§°),è°ƒç”¨æ¡†æ¶æä¾› çš„MythMqReceiveService.processMessageæ–¹æ³•ã€‚åˆ—å¦‚ä½¿ç”¨jmsï¼Œå…·ä½“å¯ä»¥å‚è€ƒdemoå·¥ç¨‹ã€‚\n@JmsListener(destination = \u0026amp;quot;account\u0026amp;quot;,containerFactory = \u0026amp;quot;queueListenerContainerFactory\u0026amp;quot;) public void receiveQueue(byte[] message) { LOGGER.info(\u0026amp;quot;=========æ‰£å‡è´¦æˆ·ä¿¡æ¯æ¥æ”¶åˆ°Mythæ¡†æ¶ä¼ å…¥çš„ä¿¡æ¯==========\u0026amp;quot;); final Boolean success = mythMqReceiveService.processMessage(message); if(success){ //æ¶ˆè´¹æˆåŠŸï¼Œæ¶ˆæ¯å‡ºé˜Ÿåˆ—ï¼Œå¦åˆ™ä¸æ¶ˆè´¹ } }   åœ¨springcloud æ¶ˆè´¹æ–¹ï¼ˆäº‹åŠ¡çš„å‘èµ·è€…ï¼Œè°ƒç”¨æ–¹ï¼‰\n å¼•å…¥myth-springcloud åŒ…\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;com.github.myth\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;myth-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    è®¾ç½®feignClientåœ¨æ¥å£ä¸ŠåŠ ä¸Š@Mythæ³¨è§£ï¼Œtargetå¿…é¡»è®¾ç½®æˆä½ çœŸå®è°ƒç”¨çš„æœåŠ¡æ¥å£,åƒä¸‡è¦è®¾ç½®æ­£ç¡®\n@FeignClient(value = \u0026amp;quot;account-service\u0026amp;quot;, configuration = MyConfiguration.class) public interface AccountClient { @Myth(destination = \u0026amp;quot;account\u0026amp;quot;, target = AccountService.class) Boolean payment(@RequestBody AccountDTO accountDO); }   FeignClient é…ç½® configuration = MyConfiguration.class ```java @Configuration public class MyConfiguration {  @Bean @Scope(\u0026amp;ldquo;prototype\u0026amp;rdquo;) public Feign.Builder feignBuilder() { return Feign.builder() .requestInterceptor(new MythRestTemplateInterceptor()) .invocationHandlerFactory(invocationHandlerFactory()); }\n@Bean public InvocationHandlerFactory invocationHandlerFactory() { return (target, dispatch) -\u0026amp;gt; { MythFeignHandler handler = new â€¦","date":-62135596800,"description":"SpringCloud ç”¨æˆ·","dir":"projects/myth/springcloud-user/","fuzzywordcount":1100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"241c635bdcad609905c15173fa54450210e77dde","permalink":"/zh/projects/myth/springcloud-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/zh/projects/myth/springcloud-user/","summary":"åœ¨springcloud æœåŠ¡æä¾›æ–¹ï¼ˆäº‹åŠ¡çš„å‚ä¸æ–¹æ³•ï¼Œè¢«è°ƒç”¨æ–¹ï¼‰ å¼•å…¥myth-springcloud åŒ… \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.myth\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;myth-springcloud\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; é…ç½® MythTransactio","tags":null,"title":"SpringCloud ç”¨æˆ·","type":"projects","url":"/zh/projects/myth/springcloud-user/","wordcount":1044},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo-springcloudé¡¹ç›®, è¿›è¡Œmavenæ„å»ºã€‚ å¯åŠ¨ hmily-demo-springcloud-eurekaé¡¹ç›®ä¸­çš„ EurekaServerApplication.javaã€‚ ä¿®æ”¹é¡¹ç›®é…ç½®ï¼ˆhmily-demo-springcloud-accountä¸ºåˆ—å­ï¼‰  ä¿®æ”¹ä¸šåŠ¡æ•°æ®åº“(accounté¡¹ç›®ä¸ºåˆ—å­)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: ä½ çš„ç”¨æˆ·å password: ä½ çš„å¯†ç    ä¿®æ”¹ hmily.yml,è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨  repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    run SpringCloudHmilyAccountApplication.java  å¯åŠ¨hmily-demo-springcloud-inventory å‚è€ƒä¸Šè¿°ã€‚ å¯åŠ¨hmily-demo-springcloud-order å‚è€ƒä¸Šè¿°ã€‚ è®¿é—®ï¼šhttp://127.0.0.1:8884/swagger-ui.htmlã€‚ ","date":-62135596800,"description":"Hmily-SpringCloudåˆ†å¸ƒå¼äº‹åŠ¡ä½“éªŒ","dir":"projects/hmily/quick-start-springcloud/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"02b37cdf98dcf9b3ac3a82721cd7575bc5d06dcc","permalink":"/zh/projects/hmily/quick-start-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/quick-start-springcloud/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo","tags":null,"title":"SpringCloudå¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/hmily/quick-start-springcloud/","wordcount":552},{"author":null,"categories":null,"content":" cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-springcloud\n run EurekaServerApplication.java\n Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware\nspring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 # group-id: test # auto-offset-reset: earliest # enable-auto-commit: true # auto-commit-interval: 100 # key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer   Modifiy applicationContext.xml on Indicator Item And choose repositorySupport and modifiy it\n If you use database compensation , You have to create a new database for exampleï¼šmyth\n  \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;com.github.myth.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;mythTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;com.github.myth.core.bootstrap.MythTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySuffix\u0026amp;quot; value=\u0026amp;quot;account-service\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorQueueMax\u0026amp;quot; value=\u0026amp;quot;5000\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;coordinatorThreadMax\u0026amp;quot; value=\u0026amp;quot;8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;rejectPolicy\u0026amp;quot; value=\u0026amp;quot;Abort\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;blockingQueueType\u0026amp;quot; value=\u0026amp;quot;Linked\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;repositorySupport\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;com.github.myth.common.config.MythDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.68:3306/myth?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;Wgj@555888\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;xiaoyu\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  run SpringCloudAccountApplication.java\n run SpringCloudInventoryApplication.java\n run SpringcloudOrderApplication.java this mq sender so befer:\n in applicationContext.xml choose import you mq sender config\n  \u0026amp;lt;import resource=\u0026amp;quot;spring-rocketmq.xml\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-rabbitmq.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import resource=\u0026amp;quot;spring-kafka.xml\u0026amp;quot;/\u0026amp;gt;--\u0026amp;gt; \u0026amp;lt;!--\u0026amp;lt;import â€¦","date":-62135596800,"description":"SpringCloudå¿«é€Ÿå¼€å§‹","dir":"projects/myth/quick-start-springcloud/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"898cb015d2d8a77c4acb4a466673805d0fa20cab","permalink":"/zh/projects/myth/quick-start-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/myth/quick-start-springcloud/","summary":"cd https://github.com/yu199195/myth/tree/master/myth-demo/myth-demo-springcloud run EurekaServerApplication.java Modifiy application.yml on Indicator Item And Modifiy you jdbc url And choose you Message Oriented Middleware spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.68:3306/myth_account?useUnicode=true\u0026amp;characterEncoding=utf8 username: xiaoyu password: Wgj@555888 #activemq: # broker-url: tcp://120.76.52.162:61616 # user: happylife # password: happylifeplat01 # trust-all: true #rabbitmq: # host: localhost # port: 5672 # username: guest # password: guest rocketmq: namesrvAddr: 192.168.1.148:9876 consumerGroupName: account instanceName: account #kafka: # consumer: # bootstrap-servers: localhost:9092 #","tags":null,"title":"SpringCloudå¿«é€Ÿå¼€å§‹","type":"projects","url":"/zh/projects/myth/quick-start-springcloud/","wordcount":230},{"author":null,"categories":null,"content":" Spring-Cloud ç”¨æˆ·æŒ‡å—  æ­¥éª¤ä¸€: å¼•å…¥ä¾èµ–jaråŒ…\n æ­¥éª¤äºŒï¼šå¼•å…¥hmilyé…ç½®\n æ­¥éª¤ä¸‰ï¼šåœ¨å…·ä½“çš„å®ç°æ–¹æ³•ä¸Šï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰ï¼ŒåŠ ä¸ŠHmilyTCC or HmilyTAC æ³¨è§£\n æ­¥éª¤å››ï¼šåœ¨feignClientè°ƒç”¨æ–¹æ³•ä¸Šï¼ˆæ¶ˆè´¹æ–¹ï¼‰ï¼ŒåŠ ä¸ŠHmily\n  1.å¼•å…¥ä¾èµ– Spring-Namespace  å¼•å…¥ä¾èµ–  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®  \u0026amp;lt;!--é…ç½®æ‰«ç hmilyæ¡†æ¶çš„åŒ…--\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.hmily.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--è®¾ç½®å¼€å¯aspectj-autoproxy--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--é…ç½®Hmilyå¯åŠ¨çš„beanå‚æ•°--\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot-Starter  å¼•å…¥ä¾èµ–  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  2.æ–°å¢hmilyé…ç½®  åœ¨é¡¹ç›®çš„ resource æ·»åŠ æ–‡ä»¶åä¸º:hmily.yml çš„é…ç½®æ–‡ä»¶\n å…·ä½“çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£,æœ¬åœ°é…ç½®æ¨¡å¼, zookeeperé…ç½®æ¨¡å¼, nacosé…ç½®æ¨¡å¼,apolloé…ç½®æ¨¡å¼\n  3. æœåŠ¡å®ç°æ–¹æ·»åŠ æ³¨è§£ TCCæ¨¡å¼  åªéœ€è¦åœ¨å‚ä¸hmilyåˆ†å¸ƒå¼äº‹åŠ¡è°ƒç”¨çš„å…·ä½“å®ç°æ–¹æ³•ä¸ŠåŠ @HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;)\n confirmMethod : ç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : å›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n TCCæ¨¡å¼åº”è¯¥ä¿è¯ confirm å’Œ cancel æ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå»å¼€å‘è¿™ä¸ª2ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰çš„äº‹åŠ¡çš„ç¡®è®¤ä¸å›æ»šï¼Œå®Œå…¨ç”±ç”¨æˆ·å†³å®šã€‚Hmilyæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è¿›è¡Œè°ƒç”¨\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  TACæ¨¡å¼ï¼ˆåœ¨å¼€å‘ï¼Œæœªå‘å¸ƒï¼‰  åªéœ€è¦åœ¨å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡è°ƒç”¨çš„å…·ä½“å®ç°æ–¹æ³•ä¸ŠåŠ @HmilyTAC  æœåŠ¡æ¶ˆè´¹ç«¯ï¼ˆFeignClientï¼‰  åœ¨æœåŠ¡è¢«è°ƒç”¨æ–¹çš„@FeignClient æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmilyæ³¨è§£ã€‚  @FeignClient(value = \u0026amp;quot;helle-service\u0026amp;quot;) public interface HelloService { @Hmily @RequestMapping(\u0026amp;quot;/helle-service/sayHello\u0026amp;quot;) void say(String hello); }  é‡è¦æ³¨æ„äº‹é¡¹ åœ¨è°ƒç”¨ä»»ä½•RPCè°ƒç”¨ä¹‹å‰ï¼Œå½“ä½ éœ€è¦èšåˆrpcè°ƒç”¨æˆä¸ºä¸€æ¬¡åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œéœ€è¦åœ¨èšåˆRPCè°ƒç”¨çš„æ–¹æ³•ä¸Šï¼Œå…ˆè¡Œæ·»åŠ  @HmilyTCC æˆ–è€… @HmilyTAC æ³¨è§£,è¡¨ç¤ºå¼€å¯å…¨å±€äº‹åŠ¡ã€‚\nè´Ÿè½½å‡è¡¡  å¦‚æœæœåŠ¡éƒ¨ç½²äº†å‡ ä¸ªèŠ‚ç‚¹ï¼Œ è´Ÿè½½å‡è¡¡ç®—æ³•æœ€å¥½ä½¿ç”¨ hmilyè‡ªå¸¦, è¿™æ · try, confirm, cancel è°ƒç”¨ä¼šè½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ å……åˆ†åˆ©ç”¨äº†ç¼“å­˜ï¼Œææäº†æ•ˆç‡ã€‚åœ¨ä½ çš„yamlé…ç½®å¦‚ä¸‹ï¼š   hmily.ribbon.rule.enabled = true  å¼€å¯hystrix  å¦‚æœç”¨æˆ·é…ç½®äº†feign.hystrix.enabled = true, é»˜è®¤ä½¿ç”¨çº¿ç¨‹æ± æ¨¡å¼ï¼Œ å°†ä¼šå¼€å¯ HmilyHystrixConcurrencyStrategy å®ƒåœ¨hystrixä½¿ç”¨çº¿ç¨‹æ± æ¨¡å¼çš„æ—¶å€™ï¼Œèƒ½å¤Ÿç…§æ ·é€šè¿‡threadLoacl è¿›è¡ŒRPCä¼ å‚æ•°ã€‚   è®¾ç½®æ°¸ä¸é‡è¯•  éœ€è¦è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡çš„SpringCloudå¾®æœåŠ¡çš„è°ƒç”¨æ–¹éœ€è¦è®¾ç½®ä¸é‡è¯•ï¼Œå¦‚ä¸‹æ˜¯å‚è€ƒï¼š  ribbon: MaxAutoRetriesNextServer : 0 MaxAutoRetries: 0  å¼‚å¸¸  try, confirm, cancel æ–¹æ³•çš„æ‰€æœ‰å¼‚å¸¸ä¸è¦è‡ªè¡Œcatch ä»»ä½•å¼‚å¸¸éƒ½åº”è¯¥æŠ›å‡ºç»™ Hmilyæ¡†æ¶å¤„ç†ã€‚   ","date":-62135596800,"description":"Hmily-SpringCloudåˆ†å¸ƒå¼äº‹åŠ¡ç”¨æˆ·æŒ‡å—","dir":"projects/hmily/user-springcloud/","fuzzywordcount":1100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"3a41cae46f09d52506e336b94a32db802937aff9","permalink":"/zh/projects/hmily/user-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/zh/projects/hmily/user-springcloud/","summary":"Spring-Cloud ç”¨æˆ·æŒ‡å— æ­¥éª¤ä¸€: å¼•å…¥ä¾èµ–jaråŒ… æ­¥éª¤äºŒï¼šå¼•å…¥hmilyé…ç½® æ­¥éª¤ä¸‰ï¼šåœ¨å…·ä½“çš„å®ç°æ–¹æ³•ä¸Šï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰ï¼ŒåŠ ä¸ŠHmilyTCC or HmilyTAC æ³¨è§£ æ­¥éª¤å››ï¼šåœ¨","tags":null,"title":"SpringCloudç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/hmily/user-springcloud/","wordcount":1031},{"author":null,"categories":null,"content":" Firstly, you should bootstrap raincat-manager, please refer to how to bootstrap Txmanager for details. Then, please add following dependency in maven at your service, and add @TxTransaction annotation in your distributed transaction method. \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Configure TxTransactionBootstrap by Spring XML \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Configure TxTransactionBootstrap by spring boot starter  Firstly, please add maven dependency spring-boot-starter-springcloud.\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-spring-boot-starter-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Secondly, please configure the application.yml like follows.  org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456  txManagerUrl is the ip and port that you bootstrap txManager . Please add http:// at head.\n serializer is the way of transaction log serialization.\n nettySerializer is the serialization way of how to communicate with txManager. Please be caution that It should be consistent with the configuration in txManager.\n compensation is the property whether compensation is required or not, the service will compensate itself in some cases.\n compensationCacheType is the types of storage log, and support Redis, Mongodb, Zookeeper, etc. For details, please refer to the config.\n  NOTICEï¼šYou need to open AOP when you want to use XML to configure. â€¦","date":-62135596800,"description":"springcloud user guide","dir":"projects/raincat/springcloud-user/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"969843af59ba4a760abfd75c90d05e2d1d0be12c","permalink":"/projects/raincat/springcloud-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/raincat/springcloud-user/","summary":"Firstly, you should bootstrap raincat-manager, please refer to how to bootstrap Txmanager for details. Then, please add following dependency in maven at your service, and add @TxTransaction annotation in your distributed transaction method. \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;raincat-springcloud\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.0-RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;  Configure TxTransactionBootstrap by Spring XML \u0026lt;context:component-scan base-package=\u0026quot;org.dromara.*\u0026quot;/\u0026gt; \u0026lt;aop:aspectj-autoproxy expose-proxy=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;bean id=\u0026quot;txTransactionBootstrap\u0026quot; class=\u0026quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026quot;\u0026gt; \u0026lt;property name=\u0026quot;txManagerUrl\u0026quot; value=\u0026quot;http://localhost:8761\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;serializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;nettySerializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensation\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensationCacheType\u0026quot; value=\u0026quot;db\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;txDbConfig\u0026quot;\u0026gt; \u0026lt;bean class=\u0026quot;org.","tags":null,"title":"Springcloud user guide","type":"projects","url":"/projects/raincat/springcloud-user/","wordcount":243},{"author":null,"categories":null,"content":" Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nSetting tars nodes Build tars nodes with following information refering to here:\n APP: TestInventory, Server Name: InventoryApp, OBJ: InventoryObj, Port: 29740 APP: HmilyAccount, Server Name: AccountApp, OBJ: AccountObj, Port: 10386  With nodes built, run mvn clean package packaging command respectively under hmily-demo-tars-springboot-account and hmily-demo-tars-springboot-inventory directories, and publish with outputs on previous nodes set. Refer to here for details.\nOpen with Your Favourite Editor (IDEA) and Locate on hmily-demo-tars Module Configuringï¼ˆhmily-demo-tars-account module for instanceï¼‰  Configure with your business database(account module for instance)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Modify hmily.yml, with mysql persistence backend  repository: database: driverClassName: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Replace 192.168.41.102 globally with tars platform IP address within file(s) suffixed with config.conf under rescouces directory, and append an -Dconfig=\u0026amp;lt;file\u0026amp;gt; parameter to bootstrap parameters with previous file location(s)\n run TarsHmilyAccountApplication.java\n  Run hmily-demo-tars-springboot-inventory(refer to simillar instructions above). Run hmily-demo-tars-springboot-order(refer to simillar instructions above). Access on http://127.0.0.1:18087/swagger-ui.html for more. ","date":-62135596800,"description":"Tars Quick Start","dir":"projects/hmily/quick-start-tars/","fuzzywordcount":300,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"b43fe73bcf2842441752b747792c355d65121d0e","permalink":"/projects/hmily/quick-start-tars/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/quick-start-tars/","summary":"Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nSetting tars nodes Build tars nodes with following information refering to here:\n APP: TestInventory, Server Name: InventoryApp, OBJ: InventoryObj, Port: 29740 APP: HmilyAccount, Server Name: AccountApp, OBJ: AccountObj, Port: 10386  With nodes built, run mvn clean package packaging command respectively under hmily-demo-tars-springboot-account and hmily-demo-tars-springboot-inventory directories, and publish with outputs on previous nodes set.","tags":null,"title":"Tars Quick Start","type":"projects","url":"/projects/hmily/quick-start-tars/","wordcount":227},{"author":null,"categories":null,"content":" Tars User Guide  Step 1: Introduce the jar packages\n Step 2: Introduce the Hmily configuration\n Step 3: Add @Hmily annotation on the auto-generated Servant interface method which required the Hmily Distributed Transaction.\n Step 4: Add @HmilyTCC or @HmilyTAC annotation on the concrete implementation method(Service provider).\n  Introduce The Maven dependency Spring-Namespace\n Introduce the hmily-tars dependency   \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-tars\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   make the configuration in the XML configuration file as below:\n\u0026amp;lt;!--Configure the base packages that the Hmily framework need to scan --\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.hmily.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- set up to enable the aspectj-autoproxy --\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!-- Configure the bean parameters for Hmily startup --\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyCommunicatorBeanPostProcessor\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.tars.spring.TarsHmilyCommunicatorBeanPostProcessor\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;tarsHmilyStartupBean\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.tars.spring.TarsHmilyFilterStartupBean\u0026amp;quot;/\u0026amp;gt;  Spring-Boot\n Introduce the hmily-spring-boot-starter-tars dependency\nxml \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-tars\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    Introduce the Hmily configuration  new a configuration file named hmily.yml under the resource directory of the current project\n the specific parameter configuration can refer to configuration detail,Local configuration mode, Zookeeper configuration mode, nacos configuration mode,apollo configuration mode\n  Add annotations on the service implementation interface We have completed the integration described above,and the next we will talk about the specific implementation.\nTCC Mode  Add @HmilyTCC (confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;) annotation to the concrete implementation of the interface method identified by \u0026amp;lsquo;@Hmily\u0026amp;rsquo;.\n confirmMethod : the method name for confirmï¼ŒThe method parameter list and return type should be consistent with the identification method.\n cancelMethod : the method for cancelï¼ŒThe method parameter list and return type should be consistent with the identification method.\n The TCC mode should ensure the idempotence of the confirm and cancel methods,Users need to develop these two methods by themselves,The confirmation and rollback behavior of all transactions are completely up tp users.The Hmily framework is just responsible for making calls.\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = â€¦","date":-62135596800,"description":"Tars User Guide","dir":"projects/hmily/user-tars/","fuzzywordcount":400,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"dcf533434776ebf73b83017cec406dc4d29649c3","permalink":"/projects/hmily/user-tars/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/projects/hmily/user-tars/","summary":"Tars User Guide  Step 1: Introduce the jar packages\n Step 2: Introduce the Hmily configuration\n Step 3: Add @Hmily annotation on the auto-generated Servant interface method which required the Hmily Distributed Transaction.\n Step 4: Add @HmilyTCC or @HmilyTAC annotation on the concrete implementation method(Service provider).\n  Introduce The Maven dependency Spring-Namespace\n Introduce the hmily-tars dependency   \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-tars\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   make the configuration in the XML configuration file as below:","tags":null,"title":"Tars User Guide","type":"projects","url":"/projects/hmily/user-tars/","wordcount":352},{"author":null,"categories":null,"content":" @TxTransaction annotation  This annotation is the aspect of distributed transaction, it need to be added when the business side need distributed transaction.  TxTransactionBootstrap Configurationï¼š \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.raincat.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;bufferSize\u0026amp;quot; value=\u0026amp;quot;4096\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettyThreadMax\u0026amp;quot; value=\u0026amp;quot;16\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;refreshInterval\u0026amp;quot; value=\u0026amp;quot;30\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;delayTime\u0026amp;quot; value=\u0026amp;quot;30\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;heartTime\u0026amp;quot; value=\u0026amp;quot;10\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;recoverDelayTime\u0026amp;quot; value=\u0026amp;quot;60\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;retryMax\u0026amp;quot; value=\u0026amp;quot;3\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationRecoverTime\u0026amp;quot; value=\u0026amp;quot;60\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   txManagerUrl is the ip and port of thetxManager, and please add the http:// prefix at head.\n serializer is the way of transaction log serialization, which Kroy is recommended, and Hessian, Protostuff, Jdk are also supported. In our performance test, it is shown as: Kroy\u0026amp;gt;Hessian\u0026amp;gt;Protostuff\u0026amp;gt;Jdk.\n nettySerializer is the serialization way of communicating with txManager, and it need to be the same as the serialization way configured in txManager.\n bufferSize is the bufferSize of disruptor and can be adjusted larger when the concurrency at a high level. Note that it should be 2n power.\n nettyThreadMax is the number of Netty client work thread.\n refreshInterval is the interval of pulling txmanager configuration, and the unit is seconds.\n delayTime is the maximum communication delay time between the client and txmanager.\n heartTime is the heartbeat interval with txmanager, and the unit is seconds.\n compensation is a boolean value to configure whether the compensation is required, most of time it is not required, you can set true in some â€¦","date":-62135596800,"description":"TxTransactionBootstrap Configuration","dir":"projects/raincat/config/","fuzzywordcount":500,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"0231f6398134c2b0fdb30d824f130b69f81ea67e","permalink":"/projects/raincat/config/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/projects/raincat/config/","summary":"@TxTransaction annotation  This annotation is the aspect of distributed transaction, it need to be added when the business side need distributed transaction.  TxTransactionBootstrap Configurationï¼š \u0026lt;context:component-scan base-package=\u0026quot;org.dromara.raincat.*\u0026quot;/\u0026gt; \u0026lt;aop:aspectj-autoproxy expose-proxy=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;bean id=\u0026quot;txTransactionBootstrap\u0026quot; class=\u0026quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026quot;\u0026gt; \u0026lt;property name=\u0026quot;txManagerUrl\u0026quot; value=\u0026quot;http://localhost:8761\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;serializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;nettySerializer\u0026quot; value=\u0026quot;kryo\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;bufferSize\u0026quot; value=\u0026quot;4096\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;nettyThreadMax\u0026quot; value=\u0026quot;16\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;refreshInterval\u0026quot; value=\u0026quot;30\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;delayTime\u0026quot; value=\u0026quot;30\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;heartTime\u0026quot; value=\u0026quot;10\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensation\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;recoverDelayTime\u0026quot; value=\u0026quot;60\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;retryMax\u0026quot; value=\u0026quot;3\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensationRecoverTime\u0026quot; value=\u0026quot;60\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;compensationCacheType\u0026quot; value=\u0026quot;db\u0026quot;/\u0026gt; \u0026lt;property name=\u0026quot;txDbConfig\u0026quot;\u0026gt; \u0026lt;bean class=\u0026quot;org.","tags":null,"title":"TxTransactionBootstrap Configuration","type":"projects","url":"/projects/raincat/config/","wordcount":474},{"author":null,"categories":null,"content":" @TxTransaction annotationè¯¦è§£  è¯¥æ³¨è§£ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡çš„åˆ‡é¢ï¼ˆAOP pointï¼‰ ï¼Œå¦‚æœä¸šåŠ¡æ–¹çš„serviceæœåŠ¡éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåˆ™éœ€è¦åŠ ä¸Šæ­¤æ³¨è§£ã€‚  TxTransactionBootstrap è¯¦è§£ï¼š \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.raincat.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;bufferSize\u0026amp;quot; value=\u0026amp;quot;4096\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettyThreadMax\u0026amp;quot; value=\u0026amp;quot;16\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;refreshInterval\u0026amp;quot; value=\u0026amp;quot;30\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;delayTime\u0026amp;quot; value=\u0026amp;quot;30\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;heartTime\u0026amp;quot; value=\u0026amp;quot;10\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;recoverDelayTime\u0026amp;quot; value=\u0026amp;quot;60\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;retryMax\u0026amp;quot; value=\u0026amp;quot;3\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationRecoverTime\u0026amp;quot; value=\u0026amp;quot;60\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   txManagerUrlï¼šå¡«å†™ä½ å¯åŠ¨çš„txManagerçš„ipç«¯å£ï¼Œæ³¨æ„æ·»åŠ http://å‰ç¼€ã€‚\n serializer :äº‹åŠ¡æ—¥å¿—åºåˆ—åŒ–æ–¹å¼ï¼Œè¿™é‡Œæˆ‘æ¨èä½¿ç”¨æ˜¯kroyã€‚å½“ç„¶ä¹Ÿæ”¯æŒhessian,protostuff,jdkã€‚åœ¨æˆ‘ä»¬æµ‹è¯•ä¸­è¡¨ç°ä¸º: kroy\u0026amp;gt;hessian\u0026amp;gt;protostuff\u0026amp;gt;jdkã€‚\n nettySerializerï¼š ä¸txManageré€šä¿¡å¯¹è±¡çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ³¨æ„ä¸txManagerä¸­çš„åºåˆ—åŒ–æ–¹å¼é…ç½®ä¸€æ ·ã€‚\n bufferSize: disruptorçš„bufferSize,å½“é«˜å¹¶å‘çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒå¤§ã€‚æ³¨æ„æ˜¯ 2næ¬¡æ–¹ã€‚\n nettyThreadMax ï¼š nettyå®¢æˆ·ç«¯å·¥ä½œçº¿ç¨‹æ•°é‡ã€‚\n refreshInterval: æ‹‰å–txmanageré…ç½®ä¿¡æ¯é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ã€‚\n delayTime ï¼š å®¢æˆ·ç«¯ä¸txmanageré€šä¿¡æœ€å¤§å»¶è¿Ÿæ—¶é—´ã€‚\n heartTime ï¼š ä¸txmanagerä¿æŒå¿ƒè·³æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ã€‚\n compensationï¼š æ˜¯å¦éœ€è¦è¡¥å¿ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ï¼Œæç«¯æƒ…å†µä¸‹è®¾ç½®ä¸ºtrueã€‚\n recoverDelayTimeï¼šäº‹åŠ¡æ¢å¤å»¶è¿Ÿæ—¶é—´ï¼Œåªæœ‰å½“ compensationï¼šä¸ºtureæ‰æœ‰ç”¨ã€‚\n compensationRecoverTimeï¼š è¡¥å¿é—´éš”æ—¶é—´ åªæœ‰å½“ compensationï¼šä¸ºtureæ‰æœ‰ç”¨ã€‚\n retryMax ï¼š äº‹åŠ¡è¡¥å¿æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚\n  compensationCacheTypeï¼šä½¿ç”¨ä½•ç§æ–¹å¼å­˜å‚¨æ—¥å¿—ï¼Œæ”¯æŒçš„æœ‰dbï¼Œredisï¼Œmongoï¼Œzookeeperç­‰ã€‚\n æ¥ä¸‹æ¥æ˜¯æœ€é‡è¦çš„äº‹åŠ¡æ—¥å¿—çš„å­˜å‚¨ åœ¨æˆ‘ä»¬çš„å‹æµ‹ä¸­ï¼Œæ¨èä½¿ç”¨mongoã€‚è¡¨ç°ä¸º mongodb\u0026amp;gt;redisé›†ç¾¤\u0026amp;gt;mysql\u0026amp;gt;zookeeper\n å¦‚æœä½ é‡‡ç”¨mongodbå­˜å‚¨æ—¥å¿—,é…ç½®å¦‚ä¸‹(urlå¯ä»¥é…ç½®æˆmongdbé›†ç¾¤çš„url)\n  \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;mongodb\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txMongoConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxMongoConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;mongoDbUrl\u0026amp;quot; value=\u0026amp;quot;192.168.1.68:27017\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property â€¦","date":-62135596800,"description":"TxTransactionBootstrapé…ç½®è¯¦è§£","dir":"projects/raincat/config/","fuzzywordcount":1000,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"cb6b24b6fcd53a713fbd9012b752ea93d261f586","permalink":"/zh/projects/raincat/config/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/raincat/config/","summary":"@TxTransaction annotationè¯¦è§£ è¯¥æ³¨è§£ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡çš„åˆ‡é¢ï¼ˆAOP pointï¼‰ ï¼Œå¦‚æœä¸šåŠ¡æ–¹çš„serviceæœåŠ¡éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåˆ™éœ€è¦åŠ ä¸Šæ­¤æ³¨è§£ã€‚","tags":null,"title":"TxTransactionBootstrapé…ç½®è¯¦è§£","type":"projects","url":"/zh/projects/raincat/config/","wordcount":994},{"author":null,"categories":null,"content":" Environment  JDK 1.8+ Maven 3.2.x Git Redis Mysql  Pull the code \u0026amp;gt; git clone https://github.com/yu199195/Raincat.git \u0026amp;gt; cd Raincat \u0026amp;gt; mvn -DskipTests clean install -U  Prepare the database Execute the SQL statement in demo. SQL statement\nConfiguration  Please open the project in IDEA or Eclipse, and modify the Redis configuration in application.yml.  tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123  Then, bootstrap the raincat-manager by executing the main() in TxManagerApplication.\n Modify the database configuration in application.yml.  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.98:3306/order?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root password: 123456 application: name: order-service org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456   Modify the Zookeeper configuration in spring-dubbo.xml.  \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;localhost:2181\u0026amp;quot;/\u0026amp;gt;   Modify the Zookeeper configuration in spring-dubbo.xml.  \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;192.168.1.148:2181\u0026amp;quot;/\u0026amp;gt;   Start the order project. (Execute the main() method in OrderApplication)  Bootstrap the project Bootstrap the stock project and consume project like others. Please access the following address.http://127.0.0.1:8087/swagger-ui.html.\n","date":-62135596800,"description":"dubbo quick start","dir":"projects/raincat/quick-start-dubbo/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"b4f09828ceb88bd4e9eaeb79f0c550851b4ba975","permalink":"/projects/raincat/quick-start-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/raincat/quick-start-dubbo/","summary":"Environment  JDK 1.8+ Maven 3.2.x Git Redis Mysql  Pull the code \u0026gt; git clone https://github.com/yu199195/Raincat.git \u0026gt; cd Raincat \u0026gt; mvn -DskipTests clean install -U  Prepare the database Execute the SQL statement in demo. SQL statement\nConfiguration  Please open the project in IDEA or Eclipse, and modify the Redis configuration in application.yml.  tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.","tags":null,"title":"dubbo quick start","type":"projects","url":"/projects/raincat/quick-start-dubbo/","wordcount":185},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Redis Mysql  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/yu199195/Raincat.git \u0026amp;gt; cd Raincat \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æˆ–è€…eclipse æ‰“å¼€é¡¹ç›®ã€‚ ä¿®æ”¹raincat-manageré¡¹ç›®ä¸‹ï¼Œapplication.ymlä¸­çš„redisé…ç½® tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123  å¯åŠ¨raincat-manager ï¼ˆæ‰§è¡ŒTxManagerApplicationä¸­çš„mainæ–¹æ³•ï¼‰ ä¿®æ”¹orderé¡¹ç›®çš„application.ymlä¸­çš„æ•°æ®åº“é…ç½® spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.98:3306/order?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root password: 123456 application: name: order-service org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456   ä¿®æ”¹ spring-dubbo.xmlä¸­çš„zookeeperé…ç½®  \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;localhost:2181\u0026amp;quot;/\u0026amp;gt;   åœ¨spring-dubboä¸­ä¿®æ”¹ä½ çš„zookeeperåœ°å€  \u0026amp;lt;dubbo:registry protocol=\u0026amp;quot;zookeeper\u0026amp;quot; address=\u0026amp;quot;192.168.1.148:2181\u0026amp;quot;/\u0026amp;gt;   å¯åŠ¨orderé¡¹ç›®ã€‚ï¼ˆæ‰§è¡ŒOrderApplicationä¸­çš„mainæ–¹æ³•ï¼‰  å…¶ä»–é¡¹ç›®ç±»ä¼¼ï¼Œå¯åŠ¨stocké¡¹ç›®ï¼Œå¯åŠ¨consumeé¡¹ç›®ã€‚ è®¿é—® http://127.0.0.1:8087/swagger-ui.html ","date":-62135596800,"description":"dubboå¿«é€Ÿä½“éªŒ","dir":"projects/raincat/quick-start-dubbo/","fuzzywordcount":500,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"fd01e0b5466a2d592c505c37520fba9e68499a18","permalink":"/zh/projects/raincat/quick-start-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/raincat/quick-start-dubbo/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Redis Mysql ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/yu199195/Raincat.git \u0026gt; cd Raincat \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æˆ–è€…eclipse æ‰“å¼€é¡¹ç›®ã€‚ ä¿®","tags":null,"title":"dubbo å¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/raincat/quick-start-dubbo/","wordcount":404},{"author":null,"categories":null,"content":" Dubboæ¥å£éƒ¨åˆ†  åœ¨ä½ çš„æ¥å£é¡¹ç›®ä¸­å¼•å…¥jaråŒ…ã€‚  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚\npublic interface HelloService { @Hmily void say(String hello); }  Dubboå®ç°é¡¹ç›®  æ­¥éª¤ä¸€ ï¼š å¼•å…¥ä¾èµ–hmilyçš„jaråŒ…\n æ­¥éª¤äºŒ ï¼š æ–°å¢Hmilyé…ç½®\n æ­¥éª¤ä¸‰ ï¼š åœ¨å®ç°æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ã€‚TCCæ¨¡å¼ï¼Œåˆ™éœ€è¦å®Œæˆ confirmï¼Œcancelæ–¹æ³•çš„å¼€å‘\n  å¼•å…¥ä¾èµ– Spring-Namespace  Alibaba-Dubbo ç”¨æˆ·å¼•å…¥  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Aapche-Dubbo ç”¨æˆ·å¼•å…¥\n  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-apache-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®  \u0026amp;lt;!--è®¾ç½®å¼€å¯aspectj-autoproxy--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyTransactionAspect\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.aop.SpringHmilyTransactionAspect\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot  Alibaba-Dubbo ç”¨æˆ·å¼•å…¥  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   Aapche-Dubbo ç”¨æˆ·å¼•å…¥  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-apache-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  å¼•å…¥ hmilyé…ç½®  åœ¨é¡¹ç›®çš„ resource æ–°å»ºæ–‡ä»¶åä¸º:hmily.ymlé…ç½®æ–‡ä»¶\n å…·ä½“çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£,æœ¬åœ°é…ç½®æ¨¡å¼, zookeeperé…ç½®æ¨¡å¼, nacosé…ç½®æ¨¡å¼,apolloé…ç½®æ¨¡å¼\n  å®ç°æ¥å£ä¸Šæ·»åŠ æ³¨è§£ ä¸Šè¿°æˆ‘ä»¬å·²ç»å®Œæˆäº†é›†æˆï¼Œä¸‹é¢å°†è®²è¿°å…·ä½“çš„å®ç°ã€‚\nTCCæ¨¡å¼  å¯¹@Hmily æ ‡è¯†çš„æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸Šï¼ŒåŠ ä¸Š@HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;)\n confirmMethod : ç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : å›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n TCCæ¨¡å¼åº”è¯¥ä¿è¯ confirm å’Œ cancel æ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå»å¼€å‘è¿™ä¸ª2ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰çš„äº‹åŠ¡çš„ç¡®è®¤ä¸å›æ»šï¼Œå®Œå…¨ç”±ç”¨æˆ·å†³å®šã€‚Hmilyæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è¿›è¡Œè°ƒç”¨\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  dubboæ³¨è§£ç”¨æˆ· å¯¹äºä½¿ç”¨ @Reference æ³¨è§£æ¥æ³¨å…¥dubboæœåŠ¡çš„ç”¨æˆ·ï¼Œè¯·æ³¨æ„ï¼šä½ å¯ä»¥éœ€è¦åšå¦‚ä¸‹é…ç½®:\nspring-namespace ç”¨æˆ· åœ¨ä½ çš„xmlé…ç½®ä¸­ï¼Œéœ€è¦å°† org.dromara.hmily.spring.annotation.RefererAnnotationBeanPostProcessor æ³¨å…¥æˆspringçš„bean\n\u0026amp;lt;bean id = \u0026amp;quot;refererAnnotationBeanPostProcessor\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.annotation.RefererAnnotationBeanPostProcessor\u0026amp;quot;/\u0026amp;gt;  spring-bootç”¨æˆ· éœ€è¦åœ¨ymlæ–‡ä»¶é‡Œé¢å¼€å¯æ³¨è§£æ”¯æŒï¼š\nhmily.support.rpc.annotation = true  æˆ–è€…åœ¨é¡¹ç›®ä¸­æ˜¾å¼æ³¨å…¥ï¼š\n@Bean public BeanPostProcessor â€¦","date":-62135596800,"description":"dubboç”¨æˆ·æŒ‡å—","dir":"projects/hmily/user-dubbo/","fuzzywordcount":1100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"a6ce57470599ea9c55b7c746a367292788678104","permalink":"/zh/projects/hmily/user-dubbo/","publishdate":"0001-01-01T00:00:00Z","readingtime":3,"relpermalink":"/zh/projects/hmily/user-dubbo/","summary":"Dubboæ¥å£éƒ¨åˆ† åœ¨ä½ çš„æ¥å£é¡¹ç›®ä¸­å¼•å…¥jaråŒ…ã€‚ \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚ public interface HelloService { @Hmily void say(String hello); } Dubbo","tags":null,"title":"dubboç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/hmily/user-dubbo/","wordcount":1053},{"author":null,"categories":null,"content":" é¦–å…ˆå¯åŠ¨raincat-managerï¼Œå…·ä½“æ€ä¹ˆå¯åŠ¨å‚è€ƒ å¯åŠ¨manager jaråŒ…ä¾èµ–ï¼Œåœ¨ä½ çš„dubboæœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionæ³¨è§£ \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Spring XMLæ–¹å¼é…ç½® TxTransactionBootstrap \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Spring boot startæ–¹å¼é…ç½® TxTransactionBootstrap  é¦–å…ˆä¾èµ–raincat æä¾›çš„spring-boot-starter-dubbo\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-spring-boot-starter-dubbo\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   é…ç½® application.yml  org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456  txManagerUrlï¼šå¡«å†™ä½ å¯åŠ¨çš„txManagerçš„ipç«¯å£ï¼Œæ³¨æ„æ·»åŠ http://\n serializerï¼š æ˜¯æŒ‡äº‹åŠ¡æ—¥å¿—çš„åºåˆ—åŒ–æ–¹å¼\n nettySerializerï¼š ä¸txManageré€šä¿¡å¯¹è±¡çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ³¨æ„ä¸txManagerä¸­çš„åºåˆ—åŒ–æ–¹å¼é…ç½®ä¸€æ ·ã€‚\n compensation ï¼šæ˜¯å¦éœ€è¦è¡¥å¿ï¼Œæç«¯æƒ…å†µä¸‹ï¼ŒæœåŠ¡è‡ªèº«ä¼šè¿›è¡Œè¡¥å¿ã€‚\n compensationCacheTypeï¼š å­˜å‚¨æ—¥å¿—ç±»å‹ï¼Œå½“ç„¶è¿˜æœ‰æ”¯æŒredisï¼Œmongoï¼Œzookeeperç­‰ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ é…ç½®è¯¦è§£ã€‚\n  é…ç½®æ‰«æraincatåŒ…ï¼Œä¸å¼€å¯AOPä»£ç†ï¼ˆXMLæ–¹å¼é…ç½®çš„æ—¶å€™å¿…é¡»åŠ ä¸Šï¼Œstarteræ–¹å¼ä¸éœ€è¦ï¼‰ã€‚ å¦‚æœæœ‰ä»»ä½•é—®é¢˜å¯ä»¥å‚è€ƒdubbo-sample ","date":-62135596800,"description":"dubboç”¨æˆ·æŒ‡å—","dir":"projects/raincat/dubbo-user/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"b700c1a827b370a62429e3497fd0510a77393f4c","permalink":"/zh/projects/raincat/dubbo-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/raincat/dubbo-user/","summary":"é¦–å…ˆå¯åŠ¨raincat-managerï¼Œå…·ä½“æ€ä¹ˆå¯åŠ¨å‚è€ƒ å¯åŠ¨manager jaråŒ…ä¾èµ–ï¼Œåœ¨ä½ çš„dubboæœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒ","tags":null,"title":"dubboç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/raincat/dubbo-user/","wordcount":535},{"author":null,"categories":null,"content":" é¦–å…ˆå¯åŠ¨raincat-managerï¼Œå…·ä½“æ€ä¹ˆå¯åŠ¨å‚è€ƒ å¯åŠ¨manager jaråŒ…ä¾èµ–ï¼Œåœ¨ä½ çš„æœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionæ³¨è§£ \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Spring XMLæ–¹å¼é…ç½® TxTransactionBootstrap \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Spring boot startæ–¹å¼é…ç½® TxTransactionBootstrap  é¦–å…ˆä¾èµ–raincat æä¾›çš„spring-boot-starter-springcloud\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-spring-boot-starter-motan\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   é…ç½® application.yml  org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456  txManagerUrlï¼šå¡«å†™ä½ å¯åŠ¨çš„txManagerçš„ipç«¯å£ï¼Œæ³¨æ„æ·»åŠ http://\n serializerï¼š æ˜¯æŒ‡äº‹åŠ¡æ—¥å¿—çš„åºåˆ—åŒ–æ–¹å¼\n nettySerializerï¼š ä¸txManageré€šä¿¡å¯¹è±¡çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ³¨æ„ä¸txManagerä¸­çš„åºåˆ—åŒ–æ–¹å¼é…ç½®ä¸€æ ·ã€‚\n compensation ï¼šæ˜¯å¦éœ€è¦è¡¥å¿ï¼Œæç«¯æƒ…å†µä¸‹ï¼ŒæœåŠ¡è‡ªèº«ä¼šè¿›è¡Œè¡¥å¿ã€‚\n compensationCacheTypeï¼š å­˜å‚¨æ—¥å¿—ç±»å‹ï¼Œå½“ç„¶è¿˜æœ‰æ”¯æŒredisï¼Œmongoï¼Œzookeeperç­‰ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ é…ç½®è¯¦è§£ã€‚\n  é…ç½®æ‰«æraincatåŒ…ï¼Œä¸å¼€å¯AOPä»£ç†ï¼ˆXMLæ–¹å¼é…ç½®çš„æ—¶å€™å¿…é¡»åŠ ä¸Šï¼Œstarteræ–¹å¼ä¸éœ€è¦ï¼‰ã€‚ ","date":-62135596800,"description":"motanç”¨æˆ·æŒ‡å—","dir":"projects/raincat/motan-user/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"c46d91b05bb51922ce897c55d8926a0644023224","permalink":"/zh/projects/raincat/motan-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/raincat/motan-user/","summary":"é¦–å…ˆå¯åŠ¨raincat-managerï¼Œå…·ä½“æ€ä¹ˆå¯åŠ¨å‚è€ƒ å¯åŠ¨manager jaråŒ…ä¾èµ–ï¼Œåœ¨ä½ çš„æœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹","tags":null,"title":"motanç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/raincat/motan-user/","wordcount":513},{"author":null,"categories":null,"content":" Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA), Locate on hmily-demo-sofa Module and Run Build with Maven Configuringï¼ˆhmily-demo-sofa-account module for instanceï¼‰  Configure with your business database in application.yml  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   Configure with sofa-rpc registration address(es) in application.yml (can run with local zookeeper instance(s))  com: alipay: sofa: rpc: registry-address: zookeeper://127.0.0.1:2181 bolt-port: 8888   Modify hmily.yml, with mysql persistence backend  repository: database: driverClassName: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026amp;lt;db_host_ip\u0026amp;gt;:\u0026amp;lt;db_host_port\u0026amp;gt;/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 # replace with your db_host_ip and db_host_port username: root # replace with your db username password: your_password # replace with your db user password   run SofaHmilyAccountApplication.java  Run hmily-demo-sofa-inventory(refer to simillar instructions above). Run hmily-demo-sofa-order(refer to simillar instructions above). Access on http://127.0.0.1:8089/swagger-ui.html for more. ","date":-62135596800,"description":"sofa-rpc Quick Start","dir":"projects/hmily/quick-start-rpc/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"ba7d9a66090ce5eddb7e76528546f5465e96484b","permalink":"/projects/hmily/quick-start-rpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/hmily/quick-start-rpc/","summary":"Prerequisites  JDK 1.8+ Maven 3.2.x Git Zookeeper  Cloning the GitHub Repository and Quick Installation  \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U  Executing SQL(s) in Demo Module sql\nOpen with Your Favourite Editor (IDEA), Locate on hmily-demo-sofa Module and Run Build with Maven Configuringï¼ˆhmily-demo-sofa-account module for instanceï¼‰  Configure with your business database in application.yml  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://\u0026lt;db_host_ip\u0026gt;:\u0026lt;db_host_port\u0026gt;/hmily_account?","tags":null,"title":"sofa-rpc Quick Start","type":"projects","url":"/projects/hmily/quick-start-rpc/","wordcount":165},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Zookeeper  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo-sofaé¡¹ç›®ï¼Œè¿›è¡Œmavenæ„å»ºã€‚ ä¿®æ”¹é¡¹ç›®é…ç½®ï¼ˆhmily-demo-sofa-accountä¸ºåˆ—å­ï¼‰  application.yml ä¸‹ä¿®æ”¹ä¸šåŠ¡æ•°æ®åº“  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    application.yml ä¸‹ä¿®æ”¹sofa-rpcçš„æ³¨å†Œä¸­å¿ƒåœ°å€(å¯ä»¥åœ¨è‡ªå·±ç”µè„‘æœ¬åœ°å¯åŠ¨ä¸€ä¸ªzookeeperæœåŠ¡)  com: alipay: sofa: rpc: registry-address: zookeeper://127.0.0.1:2181 bolt-port: 8888   ä¿®æ”¹ hmily.yml,è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨  repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    run SofaHmilyAccountApplication.java  å¯åŠ¨hmily-demo-sofa-inventory å‚è€ƒä¸Šè¿°ã€‚ å¯åŠ¨hmily-demo-sofa-order å‚è€ƒä¸Šè¿°ã€‚ è®¿é—®ï¼šhttp://127.0.0.1:8089/swagger-ui.htmlã€‚ ","date":-62135596800,"description":"sofa-rpcå¿«é€Ÿä½“éªŒ","dir":"projects/hmily/quick-start-rpc/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"40326f544594be25ef63cfc5f8f6546467d57274","permalink":"/zh/projects/hmily/quick-start-rpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/quick-start-rpc/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Zookeeper ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-dem","tags":null,"title":"sofa-rpcå¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/hmily/quick-start-rpc/","wordcount":508},{"author":null,"categories":null,"content":" sofa-rpcæ¥å£é¡¹ç›®  åœ¨ä½ çš„æ¥å£é¡¹ç›®ä¸­å¼•å…¥jaråŒ…ã€‚  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-annotation\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚\npublic interface HelloService { @Hmily void say(String hello); }  sofa-rpcå®ç°é¡¹ç›®  æ­¥éª¤ä¸€ ï¼š å¼•å…¥ä¾èµ–hmilyçš„jaråŒ…\n æ­¥éª¤äºŒ ï¼š æ–°å¢Hmilyé…ç½®\n æ­¥éª¤ä¸‰ ï¼š åœ¨å®ç°æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ã€‚TCCæ¨¡å¼ï¼Œåˆ™éœ€è¦å®Œæˆ confirmï¼Œcancelæ–¹æ³•çš„å¼€å‘\n  å¼•å…¥ä¾èµ– Spring-Namespace  å¼•å…¥ä¾èµ–  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-sofa-rpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  åœ¨xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®\n  \u0026amp;lt;!--è®¾ç½®å¼€å¯aspectj-autoproxy--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyTransactionAspect\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.aop.SpringHmilyTransactionAspect\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id = \u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt;  Spring-Boot  å¼•å…¥ä¾èµ–  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-sofa-rpc\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  å¼•å…¥ hmilyé…ç½®  åœ¨é¡¹ç›®çš„ resource æ–°å»ºæ–‡ä»¶åä¸º:hmily.ymlé…ç½®æ–‡ä»¶\n å…·ä½“çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£,æœ¬åœ°é…ç½®æ¨¡å¼, zookeeperé…ç½®æ¨¡å¼, nacosé…ç½®æ¨¡å¼,apolloé…ç½®æ¨¡å¼\n  å®ç°æ¥å£ä¸Šæ·»åŠ æ³¨è§£ ä¸Šè¿°æˆ‘ä»¬å·²ç»å®Œæˆäº†é›†æˆï¼Œä¸‹é¢å°†è®²è¿°å…·ä½“çš„å®ç°ã€‚\nTCCæ¨¡å¼  å¯¹@Hmily æ ‡è¯†çš„æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸Šï¼ŒåŠ ä¸Š@HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;)\n confirmMethod : ç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : å›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n TCCæ¨¡å¼åº”è¯¥ä¿è¯ confirm å’Œ cancel æ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå»å¼€å‘è¿™ä¸ª2ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰çš„äº‹åŠ¡çš„ç¡®è®¤ä¸å›æ»šï¼Œå®Œå…¨ç”±ç”¨æˆ·å†³å®šã€‚Hmilyæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è¿›è¡Œè°ƒç”¨\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  TACæ¨¡å¼(åœ¨å¼€å‘ï¼Œæœªå‘å¸ƒ)  å¯¹@Hmily æ ‡è¯†çš„æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸ŠåŠ ä¸Š@HmilyTAC   é‡è¦æ³¨æ„äº‹é¡¹ åœ¨è°ƒç”¨ä»»ä½•RPCè°ƒç”¨ä¹‹å‰ï¼Œå½“ä½ éœ€è¦èšåˆrpcè°ƒç”¨æˆä¸ºä¸€æ¬¡åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œéœ€è¦åœ¨èšåˆRPCè°ƒç”¨çš„æ–¹æ³•ä¸Šï¼Œå…ˆè¡Œæ·»åŠ  @HmilyTCC æˆ–è€… @HmilyTAC æ³¨è§£,è¡¨ç¤ºå¼€å¯å…¨å±€äº‹åŠ¡ã€‚\nè´Ÿè½½å‡è¡¡ \u0026amp;amp;\u0026amp;amp; è®¾ç½®æ°¸ä¸é‡è¯•  å¦‚æœæœåŠ¡éƒ¨ç½²äº†å‡ ä¸ªèŠ‚ç‚¹ï¼Œ è´Ÿè½½å‡è¡¡ç®—æ³•æœ€å¥½ä½¿ç”¨ hmily, è¿™æ · try, confirm, cancel è°ƒç”¨ä¼šè½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ å……åˆ†åˆ©ç”¨äº†ç¼“å­˜ï¼Œææäº†æ•ˆç‡ã€‚\n æ”¯æŒä¸€ä¸‹å‡ ç§ hmilyConsistentHash, hmilyRandom, hmilyLocalPref, hmilyRoundRobin, hmilyWeightRoundRobin, hmilyWeightConsistentHash å‡ ç§æ–¹å¼å‡æ˜¯ç»§æ‰¿sofa-rpcåŸç”Ÿçš„\n  \u0026amp;lt;sofa:reference jvm-first=\u0026amp;quot;false\u0026amp;quot; id=\u0026amp;quot;accountService\u0026amp;quot; interface=\u0026amp;quot;org.dromara.hmily.demo.common.account.api.AccountService\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;sofa:binding.bolt\u0026amp;gt; \u0026amp;lt;sofa:global-attrs retries=\u0026amp;quot;0\u0026amp;quot; timeout=\u0026amp;quot;5000\u0026amp;quot; loadBalancer =\u0026amp;quot;hmilyRandom\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/sofa:binding.bolt\u0026amp;gt; \u0026amp;lt;/sofa:reference\u0026amp;gt;  å¼‚å¸¸  try, confirm, cancel æ–¹æ³•çš„æ‰€æœ‰å¼‚å¸¸ä¸è¦è‡ªè¡Œcatch ä»»ä½•å¼‚å¸¸éƒ½åº”è¯¥æŠ›å‡ºç»™ Hmilyæ¡†æ¶å¤„ç†ã€‚  ","date":-62135596800,"description":"sofa-rpcç”¨æˆ·æŒ‡å—","dir":"projects/hmily/user-rpc/","fuzzywordcount":900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"85b3b8c9ac417d66f6fce3e02146b49fc56b142f","permalink":"/zh/projects/hmily/user-rpc/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/user-rpc/","summary":"sofa-rpcæ¥å£é¡¹ç›® åœ¨ä½ çš„æ¥å£é¡¹ç›®ä¸­å¼•å…¥jaråŒ…ã€‚ \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.dromara\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hmily-annotation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;{last.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚ public interface HelloService { @Hmily void say(String hello); } so","tags":null,"title":"sofa-rpcç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/hmily/user-rpc/","wordcount":858},{"author":null,"categories":null,"content":" Environment  JDK 1.8+ Maven 3.2.x Git Redis Mysql  Pull the code \u0026amp;gt; git clone https://github.com/yu199195/Raincat.git \u0026amp;gt; cd Raincat \u0026amp;gt; mvn -DskipTests clean install -U  Prepare the database Execute the SQL statement in demo. SQL statement\nConfiguration  Please open the project in IDEA or Eclipse, and modify the Redis configuration in application.yml.  tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123  Then, bootstrap the raincat-manager by executing the main() in TxManagerApplication.\n Modify the alipay database configuration in application.yml.  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.98:3306/alipay?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root password: 123456 application: name: alipay-service   Modify the database configuration in applicationContext.xml.  \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://127.0.0.1:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Bootstrap the project  Bootstrap the Alipay project by executing the main() method in AliPayApplication.\n Bootstrap the wechat project and pay project like others. Please access the following address. http://127.0.0.1:8087/swagger-ui.html.\n  ","date":-62135596800,"description":"springcloud quick start","dir":"projects/raincat/quick-start-springcloud/","fuzzywordcount":200,"kind":"page","lang":"en","lastmod":1662947052,"objectID":"8b2580e2ebad8a93585bf39c6af3f65f4eb7343b","permalink":"/projects/raincat/quick-start-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/projects/raincat/quick-start-springcloud/","summary":"Environment  JDK 1.8+ Maven 3.2.x Git Redis Mysql  Pull the code \u0026gt; git clone https://github.com/yu199195/Raincat.git \u0026gt; cd Raincat \u0026gt; mvn -DskipTests clean install -U  Prepare the database Execute the SQL statement in demo. SQL statement\nConfiguration  Please open the project in IDEA or Eclipse, and modify the Redis configuration in application.yml.  tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.","tags":null,"title":"springcloud quick start","type":"projects","url":"/projects/raincat/quick-start-springcloud/","wordcount":185},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Redis Mysql  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/yu199195/Raincat.git \u0026amp;gt; cd Raincat \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nä½¿ç”¨ä½ çš„å·¥å…· idea æˆ–è€…eclipse æ‰“å¼€é¡¹ç›®ã€‚ ä¿®æ”¹raincat-manageré¡¹ç›®ä¸‹ï¼Œapplication.ymlä¸­çš„redisé…ç½® tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123  å¯åŠ¨raincat-manager ï¼ˆæ‰§è¡ŒTxManagerApplicationä¸­çš„mainæ–¹æ³•ï¼‰ ä¿®æ”¹alipayé¡¹ç›®çš„application.ymlä¸­çš„æ•°æ®åº“é…ç½® spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://192.168.1.98:3306/alipay?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root password: 123456 application: name: alipay-service   ä¿®æ”¹ applicationContext.xmlä¸­çš„æ•°æ®åº“é…ç½®  \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://127.0.0.1:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;   å¯åŠ¨Alipayé¡¹ç›®ã€‚ï¼ˆæ‰§è¡ŒAliPayApplicationä¸­çš„mainæ–¹æ³•ï¼‰  å…¶ä»–é¡¹ç›®ç±»ä¼¼ï¼Œå¯åŠ¨wechaté¡¹ç›®ï¼Œå¯åŠ¨payé¡¹ç›®ã€‚ è®¿é—® http://127.0.0.1:8881/swagger-ui.html ","date":-62135596800,"description":"springcloudå¿«é€Ÿä½“éªŒ","dir":"projects/raincat/quick-start-springcloud/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"daa1b8477a26df3fa68f7b3607dc4394ab8cbf84","permalink":"/zh/projects/raincat/quick-start-springcloud/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/raincat/quick-start-springcloud/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Redis Mysql ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/yu199195/Raincat.git \u0026gt; cd Raincat \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ ä½¿ç”¨ä½ çš„å·¥å…· idea æˆ–è€…eclipse æ‰“å¼€é¡¹ç›®ã€‚ ä¿®","tags":null,"title":"springcloudå¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/raincat/quick-start-springcloud/","wordcount":378},{"author":null,"categories":null,"content":" é¦–å…ˆå¯åŠ¨raincat-managerï¼Œå…·ä½“æ€ä¹ˆå¯åŠ¨å‚è€ƒ å¯åŠ¨manager jaråŒ…ä¾èµ–ï¼Œåœ¨ä½ çš„æœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionæ³¨è§£ \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;  Spring XMLæ–¹å¼é…ç½® TxTransactionBootstrap \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;txTransactionBootstrap\u0026amp;quot; class=\u0026amp;quot;org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txManagerUrl\u0026amp;quot; value=\u0026amp;quot;http://localhost:8761\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;serializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;nettySerializer\u0026amp;quot; value=\u0026amp;quot;kryo\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensation\u0026amp;quot; value=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;compensationCacheType\u0026amp;quot; value=\u0026amp;quot;db\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;txDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;bean class=\u0026amp;quot;org.dromara.raincat.common.config.TxDbConfig\u0026amp;quot;\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;url\u0026amp;quot; value=\u0026amp;quot;jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;driverClassName\u0026amp;quot; value=\u0026amp;quot;com.mysql.jdbc.Driver\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;username\u0026amp;quot; value=\u0026amp;quot;root\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;property name=\u0026amp;quot;password\u0026amp;quot; value=\u0026amp;quot;123456\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt; \u0026amp;lt;/property\u0026amp;gt; \u0026amp;lt;/bean\u0026amp;gt;  Spring boot startæ–¹å¼é…ç½® TxTransactionBootstrap  é¦–å…ˆä¾èµ–raincat æä¾›çš„spring-boot-starter-springcloud\n\u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-spring-boot-starter-springcloud\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   é…ç½® application.yml  org: dromara: raincat: txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username : root password : 123456  txManagerUrlï¼šå¡«å†™ä½ å¯åŠ¨çš„txManagerçš„ipç«¯å£ï¼Œæ³¨æ„æ·»åŠ http://\n serializerï¼š æ˜¯æŒ‡äº‹åŠ¡æ—¥å¿—çš„åºåˆ—åŒ–æ–¹å¼\n nettySerializerï¼š ä¸txManageré€šä¿¡å¯¹è±¡çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ³¨æ„ä¸txManagerä¸­çš„åºåˆ—åŒ–æ–¹å¼é…ç½®ä¸€æ ·ã€‚\n compensation ï¼šæ˜¯å¦éœ€è¦è¡¥å¿ï¼Œæç«¯æƒ…å†µä¸‹ï¼ŒæœåŠ¡è‡ªèº«ä¼šè¿›è¡Œè¡¥å¿ã€‚\n compensationCacheTypeï¼š å­˜å‚¨æ—¥å¿—ç±»å‹ï¼Œå½“ç„¶è¿˜æœ‰æ”¯æŒredisï¼Œmongoï¼Œzookeeperç­‰ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ é…ç½®è¯¦è§£ã€‚\n  é…ç½®æ‰«æraincatåŒ…ï¼Œä¸å¼€å¯AOPä»£ç†ï¼ˆXMLæ–¹å¼é…ç½®çš„æ—¶å€™å¿…é¡»åŠ ä¸Šï¼Œstarteræ–¹å¼ä¸éœ€è¦ï¼‰ã€‚ å¦‚æœæœ‰ä»»ä½•é—®é¢˜å¯ä»¥å‚è€ƒspringcloud-sample ","date":-62135596800,"description":"springcloudç”¨æˆ·æŒ‡å—","dir":"projects/raincat/springcloud-user/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"4d9ec3a8755681a2c2a0d1e87e21d5ab24b74408","permalink":"/zh/projects/raincat/springcloud-user/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/raincat/springcloud-user/","summary":"é¦–å…ˆå¯åŠ¨raincat-managerï¼Œå…·ä½“æ€ä¹ˆå¯åŠ¨å‚è€ƒ å¯åŠ¨manager jaråŒ…ä¾èµ–ï¼Œåœ¨ä½ çš„æœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹","tags":null,"title":"springcloudç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/raincat/springcloud-user/","wordcount":542},{"author":null,"categories":null,"content":" ç¯å¢ƒå‡†å¤‡  JDK 1.8+ Maven 3.2.x Git Zookeeper  ä»£ç æ‹‰å–  \u0026amp;gt; git clone https://github.com/dromara/hmily.git \u0026amp;gt; cd hmily \u0026amp;gt; mvn -DskipTests clean install -U  æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥\nå»ºç«‹tarsèŠ‚ç‚¹ æ ¹æ®æ­¤æ–‡åœ¨å½“å‰tarså¹³å°å»ºç«‹\n- åº”ç”¨å:TestInventory,æœåŠ¡åç§°:InventoryApp,Objå:InventoryObj,ç«¯å£29740çš„èŠ‚ç‚¹ã€‚\n- åº”ç”¨å:HmilyAccount,æœåŠ¡åç§°:AccountApp,Objå:AccountObj,ç«¯å£10386çš„èŠ‚ç‚¹ã€‚\nåœ¨å®ŒæˆèŠ‚ç‚¹çš„å»ºç«‹åï¼Œåˆ†åˆ«åˆ°hmily-demo-tars-springboot-accountå’Œhmily-demo-tars-springboot-inventoryç›®å½•ä¸‹æ‰§è¡Œmvn clean packageå‘½ä»¤æ‰“åŒ…å¹¶æŒ‰ç…§æ­¤æ–‡åœ¨ä¸¤ä¸ªå‰é¢å»ºç«‹çš„èŠ‚ç‚¹ä¸Šä½¿ç”¨æ‰“åŒ…çš„æˆæœç‰©è¿›è¡ŒèŠ‚ç‚¹å‘å¸ƒã€‚\nä½¿ç”¨ä½ çš„å·¥å…· idea æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°hmily-demo-tarsé¡¹ç›®ã€‚ ä¿®æ”¹é¡¹ç›®é…ç½®ï¼ˆhmily-demo-tars-accountä¸ºåˆ—å­ï¼‰  ä¿®æ”¹ä¸šåŠ¡æ•°æ®åº“(accounté¡¹ç›®ä¸ºåˆ—å­)  spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily_account?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    ä¿®æ”¹ hmily.yml,è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨  repository: database: driverClassName: com.mysql.jdbc.Driver url : jdbc:mysql://æ”¹æˆä½ çš„ip+ç«¯å£/hmily?useUnicode=true\u0026amp;amp;characterEncoding=utf8 username: root #æ”¹æˆä½ çš„ç”¨æˆ·å password: #æ”¹æˆä½ çš„å¯†ç    å°†rescoucesç›®å½•ä¸‹çš„config.confåç¼€æ–‡ä»¶é‡Œçš„192.168.41.102å…¨å±€æ›¿æ¢æˆtarså¹³å°ip,å¹¶åœ¨å¯åŠ¨å‚æ•°ä¸­æ·»åŠ -Dconfig=è¯¥æ–‡ä»¶çš„è·¯å¾„\n run TarsHmilyAccountApplication.java\n  å¯åŠ¨hmily-demo-tars-springboot-inventory å‚è€ƒä¸Šè¿°ã€‚ å¯åŠ¨hmily-demo-tars-springboot-order å‚è€ƒä¸Šè¿°ã€‚ è®¿é—®ï¼šhttp://127.0.0.1:18087/swagger-ui.htmlã€‚ ","date":-62135596800,"description":"tarså¿«é€Ÿä½“éªŒ","dir":"projects/hmily/quick-start-tars/","fuzzywordcount":900,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"7c0bdd9ecb5f9441af37ad4e00a626fabb078ed9","permalink":"/zh/projects/hmily/quick-start-tars/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/quick-start-tars/","summary":"ç¯å¢ƒå‡†å¤‡ JDK 1.8+ Maven 3.2.x Git Zookeeper ä»£ç æ‹‰å– \u0026gt; git clone https://github.com/dromara/hmily.git \u0026gt; cd hmily \u0026gt; mvn -DskipTests clean install -U æ‰§è¡Œdemo æ¨¡å—çš„sqlè¯­å¥ã€‚ sqlè¯­å¥ å»ºç«‹tarsèŠ‚ç‚¹ æ ¹æ®æ­¤æ–‡åœ¨å½“å‰tarså¹³å°å»ºç«‹","tags":null,"title":"tarså¿«é€Ÿä½“éªŒ","type":"projects","url":"/zh/projects/hmily/quick-start-tars/","wordcount":848},{"author":null,"categories":null,"content":" Tarsç”¨æˆ·æŒ‡å—  å¼•å…¥jaråŒ…\n å¼•å…¥hmilyé…ç½®\n åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„è‡ªåŠ¨ç”Ÿæˆçš„Servantæ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚\n åœ¨å…·ä½“çš„å®ç°æ–¹æ³•ä¸Šï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰ï¼ŒåŠ ä¸Š@HmilyTCC or HmilyTAC æ³¨è§£\n  å¼•å…¥ä¾èµ– Spring-Namespace\n å¼•å…¥ä¾èµ–\n  \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-tars\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åœ¨xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®\n\u0026amp;lt;!--é…ç½®æ‰«ç hmilyæ¡†æ¶çš„åŒ…--\u0026amp;gt; \u0026amp;lt;context:component-scan base-package=\u0026amp;quot;org.dromara.hmily.*\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--è®¾ç½®å¼€å¯aspectj-autoproxy--\u0026amp;gt; \u0026amp;lt;aop:aspectj-autoproxy expose-proxy=\u0026amp;quot;true\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;!--é…ç½®Hmilyå¯åŠ¨çš„beanå‚æ•°--\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyApplicationContextAware\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.spring.HmilyApplicationContextAware\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;hmilyCommunicatorBeanPostProcessor\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.tars.spring.TarsHmilyCommunicatorBeanPostProcessor\u0026amp;quot;/\u0026amp;gt; \u0026amp;lt;bean id=\u0026amp;quot;tarsHmilyStartupBean\u0026amp;quot; class=\u0026amp;quot;org.dromara.hmily.tars.spring.TarsHmilyFilterStartupBean\u0026amp;quot;/\u0026amp;gt;  Spring-Boot\n å¼•å…¥ä¾èµ–\nxml \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;hmily-spring-boot-starter-tars\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;{last.version}\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;    å¼•å…¥Hmilyé…ç½®  åœ¨é¡¹ç›®çš„ resource æ–°å»ºæ–‡ä»¶åä¸º: hmily.ym é…ç½®æ–‡ä»¶ã€‚\n å…·ä½“çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£,æœ¬åœ°é…ç½®æ¨¡å¼, zookeeperé…ç½®æ¨¡å¼, nacosé…ç½®æ¨¡å¼,apolloé…ç½®æ¨¡å¼\n  å®ç°æ¥å£ä¸Šæ·»åŠ æ³¨è§£ ä¸Šè¿°æˆ‘ä»¬å·²ç»å®Œæˆäº†é›†æˆï¼Œä¸‹é¢å°†è®²è¿°å…·ä½“çš„å®ç°ã€‚\nTCCæ¨¡å¼  å¯¹@Hmily æ ‡è¯†çš„æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸Šï¼ŒåŠ ä¸Š@HmilyTCC(confirmMethod = \u0026amp;quot;confirm\u0026amp;quot;, cancelMethod = \u0026amp;quot;cancel\u0026amp;quot;)\n confirmMethod : ç¡®è®¤æ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n cancelMethod : å›æ»šæ–¹æ³•åç§°ï¼Œè¯¥æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹åº”ä¸æ ‡è¯†æ–¹æ³•ä¸€è‡´ã€‚\n TCCæ¨¡å¼åº”è¯¥ä¿è¯ confirm å’Œ cancel æ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå»å¼€å‘è¿™ä¸ª2ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰çš„äº‹åŠ¡çš„ç¡®è®¤ä¸å›æ»šï¼Œå®Œå…¨ç”±ç”¨æˆ·å†³å®šã€‚Hmilyæ¡†æ¶åªæ˜¯è´Ÿè´£æ¥è¿›è¡Œè°ƒç”¨\n  public class HelloServiceImpl implements HelloService { @HmilyTCC(confirmMethod = \u0026amp;quot;sayConfrim\u0026amp;quot;, cancelMethod = \u0026amp;quot;sayCancel\u0026amp;quot;) public void say(String hello) { System.out.println(\u0026amp;quot;hello world\u0026amp;quot;); } public void sayConfrim(String hello) { System.out.println(\u0026amp;quot; confirm hello world\u0026amp;quot;); } public void sayCancel(String hello) { System.out.println(\u0026amp;quot; cancel hello world\u0026amp;quot;); } }  é‡è¦æ³¨æ„äº‹é¡¹ å¼‚å¸¸  try, confirm, cancel æ–¹æ³•çš„æ‰€æœ‰å¼‚å¸¸ä¸è¦è‡ªè¡Œcatch ä»»ä½•å¼‚å¸¸éƒ½åº”è¯¥æŠ›å‡ºç»™ Hmilyæ¡†æ¶å¤„ç†ã€‚  ","date":-62135596800,"description":"tarsç”¨æˆ·æŒ‡å—","dir":"projects/hmily/user-tars/","fuzzywordcount":700,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"c62d46e0482b5422faa5352fb63f45e326c49a99","permalink":"/zh/projects/hmily/user-tars/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/hmily/user-tars/","summary":"Tarsç”¨æˆ·æŒ‡å— å¼•å…¥jaråŒ… å¼•å…¥hmilyé…ç½® åœ¨éœ€è¦è¿›è¡ŒHmilyåˆ†å¸ƒå¼äº‹åŠ¡çš„è‡ªåŠ¨ç”Ÿæˆçš„Servantæ¥å£æ–¹æ³•ä¸ŠåŠ ä¸Š @Hmily æ ‡è¯†ã€‚ åœ¨å…·ä½“çš„å®ç°æ–¹æ³•","tags":null,"title":"tarsç”¨æˆ·æŒ‡å—","type":"projects","url":"/zh/projects/hmily/user-tars/","wordcount":623},{"author":null,"categories":null,"content":" raincat-admin å¯åŠ¨æ•™ç¨‹  å¯åŠ¨å‰æï¼šåˆ†å¸ƒå¼äº‹åŠ¡é¡¹ç›®å·²ç»éƒ¨ç½²å¹¶ä¸”è¿è¡Œèµ·æ¥ï¼Œç”¨æˆ·æ ¹æ®è‡ªå·±çš„RPCæ¡†æ¶è¿›è¡Œä½¿ç”¨ dubbo ç”¨æˆ· springcloud ç”¨æˆ·  å¯åŠ¨æ–¹å¼ä¸€ï¼šè‡ªå·±æ‰“åŒ…è¿›è¡Œéƒ¨ç½²ã€‚  é¦–å…ˆç”¨æˆ·ä½¿ç”¨çš„JDKå¿…é¡»æ˜¯1.8+ æœ¬åœ°å®‰è£…äº†git ,maven ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\ngit clone https://github.com/yu199195/Raincat.git maven clean install  ä½¿ç”¨ä½ çš„å¼€å‘å·¥å…·æ‰“å¼€é¡¹ç›®ï¼Œæ¯”å¦‚idea Eclipse\n  ä¿®æ”¹application.yml server: port: 8888 context-path: /admin spring: application: name: raincat-admin profiles: active: db tx: admin : userName : admin password : admin redis: hostName: localhost port : 6379 #password: cluster : false # nodes: 127.0.0.1:70001;127.0.1:7002 # redirects: 20   userNameï¼Œpassword æ˜¯ä½ ç™»å½•çš„ç”¨æˆ·åä¸å¯†ç ã€‚\n reidsé…ç½®ä¸ºä½ çš„txManagerçš„redisé…ç½®ã€‚\n spring.profiles.active æ˜¯ä½ æ¿€æ´»çš„æ–¹å¼ï¼Œæ„æ€å°±æ˜¯ä½ é‡‡ç”¨ä»€ä¹ˆæ–¹å¼æ¥å­˜å‚¨æ—¥å¿—çš„ï¼Œå°±æ¿€æ´»ä»€ä¹ˆæ–¹å¼ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ymlã€‚æ¯”å¦‚è¿™é‡Œä½¿ç”¨çš„dbé‚£ä¹ˆæˆ‘ä»¬æ‰¾åˆ°application-db.yml\n  recover: application: list : alipay-service,wechat-service,pay-service serializer : support: kryo retry : max: 10 db: driver : com.mysql.jdbc.Driver url: jdbc:mysql://localhost:3306/tx?useUnicode=true\u0026amp;amp;amp;characterEncoding=utf8 username: root password: 123456   application.listæ˜¯æŒ‡ä½ å¾®æœåŠ¡çš„applicationNameï¼Œç”¨é€—å·åˆ†éš”ã€‚\n serializer : äº‹åŠ¡æ—¥å¿—çš„åºåˆ—åŒ–æ–¹å¼\n retry.max ï¼š æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚\n  ä¿®æ”¹index.html \u0026amp;lt;!--href ä¿®æ”¹æˆä½ çš„ip ç«¯å£--\u0026amp;gt; \u0026amp;lt;a id=\u0026amp;quot;serverIpAddress\u0026amp;quot; style=\u0026amp;quot;display: none\u0026amp;quot; href=\u0026amp;quot;http://192.168.1.132:8888/admin\u0026amp;quot;\u0026amp;gt;  è¿è¡Œ AdminApplication ä¸­çš„mainæ–¹æ³•ã€‚ åœ¨æµè§ˆå™¨è®¿é—® http://ip:port/admin ,è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ç™»å½•ã€‚ å¯åŠ¨æ–¹å¼äºŒï¼šä»mavenä¸­å¿ƒä»“åº“è·å–adminjaråŒ… . \u0026amp;lt;dependency\u0026amp;gt; \u0026amp;lt;groupId\u0026amp;gt;org.dromara\u0026amp;lt;/groupId\u0026amp;gt; \u0026amp;lt;artifactId\u0026amp;gt;raincat-admin\u0026amp;lt;/artifactId\u0026amp;gt; \u0026amp;lt;version\u0026amp;gt;2.0.0-RELEASE\u0026amp;lt;/version\u0026amp;gt; \u0026amp;lt;/dependency\u0026amp;gt;   åˆ›å»ºconfigæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºapplication.ymlç­‰ï¼Œç„¶åä¿®æ”¹å¯åŠ¨ã€‚  ","date":-62135596800,"description":"å¯åŠ¨raincat-admin","dir":"projects/raincat/admin-starter/","fuzzywordcount":600,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"08bd2f1f6c41be6f4cee3a2ada121fb962734c70","permalink":"/zh/projects/raincat/admin-starter/","publishdate":"0001-01-01T00:00:00Z","readingtime":2,"relpermalink":"/zh/projects/raincat/admin-starter/","summary":"raincat-admin å¯åŠ¨æ•™ç¨‹ å¯åŠ¨å‰æï¼šåˆ†å¸ƒå¼äº‹åŠ¡é¡¹ç›®å·²ç»éƒ¨ç½²å¹¶ä¸”è¿è¡Œèµ·æ¥ï¼Œç”¨æˆ·æ ¹æ®è‡ªå·±çš„RPCæ¡†æ¶è¿›è¡Œä½¿ç”¨ dubbo ç”¨æˆ· springcloud ç”¨æˆ· å¯åŠ¨æ–¹å¼ä¸€ï¼šè‡ªå·±æ‰“åŒ…è¿›è¡Œéƒ¨ç½²ã€‚ é¦–å…ˆç”¨æˆ·ä½¿","tags":null,"title":"å¯åŠ¨raincat-admin","type":"projects","url":"/zh/projects/raincat/admin-starter/","wordcount":538},{"author":null,"categories":null,"content":" å¯åŠ¨raincat-manager æ–¹å¼ä¸€ï¼šè‡ªå·±æ‹‰å–ä»£ç ç¼–è¯‘ï¼šhttps://github.com/yu199195/Raincat  ä¿®æ”¹application.yml ä¸­çš„redisé…ç½®  transactionWaitMaxTime: 500 redisSaveMaxTime: 3000 tx: manager: netty : port: 9998 serialize: kryo maxConnection: 100 maxThreads : 16 delayTime : 5 heartTime : 20 redis : cluster : false hostName : 192.168.1.91 port: 6379 password : foobaredbbexONE123   transactionWaitMaxTime äº‹åŠ¡æœ€å¤§ç­‰å¾…æ—¶é—´\n redisSaveMaxTime rediså­˜å‚¨æœ€å¤§ç­‰å¾…æ—¶é—´\n tx:manager:netty è§£é‡Š\n port æ˜¯åªnettyé•¿è¿æ¥çš„nettyç«¯å£ï¼ˆå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼‰\n serialize nettyè‡ªå®šä¹‰åºåˆ—åŒ–åè®®ï¼ˆæ¨èä½¿ç”¨kroyè¿™ä¸ªè¦ä¸å®¢æˆ·ç«¯çš„åºåˆ—åŒ–åè®®å¯¹åº”ï¼‰\n maxConnection æœ€å¤§é•¿è¿æ¥æ•°é‡\n maxThreads netty workçº¿ç¨‹æ•°é‡\n heartTime å¿ƒè·³æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰\n   å¯åŠ¨æ–¹å¼äºŒï¼šç›´æ¥ä»mavenä¸­å¤®ä»“åº“è·å–raincat-manager jaråŒ…ã€‚  å»ºç«‹configç›®å½•ï¼Œæ–°å¢applicationymlé…ç½®æ–‡ä»¶å¹¶ä¿®æ”¹ã€‚è¦†ç›–jaråŒ…é‡Œé¢çš„applicationymlã€‚å…·ä½“çš„è¯·å‚è€ƒspringbooté…ç½®æ–‡ä»¶è¯»å–é¡ºåºã€‚  ","date":-62135596800,"description":"å¯åŠ¨raincat-manager","dir":"projects/raincat/raincat-manager-starter/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"bbdcdac27d74dd98b5f039c32e1939852bf324c4","permalink":"/zh/projects/raincat/raincat-manager-starter/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/raincat/raincat-manager-starter/","summary":"å¯åŠ¨raincat-manager æ–¹å¼ä¸€ï¼šè‡ªå·±æ‹‰å–ä»£ç ç¼–è¯‘ï¼šhttps://github.com/yu199195/Raincat ä¿®æ”¹app","tags":null,"title":"å¯åŠ¨raincat-manager","type":"projects","url":"/zh/projects/raincat/raincat-manager-starter/","wordcount":371},{"author":null,"categories":null,"content":" å›¢é˜Ÿæˆå‘˜ï¼ˆæ’åä¸åˆ†å…ˆåï¼‰    åå­— github è§’è‰² æ‰€åœ¨å…¬å¸     è‚–å®‡ yu199195 VP äº¬ä¸œ   å¼ æ°¸ä¼¦ tuohai666 committer äº¬ä¸œ   èµµä¿Š cherrylzhao committer è”é€š   é™ˆæ–Œ prFor committer æŸåˆ›ä¸šå…¬å¸   ææµª cysy-lli committer æºç¨‹   æ±¤ç…œå†¬ tydhot committer perfma    ","date":-62135596800,"description":"å›¢é˜Ÿä»‹ç»","dir":"projects/hmily/team/","fuzzywordcount":100,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"8d3d94758b890d2b1ca2b21f24ba04af40cf4fa8","permalink":"/zh/projects/hmily/team/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/team/","summary":"å›¢é˜Ÿæˆå‘˜ï¼ˆæ’åä¸åˆ†å…ˆåï¼‰ åå­— github è§’è‰² æ‰€åœ¨å…¬å¸ è‚–å®‡ yu199195 VP äº¬ä¸œ å¼ æ°¸ä¼¦ tuohai666 committer äº¬ä¸œ èµµä¿Š cherrylzhao committer è”é€š é™ˆæ–Œ prFor committer æŸåˆ›ä¸šå…¬å¸ ææµª cysy-lli committer æºç¨‹ æ±¤ç…œå†¬ tydhot committer perfma","tags":null,"title":"å›¢é˜Ÿä»‹ç»","type":"projects","url":"/zh/projects/hmily/team/","wordcount":61},{"author":null,"categories":null,"content":" æœ¯è¯­  å‘èµ·è€…ï¼šå…¨å±€äº‹åŠ¡çš„å‘èµ·è€…ï¼Œåœ¨ä¸€ä¸ªè¯·æ±‚é“¾è·¯èµ„æºæ–¹æ³•é‡Œé¢ï¼Œæœ€å…ˆéœ€è¦å¯¹åˆ†å¸ƒå¼èµ„æºè¿›è¡Œäº‹åŠ¡å¤„ç†çš„åœ°æ–¹ï¼Œåœ¨Hmilyæ¡†æ¶é‡Œé¢ å¯ä»¥è¡¨ç¤ºä¸ºï¼šä¸€ä¸ªè¯·æ±‚æœ€å…ˆé‡åˆ° @HmilyTCC or @HmilyTAC æ³¨è§£çš„æ–¹æ³•ï¼Œè¯¥æ‰€å±æ–¹æ³•åº”ç”¨è¢«ç§°ä¸ºå‘èµ·è€…ã€‚\n å‚ä¸è€…ï¼šåˆ†å¸ƒå¼æœåŠ¡æˆ–è€…èµ„æºï¼Œéœ€è¦ä¸å…¶ä»–æœåŠ¡ä¸€èµ·å‚ä¸åˆ°ä¸€æ¬¡åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ä¸‹ã€‚åœ¨Hmilyæ¡†æ¶é‡Œé¢ï¼Œè¡¨ç°ä¸ºä¸€ä¸ªRPCæ¡†æ¶çš„æ¥å£è¢«åŠ ä¸Š@Hmilyæ³¨è§£ã€‚\n åè°ƒè€…ï¼šç”¨æ¥åè°ƒåˆ†å¸ƒå¼äº‹åŠ¡åˆ°åº•æ˜¯commitï¼Œè¿˜æ˜¯ rollbackçš„è§’è‰²ï¼Œä»–å¯ä»¥æ˜¯è¿œç¨‹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°çš„ï¼Œå¯ä»¥æ˜¯ä¸­å¿ƒåŒ–çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å»ä¸­å¿ƒåŒ–çš„ã€‚åœ¨Hmilyæ¡†æ¶é‡Œé¢çš„åè°ƒè€…æ˜¯æœ¬åœ°å»ä¸­å¿ƒåŒ–çš„è§’è‰²ã€‚\n TCC ï¼šTry, Confirm, Cancel 3ä¸ªé˜¶æ®µçš„ç®€ç§°ã€‚\n TAC ï¼šTry Auto Cancelçš„ç®€ç§°ã€‚Tryé˜¶æ®µé¢„ç•™èµ„æºåï¼Œä¼šç”±æ¡†æ¶è‡ªåŠ¨ç”Ÿæˆåå‘çš„æ“ä½œèµ„æºçš„è¡Œä¸ºã€‚\n  ","date":-62135596800,"description":"æœ¯è¯­","dir":"projects/hmily/term/","fuzzywordcount":400,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"c8cce5e1bdfb921bdfee3259c940cb096da7bc74","permalink":"/zh/projects/hmily/term/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/term/","summary":"æœ¯è¯­ å‘èµ·è€…ï¼šå…¨å±€äº‹åŠ¡çš„å‘èµ·è€…ï¼Œåœ¨ä¸€ä¸ªè¯·æ±‚é“¾è·¯èµ„æºæ–¹æ³•é‡Œé¢ï¼Œæœ€å…ˆéœ€è¦å¯¹åˆ†å¸ƒå¼èµ„æºè¿›è¡Œäº‹åŠ¡å¤„ç†çš„åœ°æ–¹ï¼Œåœ¨Hmilyæ¡†æ¶é‡Œé¢ å¯ä»¥è¡¨ç¤ºä¸ºï¼šä¸€ä¸ªè¯·æ±‚æœ€","tags":null,"title":"æœ¯è¯­","type":"projects","url":"/zh/projects/hmily/term/","wordcount":327},{"author":null,"categories":null,"content":" æˆ‘å¼•ç”¨äº†jaråŒ…ï¼Œå‘ç°å¯åŠ¨ä¸äº†ï¼ŒæŠ¥é”™æ€ä¹ˆåŠï¼Ÿ  ç­”ï¼šè¿™ç§éœ€è¦ä½ è‡ªå·±å»å®šä½é—®é¢˜ï¼ŒæŸ¥çœ‹æ˜¯å¦æŒ‰ç…§æ–‡æ¡£æ¥è¿›è¡Œé…ç½®ï¼Œç¯å¢ƒæ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦æœ‰ä¾èµ–å†²çªé—®é¢˜ï¼Œå®åœ¨è§£å†³ä¸äº†ï¼Œå¯ä»¥åœ¨githubä¸Šæä¾›issueï¼Œ æˆ‘ä»¬å›¢é˜Ÿä¼šè¿›è¡ŒæŠ€æœ¯æ”¯æŒã€‚  å¾®æœåŠ¡å¼‚å¸¸ï¼Œäº‹åŠ¡æ²¡å›æ»šæ€ä¹ˆåŠï¼Ÿ  ç­”ï¼šé¦–å…ˆï¼Œä½ å¯ä»¥å»æŸ¥çœ‹æ—¥å¿—è®°å½•ï¼Œå¦‚æœæ—¥å¿—è®°å½•å­˜åœ¨ï¼Œé‚£åœ¨ä½ é…ç½®çš„è°ƒåº¦æ—¶é—´ä¹‹åï¼Œä¼šæ‰§è¡Œå›æ»šã€‚  ç¼–è¯‘æºç ï¼Œå‘ç°ç¼ºå°‘getï¼Œsetæ–¹æ³•æ€ä¹ˆåŠï¼Ÿ  ç­”ï¼šæºç ä½¿ç”¨äº†lombokï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä½ çš„å¼€å‘å·¥å…·ï¼Œå®‰è£…å¯¹åº”çš„æ’ä»¶ã€‚ï¼ˆæ²¡æœ‰set getæ–¹æ³•å¹¶ä¸å½±å“è¿è¡Œçš„ï¼‰ã€‚  ","date":-62135596800,"description":"é—®é¢˜æè¿°","dir":"projects/hmily/faq/","fuzzywordcount":300,"kind":"page","lang":"zh","lastmod":1662947052,"objectID":"d22162d388a3fc2e1d5a17891f00319edb02e0f1","permalink":"/zh/projects/hmily/faq/","publishdate":"0001-01-01T00:00:00Z","readingtime":1,"relpermalink":"/zh/projects/hmily/faq/","summary":"æˆ‘å¼•ç”¨äº†jaråŒ…ï¼Œå‘ç°å¯åŠ¨ä¸äº†ï¼ŒæŠ¥é”™æ€ä¹ˆåŠï¼Ÿ ç­”ï¼šè¿™ç§éœ€è¦ä½ è‡ªå·±å»å®šä½é—®é¢˜ï¼ŒæŸ¥çœ‹æ˜¯å¦æŒ‰ç…§æ–‡æ¡£æ¥è¿›è¡Œé…ç½®ï¼Œç¯å¢ƒæ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦æœ‰ä¾èµ–å†²çªé—®é¢˜ï¼Œå®åœ¨","tags":null,"title":"é—®é¢˜","type":"projects","url":"/zh/projects/hmily/faq/","wordcount":241}]