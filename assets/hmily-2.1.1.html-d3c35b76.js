import{_ as n}from"./hutool-framework-bdd1899f.js";import{_ as s,o as a,c as e,f as t}from"./app-74d64f08.js";const o={},p=t('<p>Thank you guys for your support all the way, and keep everyone waiting. In this version, our team refactored the entire project, reasonably divided functional modules, added configuration centers, adjusted the underlying storage structure, solved difficult bugs, and supported other new features, and absorbed more outstanding open source community members to join in.</p><h2 id="architecture" tabindex="-1"><a class="header-anchor" href="#architecture" aria-hidden="true">#</a> Architecture</h2><figure><img src="'+n+`" alt="" tabindex="0"><figcaption></figcaption></figure><h3 id="features" tabindex="-1"><a class="header-anchor" href="#features" aria-hidden="true">#</a> Features</h3><ul><li>High availabilityÂ·: Supports abnormal transaction rollback and overtime transaction recovery in distributed scenarios to prevent transaction suspension.</li><li>Ease of use: Provide zero-invasive Spring-Boot, Spring-Namespace to quickly integrate with business systems.</li><li>High performance: Decentralized design, fully integrated with business systems, naturally supports cluster deployment.</li><li>Observability: Performance monitoring of multiple metrics by Metrics, as well as admin management UI .</li><li>Multiple RPCs: support Dubbo, SpringCloud, Motan, Sofa-rpc and other well-known RPC frameworks.</li><li>Log storage: Support Mysql, Oracle, Mongodb, Redis, Zookeeper, etc.</li><li>Complex scenarios: Support RPC nested call transactions.</li></ul><h3 id="refactoring-part" tabindex="-1"><a class="header-anchor" href="#refactoring-part" aria-hidden="true">#</a> Refactoring part</h3><ul><li><p><strong>Module division:</strong></p><ul><li>Extract the SPI custom module and It&#39;s open-the-box.</li></ul><ul><li>SPI module that defines multiple storage methods for transaction logs.</li><li>SPI module that defines multiple serialization methods for transaction logs.</li><li>Add configuration center, support various mainstream configuration centers (Nacos, Apollo, Zookeeper, etc.), and support dynamic refresh of configuration.</li><li>Add metrics module to monitor various information at runtime.</li><li>Remove the core transaction execution module.</li><li>Extract multiple RPC support modules.</li><li>Extract the Spring and Spring Boot support modules.</li></ul></li><li><p><strong>On the dependent package version:</strong></p><ul><li>Guava upgraded to 2.9.0.</li><li>Curator upgraded to 5.1.0.</li></ul></li><li><p><strong>Code quality:</strong></p><ul><li>Strict check-style code inspection, adhering to the principle of elegance and simplicity (talk is cheap, show you code).</li></ul></li><li><p><strong>openness :</strong></p><ul><li>The community pursues the basic principles of simplicity, happiness, and harmony.</li></ul></li><li><p><strong>Goal:</strong></p><ul><li>Create a high-availability, high-performance, easy-to-use financial-level distributed transaction solution.</li></ul></li></ul><h3 id="solve-bugs" tabindex="-1"><a class="header-anchor" href="#solve-bugs" aria-hidden="true">#</a> Solve bugs:</h3><ul><li>The Dubbo framework does not support the use of annotations (spring-boot-starter-dubbo).</li><li>The Motan framework does not support the use of annotations.</li><li>If Spring Cloud users use Feign and Hystrix to integrate Hmily, the thread switching problem occurs.</li><li>In extreme cases, the transaction log serialization is abnormal.</li><li>If timeout happen in <code>try </code>, It will cause the transaction suspension bug.</li><li>When the <code>confirm</code> and <code>cancel</code> phases are abnormal, the transaction fails to rollback.</li><li>In the transaction log storage, two modes of synchronous and asynchronous are supported for users to choose.</li></ul><h3 id="user-guide" tabindex="-1"><a class="header-anchor" href="#user-guide" aria-hidden="true">#</a> User guide</h3><p>For Hmily users, it only takes three steps to achieve the BASE transaction between RPC service calls</p><ul><li>Add the maven dependencies supported by Hmily for various RPC.</li><li>Add Hmily configuration.</li><li>Add <code>@Hmily</code> annotation to RPC interface method.</li></ul><h4 id="dependency-changes" tabindex="-1"><a class="header-anchor" href="#dependency-changes" aria-hidden="true">#</a> Dependency changes</h4><p>There is no change to the dependencies, only the version needs to be upgraded to 2.1.0. Here are examples of Dubbo microservices.</p><h4 id="dubbo-rpc-microservices" tabindex="-1"><a class="header-anchor" href="#dubbo-rpc-microservices" aria-hidden="true">#</a> Dubbo RPC microservices</h4><ul><li>Dubbo interface service dependency.</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.dromara<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hmily-annotation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Dubbo service provider depends on version&lt;2.7.</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.dromara<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hmily-dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    or

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.dromara<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hmily-spring-boot-starter-dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hmily-configuration-changes" tabindex="-1"><a class="header-anchor" href="#hmily-configuration-changes" aria-hidden="true">#</a> Hmily configuration changes</h4><p>In the new version 2.1.0, the hmily-config module has been added to support local and registry modes. The user first needs to create a new file named <code>hmily.yml</code> under the project <code>resouce</code> file. The default path is the project&#39;s <code>resource</code> directory, it can also be specified with <code>-Dhmily.conf</code>, or the configuration can be placed in the <code>user.dir</code> directory. Priority level <code>-Dhmily.conf</code>&gt; <code>user.dir</code>&gt; <code>resource</code>. The file format is as follows (The local mode of configuration):</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">configMode</span><span class="token punctuation">:</span> local
    <span class="token key atrule">appName</span><span class="token punctuation">:</span> account<span class="token punctuation">-</span>dubbo
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token key atrule">appName</span><span class="token punctuation">:</span> account<span class="token punctuation">-</span>dubbo
    <span class="token key atrule">serializer</span><span class="token punctuation">:</span> kryo
    <span class="token key atrule">contextTransmittalMode</span><span class="token punctuation">:</span> threadLocal
    <span class="token key atrule">scheduledThreadMax</span><span class="token punctuation">:</span> <span class="token number">16</span>
    <span class="token key atrule">scheduledRecoveryDelay</span><span class="token punctuation">:</span> <span class="token number">60</span>
    <span class="token key atrule">scheduledCleanDelay</span><span class="token punctuation">:</span> <span class="token number">60</span>
    <span class="token key atrule">scheduledPhyDeletedDelay</span><span class="token punctuation">:</span> <span class="token number">600</span>
    <span class="token key atrule">scheduledInitDelay</span><span class="token punctuation">:</span> <span class="token number">30</span>
    <span class="token key atrule">recoverDelayTime</span><span class="token punctuation">:</span> <span class="token number">60</span>
    <span class="token key atrule">cleanDelayTime</span><span class="token punctuation">:</span> <span class="token number">180</span>
    <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">200</span>
    <span class="token key atrule">retryMax</span><span class="token punctuation">:</span> <span class="token number">10</span>
    <span class="token key atrule">bufferSize</span><span class="token punctuation">:</span> <span class="token number">8192</span>
    <span class="token key atrule">consumerThreads</span><span class="token punctuation">:</span> <span class="token number">16</span>
    <span class="token key atrule">asyncRepository</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">autoSql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">phyDeleted</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">storeDays</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">repository</span><span class="token punctuation">:</span> mysql

<span class="token key atrule">repository</span><span class="token punctuation">:</span>
  <span class="token key atrule">database</span><span class="token punctuation">:</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
    <span class="token key atrule">url</span> <span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/hmily<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span>
    <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">10</span>
    <span class="token key atrule">connectionTimeout</span><span class="token punctuation">:</span> <span class="token number">30000</span>
    <span class="token key atrule">idleTimeout</span><span class="token punctuation">:</span> <span class="token number">600000</span>
    <span class="token key atrule">maxLifetime</span><span class="token punctuation">:</span> <span class="token number">1800000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>If you want to use Nacos as configuration center:</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">hmily</span><span class="token punctuation">:</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">configMode</span><span class="token punctuation">:</span> nacos
    <span class="token key atrule">appName</span><span class="token punctuation">:</span> xxxxx
<span class="token key atrule">remote</span><span class="token punctuation">:</span>
  <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 192.168.3.22<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">dataId</span><span class="token punctuation">:</span> hmily.properties
    <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP
    <span class="token key atrule">timeoutMs</span><span class="token punctuation">:</span> <span class="token number">6000</span>
    <span class="token key atrule">fileExtension</span><span class="token punctuation">:</span> yml
    <span class="token key atrule">passive</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>If you want use Apollo as configuration centerï¼</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">hmily</span><span class="token punctuation">:</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">configMode</span><span class="token punctuation">:</span> apollo
    <span class="token key atrule">appName</span><span class="token punctuation">:</span> xxxx
<span class="token key atrule">remote</span><span class="token punctuation">:</span>
  <span class="token key atrule">apollo</span><span class="token punctuation">:</span>
    <span class="token key atrule">appId</span><span class="token punctuation">:</span> hmily<span class="token punctuation">-</span>xxxxx
    <span class="token key atrule">configService</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//192.168.3.22<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> byin_hmily
    <span class="token key atrule">secret</span><span class="token punctuation">:</span>
    <span class="token key atrule">fileExtension</span><span class="token punctuation">:</span> yml
    <span class="token key atrule">passive</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">env</span><span class="token punctuation">:</span> dev
    <span class="token key atrule">meta</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//192.168.3.22<span class="token punctuation">:</span><span class="token number">808</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you want to know more configuration methods and detailed explanations of configuration content, please refer to: https://dromara.org/zh-cn/docs/hmily/config.html .</p><p><strong>Changes in the use of annotation methods</strong></p><p>In the previous version, RPC interface and implementation only need to add <code>@Hmily</code> annotation, but now It need to be changed, you need to add <code>@Hmily</code> in the RPC interface method, which is used to identify this is a Hmily distributed transaction interface method , besides, you need to add <code>@HmilyTCC</code> to the implementation of the interface, and then specify the method names of <code>confirm</code> and <code>cancel</code>.</p><p><strong>Example (say method in Dubbo needs to participate in distributed transactions):</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Hmily</span>
    <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">HelloService</span>  <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@HmilyTCC</span><span class="token punctuation">(</span>confirmMethod <span class="token operator">=</span> <span class="token string">&quot;sayConfrim&quot;</span><span class="token punctuation">,</span> cancelMethod <span class="token operator">=</span> <span class="token string">&quot;sayCancel&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayConfrim</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; confirm hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayCancel</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; cancel hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example (say method in springcloud needs to participate in distributed transactions):</strong></p><ul><li>Spring-cloud service caller FeignClient.</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;helle-service&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Hmily</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/helle-service/sayHello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Spring-cloud provider.</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HelloService</span> helloService <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">AccountController</span><span class="token punctuation">(</span><span class="token class-name">HelloService</span> helloService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>helloService<span class="token operator">=</span> helloService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sayHello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">payment</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> helloService<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>

    <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">HelloService</span>  <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@HmilyTCC</span><span class="token punctuation">(</span>confirmMethod <span class="token operator">=</span> <span class="token string">&quot;sayConfrim&quot;</span><span class="token punctuation">,</span> cancelMethod <span class="token operator">=</span> <span class="token string">&quot;sayCancel&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayConfrim</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; confirm hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayCancel</span><span class="token punctuation">(</span><span class="token class-name">String</span> hello<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; cancel hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>Changes in transaction log storage structure</strong></p><p>Users don&#39;t need to care about using or upgrading, the framework will be initialized by default.</p></li></ul><h2 id="next-version" tabindex="-1"><a class="header-anchor" href="#next-version" aria-hidden="true">#</a> Next version</h2><ul><li>Because of the adjustment of the architecture, it will be easier to support other modes. In the next version, TAC mode (try-auto-cancel) will be released, which will greatly simplify the use of the framework. You need only to care about the development of <code>confirm</code> and <code>cancel</code> methods, and It&#39;s provide better compatibility with the transformation of the old system. Don&#39;t worry about additional development tasks, just leave everything to Hmily!</li><li>It will support Brpc.</li><li>It will support Tars-rpc.</li></ul><h2 id="community" tabindex="-1"><a class="header-anchor" href="#community" aria-hidden="true">#</a> Community</h2><p>We uphold the principle of harmony and happiness. If you have ideas and want to contribute to community, come and join us!</p><ul><li>Github: https://github.com/dromara/hmily</li><li>Gitee: https://gitee.com/dromara/hmily</li><li>QQ group: 162614487</li></ul>`,42),l=[p];function i(c,u){return a(),e("div",null,l)}const k=s(o,[["render",i],["__file","hmily-2.1.1.html.vue"]]);export{k as default};
